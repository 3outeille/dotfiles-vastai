var ME=Object.create;var kn=Object.defineProperty;var xE=Object.getOwnPropertyDescriptor;var LE=Object.getOwnPropertyNames,gl=Object.getOwnPropertySymbols,qE=Object.getPrototypeOf,vl=Object.prototype.hasOwnProperty,kE=Object.prototype.propertyIsEnumerable;var ml=(e,t,r)=>t in e?kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zt=(e,t)=>{for(var r in t||(t={}))vl.call(t,r)&&ml(e,r,t[r]);if(gl)for(var r of gl(t))kE.call(t,r)&&ml(e,r,t[r]);return e};var El=e=>kn(e,"__esModule",{value:!0});var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),jE=(e,t)=>{El(e);for(var r in t)kn(e,r,{get:t[r],enumerable:!0})},HE=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of LE(t))!vl.call(e,n)&&n!=="default"&&kn(e,n,{get:()=>t[n],enumerable:!(r=xE(t,n))||r.enumerable});return e},jn=e=>HE(El(kn(e!=null?ME(qE(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var ne=l((WN,yl)=>{"use strict";var UE=function(){function e(){}return e.info=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.enableDebug&&console.info(e.TAG+t,r)},e.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.disableWarnings||console.warn(e.TAG+t,r)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();yl.exports=UE});var so=l(Tt=>{"use strict";var Nr=Tt&&Tt.__assign||function(){return Nr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Nr.apply(this,arguments)};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.AsyncScopeManager=Tt.OpenTelemetryScopeManagerWrapper=void 0;var Kt=Xt(),BE=require("events"),Tl=function(){function e(){}return e.prototype.active=function(){var t=this,r=Kt.CorrelationContextManager.getCurrentContext();return Nr(Nr({},r),{getValue:function(n){return t._activeSymbol?n===t._activeSymbol?r:!1:(t._activeSymbol=n,r)},setValue:function(){}})},e.prototype.with=function(t,r){var n=t.parentSpanId,i=t.name,a=e._spanToContext(t,n,i);return Kt.CorrelationContextManager.runWithContext(a,r)()},e.prototype.bind=function(t){return typeof t=="function"?Kt.CorrelationContextManager.wrapCallback(t):(t instanceof BE.EventEmitter&&Kt.CorrelationContextManager.wrapEmitter(t),t)},e.prototype.enable=function(){return Kt.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return Kt.CorrelationContextManager.disable(),this},e._spanToContext=function(t,r,n){var i=r?"|"+t.spanContext().traceId+"."+r+".":t.spanContext().traceId,a=Nr(Nr({},t.spanContext()),{traceFlags:t.spanContext().traceFlags}),s=Kt.CorrelationContextManager.spanToContextObject(a,i,n);return s},e}();Tt.OpenTelemetryScopeManagerWrapper=Tl;Tt.AsyncScopeManager=new Tl});var ea=l((S,kl)=>{S=kl.exports=b;var N;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?N=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:N=function(){};S.SEMVER_SPEC_VERSION="2.0.0";var oo=256,Vi=Number.MAX_SAFE_INTEGER||9007199254740991,uo=16,D=S.re=[],h=S.src=[],A=0,Dr=A++;h[Dr]="0|[1-9]\\d*";var wr=A++;h[wr]="[0-9]+";var co=A++;h[co]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var Sl=A++;h[Sl]="("+h[Dr]+")\\.("+h[Dr]+")\\.("+h[Dr]+")";var Al=A++;h[Al]="("+h[wr]+")\\.("+h[wr]+")\\.("+h[wr]+")";var lo=A++;h[lo]="(?:"+h[Dr]+"|"+h[co]+")";var po=A++;h[po]="(?:"+h[wr]+"|"+h[co]+")";var fo=A++;h[fo]="(?:-("+h[lo]+"(?:\\."+h[lo]+")*))";var ho=A++;h[ho]="(?:-?("+h[po]+"(?:\\."+h[po]+")*))";var _o=A++;h[_o]="[0-9A-Za-z-]+";var Un=A++;h[Un]="(?:\\+("+h[_o]+"(?:\\."+h[_o]+")*))";var go=A++,bl="v?"+h[Sl]+h[fo]+"?"+h[Un]+"?";h[go]="^"+bl+"$";var vo="[v=\\s]*"+h[Al]+h[ho]+"?"+h[Un]+"?",mo=A++;h[mo]="^"+vo+"$";var Mr=A++;h[Mr]="((?:<|>)?=?)";var $i=A++;h[$i]=h[wr]+"|x|X|\\*";var zi=A++;h[zi]=h[Dr]+"|x|X|\\*";var Yt=A++;h[Yt]="[v=\\s]*("+h[zi]+")(?:\\.("+h[zi]+")(?:\\.("+h[zi]+")(?:"+h[fo]+")?"+h[Un]+"?)?)?";var xr=A++;h[xr]="[v=\\s]*("+h[$i]+")(?:\\.("+h[$i]+")(?:\\.("+h[$i]+")(?:"+h[ho]+")?"+h[Un]+"?)?)?";var Il=A++;h[Il]="^"+h[Mr]+"\\s*"+h[Yt]+"$";var Cl=A++;h[Cl]="^"+h[Mr]+"\\s*"+h[xr]+"$";var Ol=A++;h[Ol]="(?:^|[^\\d])(\\d{1,"+uo+"})(?:\\.(\\d{1,"+uo+"}))?(?:\\.(\\d{1,"+uo+"}))?(?:$|[^\\d])";var Ki=A++;h[Ki]="(?:~>?)";var Xi=A++;h[Xi]="(\\s*)"+h[Ki]+"\\s+";D[Xi]=new RegExp(h[Xi],"g");var GE="$1~",Pl=A++;h[Pl]="^"+h[Ki]+h[Yt]+"$";var Rl=A++;h[Rl]="^"+h[Ki]+h[xr]+"$";var Yi=A++;h[Yi]="(?:\\^)";var Qi=A++;h[Qi]="(\\s*)"+h[Yi]+"\\s+";D[Qi]=new RegExp(h[Qi],"g");var FE="$1^",Nl=A++;h[Nl]="^"+h[Yi]+h[Yt]+"$";var Dl=A++;h[Dl]="^"+h[Yi]+h[xr]+"$";var Eo=A++;h[Eo]="^"+h[Mr]+"\\s*("+vo+")$|^$";var yo=A++;h[yo]="^"+h[Mr]+"\\s*("+bl+")$|^$";var Bn=A++;h[Bn]="(\\s*)"+h[Mr]+"\\s*("+vo+"|"+h[Yt]+")";D[Bn]=new RegExp(h[Bn],"g");var VE="$1$2$3",wl=A++;h[wl]="^\\s*("+h[Yt]+")\\s+-\\s+("+h[Yt]+")\\s*$";var Ml=A++;h[Ml]="^\\s*("+h[xr]+")\\s+-\\s+("+h[xr]+")\\s*$";var xl=A++;h[xl]="(<|>)?=?\\s*\\*";for(St=0;St<A;St++)N(St,h[St]),D[St]||(D[St]=new RegExp(h[St]));var St;S.parse=Qt;function Qt(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof b)return e;if(typeof e!="string"||e.length>oo)return null;var r=t.loose?D[mo]:D[go];if(!r.test(e))return null;try{return new b(e,t)}catch(n){return null}}S.valid=$E;function $E(e,t){var r=Qt(e,t);return r?r.version:null}S.clean=zE;function zE(e,t){var r=Qt(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}S.SemVer=b;function b(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof b){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>oo)throw new TypeError("version is longer than "+oo+" characters");if(!(this instanceof b))return new b(e,t);N("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?D[mo]:D[go]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Vi||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Vi||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Vi||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Vi)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}b.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};b.prototype.toString=function(){return this.version};b.prototype.compare=function(e){return N("SemVer.compare",this.version,this.options,e),e instanceof b||(e=new b(e,this.options)),this.compareMain(e)||this.comparePre(e)};b.prototype.compareMain=function(e){return e instanceof b||(e=new b(e,this.options)),Lr(this.major,e.major)||Lr(this.minor,e.minor)||Lr(this.patch,e.patch)};b.prototype.comparePre=function(e){if(e instanceof b||(e=new b(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(N("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Lr(r,n)}while(++t)};b.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};S.inc=KE;function KE(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new b(e,r).inc(t,n).version}catch(i){return null}}S.diff=XE;function XE(e,t){if(To(e,t))return null;var r=Qt(e),n=Qt(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var a="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return a}S.compareIdentifiers=Lr;var Ll=/^[0-9]+$/;function Lr(e,t){var r=Ll.test(e),n=Ll.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}S.rcompareIdentifiers=YE;function YE(e,t){return Lr(t,e)}S.major=QE;function QE(e,t){return new b(e,t).major}S.minor=WE;function WE(e,t){return new b(e,t).minor}S.patch=ZE;function ZE(e,t){return new b(e,t).patch}S.compare=at;function at(e,t,r){return new b(e,r).compare(new b(t,r))}S.compareLoose=JE;function JE(e,t){return at(e,t,!0)}S.rcompare=ey;function ey(e,t,r){return at(t,e,r)}S.sort=ty;function ty(e,t){return e.sort(function(r,n){return S.compare(r,n,t)})}S.rsort=ry;function ry(e,t){return e.sort(function(r,n){return S.rcompare(r,n,t)})}S.gt=Gn;function Gn(e,t,r){return at(e,t,r)>0}S.lt=Wi;function Wi(e,t,r){return at(e,t,r)<0}S.eq=To;function To(e,t,r){return at(e,t,r)===0}S.neq=ql;function ql(e,t,r){return at(e,t,r)!==0}S.gte=So;function So(e,t,r){return at(e,t,r)>=0}S.lte=Ao;function Ao(e,t,r){return at(e,t,r)<=0}S.cmp=Zi;function Zi(e,t,r,n){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return To(e,r,n);case"!=":return ql(e,r,n);case">":return Gn(e,r,n);case">=":return So(e,r,n);case"<":return Wi(e,r,n);case"<=":return Ao(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}S.Comparator=Ne;function Ne(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Ne){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof Ne))return new Ne(e,t);N("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Fn?this.value="":this.value=this.operator+this.semver.version,N("comp",this)}var Fn={};Ne.prototype.parse=function(e){var t=this.options.loose?D[Eo]:D[yo],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new b(r[2],this.options.loose):this.semver=Fn};Ne.prototype.toString=function(){return this.value};Ne.prototype.test=function(e){return N("Comparator.test",e,this.options.loose),this.semver===Fn?!0:(typeof e=="string"&&(e=new b(e,this.options)),Zi(e,this.operator,this.semver,this.options))};Ne.prototype.intersects=function(e,t){if(!(e instanceof Ne))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var r;if(this.operator==="")return r=new U(e.value,t),Ji(this.value,r,t);if(e.operator==="")return r=new U(this.value,t),Ji(e.semver,r,t);var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),a=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),o=Zi(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),u=Zi(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||a&&s||o||u};S.Range=U;function U(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof U)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new U(e.raw,t);if(e instanceof Ne)return new U(e.value,t);if(!(this instanceof U))return new U(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}U.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};U.prototype.toString=function(){return this.range};U.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?D[Ml]:D[wl];e=e.replace(r,fy),N("hyphen replace",e),e=e.replace(D[Bn],VE),N("comparator trim",e,D[Bn]),e=e.replace(D[Xi],GE),e=e.replace(D[Qi],FE),e=e.split(/\s+/).join(" ");var n=t?D[Eo]:D[yo],i=e.split(" ").map(function(a){return iy(a,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(a){return!!a.match(n)})),i=i.map(function(a){return new Ne(a,this.options)},this),i};U.prototype.intersects=function(e,t){if(!(e instanceof U))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return e.set.some(function(i){return i.every(function(a){return n.intersects(a,t)})})})})};S.toComparators=ny;function ny(e,t){return new U(e,t).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function iy(e,t){return N("comp",e,t),e=oy(e,t),N("caret",e),e=ay(e,t),N("tildes",e),e=cy(e,t),N("xrange",e),e=py(e,t),N("stars",e),e}function ge(e){return!e||e.toLowerCase()==="x"||e==="*"}function ay(e,t){return e.trim().split(/\s+/).map(function(r){return sy(r,t)}).join(" ")}function sy(e,t){var r=t.loose?D[Rl]:D[Pl];return e.replace(r,function(n,i,a,s,o){N("tilde",e,n,i,a,s,o);var u;return ge(i)?u="":ge(a)?u=">="+i+".0.0 <"+(+i+1)+".0.0":ge(s)?u=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":o?(N("replaceTilde pr",o),u=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+(+a+1)+".0"):u=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0",N("tilde return",u),u})}function oy(e,t){return e.trim().split(/\s+/).map(function(r){return uy(r,t)}).join(" ")}function uy(e,t){N("caret",e,t);var r=t.loose?D[Dl]:D[Nl];return e.replace(r,function(n,i,a,s,o){N("caret",e,n,i,a,s,o);var u;return ge(i)?u="":ge(a)?u=">="+i+".0.0 <"+(+i+1)+".0.0":ge(s)?i==="0"?u=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":u=">="+i+"."+a+".0 <"+(+i+1)+".0.0":o?(N("replaceCaret pr",o),i==="0"?a==="0"?u=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+a+"."+(+s+1):u=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+(+a+1)+".0":u=">="+i+"."+a+"."+s+"-"+o+" <"+(+i+1)+".0.0"):(N("no pr"),i==="0"?a==="0"?u=">="+i+"."+a+"."+s+" <"+i+"."+a+"."+(+s+1):u=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0":u=">="+i+"."+a+"."+s+" <"+(+i+1)+".0.0"),N("caret return",u),u})}function cy(e,t){return N("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return ly(r,t)}).join(" ")}function ly(e,t){e=e.trim();var r=t.loose?D[Cl]:D[Il];return e.replace(r,function(n,i,a,s,o,u){N("xRange",e,n,i,a,s,o,u);var c=ge(a),p=c||ge(s),f=p||ge(o),d=f;return i==="="&&d&&(i=""),c?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(p&&(s=0),o=0,i===">"?(i=">=",p?(a=+a+1,s=0,o=0):(s=+s+1,o=0)):i==="<="&&(i="<",p?a=+a+1:s=+s+1),n=i+a+"."+s+"."+o):p?n=">="+a+".0.0 <"+(+a+1)+".0.0":f&&(n=">="+a+"."+s+".0 <"+a+"."+(+s+1)+".0"),N("xRange return",n),n})}function py(e,t){return N("replaceStars",e,t),e.trim().replace(D[xl],"")}function fy(e,t,r,n,i,a,s,o,u,c,p,f,d){return ge(r)?t="":ge(n)?t=">="+r+".0.0":ge(i)?t=">="+r+"."+n+".0":t=">="+t,ge(u)?o="":ge(c)?o="<"+(+u+1)+".0.0":ge(p)?o="<"+u+"."+(+c+1)+".0":f?o="<="+u+"."+c+"."+p+"-"+f:o="<="+o,(t+" "+o).trim()}U.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new b(e,this.options));for(var t=0;t<this.set.length;t++)if(dy(this.set[t],e,this.options))return!0;return!1};function dy(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if(N(e[n].semver),e[n].semver!==Fn&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}S.satisfies=Ji;function Ji(e,t,r){try{t=new U(t,r)}catch(n){return!1}return t.test(e)}S.maxSatisfying=hy;function hy(e,t,r){var n=null,i=null;try{var a=new U(t,r)}catch(s){return null}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new b(n,r))}),n}S.minSatisfying=_y;function _y(e,t,r){var n=null,i=null;try{var a=new U(t,r)}catch(s){return null}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new b(n,r))}),n}S.minVersion=gy;function gy(e,t){e=new U(e,t);var r=new b("0.0.0");if(e.test(r)||(r=new b("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(a){var s=new b(a.semver.version);switch(a.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||Gn(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+a.operator)}})}return r&&e.test(r)?r:null}S.validRange=vy;function vy(e,t){try{return new U(e,t).range||"*"}catch(r){return null}}S.ltr=my;function my(e,t,r){return bo(e,t,"<",r)}S.gtr=Ey;function Ey(e,t,r){return bo(e,t,">",r)}S.outside=bo;function bo(e,t,r,n){e=new b(e,n),t=new U(t,n);var i,a,s,o,u;switch(r){case">":i=Gn,a=Ao,s=Wi,o=">",u=">=";break;case"<":i=Wi,a=So,s=Gn,o="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ji(e,t,n))return!1;for(var c=0;c<t.set.length;++c){var p=t.set[c],f=null,d=null;if(p.forEach(function(_){_.semver===Fn&&(_=new Ne(">=0.0.0")),f=f||_,d=d||_,i(_.semver,f.semver,n)?f=_:s(_.semver,d.semver,n)&&(d=_)}),f.operator===o||f.operator===u||(!d.operator||d.operator===o)&&a(e,d.semver))return!1;if(d.operator===u&&s(e,d.semver))return!1}return!0}S.prerelease=yy;function yy(e,t){var r=Qt(e,t);return r&&r.prerelease.length?r.prerelease:null}S.intersects=Ty;function Ty(e,t,r){return e=new U(e,r),t=new U(t,r),e.intersects(t)}S.coerce=Sy;function Sy(e){if(e instanceof b)return e;if(typeof e!="string")return null;var t=e.match(D[Ol]);return t==null?null:Qt(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}});var Io=l(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.makePatchingRequire=void 0;var Ay=require("path"),by=ea(),jl=require("module"),Iy=Object.keys(process.binding("natives")),Hl=jl.prototype.require;function Cy(e){var t={};return function(n){var i=Hl.apply(this,arguments);if(e[n]){var a=jl._resolveFilename(n,this);if(t.hasOwnProperty(a))return t[a];var s=void 0;if(Iy.indexOf(n)<0)try{s=Hl.call(this,Ay.join(n,"package.json")).version}catch(d){return i}else s=process.version.substring(1);var o=s.indexOf("-");o>=0&&(s=s.substring(0,o));for(var u=i,c=0,p=e[n];c<p.length;c++){var f=p[c];by.satisfies(s,f.versionSpecifier)&&(u=f.patch(u,a))}return t[a]=u}return i}}ta.makePatchingRequire=Cy});var Ul=l((e0,Oy)=>{Oy.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var X=l(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.channel=qr.makePatchingRequire=void 0;var Py=Io(),Ry=Io();Object.defineProperty(qr,"makePatchingRequire",{enumerable:!0,get:function(){return Ry.makePatchingRequire}});var Bl=function(e){return!0},Ny=function(){function e(){this.version=Ul().version,this.subscribers={},this.contextPreservationFunction=function(t){return t},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(t){var r=this.subscribers[t];return r?r.some(function(n){var i=n.filter;return!i||i(!1)}):!1},e.prototype.publish=function(t,r){if(!this.currentlyPublishing){var n=this.subscribers[t];if(n){var i={timestamp:Date.now(),data:r};this.currentlyPublishing=!0,n.forEach(function(a){var s=a.listener,o=a.filter;try{o&&o(!0)&&s(i)}catch(u){}}),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(t,r,n){n===void 0&&(n=Bl),this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push({listener:r,filter:n})},e.prototype.unsubscribe=function(t,r,n){n===void 0&&(n=Bl);var i=this.subscribers[t];if(i){for(var a=0;a<i.length;++a)if(i[a].listener===r&&i[a].filter===n)return i.splice(a,1),!0}return!1},e.prototype.reset=function(){var t=this;this.subscribers={},this.contextPreservationFunction=function(r){return r},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete t.knownPatches[r]})},e.prototype.bindToContext=function(t){return this.contextPreservationFunction(t)},e.prototype.addContextPreservation=function(t){var r=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return t(r(n))}},e.prototype.registerMonkeyPatch=function(t,r){this.knownPatches[t]||(this.knownPatches[t]=[]),this.knownPatches[t].push(r)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new Ny,Gl=require("module"),Gl.prototype.require=Py.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var Gl;qr.channel=global.diagnosticsSource});var Vl=l(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0})});var $l=l(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.BaggageImpl=void 0;var Dy=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var r=this._entries.get(t);if(!!r)return Object.assign({},r)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var r=t[0],n=t[1];return[r,n]})},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=new e(this._entries),i=0,a=t;i<a.length;i++){var s=a[i];n._entries.delete(s)}return n},e.prototype.clear=function(){return new e},e}();ra.BaggageImpl=Dy});var zl=l(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.baggageEntryMetadataSymbol=void 0;na.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")});var Co=l(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.baggageEntryMetadataFromString=kr.createBaggage=void 0;var wy=w(),My=$l(),xy=zl();function Ly(e){return e===void 0&&(e={}),new My.BaggageImpl(new Map(Object.entries(e)))}kr.createBaggage=Ly;function qy(e){return typeof e!="string"&&(wy.diag.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:xy.baggageEntryMetadataSymbol,toString:function(){return e}}}kr.baggageEntryMetadataFromString=qy});var Xl=l(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0})});var Ql=l(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0})});var Wl=l(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.DiagConsoleLogger=void 0;var Oo=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],ky=function(){function e(){function t(n){return function(){var i=arguments;if(console){var a=console[n];if(typeof a!="function"&&(a=console.log),typeof a=="function")return a.apply(console,i)}}}for(var r=0;r<Oo.length;r++)this[Oo[r].n]=t(Oo[r].c)}return e}();ia.DiagConsoleLogger=ky});var aa=l(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.DiagLogLevel=void 0;var jy;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(jy=Vn.DiagLogLevel||(Vn.DiagLogLevel={}))});var Jl=l(At=>{"use strict";var Hy=At&&At.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Zl=At&&At.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Hy(t,e,r)};Object.defineProperty(At,"__esModule",{value:!0});Zl(Wl(),At);Zl(aa(),At)});var Po=l(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.defaultTextMapSetter=jr.defaultTextMapGetter=void 0;jr.defaultTextMapGetter={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}};jr.defaultTextMapSetter={set:function(e,t,r){e!=null&&(e[t]=r)}}});var tp=l(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0})});var np=l(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0})});var $n=l(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.ROOT_CONTEXT=Hr.createContextKey=void 0;function Uy(e){return Symbol.for(e)}Hr.createContextKey=Uy;var By=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var a=new e(r._currentContext);return a._currentContext.set(n,i),a},r.deleteValue=function(n){var i=new e(r._currentContext);return i._currentContext.delete(n),i}}return e}();Hr.ROOT_CONTEXT=new By});var Ro=l(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.TraceFlags=void 0;var Gy;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(Gy=zn.TraceFlags||(zn.TraceFlags={}))});var Kn=l(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.wrapSpanContext=W.isSpanContextValid=W.isValidSpanId=W.isValidTraceId=W.INVALID_SPAN_CONTEXT=W.INVALID_TRACEID=W.INVALID_SPANID=void 0;var Fy=sa(),Vy=Ro(),$y=/^([0-9a-f]{32})$/i,zy=/^[0-9a-f]{16}$/i;W.INVALID_SPANID="0000000000000000";W.INVALID_TRACEID="00000000000000000000000000000000";W.INVALID_SPAN_CONTEXT={traceId:W.INVALID_TRACEID,spanId:W.INVALID_SPANID,traceFlags:Vy.TraceFlags.NONE};function ip(e){return $y.test(e)&&e!==W.INVALID_TRACEID}W.isValidTraceId=ip;function ap(e){return zy.test(e)&&e!==W.INVALID_SPANID}W.isValidSpanId=ap;function Ky(e){return ip(e.traceId)&&ap(e.spanId)}W.isSpanContextValid=Ky;function Xy(e){return new Fy.NonRecordingSpan(e)}W.wrapSpanContext=Xy});var sa=l(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.NonRecordingSpan=void 0;var Yy=Kn(),Qy=function(){function e(t){t===void 0&&(t=Yy.INVALID_SPAN_CONTEXT),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}();oa.NonRecordingSpan=Qy});var Do=l(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.getSpanContext=De.setSpanContext=De.deleteSpan=De.setSpan=De.getSpan=void 0;var Wy=$n(),Zy=sa(),No=Wy.createContextKey("OpenTelemetry Context Key SPAN");function sp(e){return e.getValue(No)||void 0}De.getSpan=sp;function op(e,t){return e.setValue(No,t)}De.setSpan=op;function Jy(e){return e.deleteValue(No)}De.deleteSpan=Jy;function eT(e,t){return op(e,new Zy.NonRecordingSpan(t))}De.setSpanContext=eT;function tT(e){var t;return(t=sp(e))===null||t===void 0?void 0:t.spanContext()}De.getSpanContext=tT});var Mo=l(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.NoopTracer=void 0;var up=w(),cp=Do(),wo=sa(),rT=Kn(),nT=function(){function e(){}return e.prototype.startSpan=function(t,r,n){var i=Boolean(r==null?void 0:r.root);if(i)return new wo.NonRecordingSpan;var a=n&&cp.getSpanContext(n);return iT(a)&&rT.isSpanContextValid(a)?new wo.NonRecordingSpan(a):new wo.NonRecordingSpan},e.prototype.startActiveSpan=function(t,r,n,i){var a,s,o;if(!(arguments.length<2)){arguments.length===2?o=r:arguments.length===3?(a=r,o=n):(a=r,s=n,o=i);var u=s!=null?s:up.context.active(),c=this.startSpan(t,a,u),p=cp.setSpan(u,c);return up.context.with(p,o,void 0,c)}},e}();ua.NoopTracer=nT;function iT(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}});var xo=l(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.ProxyTracer=void 0;var aT=Mo(),sT=function(){function e(t,r,n){this._provider=t,this.name=r,this.version=n}return e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)},e.prototype.startActiveSpan=function(t,r,n,i){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version);return t?(this._delegate=t,this._delegate):new aT.NoopTracer},e}();ca.ProxyTracer=sT});var lp=l(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.NoopTracerProvider=void 0;var oT=Mo(),uT=function(){function e(){}return e.prototype.getTracer=function(t,r){return new oT.NoopTracer},e}();la.NoopTracerProvider=uT});var Lo=l(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.ProxyTracerProvider=void 0;var cT=xo(),lT=lp(),pT=new lT.NoopTracerProvider,fT=function(){function e(){}return e.prototype.getTracer=function(t,r){var n;return(n=this.getDelegateTracer(t,r))!==null&&n!==void 0?n:new cT.ProxyTracer(this,t,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:pT},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(t,r)},e}();pa.ProxyTracerProvider=fT});var fp=l(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0})});var dp=l(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.SamplingDecision=void 0;var dT;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(dT=Xn.SamplingDecision||(Xn.SamplingDecision={}))});var _p=l(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0})});var gp=l(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.SpanKind=void 0;var hT;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(hT=Yn.SpanKind||(Yn.SpanKind={}))});var mp=l(vp=>{"use strict";Object.defineProperty(vp,"__esModule",{value:!0})});var yp=l(Ep=>{"use strict";Object.defineProperty(Ep,"__esModule",{value:!0})});var Tp=l(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.SpanStatusCode=void 0;var _T;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(_T=Qn.SpanStatusCode||(Qn.SpanStatusCode={}))});var Ap=l(Sp=>{"use strict";Object.defineProperty(Sp,"__esModule",{value:!0})});var Ip=l(bp=>{"use strict";Object.defineProperty(bp,"__esModule",{value:!0})});var Op=l(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0})});var Rp=l(Pp=>{"use strict";Object.defineProperty(Pp,"__esModule",{value:!0})});var Np=l(Ur=>{"use strict";var gT=Ur&&Ur.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.NoopContextManager=void 0;var vT=$n(),mT=function(){function e(){}return e.prototype.active=function(){return vT.ROOT_CONTEXT},e.prototype.with=function(t,r,n){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return r.call.apply(r,gT([n],i))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();Ur.NoopContextManager=mT});var Dp=l(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa._globalThis=void 0;fa._globalThis=typeof globalThis=="object"?globalThis:global});var wp=l(Wt=>{"use strict";var ET=Wt&&Wt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),yT=Wt&&Wt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ET(t,e,r)};Object.defineProperty(Wt,"__esModule",{value:!0});yT(Dp(),Wt)});var Mp=l(Zt=>{"use strict";var TT=Zt&&Zt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ST=Zt&&Zt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&TT(t,e,r)};Object.defineProperty(Zt,"__esModule",{value:!0});ST(wp(),Zt)});var qo=l(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.VERSION=void 0;da.VERSION="1.0.1"});var qp=l(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.isCompatible=Br._makeCompatibilityCheck=void 0;var AT=qo(),xp=/^(\d+)\.(\d+)\.(\d+)(?:-(.*))?$/;function Lp(e){var t=new Set([e]),r=new Set,n=e.match(xp);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3]};function a(o){return r.add(o),!1}function s(o){return t.add(o),!0}return function(u){if(t.has(u))return!0;if(r.has(u))return!1;var c=u.match(xp);if(!c)return a(u);var p={major:+c[1],minor:+c[2],patch:+c[3]};return i.major!==p.major?a(u):i.major===0?i.minor===p.minor&&i.patch<=p.patch?s(u):a(u):i.minor<=p.minor?s(u):a(u)}}Br._makeCompatibilityCheck=Lp;Br.isCompatible=Lp(AT.VERSION)});var Gr=l(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.unregisterGlobal=bt.getGlobal=bt.registerGlobal=void 0;var bT=Mp(),Wn=qo(),IT=qp(),CT=Wn.VERSION.split(".")[0],Zn=Symbol.for("opentelemetry.js.api."+CT),Jn=bT._globalThis;function OT(e,t,r,n){var i;n===void 0&&(n=!1);var a=Jn[Zn]=(i=Jn[Zn])!==null&&i!==void 0?i:{version:Wn.VERSION};if(!n&&a[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(s.stack||s.message),!1}if(a.version!==Wn.VERSION){var s=new Error("@opentelemetry/api: All API registration versions must match");return r.error(s.stack||s.message),!1}return a[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+Wn.VERSION+"."),!0}bt.registerGlobal=OT;function PT(e){var t,r,n=(t=Jn[Zn])===null||t===void 0?void 0:t.version;if(!(!n||!IT.isCompatible(n)))return(r=Jn[Zn])===null||r===void 0?void 0:r[e]}bt.getGlobal=PT;function RT(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Wn.VERSION+".");var r=Jn[Zn];r&&delete r[e]}bt.unregisterGlobal=RT});var kp=l(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.DiagComponentLogger=void 0;var NT=Gr(),DT=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return ei("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return ei("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return ei("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return ei("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return ei("verbose",this._namespace,t)},e}();ha.DiagComponentLogger=DT;function ei(e,t,r){var n=NT.getGlobal("diag");if(!!n)return r.unshift(t),n[e].apply(n,r)}});var jp=l(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.createLogLevelDiagLogger=void 0;var st=aa();function wT(e,t){e<st.DiagLogLevel.NONE?e=st.DiagLogLevel.NONE:e>st.DiagLogLevel.ALL&&(e=st.DiagLogLevel.ALL),t=t||{};function r(n,i){var a=t[n];return typeof a=="function"&&e>=i?a.bind(t):function(){}}return{error:r("error",st.DiagLogLevel.ERROR),warn:r("warn",st.DiagLogLevel.WARN),info:r("info",st.DiagLogLevel.INFO),debug:r("debug",st.DiagLogLevel.DEBUG),verbose:r("verbose",st.DiagLogLevel.VERBOSE)}}_a.createLogLevelDiagLogger=wT});var ti=l(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.DiagAPI=void 0;var MT=kp(),xT=jp(),LT=aa(),ga=Gr(),qT="diag",kT=function(){function e(){function t(n){return function(){var i=ga.getGlobal("diag");if(!!i)return i[n].apply(i,arguments)}}var r=this;r.setLogger=function(n,i){var a,s;if(i===void 0&&(i=LT.DiagLogLevel.INFO),n===r){var o=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((a=o.stack)!==null&&a!==void 0?a:o.message),!1}var u=ga.getGlobal("diag"),c=xT.createLogLevelDiagLogger(i,n);if(u){var p=(s=new Error().stack)!==null&&s!==void 0?s:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+p),c.warn("Current logger will overwrite one already registered from "+p)}return ga.registerGlobal("diag",c,r,!0)},r.disable=function(){ga.unregisterGlobal(qT,r)},r.createComponentLogger=function(n){return new MT.DiagComponentLogger(n)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();va.DiagAPI=kT});var Up=l(Fr=>{"use strict";var jT=Fr&&Fr.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.ContextAPI=void 0;var HT=Np(),ko=Gr(),Hp=ti(),jo="context",UT=new HT.NoopContextManager,BT=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return ko.registerGlobal(jo,t,Hp.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,n){for(var i,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,jT([t,r,n],a))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return ko.getGlobal(jo)||UT},e.prototype.disable=function(){this._getContextManager().disable(),ko.unregisterGlobal(jo,Hp.DiagAPI.instance())},e}();Fr.ContextAPI=BT});var Vp=l(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.TraceAPI=void 0;var Ho=Gr(),Bp=Lo(),Gp=Kn(),ri=Do(),Fp=ti(),Uo="trace",GT=function(){function e(){this._proxyTracerProvider=new Bp.ProxyTracerProvider,this.wrapSpanContext=Gp.wrapSpanContext,this.isSpanContextValid=Gp.isSpanContextValid,this.deleteSpan=ri.deleteSpan,this.getSpan=ri.getSpan,this.getSpanContext=ri.getSpanContext,this.setSpan=ri.setSpan,this.setSpanContext=ri.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){return this._proxyTracerProvider.setDelegate(t),Ho.registerGlobal(Uo,this._proxyTracerProvider,Fp.DiagAPI.instance())},e.prototype.getTracerProvider=function(){return Ho.getGlobal(Uo)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){Ho.unregisterGlobal(Uo,Fp.DiagAPI.instance()),this._proxyTracerProvider=new Bp.ProxyTracerProvider},e}();ma.TraceAPI=GT});var $p=l(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.NoopTextMapPropagator=void 0;var FT=function(){function e(){}return e.prototype.inject=function(t,r){},e.prototype.extract=function(t,r){return t},e.prototype.fields=function(){return[]},e}();Ea.NoopTextMapPropagator=FT});var zp=l(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.deleteBaggage=It.setBaggage=It.getBaggage=void 0;var VT=$n(),Bo=VT.createContextKey("OpenTelemetry Baggage Key");function $T(e){return e.getValue(Bo)||void 0}It.getBaggage=$T;function zT(e,t){return e.setValue(Bo,t)}It.setBaggage=zT;function KT(e){return e.deleteValue(Bo)}It.deleteBaggage=KT});var Yp=l(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.PropagationAPI=void 0;var Go=Gr(),XT=$p(),Kp=Po(),Fo=zp(),YT=Co(),Xp=ti(),Vo="propagation",QT=new XT.NoopTextMapPropagator,WT=function(){function e(){this.createBaggage=YT.createBaggage,this.getBaggage=Fo.getBaggage,this.setBaggage=Fo.setBaggage,this.deleteBaggage=Fo.deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return Go.registerGlobal(Vo,t,Xp.DiagAPI.instance())},e.prototype.inject=function(t,r,n){return n===void 0&&(n=Kp.defaultTextMapSetter),this._getGlobalPropagator().inject(t,r,n)},e.prototype.extract=function(t,r,n){return n===void 0&&(n=Kp.defaultTextMapGetter),this._getGlobalPropagator().extract(t,r,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){Go.unregisterGlobal(Vo,Xp.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return Go.getGlobal(Vo)||QT},e}();ya.PropagationAPI=WT});var w=l(m=>{"use strict";var ZT=m&&m.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),F=m&&m.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ZT(t,e,r)};Object.defineProperty(m,"__esModule",{value:!0});m.diag=m.propagation=m.trace=m.context=m.isValidSpanId=m.isValidTraceId=m.isSpanContextValid=m.INVALID_SPAN_CONTEXT=m.INVALID_TRACEID=m.INVALID_SPANID=m.baggageEntryMetadataFromString=void 0;F(Vl(),m);var JT=Co();Object.defineProperty(m,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return JT.baggageEntryMetadataFromString}});F(Xl(),m);F(Ql(),m);F(Jl(),m);F(Po(),m);F(tp(),m);F(np(),m);F(xo(),m);F(Lo(),m);F(fp(),m);F(dp(),m);F(_p(),m);F(gp(),m);F(mp(),m);F(yp(),m);F(Tp(),m);F(Ro(),m);F(Ap(),m);F(Ip(),m);F(Op(),m);var Vr=Kn();Object.defineProperty(m,"INVALID_SPANID",{enumerable:!0,get:function(){return Vr.INVALID_SPANID}});Object.defineProperty(m,"INVALID_TRACEID",{enumerable:!0,get:function(){return Vr.INVALID_TRACEID}});Object.defineProperty(m,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return Vr.INVALID_SPAN_CONTEXT}});Object.defineProperty(m,"isSpanContextValid",{enumerable:!0,get:function(){return Vr.isSpanContextValid}});Object.defineProperty(m,"isValidTraceId",{enumerable:!0,get:function(){return Vr.isValidTraceId}});Object.defineProperty(m,"isValidSpanId",{enumerable:!0,get:function(){return Vr.isValidSpanId}});F($n(),m);F(Rp(),m);var eS=Up();m.context=eS.ContextAPI.getInstance();var tS=Vp();m.trace=tS.TraceAPI.getInstance();var rS=Yp();m.propagation=rS.PropagationAPI.getInstance();var nS=ti();m.diag=nS.DiagAPI.instance();m.default={trace:m.trace,context:m.context,propagation:m.propagation,diag:m.diag}});var Ta=l(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.isTracingSuppressed=Ct.unsuppressTracing=Ct.suppressTracing=void 0;var iS=w(),$o=iS.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function aS(e){return e.setValue($o,!0)}Ct.suppressTracing=aS;function sS(e){return e.deleteValue($o)}Ct.unsuppressTracing=sS;function oS(e){return e.getValue($o)===!0}Ct.isTracingSuppressed=oS});var zo=l(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.BAGGAGE_MAX_TOTAL_LENGTH=pe.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=pe.BAGGAGE_MAX_NAME_VALUE_PAIRS=pe.BAGGAGE_HEADER=pe.BAGGAGE_ITEMS_SEPARATOR=pe.BAGGAGE_PROPERTIES_SEPARATOR=pe.BAGGAGE_KEY_PAIR_SEPARATOR=void 0;pe.BAGGAGE_KEY_PAIR_SEPARATOR="=";pe.BAGGAGE_PROPERTIES_SEPARATOR=";";pe.BAGGAGE_ITEMS_SEPARATOR=",";pe.BAGGAGE_HEADER="baggage";pe.BAGGAGE_MAX_NAME_VALUE_PAIRS=180;pe.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096;pe.BAGGAGE_MAX_TOTAL_LENGTH=8192});var Ko=l(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.parseKeyPairsIntoRecord=Ue.parsePairKeyValue=Ue.getKeyPairs=Ue.serializeKeyPairs=void 0;var uS=w(),$r=zo(),cS=e=>e.reduce((t,r)=>{let n=`${t}${t!==""?$r.BAGGAGE_ITEMS_SEPARATOR:""}${r}`;return n.length>$r.BAGGAGE_MAX_TOTAL_LENGTH?t:n},"");Ue.serializeKeyPairs=cS;var lS=e=>e.getAllEntries().map(([t,r])=>`${encodeURIComponent(t)}=${encodeURIComponent(r.value)}`);Ue.getKeyPairs=lS;var pS=e=>{let t=e.split($r.BAGGAGE_PROPERTIES_SEPARATOR);if(t.length<=0)return;let r=t.shift();if(!r)return;let n=r.split($r.BAGGAGE_KEY_PAIR_SEPARATOR);if(n.length!==2)return;let i=decodeURIComponent(n[0].trim()),a=decodeURIComponent(n[1].trim()),s;return t.length>0&&(s=uS.baggageEntryMetadataFromString(t.join($r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:i,value:a,metadata:s}};Ue.parsePairKeyValue=pS;var fS=e=>typeof e!="string"||e.length===0?{}:e.split($r.BAGGAGE_ITEMS_SEPARATOR).map(t=>Ue.parsePairKeyValue(t)).filter(t=>t!==void 0&&t.value.length>0).reduce((t,r)=>(t[r.key]=r.value,t),{});Ue.parseKeyPairsIntoRecord=fS});var Wp=l(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.HttpBaggagePropagator=void 0;var Xo=w(),dS=Ta(),zr=zo(),Yo=Ko(),Qp=class{inject(t,r,n){let i=Xo.propagation.getBaggage(t);if(!i||dS.isTracingSuppressed(t))return;let a=Yo.getKeyPairs(i).filter(o=>o.length<=zr.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,zr.BAGGAGE_MAX_NAME_VALUE_PAIRS),s=Yo.serializeKeyPairs(a);s.length>0&&n.set(r,zr.BAGGAGE_HEADER,s)}extract(t,r,n){let i=n.get(r,zr.BAGGAGE_HEADER);if(!i)return t;let a={};return i.length===0||(i.split(zr.BAGGAGE_ITEMS_SEPARATOR).forEach(o=>{let u=Yo.parsePairKeyValue(o);if(u){let c={value:u.value};u.metadata&&(c.metadata=u.metadata),a[u.key]=c}}),Object.entries(a).length===0)?t:Xo.propagation.setBaggage(t,Xo.propagation.createBaggage(a))}fields(){return[zr.BAGGAGE_HEADER]}};Sa.HttpBaggagePropagator=Qp});var ef=l(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.isAttributeValue=Kr.sanitizeAttributes=void 0;function hS(e){let t={};if(e==null||typeof e!="object")return t;for(let[r,n]of Object.entries(e))Zp(n)&&(Array.isArray(n)?t[r]=n.slice():t[r]=n);return t}Kr.sanitizeAttributes=hS;function Zp(e){return e==null?!0:Array.isArray(e)?_S(e):Jp(e)}Kr.isAttributeValue=Zp;function _S(e){let t;for(let r of e)if(r!=null){if(!t){if(Jp(r)){t=typeof r;continue}return!1}if(typeof r!==t)return!1}return!0}function Jp(e){switch(typeof e){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}});var Qo=l(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.loggingErrorHandler=void 0;var gS=w();function vS(){return e=>{gS.diag.error(mS(e))}}Aa.loggingErrorHandler=vS;function mS(e){return typeof e=="string"?e:JSON.stringify(ES(e))}function ES(e){let t={},r=e;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n=>{if(t[n])return;let i=r[n];i&&(t[n]=String(i))}),r=Object.getPrototypeOf(r);return t}});var Wo=l(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.globalErrorHandler=Xr.setGlobalErrorHandler=void 0;var yS=Qo(),tf=yS.loggingErrorHandler();function TS(e){tf=e}Xr.setGlobalErrorHandler=TS;var SS=e=>{try{tf(e)}catch(t){}};Xr.globalErrorHandler=SS});var Zo=l(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.TracesSamplerValues=void 0;var AS;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(AS=ni.TracesSamplerValues||(ni.TracesSamplerValues={}))});var Jo=l(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.parseEnvironment=Jt.DEFAULT_ENVIRONMENT=void 0;var Ot=w(),bS=Zo(),IS=",",CS=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function OS(e){return CS.indexOf(e)>-1}var PS=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function RS(e){return PS.indexOf(e)>-1}Jt.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Ot.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:bS.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function NS(e,t,r,n=-1/0,i=1/0){if(typeof r[e]!="undefined"){let a=Number(r[e]);isNaN(a)||(a<n?t[e]=n:a>i?t[e]=i:t[e]=a)}}function DS(e,t,r,n=IS){let i=r[e];typeof i=="string"&&(t[e]=i.split(n).map(a=>a.trim()))}var wS={ALL:Ot.DiagLogLevel.ALL,VERBOSE:Ot.DiagLogLevel.VERBOSE,DEBUG:Ot.DiagLogLevel.DEBUG,INFO:Ot.DiagLogLevel.INFO,WARN:Ot.DiagLogLevel.WARN,ERROR:Ot.DiagLogLevel.ERROR,NONE:Ot.DiagLogLevel.NONE};function MS(e,t,r){let n=r[e];if(typeof n=="string"){let i=wS[n.toUpperCase()];i!=null&&(t[e]=i)}}function xS(e){let t={};for(let r in Jt.DEFAULT_ENVIRONMENT){let n=r;switch(n){case"OTEL_LOG_LEVEL":MS(n,t,e);break;default:if(OS(n))NS(n,t,e);else if(RS(n))DS(n,t,e);else{let i=e[n];typeof i!="undefined"&&i!==null&&(t[n]=String(i))}}}return t}Jt.parseEnvironment=xS});var nf=l(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.getEnv=void 0;var LS=require("os"),rf=Jo();function qS(){let e=rf.parseEnvironment(process.env);return Object.assign({HOSTNAME:LS.hostname()},rf.DEFAULT_ENVIRONMENT,e)}ba.getEnv=qS});var af=l(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.hexToBase64=void 0;function kS(e){let t=e.length,r="";for(let n=0;n<t;n+=2){let i=e.substring(n,n+2),a=parseInt(i,16);r+=String.fromCharCode(a)}return Buffer.from(r,"ascii").toString("base64")}Ia.hexToBase64=kS});var cf=l(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.RandomIdGenerator=void 0;var jS=8,sf=16,of=class{constructor(){this.generateTraceId=uf(sf),this.generateSpanId=uf(jS)}};Oa.RandomIdGenerator=of;var Ca=Buffer.allocUnsafe(sf);function uf(e){return function(){for(let r=0;r<e/4;r++)Ca.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<e&&!(Ca[r]>0);r++)r===e-1&&(Ca[e-1]=1);return Ca.toString("hex",0,e)}}});var lf=l(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.otperformance=void 0;var HS=require("perf_hooks");Pa.otperformance=HS.performance});var Na=l(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.VERSION=void 0;Ra.VERSION="0.23.0"});var pf=l(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.RpcGrpcStatusCodeValues=I.MessagingOperationValues=I.MessagingDestinationKindValues=I.HttpFlavorValues=I.NetTransportValues=I.FaasInvokedProviderValues=I.FaasDocumentOperationValues=I.FaasTriggerValues=I.DbCassandraConsistencyLevelValues=I.DbSystemValues=I.SemanticAttributes=void 0;I.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var US;(function(e){e.OTHER_SQL="other_sql",e.MSSQL="mssql",e.MYSQL="mysql",e.ORACLE="oracle",e.DB2="db2",e.POSTGRESQL="postgresql",e.REDSHIFT="redshift",e.HIVE="hive",e.CLOUDSCAPE="cloudscape",e.HSQLDB="hsqldb",e.PROGRESS="progress",e.MAXDB="maxdb",e.HANADB="hanadb",e.INGRES="ingres",e.FIRSTSQL="firstsql",e.EDB="edb",e.CACHE="cache",e.ADABAS="adabas",e.FIREBIRD="firebird",e.DERBY="derby",e.FILEMAKER="filemaker",e.INFORMIX="informix",e.INSTANTDB="instantdb",e.INTERBASE="interbase",e.MARIADB="mariadb",e.NETEZZA="netezza",e.PERVASIVE="pervasive",e.POINTBASE="pointbase",e.SQLITE="sqlite",e.SYBASE="sybase",e.TERADATA="teradata",e.VERTICA="vertica",e.H2="h2",e.COLDFUSION="coldfusion",e.CASSANDRA="cassandra",e.HBASE="hbase",e.MONGODB="mongodb",e.REDIS="redis",e.COUCHBASE="couchbase",e.COUCHDB="couchdb",e.COSMOSDB="cosmosdb",e.DYNAMODB="dynamodb",e.NEO4J="neo4j",e.GEODE="geode",e.ELASTICSEARCH="elasticsearch",e.MEMCACHED="memcached",e.COCKROACHDB="cockroachdb"})(US=I.DbSystemValues||(I.DbSystemValues={}));var BS;(function(e){e.ALL="all",e.EACH_QUORUM="each_quorum",e.QUORUM="quorum",e.LOCAL_QUORUM="local_quorum",e.ONE="one",e.TWO="two",e.THREE="three",e.LOCAL_ONE="local_one",e.ANY="any",e.SERIAL="serial",e.LOCAL_SERIAL="local_serial"})(BS=I.DbCassandraConsistencyLevelValues||(I.DbCassandraConsistencyLevelValues={}));var GS;(function(e){e.DATASOURCE="datasource",e.HTTP="http",e.PUBSUB="pubsub",e.TIMER="timer",e.OTHER="other"})(GS=I.FaasTriggerValues||(I.FaasTriggerValues={}));var FS;(function(e){e.INSERT="insert",e.EDIT="edit",e.DELETE="delete"})(FS=I.FaasDocumentOperationValues||(I.FaasDocumentOperationValues={}));var VS;(function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"})(VS=I.FaasInvokedProviderValues||(I.FaasInvokedProviderValues={}));var $S;(function(e){e.IP_TCP="ip_tcp",e.IP_UDP="ip_udp",e.IP="ip",e.UNIX="unix",e.PIPE="pipe",e.INPROC="inproc",e.OTHER="other"})($S=I.NetTransportValues||(I.NetTransportValues={}));var zS;(function(e){e.HTTP_1_0="1.0",e.HTTP_1_1="1.1",e.HTTP_2_0="2.0",e.SPDY="SPDY",e.QUIC="QUIC"})(zS=I.HttpFlavorValues||(I.HttpFlavorValues={}));var KS;(function(e){e.QUEUE="queue",e.TOPIC="topic"})(KS=I.MessagingDestinationKindValues||(I.MessagingDestinationKindValues={}));var XS;(function(e){e.RECEIVE="receive",e.PROCESS="process"})(XS=I.MessagingOperationValues||(I.MessagingOperationValues={}));var YS;(function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(YS=I.RpcGrpcStatusCodeValues||(I.RpcGrpcStatusCodeValues={}))});var ff=l(er=>{"use strict";var QS=er&&er.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),WS=er&&er.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&QS(t,e,r)};Object.defineProperty(er,"__esModule",{value:!0});WS(pf(),er)});var df=l(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.TelemetrySdkLanguageValues=V.OsTypeValues=V.HostArchValues=V.AwsEcsLaunchtypeValues=V.CloudPlatformValues=V.CloudProviderValues=V.ResourceAttributes=void 0;V.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var ZS;(function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"})(ZS=V.CloudProviderValues||(V.CloudProviderValues={}));var JS;(function(e){e.AWS_EC2="aws_ec2",e.AWS_ECS="aws_ecs",e.AWS_EKS="aws_eks",e.AWS_LAMBDA="aws_lambda",e.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",e.AZURE_VM="azure_vm",e.AZURE_CONTAINER_INSTANCES="azure_container_instances",e.AZURE_AKS="azure_aks",e.AZURE_FUNCTIONS="azure_functions",e.AZURE_APP_SERVICE="azure_app_service",e.GCP_COMPUTE_ENGINE="gcp_compute_engine",e.GCP_CLOUD_RUN="gcp_cloud_run",e.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",e.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",e.GCP_APP_ENGINE="gcp_app_engine"})(JS=V.CloudPlatformValues||(V.CloudPlatformValues={}));var eA;(function(e){e.EC2="ec2",e.FARGATE="fargate"})(eA=V.AwsEcsLaunchtypeValues||(V.AwsEcsLaunchtypeValues={}));var tA;(function(e){e.AMD64="amd64",e.ARM32="arm32",e.ARM64="arm64",e.IA64="ia64",e.PPC32="ppc32",e.PPC64="ppc64",e.X86="x86"})(tA=V.HostArchValues||(V.HostArchValues={}));var rA;(function(e){e.WINDOWS="windows",e.LINUX="linux",e.DARWIN="darwin",e.FREEBSD="freebsd",e.NETBSD="netbsd",e.OPENBSD="openbsd",e.DRAGONFLYBSD="dragonflybsd",e.HPUX="hpux",e.AIX="aix",e.SOLARIS="solaris",e.Z_OS="z_os"})(rA=V.OsTypeValues||(V.OsTypeValues={}));var nA;(function(e){e.CPP="cpp",e.DOTNET="dotnet",e.ERLANG="erlang",e.GO="go",e.JAVA="java",e.NODEJS="nodejs",e.PHP="php",e.PYTHON="python",e.RUBY="ruby",e.WEBJS="webjs"})(nA=V.TelemetrySdkLanguageValues||(V.TelemetrySdkLanguageValues={}))});var hf=l(tr=>{"use strict";var iA=tr&&tr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),aA=tr&&tr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&iA(t,e,r)};Object.defineProperty(tr,"__esModule",{value:!0});aA(df(),tr)});var Yr=l(Pt=>{"use strict";var sA=Pt&&Pt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),_f=Pt&&Pt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&sA(t,e,r)};Object.defineProperty(Pt,"__esModule",{value:!0});_f(ff(),Pt);_f(hf(),Pt)});var gf=l(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.SDK_INFO=void 0;var oA=Na(),ii=Yr();Da.SDK_INFO={[ii.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[ii.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[ii.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:ii.TelemetrySdkLanguageValues.NODEJS,[ii.ResourceAttributes.TELEMETRY_SDK_VERSION]:oA.VERSION}});var vf=l(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.unrefTimer=void 0;function uA(e){e.unref()}wa.unrefTimer=uA});var mf=l(we=>{"use strict";var cA=we&&we.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Qr=we&&we.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&cA(t,e,r)};Object.defineProperty(we,"__esModule",{value:!0});Qr(nf(),we);Qr(af(),we);Qr(cf(),we);Qr(lf(),we);Qr(gf(),we);Qr(vf(),we)});var eu=l(rr=>{"use strict";var lA=rr&&rr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),pA=rr&&rr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&lA(t,e,r)};Object.defineProperty(rr,"__esModule",{value:!0});pA(mf(),rr)});var Tf=l(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.isTimeInput=Z.isTimeInputHrTime=Z.hrTimeToMicroseconds=Z.hrTimeToMilliseconds=Z.hrTimeToNanoseconds=Z.hrTimeToTimeStamp=Z.hrTimeDuration=Z.timeInputToHrTime=Z.hrTime=void 0;var tu=eu(),ru=9,ai=Math.pow(10,ru);function Ma(e){let t=e/1e3,r=Math.trunc(t),n=Number((t-r).toFixed(ru))*ai;return[r,n]}function Ef(){let e=tu.otperformance.timeOrigin;if(typeof e!="number"){let t=tu.otperformance;e=t.timing&&t.timing.fetchStart}return e}function yf(e){let t=Ma(Ef()),r=Ma(typeof e=="number"?e:tu.otperformance.now()),n=t[0]+r[0],i=t[1]+r[1];return i>ai&&(i-=ai,n+=1),[n,i]}Z.hrTime=yf;function fA(e){if(nu(e))return e;if(typeof e=="number")return e<Ef()?yf(e):Ma(e);if(e instanceof Date)return Ma(e.getTime());throw TypeError("Invalid input type")}Z.timeInputToHrTime=fA;function dA(e,t){let r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=ai),[r,n]}Z.hrTimeDuration=dA;function hA(e){let t=ru,r=`${"0".repeat(t)}${e[1]}Z`,n=r.substr(r.length-t-1);return new Date(e[0]*1e3).toISOString().replace("000Z",n)}Z.hrTimeToTimeStamp=hA;function _A(e){return e[0]*ai+e[1]}Z.hrTimeToNanoseconds=_A;function gA(e){return Math.round(e[0]*1e3+e[1]/1e6)}Z.hrTimeToMilliseconds=gA;function vA(e){return Math.round(e[0]*1e6+e[1]/1e3)}Z.hrTimeToMicroseconds=vA;function nu(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}Z.isTimeInputHrTime=nu;function mA(e){return nu(e)||typeof e=="number"||e instanceof Date}Z.isTimeInput=mA});var Af=l(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0})});var bf=l(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.ExportResultCode=void 0;var EA;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(EA=si.ExportResultCode||(si.ExportResultCode={}))});var Of=l(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.CompositePropagator=void 0;var If=w(),Cf=class{constructor(t={}){var r;this._propagators=(r=t.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(n=>typeof n.fields=="function"?n.fields():[]).reduce((n,i)=>n.concat(i),[])))}inject(t,r,n){for(let i of this._propagators)try{i.inject(t,r,n)}catch(a){If.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${a.message}`)}}extract(t,r,n){return this._propagators.reduce((i,a)=>{try{return a.extract(i,r,n)}catch(s){If.diag.warn(`Failed to inject with ${a.constructor.name}. Err: ${s.message}`)}return i},t)}fields(){return this._fields.slice()}};xa.CompositePropagator=Cf});var Pf=l(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.validateValue=Wr.validateKey=void 0;var iu="[_0-9a-z-*/]",yA=`[a-z]${iu}{0,255}`,TA=`[a-z0-9]${iu}{0,240}@[a-z]${iu}{0,13}`,SA=new RegExp(`^(?:${yA}|${TA})$`),AA=/^[ -~]{0,255}[!-~]$/,bA=/,|=/;function IA(e){return SA.test(e)}Wr.validateKey=IA;function CA(e){return AA.test(e)&&!bA.test(e)}Wr.validateValue=CA});var au=l(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.TraceState=void 0;var Rf=Pf(),Nf=32,OA=512,Df=",",wf="=",La=class{constructor(t){this._internalState=new Map,t&&this._parse(t)}set(t,r){let n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n}unset(t){let r=this._clone();return r._internalState.delete(t),r}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,r)=>(t.push(r+wf+this.get(r)),t),[]).join(Df)}_parse(t){t.length>OA||(this._internalState=t.split(Df).reverse().reduce((r,n)=>{let i=n.trim(),a=i.indexOf(wf);if(a!==-1){let s=i.slice(0,a),o=i.slice(a+1,n.length);Rf.validateKey(s)&&Rf.validateValue(o)&&r.set(s,o)}return r},new Map),this._internalState.size>Nf&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Nf))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let t=new La;return t._internalState=new Map(this._internalState),t}};qa.TraceState=La});var Lf=l(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.HttpTraceContextPropagator=fe.parseTraceParent=fe.TRACE_STATE_HEADER=fe.TRACE_PARENT_HEADER=void 0;var ka=w(),PA=Ta(),RA=au();fe.TRACE_PARENT_HEADER="traceparent";fe.TRACE_STATE_HEADER="tracestate";var NA="00",DA="(?!ff)[\\da-f]{2}",wA="(?![0]{32})[\\da-f]{32}",MA="(?![0]{16})[\\da-f]{16}",xA="[\\da-f]{2}",LA=new RegExp(`^\\s?(${DA})-(${wA})-(${MA})-(${xA})(-.*)?\\s?$`);function Mf(e){let t=LA.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}fe.parseTraceParent=Mf;var xf=class{inject(t,r,n){let i=ka.trace.getSpanContext(t);if(!i||PA.isTracingSuppressed(t)||!ka.isSpanContextValid(i))return;let a=`${NA}-${i.traceId}-${i.spanId}-0${Number(i.traceFlags||ka.TraceFlags.NONE).toString(16)}`;n.set(r,fe.TRACE_PARENT_HEADER,a),i.traceState&&n.set(r,fe.TRACE_STATE_HEADER,i.traceState.serialize())}extract(t,r,n){let i=n.get(r,fe.TRACE_PARENT_HEADER);if(!i)return t;let a=Array.isArray(i)?i[0]:i;if(typeof a!="string")return t;let s=Mf(a);if(!s)return t;s.isRemote=!0;let o=n.get(r,fe.TRACE_STATE_HEADER);if(o){let u=Array.isArray(o)?o.join(","):o;s.traceState=new RA.TraceState(typeof u=="string"?u:void 0)}return ka.trace.setSpanContext(t,s)}fields(){return[fe.TRACE_PARENT_HEADER,fe.TRACE_STATE_HEADER]}};fe.HttpTraceContextPropagator=xf});var kf=l(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0})});var jf=l(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.getRPCMetadata=Be.deleteRPCMetadata=Be.setRPCMetadata=Be.RPCType=void 0;var qA=w(),su=qA.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),kA;(function(e){e.HTTP="http"})(kA=Be.RPCType||(Be.RPCType={}));function jA(e,t){return e.setValue(su,t)}Be.setRPCMetadata=jA;function HA(e){return e.deleteValue(su)}Be.deleteRPCMetadata=HA;function UA(e){return e.getValue(su)}Be.getRPCMetadata=UA});var ou=l(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.AlwaysOffSampler=void 0;var BA=w(),Hf=class{shouldSample(){return{decision:BA.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};ja.AlwaysOffSampler=Hf});var uu=l(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.AlwaysOnSampler=void 0;var GA=w(),Uf=class{shouldSample(){return{decision:GA.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};Ha.AlwaysOnSampler=Uf});var Ff=l(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.ParentBasedSampler=void 0;var Ua=w(),FA=Wo(),Bf=ou(),cu=uu(),Gf=class{constructor(t){var r,n,i,a;this._root=t.root,this._root||(FA.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new cu.AlwaysOnSampler),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new cu.AlwaysOnSampler,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new Bf.AlwaysOffSampler,this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new cu.AlwaysOnSampler,this._localParentNotSampled=(a=t.localParentNotSampled)!==null&&a!==void 0?a:new Bf.AlwaysOffSampler}shouldSample(t,r,n,i,a,s){let o=Ua.trace.getSpanContext(t);return!o||!Ua.isSpanContextValid(o)?this._root.shouldSample(t,r,n,i,a,s):o.isRemote?o.traceFlags&Ua.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,i,a,s):this._remoteParentNotSampled.shouldSample(t,r,n,i,a,s):o.traceFlags&Ua.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(t,r,n,i,a,s):this._localParentNotSampled.shouldSample(t,r,n,i,a,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};Ba.ParentBasedSampler=Gf});var $f=l(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.TraceIdRatioBasedSampler=void 0;var lu=w(),Vf=class{constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(t,r){return{decision:lu.isValidTraceId(r)&&this._accumulate(r)<this._upperBound?lu.SamplingDecision.RECORD_AND_SAMPLED:lu.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let r=0;for(let n=0;n<t.length/8;n++){let i=n*8,a=parseInt(t.slice(i,i+8),16);r=(r^a)>>>0}return r}};Ga.TraceIdRatioBasedSampler=Vf});var Kf=l(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.isUrlIgnored=Zr.urlMatches=void 0;function zf(e,t){return typeof t=="string"?e===t:t.test(e)}Zr.urlMatches=zf;function VA(e,t){if(!t)return!1;for(let r of t)if(zf(e,r))return!0;return!1}Zr.isUrlIgnored=VA});var Xf=l(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.isWrapped=void 0;function $A(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}Fa.isWrapped=$A});var Me=l(C=>{"use strict";var zA=C&&C.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),k=C&&C.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&zA(t,e,r)};Object.defineProperty(C,"__esModule",{value:!0});C.baggageUtils=void 0;k(Wp(),C);k(ef(),C);k(Wo(),C);k(Qo(),C);k(Tf(),C);k(Af(),C);k(bf(),C);k(Na(),C);C.baggageUtils=Ko();k(eu(),C);k(Of(),C);k(Lf(),C);k(kf(),C);k(jf(),C);k(ou(),C);k(uu(),C);k(Ff(),C);k($f(),C);k(Ta(),C);k(au(),C);k(Jo(),C);k(Zo(),C);k(Kf(),C);k(Xf(),C);k(Na(),C)});var Yf=l(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.ExceptionEventName=void 0;Va.ExceptionEventName="exception"});var pu=l($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.Span=void 0;var Rt=w(),Ke=Me(),nr=Yr(),KA=Yf(),Qf=class{constructor(t,r,n,i,a,s,o=[],u=Ke.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:Rt.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=s,this.kind=a,this.links=o,this.startTime=Ke.timeInputToHrTime(u),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}spanContext(){return this._spanContext}setAttribute(t,r){return r==null||this._isSpanEnded()?this:t.length===0?(Rt.diag.warn(`Invalid attribute key: ${t}`),this):Ke.isAttributeValue(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?this:(this.attributes[t]=r,this):(Rt.diag.warn(`Invalid attribute value set for key: ${t}`),this)}setAttributes(t){for(let[r,n]of Object.entries(t))this.setAttribute(r,n);return this}addEvent(t,r,n){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(Rt.diag.warn("Dropping extra events."),this.events.shift()),Ke.isTimeInput(r)&&(typeof n=="undefined"&&(n=r),r=void 0),typeof n=="undefined"&&(n=Ke.hrTime()),this.events.push({name:t,attributes:r,time:Ke.timeInputToHrTime(n)}),this)}setStatus(t){return this._isSpanEnded()?this:(this.status=t,this)}updateName(t){return this._isSpanEnded()?this:(this.name=t,this)}end(t=Ke.hrTime()){if(this._isSpanEnded()){Rt.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=Ke.timeInputToHrTime(t),this._duration=Ke.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&Rt.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(t,r=Ke.hrTime()){let n={};typeof t=="string"?n[nr.SemanticAttributes.EXCEPTION_MESSAGE]=t:t&&(t.code?n[nr.SemanticAttributes.EXCEPTION_TYPE]=t.code.toString():t.name&&(n[nr.SemanticAttributes.EXCEPTION_TYPE]=t.name),t.message&&(n[nr.SemanticAttributes.EXCEPTION_MESSAGE]=t.message),t.stack&&(n[nr.SemanticAttributes.EXCEPTION_STACKTRACE]=t.stack)),n[nr.SemanticAttributes.EXCEPTION_TYPE]||n[nr.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(KA.ExceptionEventName,n,r):Rt.diag.warn(`Failed to record an exception ${t}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&Rt.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};$a.Span=Qf});var fu=l(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.buildSamplerFromEnv=en.DEFAULT_CONFIG=void 0;var za=w(),$=Me(),XA=$.getEnv(),YA=$.TracesSamplerValues.AlwaysOn;en.DEFAULT_CONFIG={sampler:Wf(XA),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:$.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:$.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:$.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function Wf(e=$.getEnv()){switch(e.OTEL_TRACES_SAMPLER){case $.TracesSamplerValues.AlwaysOn:return new $.AlwaysOnSampler;case $.TracesSamplerValues.AlwaysOff:return new $.AlwaysOffSampler;case $.TracesSamplerValues.ParentBasedAlwaysOn:return new $.ParentBasedSampler({root:new $.AlwaysOnSampler});case $.TracesSamplerValues.ParentBasedAlwaysOff:return new $.ParentBasedSampler({root:new $.AlwaysOffSampler});case $.TracesSamplerValues.TraceIdRatio:return new $.TraceIdRatioBasedSampler(Zf(e));case $.TracesSamplerValues.ParentBasedTraceIdRatio:return new $.ParentBasedSampler({root:new $.TraceIdRatioBasedSampler(Zf(e))});default:return za.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${YA}".`),new $.AlwaysOnSampler}}en.buildSamplerFromEnv=Wf;var Jr=1;function Zf(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return za.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${Jr}.`),Jr;let t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(za.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${Jr}.`),Jr):t<0||t>1?(za.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${Jr}.`),Jr):t}});var Jf=l(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});Ka.mergeConfig=void 0;var du=fu();function QA(e){let t={sampler:du.buildSamplerFromEnv()},r=Object.assign({},du.DEFAULT_CONFIG,t,e);return r.spanLimits=Object.assign({},du.DEFAULT_CONFIG.spanLimits,e.spanLimits||{}),r}Ka.mergeConfig=QA});var td=l(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.Tracer=void 0;var ie=w(),hu=Me(),WA=pu(),ZA=Jf(),ed=class{constructor(t,r,n){this._tracerProvider=n;let i=ZA.mergeConfig(r);this._sampler=i.sampler,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new hu.RandomIdGenerator,this.resource=n.resource,this.instrumentationLibrary=t}startSpan(t,r={},n=ie.context.active()){var i,a;if(hu.isTracingSuppressed(n))return ie.diag.debug("Instrumentation suppressed, returning Noop Span"),ie.trace.wrapSpanContext(ie.INVALID_SPAN_CONTEXT);let s=JA(r,n),o=this._idGenerator.generateSpanId(),u,c,p;!s||!ie.trace.isSpanContextValid(s)?u=this._idGenerator.generateTraceId():(u=s.traceId,c=s.traceState,p=s.spanId);let f=(i=r.kind)!==null&&i!==void 0?i:ie.SpanKind.INTERNAL,d=(a=r.links)!==null&&a!==void 0?a:[],_=hu.sanitizeAttributes(r.attributes),g=this._sampler.shouldSample(r.root?ie.trace.setSpanContext(n,ie.INVALID_SPAN_CONTEXT):n,u,t,f,_,d),y=g.decision===ie.SamplingDecision.RECORD_AND_SAMPLED?ie.TraceFlags.SAMPLED:ie.TraceFlags.NONE,R={traceId:u,spanId:o,traceFlags:y,traceState:c};if(g.decision===ie.SamplingDecision.NOT_RECORD)return ie.diag.debug("Recording is off, propagating context in a non-recording span"),ie.trace.wrapSpanContext(R);let K=new WA.Span(this,n,t,R,f,p,d,r.startTime);return K.setAttributes(Object.assign(_,g.attributes)),K}startActiveSpan(t,r,n,i){let a,s,o;if(arguments.length<2)return;arguments.length===2?o=r:arguments.length===3?(a=r,o=n):(a=r,s=n,o=i);let u=s!=null?s:ie.context.active(),c=this.startSpan(t,a,u),p=ie.trace.setSpan(u,c);return ie.context.with(p,o,void 0,c)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};Xa.Tracer=ed;function JA(e,t){if(!e.root)return ie.trace.getSpanContext(t)}});var rd=l(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.defaultServiceName=void 0;function eb(){return`unknown_service:${process.argv0}`}Ya.defaultServiceName=eb});var id=l(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.detectResources=void 0;var nd=gu(),_u=w(),tb=require("util"),rb=async(e={})=>{let t=Object.assign(e),r=await Promise.all((t.detectors||[]).map(async n=>{try{let i=await n.detect(t);return _u.diag.debug(`${n.constructor.name} found resource.`,i),i}catch(i){return _u.diag.debug(`${n.constructor.name} failed: ${i.message}`),nd.Resource.empty()}}));return nb(r),r.reduce((n,i)=>n.merge(i),nd.Resource.empty())};Qa.detectResources=rb;var nb=e=>{e.forEach(t=>{if(Object.keys(t.attributes).length>0){let r=tb.inspect(t.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});_u.diag.verbose(r)}})}});var sd=l(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.envDetector=void 0;var ib=w(),ab=Me(),sb=Yr(),ob=Za(),ad=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(t){let r={},n=ab.getEnv(),i=n.OTEL_RESOURCE_ATTRIBUTES,a=n.OTEL_SERVICE_NAME;if(i)try{let s=this._parseResourceAttributes(i);Object.assign(r,s)}catch(s){ib.diag.debug(`EnvDetector failed: ${s.message}`)}return a&&(r[sb.ResourceAttributes.SERVICE_NAME]=a),new ob.Resource(r)}_parseResourceAttributes(t){if(!t)return{};let r={},n=t.split(this._COMMA_SEPARATOR,-1);for(let i of n){let a=i.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(a.length!==2)continue;let[s,o]=a;if(s=s.trim(),o=o.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(s))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(o))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);r[s]=o}return r}_isValid(t){return t.length<=this._MAX_LENGTH&&this._isPrintableString(t)}_isPrintableString(t){for(let r=0;r<t.length;r++){let n=t.charAt(r);if(n<=" "||n>="~")return!1}return!0}_isValidAndNotEmpty(t){return t.length>0&&this._isValid(t)}};Wa.envDetector=new ad});var cd=l(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.processDetector=void 0;var ub=w(),Nt=Yr(),od=Za(),ud=class{async detect(t){let r={[Nt.ResourceAttributes.PROCESS_PID]:process.pid,[Nt.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[Nt.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[Nt.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(r,t)}_getResourceAttributes(t,r){return t[Nt.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||t[Nt.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||t[Nt.ResourceAttributes.PROCESS_COMMAND]===""||t[Nt.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(ub.diag.debug("ProcessDetector failed: Unable to find required process resources. "),od.Resource.empty()):new od.Resource(Object.assign({},t))}};Ja.processDetector=new ud});var pd=l(Dt=>{"use strict";var cb=Dt&&Dt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ld=Dt&&Dt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&cb(t,e,r)};Object.defineProperty(Dt,"__esModule",{value:!0});ld(sd(),Dt);ld(cd(),Dt)});var fd=l(ot=>{"use strict";var lb=ot&&ot.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),vu=ot&&ot.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&lb(t,e,r)};Object.defineProperty(ot,"__esModule",{value:!0});vu(rd(),ot);vu(id(),ot);vu(pd(),ot)});var mu=l(ir=>{"use strict";var pb=ir&&ir.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),fb=ir&&ir.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&pb(t,e,r)};Object.defineProperty(ir,"__esModule",{value:!0});fb(fd(),ir)});var gu=l(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.Resource=void 0;var ar=Yr(),Eu=Me(),db=mu(),wt=class{constructor(t){this.attributes=t}static empty(){return wt.EMPTY}static default(){return new wt({[ar.ResourceAttributes.SERVICE_NAME]:db.defaultServiceName(),[ar.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:Eu.SDK_INFO[ar.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[ar.ResourceAttributes.TELEMETRY_SDK_NAME]:Eu.SDK_INFO[ar.ResourceAttributes.TELEMETRY_SDK_NAME],[ar.ResourceAttributes.TELEMETRY_SDK_VERSION]:Eu.SDK_INFO[ar.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(t){if(!t||!Object.keys(t.attributes).length)return this;let r=Object.assign({},this.attributes,t.attributes);return new wt(r)}};es.Resource=wt;wt.EMPTY=new wt({})});var hd=l(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0})});var gd=l(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0})});var Za=l(Xe=>{"use strict";var hb=Xe&&Xe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ts=Xe&&Xe.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&hb(t,e,r)};Object.defineProperty(Xe,"__esModule",{value:!0});ts(gu(),Xe);ts(mu(),Xe);ts(hd(),Xe);ts(gd(),Xe)});var md=l(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.MultiSpanProcessor=void 0;var _b=Me(),vd=class{constructor(t){this._spanProcessors=t}forceFlush(){let t=[];for(let r of this._spanProcessors)t.push(r.forceFlush());return new Promise(r=>{Promise.all(t).then(()=>{r()}).catch(n=>{_b.globalErrorHandler(n||new Error("MultiSpanProcessor: forceFlush failed")),r()})})}onStart(t,r){for(let n of this._spanProcessors)n.onStart(t,r)}onEnd(t){for(let r of this._spanProcessors)r.onEnd(t)}shutdown(){let t=[];for(let r of this._spanProcessors)t.push(r.shutdown());return new Promise((r,n)=>{Promise.all(t).then(()=>{r()},n)})}};rs.MultiSpanProcessor=vd});var yu=l(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.NoopSpanProcessor=void 0;var Ed=class{onStart(t,r){}onEnd(t){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};ns.NoopSpanProcessor=Ed});var Xd=l((pi,nn)=>{var gb=200,yd="__lodash_hash_undefined__",vb=800,mb=16,Td=9007199254740991,Sd="[object Arguments]",Eb="[object Array]",yb="[object AsyncFunction]",Tb="[object Boolean]",Sb="[object Date]",Ab="[object Error]",Ad="[object Function]",bb="[object GeneratorFunction]",Ib="[object Map]",Cb="[object Number]",Ob="[object Null]",bd="[object Object]",Pb="[object Proxy]",Rb="[object RegExp]",Nb="[object Set]",Db="[object String]",wb="[object Undefined]",Mb="[object WeakMap]",xb="[object ArrayBuffer]",Lb="[object DataView]",qb="[object Float32Array]",kb="[object Float64Array]",jb="[object Int8Array]",Hb="[object Int16Array]",Ub="[object Int32Array]",Bb="[object Uint8Array]",Gb="[object Uint8ClampedArray]",Fb="[object Uint16Array]",Vb="[object Uint32Array]",$b=/[\\^$.*+?()[\]{}|]/g,zb=/^\[object .+?Constructor\]$/,Kb=/^(?:0|[1-9]\d*)$/,L={};L[qb]=L[kb]=L[jb]=L[Hb]=L[Ub]=L[Bb]=L[Gb]=L[Fb]=L[Vb]=!0;L[Sd]=L[Eb]=L[xb]=L[Tb]=L[Lb]=L[Sb]=L[Ab]=L[Ad]=L[Ib]=L[Cb]=L[bd]=L[Rb]=L[Nb]=L[Db]=L[Mb]=!1;var Id=typeof global=="object"&&global&&global.Object===Object&&global,Xb=typeof self=="object"&&self&&self.Object===Object&&self,oi=Id||Xb||Function("return this")(),Cd=typeof pi=="object"&&pi&&!pi.nodeType&&pi,ui=Cd&&typeof nn=="object"&&nn&&!nn.nodeType&&nn,Od=ui&&ui.exports===Cd,Tu=Od&&Id.process,Pd=function(){try{var e=ui&&ui.require&&ui.require("util").types;return e||Tu&&Tu.binding&&Tu.binding("util")}catch(t){}}(),Rd=Pd&&Pd.isTypedArray;function Yb(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Qb(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Wb(e){return function(t){return e(t)}}function Zb(e,t){return e==null?void 0:e[t]}function Jb(e,t){return function(r){return e(t(r))}}var eI=Array.prototype,tI=Function.prototype,is=Object.prototype,Su=oi["__core-js_shared__"],as=tI.toString,ut=is.hasOwnProperty,Nd=function(){var e=/[^.]+$/.exec(Su&&Su.keys&&Su.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Dd=is.toString,rI=as.call(Object),nI=RegExp("^"+as.call(ut).replace($b,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ss=Od?oi.Buffer:void 0,wd=oi.Symbol,Md=oi.Uint8Array,xd=ss?ss.allocUnsafe:void 0,Ld=Jb(Object.getPrototypeOf,Object),qd=Object.create,iI=is.propertyIsEnumerable,aI=eI.splice,sr=wd?wd.toStringTag:void 0,os=function(){try{var e=Iu(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),sI=ss?ss.isBuffer:void 0,kd=Math.max,oI=Date.now,jd=Iu(oi,"Map"),ci=Iu(Object,"create"),uI=function(){function e(){}return function(t){if(!ur(t))return{};if(qd)return qd(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function or(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function cI(){this.__data__=ci?ci(null):{},this.size=0}function lI(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function pI(e){var t=this.__data__;if(ci){var r=t[e];return r===yd?void 0:r}return ut.call(t,e)?t[e]:void 0}function fI(e){var t=this.__data__;return ci?t[e]!==void 0:ut.call(t,e)}function dI(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ci&&t===void 0?yd:t,this}or.prototype.clear=cI;or.prototype.delete=lI;or.prototype.get=pI;or.prototype.has=fI;or.prototype.set=dI;function ct(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function hI(){this.__data__=[],this.size=0}function _I(e){var t=this.__data__,r=us(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():aI.call(t,r,1),--this.size,!0}function gI(e){var t=this.__data__,r=us(t,e);return r<0?void 0:t[r][1]}function vI(e){return us(this.__data__,e)>-1}function mI(e,t){var r=this.__data__,n=us(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}ct.prototype.clear=hI;ct.prototype.delete=_I;ct.prototype.get=gI;ct.prototype.has=vI;ct.prototype.set=mI;function tn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function EI(){this.size=0,this.__data__={hash:new or,map:new(jd||ct),string:new or}}function yI(e){var t=ls(this,e).delete(e);return this.size-=t?1:0,t}function TI(e){return ls(this,e).get(e)}function SI(e){return ls(this,e).has(e)}function AI(e,t){var r=ls(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}tn.prototype.clear=EI;tn.prototype.delete=yI;tn.prototype.get=TI;tn.prototype.has=SI;tn.prototype.set=AI;function rn(e){var t=this.__data__=new ct(e);this.size=t.size}function bI(){this.__data__=new ct,this.size=0}function II(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function CI(e){return this.__data__.get(e)}function OI(e){return this.__data__.has(e)}function PI(e,t){var r=this.__data__;if(r instanceof ct){var n=r.__data__;if(!jd||n.length<gb-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new tn(n)}return r.set(e,t),this.size=r.size,this}rn.prototype.clear=bI;rn.prototype.delete=II;rn.prototype.get=CI;rn.prototype.has=OI;rn.prototype.set=PI;function RI(e,t){var r=Pu(e),n=!r&&Ou(e),i=!r&&!n&&Fd(e),a=!r&&!n&&!i&&$d(e),s=r||n||i||a,o=s?Qb(e.length,String):[],u=o.length;for(var c in e)(t||ut.call(e,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Bd(c,u)))&&o.push(c);return o}function Au(e,t,r){(r!==void 0&&!ps(e[t],r)||r===void 0&&!(t in e))&&bu(e,t,r)}function NI(e,t,r){var n=e[t];(!(ut.call(e,t)&&ps(n,r))||r===void 0&&!(t in e))&&bu(e,t,r)}function us(e,t){for(var r=e.length;r--;)if(ps(e[r][0],t))return r;return-1}function bu(e,t,r){t=="__proto__"&&os?os(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var DI=VI();function cs(e){return e==null?e===void 0?wb:Ob:sr&&sr in Object(e)?$I(e):WI(e)}function Hd(e){return li(e)&&cs(e)==Sd}function wI(e){if(!ur(e)||YI(e))return!1;var t=Nu(e)?nI:zb;return t.test(tC(e))}function MI(e){return li(e)&&Vd(e.length)&&!!L[cs(e)]}function xI(e){if(!ur(e))return QI(e);var t=Gd(e),r=[];for(var n in e)n=="constructor"&&(t||!ut.call(e,n))||r.push(n);return r}function Ud(e,t,r,n,i){e!==t&&DI(t,function(a,s){if(i||(i=new rn),ur(a))LI(e,t,s,r,Ud,n,i);else{var o=n?n(Cu(e,s),a,s+"",e,t,i):void 0;o===void 0&&(o=a),Au(e,s,o)}},zd)}function LI(e,t,r,n,i,a,s){var o=Cu(e,r),u=Cu(t,r),c=s.get(u);if(c){Au(e,r,c);return}var p=a?a(o,u,r+"",e,t,s):void 0,f=p===void 0;if(f){var d=Pu(u),_=!d&&Fd(u),g=!d&&!_&&$d(u);p=u,d||_||g?Pu(o)?p=o:rC(o)?p=BI(o):_?(f=!1,p=jI(u,!0)):g?(f=!1,p=UI(u,!0)):p=[]:nC(u)||Ou(u)?(p=o,Ou(o)?p=iC(o):(!ur(o)||Nu(o))&&(p=zI(u))):f=!1}f&&(s.set(u,p),i(p,u,n,a,s),s.delete(u)),Au(e,r,p)}function qI(e,t){return JI(ZI(e,t,Kd),e+"")}var kI=os?function(e,t){return os(e,"toString",{configurable:!0,enumerable:!1,value:sC(t),writable:!0})}:Kd;function jI(e,t){if(t)return e.slice();var r=e.length,n=xd?xd(r):new e.constructor(r);return e.copy(n),n}function HI(e){var t=new e.constructor(e.byteLength);return new Md(t).set(new Md(e)),t}function UI(e,t){var r=t?HI(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function BI(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function GI(e,t,r,n){var i=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var o=t[a],u=n?n(r[o],e[o],o,r,e):void 0;u===void 0&&(u=e[o]),i?bu(r,o,u):NI(r,o,u)}return r}function FI(e){return qI(function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(i--,a):void 0,s&&KI(r[0],r[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var o=r[n];o&&e(t,o,n,a)}return t})}function VI(e){return function(t,r,n){for(var i=-1,a=Object(t),s=n(t),o=s.length;o--;){var u=s[e?o:++i];if(r(a[u],u,a)===!1)break}return t}}function ls(e,t){var r=e.__data__;return XI(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Iu(e,t){var r=Zb(e,t);return wI(r)?r:void 0}function $I(e){var t=ut.call(e,sr),r=e[sr];try{e[sr]=void 0;var n=!0}catch(a){}var i=Dd.call(e);return n&&(t?e[sr]=r:delete e[sr]),i}function zI(e){return typeof e.constructor=="function"&&!Gd(e)?uI(Ld(e)):{}}function Bd(e,t){var r=typeof e;return t=t==null?Td:t,!!t&&(r=="number"||r!="symbol"&&Kb.test(e))&&e>-1&&e%1==0&&e<t}function KI(e,t,r){if(!ur(r))return!1;var n=typeof t;return(n=="number"?Ru(r)&&Bd(t,r.length):n=="string"&&t in r)?ps(r[t],e):!1}function XI(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function YI(e){return!!Nd&&Nd in e}function Gd(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||is;return e===r}function QI(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}function WI(e){return Dd.call(e)}function ZI(e,t,r){return t=kd(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=kd(n.length-t,0),s=Array(a);++i<a;)s[i]=n[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=n[i];return o[t]=r(s),Yb(e,this,o)}}function Cu(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var JI=eC(kI);function eC(e){var t=0,r=0;return function(){var n=oI(),i=mb-(n-r);if(r=n,i>0){if(++t>=vb)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function tC(e){if(e!=null){try{return as.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function ps(e,t){return e===t||e!==e&&t!==t}var Ou=Hd(function(){return arguments}())?Hd:function(e){return li(e)&&ut.call(e,"callee")&&!iI.call(e,"callee")},Pu=Array.isArray;function Ru(e){return e!=null&&Vd(e.length)&&!Nu(e)}function rC(e){return li(e)&&Ru(e)}var Fd=sI||oC;function Nu(e){if(!ur(e))return!1;var t=cs(e);return t==Ad||t==bb||t==yb||t==Pb}function Vd(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Td}function ur(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function li(e){return e!=null&&typeof e=="object"}function nC(e){if(!li(e)||cs(e)!=bd)return!1;var t=Ld(e);if(t===null)return!0;var r=ut.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&as.call(r)==rI}var $d=Rd?Wb(Rd):MI;function iC(e){return GI(e,zd(e))}function zd(e){return Ru(e)?RI(e,!0):xI(e)}var aC=FI(function(e,t,r){Ud(e,t,r)});function sC(e){return function(){return e}}function Kd(e){return e}function oC(){return!1}nn.exports=aC});var Wd=l(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.BatchSpanProcessorBase=void 0;var Yd=w(),fi=Me(),Qd=class{constructor(t,r){this._exporter=t,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let n=fi.getEnv();this._maxExportBatchSize=typeof(r==null?void 0:r.maxExportBatchSize)=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(r==null?void 0:r.maxQueueSize)=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(r==null?void 0:r.scheduledDelayMillis)=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(r==null?void 0:r.exportTimeoutMillis)=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(t){}onEnd(t){this._isShutdown||this._addToBuffer(t)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((t,r)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(t).catch(n=>{r(n)})}),this._shuttingDownPromise)}_addToBuffer(t){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(t),this._maybeStartTimer())}_flushAll(){return new Promise((t,r)=>{let n=[],i=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let a=0,s=i;a<s;a++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{t()}).catch(r)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((t,r)=>{let n=setTimeout(()=>{r(new Error("Timeout"))},this._exportTimeoutMillis);Yd.context.with(fi.suppressTracing(Yd.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),i=>{var a;clearTimeout(n),i.code===fi.ExportResultCode.SUCCESS?t():r((a=i.error)!==null&&a!==void 0?a:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(t=>{fi.globalErrorHandler(t)})},this._scheduledDelayMillis),fi.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};fs.BatchSpanProcessorBase=Qd});var Jd=l(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.BatchSpanProcessor=void 0;var uC=Wd(),Zd=class extends uC.BatchSpanProcessorBase{onShutdown(){}};ds.BatchSpanProcessor=Zd});var eh=l(cr=>{"use strict";var cC=cr&&cr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),lC=cr&&cr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&cC(t,e,r)};Object.defineProperty(cr,"__esModule",{value:!0});lC(Jd(),cr)});var Du=l(lr=>{"use strict";var pC=lr&&lr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),fC=lr&&lr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&pC(t,e,r)};Object.defineProperty(lr,"__esModule",{value:!0});fC(eh(),lr)});var rh=l(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.BasicTracerProvider=fr.ForceFlushState=void 0;var an=w(),di=Me(),th=Za(),dC=wu(),hC=fu(),_C=md(),gC=yu(),vC=Xd(),mC=Du(),sn;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(sn=fr.ForceFlushState||(fr.ForceFlushState={}));var pr=class{constructor(t={}){var r;this._registeredSpanProcessors=[],this._tracers=new Map;let n=vC({},hC.DEFAULT_CONFIG,t);this.resource=(r=n.resource)!==null&&r!==void 0?r:th.Resource.empty(),this.resource=th.Resource.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});let i=this._buildExporterFromEnv();if(i!==void 0){let a=new mC.BatchSpanProcessor(i);this.activeSpanProcessor=a}else this.activeSpanProcessor=new gC.NoopSpanProcessor}getTracer(t,r){let n=`${t}@${r||""}`;return this._tracers.has(n)||this._tracers.set(n,new dC.Tracer({name:t,version:r},this._config,this)),this._tracers.get(n)}addSpanProcessor(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(r=>an.diag.error("Error while trying to shutdown current span processor",r)),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new _C.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(t={}){an.trace.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&an.context.setGlobalContextManager(t.contextManager),t.propagator&&an.propagation.setGlobalPropagator(t.propagator)}forceFlush(){let t=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(n=>new Promise(i=>{let a,s=setTimeout(()=>{i(new Error(`Span processor did not completed within timeout period of ${t} ms`)),a=sn.timeout},t);n.forceFlush().then(()=>{clearTimeout(s),a!==sn.timeout&&(a=sn.resolved,i(a))}).catch(o=>{clearTimeout(s),a=sn.error,i(o)})}));return new Promise((n,i)=>{Promise.all(r).then(a=>{let s=a.filter(o=>o!==sn.resolved);s.length>0?i(s):n()}).catch(a=>i([a]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(t){var r;return(r=pr._registeredPropagators.get(t))===null||r===void 0?void 0:r()}_getSpanExporter(t){var r;return(r=pr._registeredExporters.get(t))===null||r===void 0?void 0:r()}_buildPropagatorFromEnv(){let t=Array.from(new Set(di.getEnv().OTEL_PROPAGATORS)),n=t.map(i=>{let a=this._getPropagator(i);return a||an.diag.warn(`Propagator "${i}" requested through environment variable is unavailable.`),a}).reduce((i,a)=>(a&&i.push(a),i),[]);if(n.length!==0)return t.length===1?n[0]:new di.CompositePropagator({propagators:n})}_buildExporterFromEnv(){let t=di.getEnv().OTEL_TRACES_EXPORTER;if(t==="none")return;let r=this._getSpanExporter(t);return r||an.diag.error(`Exporter "${t}" requested through environment variable is unavailable.`),r}};fr.BasicTracerProvider=pr;pr._registeredPropagators=new Map([["tracecontext",()=>new di.HttpTraceContextPropagator],["baggage",()=>new di.HttpBaggagePropagator]]);pr._registeredExporters=new Map});var ih=l(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.ConsoleSpanExporter=void 0;var Mu=Me(),nh=class{export(t,r){return this._sendSpans(t,r)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(t){return{traceId:t.spanContext().traceId,parentId:t.parentSpanId,name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:Mu.hrTimeToMicroseconds(t.startTime),duration:Mu.hrTimeToMicroseconds(t.duration),attributes:t.attributes,status:t.status,events:t.events}}_sendSpans(t,r){for(let n of t)console.log(this._exportInfo(n));if(r)return r({code:Mu.ExportResultCode.SUCCESS})}};hs.ConsoleSpanExporter=nh});var oh=l(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.InMemorySpanExporter=void 0;var ah=Me(),sh=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(t,r){if(this._stopped)return r({code:ah.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...t),setTimeout(()=>r({code:ah.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};_s.InMemorySpanExporter=sh});var ch=l(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0})});var fh=l(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.SimpleSpanProcessor=void 0;var lh=w(),xu=Me(),ph=class{constructor(t){this._exporter=t,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(t){}onEnd(t){this._isShutdown||lh.context.with(xu.suppressTracing(lh.context.active()),()=>{this._exporter.export([t],r=>{var n;r.code!==xu.ExportResultCode.SUCCESS&&xu.globalErrorHandler((n=r.error)!==null&&n!==void 0?n:new Error(`SimpleSpanProcessor: span export failed (status ${r})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((t,r)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(t).catch(n=>{r(n)})}),this._shuttingDownPromise)}};gs.SimpleSpanProcessor=ph});var hh=l(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0})});var gh=l(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0})});var mh=l(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0})});var yh=l(Eh=>{"use strict";Object.defineProperty(Eh,"__esModule",{value:!0})});var wu=l(te=>{"use strict";var EC=te&&te.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),be=te&&te.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&EC(t,e,r)};Object.defineProperty(te,"__esModule",{value:!0});be(td(),te);be(rh(),te);be(Du(),te);be(ih(),te);be(oh(),te);be(ch(),te);be(fh(),te);be(hh(),te);be(yu(),te);be(pu(),te);be(gh(),te);be(mh(),te);be(yh(),te)});var Ah=l(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.enable=Ye.azureCoreTracing=Ye.AzureMonitorSymbol=void 0;var Th=X();Ye.AzureMonitorSymbol="Azure_Monitor_Tracer";var Sh=!1,yC=function(e){if(Sh)return e;try{var t=wu(),r=w(),n=new t.BasicTracerProvider,i=n.getTracer("applicationinsights tracer"),a=e.setTracer;e.setTracer=function(s){var o=s.startSpan;s.startSpan=function(u,c,p){var f=o.call(this,u,c,p),d=f.end;return f.end=function(){var _=d.apply(this,arguments);return Th.channel.publish("azure-coretracing",f),_},f},s[Ye.AzureMonitorSymbol]=!0,a.call(this,s)},r.trace.getSpan(r.context.active()),e.setTracer(i),Sh=!0}catch(s){}return e};Ye.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:yC};function TC(){Th.channel.registerMonkeyPatch("@azure/core-tracing",Ye.azureCoreTracing)}Ye.enable=TC});var Ih=l(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.enable=dr.bunyan=void 0;var bh=X(),SC=function(e){var t=e.prototype._emit;return e.prototype._emit=function(r,n){var i=t.apply(this,arguments);if(!n){var a=i;a||(a=t.call(this,r,!0)),bh.channel.publish("bunyan",{level:r.level,result:a})}return i},e};dr.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:SC};function AC(){bh.channel.registerMonkeyPatch("bunyan",dr.bunyan)}dr.enable=AC});var Oh=l(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.enable=hr.console=void 0;var Lu=X(),Ch=require("stream"),bC=function(e){var t=new Ch.Writable,r=new Ch.Writable;t.write=function(c){if(!c)return!0;var p=c.toString();return Lu.channel.publish("console",{message:p}),!0},r.write=function(c){if(!c)return!0;var p=c.toString();return Lu.channel.publish("console",{message:p,stderr:!0}),!0};for(var n=new e.Console(t,r),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],a=function(c){var p=e[c];p&&(e[c]=function(){if(n[c])try{n[c].apply(n,arguments)}catch(f){}return p.apply(e,arguments)})},s=0,o=i;s<o.length;s++){var u=o[s];a(u)}return e};hr.console={versionSpecifier:">= 4.0.0",patch:bC};function IC(){Lu.channel.registerMonkeyPatch("console",hr.console),require("console")}hr.enable=IC});var Ph=l(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.enable=_r.mongoCore=void 0;var qu=X(),CC=function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var n=t.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var o=typeof arguments[1]=="function"?1:2;return typeof arguments[o]=="function"&&(arguments[o]=qu.channel.bindToContext(arguments[o])),i.apply(this,arguments)};var a=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=qu.channel.bindToContext(arguments[1])),a.apply(this,arguments)},n},e};_r.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:CC};function OC(){qu.channel.registerMonkeyPatch("mongodb-core",_r.mongoCore)}_r.enable=OC});var Rh=l(ve=>{"use strict";var on=ve&&ve.__assign||function(){return on=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},on.apply(this,arguments)};Object.defineProperty(ve,"__esModule",{value:!0});ve.enable=ve.mongo330=ve.mongo3=ve.mongo2=void 0;var de=X(),PC=function(e){var t=e.instrument({operationIdGenerator:{next:function(){return de.channel.bindToContext(function(n){return n()})}}}),r={};return t.on("started",function(n){r[n.requestId]||(r[n.requestId]=on(on({},n),{time:new Date}))}),t.on("succeeded",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return de.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}):de.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}),t.on("failed",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return de.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}):de.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}),e},RC=function(e){var t=e.instrument(),r={},n={};return t.on("started",function(i){r[i.requestId]||(n[i.requestId]=de.channel.bindToContext(function(a){return a()}),r[i.requestId]=on(on({},i),{time:new Date}))}),t.on("succeeded",function(i){var a=r[i.requestId];a&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return de.channel.publish("mongodb",{startedData:a,event:i,succeeded:!0})}),delete n[i.requestId])}),t.on("failed",function(i){var a=r[i.requestId];a&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return de.channel.publish("mongodb",{startedData:a,event:i,succeeded:!1})}),delete n[i.requestId])}),e},NC=function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var n=t.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var o=typeof arguments[1]=="function"?1:2;return typeof arguments[o]=="function"&&(arguments[o]=de.channel.bindToContext(arguments[o])),i.apply(this,arguments)};var a=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=de.channel.bindToContext(arguments[1])),a.apply(this,arguments)},n},e},DC=function(e){NC(e);var t=e.instrument(),r={},n={};return t.on("started",function(i){r[i.requestId]||(n[i.requestId]=de.channel.bindToContext(function(a){return a()}),r[i.requestId]=i)}),t.on("succeeded",function(i){var a=r[i.requestId];a&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return de.channel.publish("mongodb",{startedData:a,event:i,succeeded:!0})}),delete n[i.requestId])}),t.on("failed",function(i){var a=r[i.requestId];a&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return de.channel.publish("mongodb",{startedData:a,event:i,succeeded:!1})}),delete n[i.requestId])}),e};ve.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:PC};ve.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:RC};ve.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:DC};function wC(){de.channel.registerMonkeyPatch("mongodb",ve.mongo2),de.channel.registerMonkeyPatch("mongodb",ve.mongo3),de.channel.registerMonkeyPatch("mongodb",ve.mongo330)}ve.enable=wC});var Dh=l(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.enable=gr.mysql=void 0;var vs=X(),Nh=require("path"),MC=function(e,t){var r=function(u,c){return function(p,f){var d=u[p];d&&(u[p]=function(){for(var g=arguments.length-1,y=arguments.length-1;y>=0;--y)if(typeof arguments[y]=="function"){g=y;break}else if(typeof arguments[y]!="undefined")break;var R=arguments[g],K={result:null,startTime:null,startDate:null};typeof R=="function"&&(f?(K.startTime=process.hrtime(),K.startDate=new Date,arguments[g]=vs.channel.bindToContext(f(K,R))):arguments[g]=vs.channel.bindToContext(R));var le=d.apply(this,arguments);return K.result=le,le})}},n=function(u,c){return r(u.prototype,c+".prototype")},i=["connect","changeUser","ping","statistics","end"],a=require(Nh.dirname(t)+"/lib/Connection");i.forEach(function(u){return n(a,"Connection")(u)}),r(a,"Connection")("createQuery",function(u,c){return function(p){var f=process.hrtime(u.startTime),d=f[0]*1e3+f[1]/1e6|0;vs.channel.publish("mysql",{query:u.result,callbackArgs:arguments,err:p,duration:d,time:u.startDate}),c.apply(this,arguments)}});var s=["_enqueueCallback"],o=require(Nh.dirname(t)+"/lib/Pool");return s.forEach(function(u){return n(o,"Pool")(u)}),e};gr.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:MC};function xC(){vs.channel.registerMonkeyPatch("mysql",gr.mysql)}gr.enable=xC});var Mh=l(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.enable=vr.postgresPool1=void 0;var wh=X();function LC(e){var t=e.prototype.connect;return e.prototype.connect=function(n){return n&&(arguments[0]=wh.channel.bindToContext(n)),t.apply(this,arguments)},e}vr.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:LC};function qC(){wh.channel.registerMonkeyPatch("pg-pool",vr.postgresPool1)}vr.enable=qC});var Lh=l(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.enable=Qe.postgres7=Qe.postgres6=void 0;var un=X(),xh=require("events");function kC(e,t){var r=e.Client.prototype.query,n="__diagnosticOriginalFunc";return e.Client.prototype.query=function(a,s,o){var u={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},c=process.hrtime(),p;function f(d){d&&d[n]&&(d=d[n]);var _=un.channel.bindToContext(function(g,y){var R=process.hrtime(c);if(u.result=y&&{rowCount:y.rowCount,command:y.command},u.error=g,u.duration=Math.ceil(R[0]*1e3+R[1]/1e6),un.channel.publish("postgres",u),g){if(d)return d.apply(this,arguments);p&&p instanceof xh.EventEmitter&&p.emit("error",g)}else d&&d.apply(this,arguments)});try{return Object.defineProperty(_,n,{value:d}),_}catch(g){return d}}try{typeof a=="string"?s instanceof Array?(u.query.preparable={text:a,args:s},o=f(o)):(u.query.text=a,o?o=f(o):s=f(s)):(typeof a.name=="string"?u.query.plan=a.name:a.values instanceof Array?u.query.preparable={text:a.text,args:a.values}:u.query.text=a.text,o?o=f(o):s?s=f(s):a.callback=f(a.callback))}catch(d){return r.apply(this,arguments)}return arguments[0]=a,arguments[1]=s,arguments[2]=o,arguments.length=arguments.length>3?arguments.length:3,p=r.apply(this,arguments),p},e}function jC(e,t){var r=e.Client.prototype.query,n="__diagnosticOriginalFunc";return e.Client.prototype.query=function(a,s,o){var u=this,c=!!o,p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},f=process.hrtime(),d;function _(g){g&&g[n]&&(g=g[n]);var y=un.channel.bindToContext(function(R,K){var le=process.hrtime(f);if(p.result=K&&{rowCount:K.rowCount,command:K.command},p.error=R,p.duration=Math.ceil(le[0]*1e3+le[1]/1e6),un.channel.publish("postgres",p),R){if(g)return g.apply(this,arguments);d&&d instanceof xh.EventEmitter&&d.emit("error",R)}else g&&g.apply(this,arguments)});try{return Object.defineProperty(y,n,{value:g}),y}catch(R){return g}}try{typeof a=="string"?s instanceof Array?(p.query.preparable={text:a,args:s},c=typeof o=="function",o=c?_(o):o):(p.query.text=a,o?(c=typeof o=="function",o=c?_(o):o):(c=typeof s=="function",s=c?_(s):s)):(typeof a.name=="string"?p.query.plan=a.name:a.values instanceof Array?p.query.preparable={text:a.text,args:a.values}:p.query.text=a.text,o?(c=typeof o=="function",o=_(o)):s?(c=typeof s=="function",s=c?_(s):s):(c=typeof a.callback=="function",a.callback=c?_(a.callback):a.callback))}catch(g){return r.apply(this,arguments)}return arguments[0]=a,arguments[1]=s,arguments[2]=o,arguments.length=arguments.length>3?arguments.length:3,d=r.apply(this,arguments),c?d:d.then(function(g){return _()(void 0,g),new u._Promise(function(y,R){y(g)})}).catch(function(g){return _()(g,void 0),new u._Promise(function(y,R){R(g)})})},e}Qe.postgres6={versionSpecifier:"6.*",patch:kC};Qe.postgres7={versionSpecifier:">=7.* <=8.*",patch:jC};function HC(){un.channel.registerMonkeyPatch("pg",Qe.postgres6),un.channel.registerMonkeyPatch("pg",Qe.postgres7)}Qe.enable=HC});var qh=l(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.enable=mr.redis=void 0;var ku=X(),UC=function(e){var t=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var i=this.address,a=process.hrtime(),s=new Date;r.callback=ku.channel.bindToContext(function(o,u){var c=process.hrtime(a),p=c[0]*1e3+c[1]/1e6|0;ku.channel.publish("redis",{duration:p,address:i,commandObj:r,err:o,result:u,time:s}),typeof n=="function"&&n.apply(this,arguments)}),r.callback.pubsubBound=!0}}return t.call(this,r)},e};mr.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:UC};function BC(){ku.channel.registerMonkeyPatch("redis",mr.redis)}mr.enable=BC});var kh=l(lt=>{"use strict";var ms=lt&&lt.__assign||function(){return ms=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ms.apply(this,arguments)};Object.defineProperty(lt,"__esModule",{value:!0});lt.enable=lt.tedious=void 0;var ju=X(),GC=function(e){var t=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){function n(a){var s=process.hrtime(),o={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return ju.channel.bindToContext(function(u,c,p){var f=process.hrtime(s);o=ms(ms({},o),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!u&&{rowCount:c,rows:p},query:{text:this.parametersByName.statement.value},error:u,duration:Math.ceil(f[0]*1e3+f[1]/1e6)}),ju.channel.publish("tedious",o),a.call(this,u,c,p)})}var i=arguments[0];arguments[0].callback=n(i.callback),t.apply(this,arguments)},e};lt.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:GC};function FC(){ju.channel.registerMonkeyPatch("tedious",lt.tedious)}lt.enable=FC});var jh=l(ye=>{"use strict";var VC=ye&&ye.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$C=ye&&ye.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(ye,"__esModule",{value:!0});ye.enable=ye.winston2=ye.winston3=void 0;var Es=X(),zC=function(e){var t=e.Logger.prototype.log,r,n=function(i,a,s){var o;return r===e.config.npm.levels?o="npm":r===e.config.syslog.levels?o="syslog":o="unknown",Es.channel.publish("winston",{level:i,message:a,meta:s,levelKind:o}),a};return e.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(a){return a!==n}),this.filters.push(n)),t.apply(this,arguments)},e},KC=function(e){var t=function(s,o){var u;return s.config.npm.levels[o]!=null?u="npm":s.config.syslog.levels[o]!=null?u="syslog":u="unknown",u},r=function(s){VC(o,s);function o(u,c){var p=s.call(this,c)||this;return p.winston=u,p}return o.prototype.log=function(u,c){var p=u.message,f=u.level,d=u.meta,_=$C(u,["message","level","meta"]);f=typeof Symbol.for=="function"?u[Symbol.for("level")]:f,p=u instanceof Error?u:p;var g=t(this.winston,f);d=d||{};for(var y in _)_.hasOwnProperty(y)&&(d[y]=_[y]);Es.channel.publish("winston",{message:p,level:f,levelKind:g,meta:d}),c()},o}(e.Transport);function n(){var s=arguments[0].levels||e.config.npm.levels,o;for(var u in s)s.hasOwnProperty(u)&&(o=o===void 0||s[u]>s[o]?u:o);this.add(new r(e,{level:o}))}var i=e.createLogger;e.createLogger=function(){var o=arguments[0].levels||e.config.npm.levels,u;for(var c in o)o.hasOwnProperty(c)&&(u=u===void 0||o[c]>o[u]?c:u);var p=i.apply(this,arguments);p.add(new r(e,{level:u}));var f=p.configure;return p.configure=function(){f.apply(this,arguments),n.apply(this,arguments)},p};var a=e.configure;return e.configure=function(){a.apply(this,arguments),n.apply(this,arguments)},e.add(new r(e)),e};ye.winston3={versionSpecifier:"3.x",patch:KC};ye.winston2={versionSpecifier:"2.x",patch:zC};function XC(){Es.channel.registerMonkeyPatch("winston",ye.winston2),Es.channel.registerMonkeyPatch("winston",ye.winston3)}ye.enable=XC});var Qh=l(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.enable=x.tedious=x.pgPool=x.pg=x.winston=x.redis=x.mysql=x.mongodb=x.mongodbCore=x.console=x.bunyan=x.azuresdk=void 0;var Hh=Ah();x.azuresdk=Hh;var Uh=Ih();x.bunyan=Uh;var Bh=Oh();x.console=Bh;var Gh=Ph();x.mongodbCore=Gh;var Fh=Rh();x.mongodb=Fh;var Vh=Dh();x.mysql=Vh;var $h=Mh();x.pgPool=$h;var zh=Lh();x.pg=zh;var Kh=qh();x.redis=Kh;var Xh=kh();x.tedious=Xh;var Yh=jh();x.winston=Yh;function YC(){Uh.enable(),Bh.enable(),Gh.enable(),Fh.enable(),Vh.enable(),zh.enable(),$h.enable(),Kh.enable(),Yh.enable(),Hh.enable(),Xh.enable()}x.enable=YC});var Ss=l(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.registerContextPreservation=Mt.IsInitialized=void 0;var QC=so(),Hu=ne();Mt.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var Uu="DiagnosticChannel";if(Mt.IsInitialized){Ge=Qh(),Wh=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",ys=Wh.split(","),Bu={bunyan:Ge.bunyan,console:Ge.console,mongodb:Ge.mongodb,mongodbCore:Ge.mongodbCore,mysql:Ge.mysql,redis:Ge.redis,pg:Ge.pg,pgPool:Ge.pgPool,winston:Ge.winston,azuresdk:Ge.azuresdk};for(Ts in Bu)ys.indexOf(Ts)===-1&&(Bu[Ts].enable(),Hu.info(Uu,"Subscribed to "+Ts+" events"));ys.length>0&&Hu.info(Uu,"Some modules will not be patched",ys)}else Hu.info(Uu,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var Ge,Wh,ys,Bu,Ts;function WC(e){if(!!Mt.IsInitialized){var t=X();t.channel.addContextPreservation(e),t.channel.spanContextPropagator=QC.AsyncScopeManager}}Mt.registerContextPreservation=WC});var cn=l((Cw,Zh)=>{"use strict";Zh.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var Ie=l((Fu,e_)=>{"use strict";var xt=Fu&&Fu.__assign||function(){return xt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xt.apply(this,arguments)},ZC=require("http"),Jh=require("https"),Gu=require("url"),As=require("constants"),hi=ne(),ln=cn(),JC=function(){function e(){}return e.getCookie=function(t,r){var n="";if(t&&t.length&&typeof r=="string")for(var i=t+"=",a=r.split(";"),s=0;s<a.length;s++){var r=a[s];if(r=e.trim(r),r&&r.indexOf(i)===0){n=r.substring(i.length,a[s].length);break}}return n},e.trim=function(t){return typeof t=="string"?t.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(t){var r=function(o,u){return String.fromCharCode(o>>u&255)},n=function(o){return r(o,24)+r(o,16)+r(o,8)+r(o,0)},i=t.map(n).join(""),a=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),s=a.toString("base64");return s.substr(0,s.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,i=0;i<4;i++)n=e.random32(),r+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var a=t[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+a+r.substr(16,3)+r.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(t){return t.length===32&&t!=="00000000000000000000000000000000"},e.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"},e.isError=function(t){return t instanceof Error},e.isPrimitive=function(t){var r=typeof t;return r==="string"||r==="number"||r==="boolean"},e.isDate=function(t){return Object.prototype.toString.call(t)==="[object Date]"},e.msToTimeSpan=function(t){(isNaN(t)||t<0)&&(t=0);var r=(t/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(t/(1e3*60))%60,i=""+Math.floor(t/(1e3*60*60))%24,a=Math.floor(t/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var s=a>0?a+".":"";return s+i+":"+n+":"+r},e.extractError=function(t){var r=t;return{message:t.message,code:r.code||r.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):typeof t.toJSON=="function"?t.toJSON():t},e.validateStringMap=function(t){if(typeof t!="object"){hi.info("Invalid properties dropped from payload");return}var r={};for(var n in t){var i="",a=t[n],s=typeof a;if(e.isPrimitive(a))i=a.toString();else if(a===null||s==="undefined")i="";else if(s==="function"){hi.info("key: "+n+" was function; will not serialize");continue}else{var o=e.isArray(a)?a:e.extractObject(a);try{e.isPrimitive(o)?i=o:i=JSON.stringify(o)}catch(u){i=a.constructor.name.toString()+" (Error: "+u.message+")",hi.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,e.MAX_PROPERTY_LENGTH)}return r},e.canIncludeCorrelationHeader=function(t,r){var n=t&&t.config&&t.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return!0;for(var i=0;i<n.length;i++){var a=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));if(a.test(Gu.parse(r).hostname))return!1}return!0},e.getCorrelationContextTarget=function(t,r){var n=t.headers&&t.headers[ln.requestContextHeader];if(n)for(var i=n.split(","),a=0;a<i.length;++a){var s=i[a].split("=");if(s.length==2&&s[0]==r)return s[1]}},e.makeRequest=function(t,r,n,i){r&&r.indexOf("//")===0&&(r="https:"+r);var a=Gu.parse(r),s=xt(xt({},n),{host:a.hostname,port:a.port,path:a.pathname}),o=void 0;if(a.protocol==="https:"&&(o=t.proxyHttpsUrl||void 0),a.protocol==="http:"&&(o=t.proxyHttpUrl||void 0),o){o.indexOf("//")===0&&(o="http:"+o);var u=Gu.parse(o);u.protocol==="https:"?(hi.info("Proxies that use HTTPS are not supported"),o=void 0):s=xt(xt({},s),{host:u.hostname,port:u.port||"80",path:r,headers:xt(xt({},s.headers),{Host:a.hostname})})}var c=a.protocol==="https:"&&!o;return c&&t.httpsAgent!==void 0?s.agent=t.httpsAgent:!c&&t.httpAgent!==void 0?s.agent=t.httpAgent:c&&(s.agent=e.tlsRestrictedAgent),c?Jh.request(s,i):ZC.request(s,i)},e.safeIncludeCorrelationHeader=function(t,r,n){var i;if(typeof n=="string")i=n;else if(n instanceof Array)i=n.join(",");else if(n&&typeof n.toString=="function")try{i=n.toString()}catch(a){hi.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",a,n)}i?e.addCorrelationIdHeaderFromString(t,r,i):r.setHeader(ln.requestContextHeader,ln.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(t){var r=Object.prototype.toString.call(t),n="";return r==="[object Error]"?n="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t.name+"'":n=JSON.stringify(t),r+n},e.addCorrelationIdHeaderFromString=function(t,r,n){var i=n.split(","),a=ln.requestContextSourceKey+"=",s=i.some(function(o){return o.substring(0,a.length)===a});s||r.setHeader(ln.requestContextHeader,n+","+ln.requestContextSourceKey+"="+t.config.correlationId)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new Jh.Agent({keepAlive:!0,maxSockets:25,secureOptions:As.SSL_OP_NO_SSLv2|As.SSL_OP_NO_SSLv3|As.SSL_OP_NO_TLSv1|As.SSL_OP_NO_TLSv1_1}),e}();e_.exports=JC});var Er=l((Ow,t_)=>{"use strict";var bs=Ie(),Vu=ne(),eO=function(){function e(){}return e.queryCorrelationId=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(n)){r(e.completedLookups[n]);return}else if(e.pendingLookups[n]){e.pendingLookups[n].push(r);return}e.pendingLookups[n]=[r];var i=function(){if(!!e.pendingLookups[n]){var a={method:"GET",disableAppInsightsAutoCollection:!0};Vu.info(e.TAG,a);var s=bs.makeRequest(t,n,a,function(o){if(o.statusCode===200){var u="";o.setEncoding("utf-8"),o.on("data",function(c){u+=c}),o.on("end",function(){Vu.info(e.TAG,u);var c=e.correlationIdPrefix+u;e.completedLookups[n]=c,e.pendingLookups[n]&&e.pendingLookups[n].forEach(function(p){return p(c)}),delete e.pendingLookups[n]})}else o.statusCode>=400&&o.statusCode<500?(e.completedLookups[n]=void 0,delete e.pendingLookups[n]):setTimeout(i,t.correlationIdRetryIntervalMs)});s&&(s.on("error",function(o){Vu.warn(e.TAG,o)}),s.end())}};setTimeout(i,0)},e.cancelCorrelationIdQuery=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",i=e.pendingLookups[n];i&&(e.pendingLookups[n]=i.filter(function(a){return a!=r}),e.pendingLookups[n].length==0&&delete e.pendingLookups[n])},e.generateRequestId=function(t){if(t){t=t[0]=="|"?t:"|"+t,t[t.length-1]!=="."&&(t+=".");var r=(e.currentRootId++).toString(16);return e.appendSuffix(t,r,"_")}else return e.generateRootId()},e.getRootId=function(t){var r=t.indexOf(".");r<0&&(r=t.length);var n=t[0]==="|"?1:0;return t.substring(n,r)},e.generateRootId=function(){return"|"+bs.w3cTraceId()+"."},e.appendSuffix=function(t,r,n){if(t.length+r.length<e.requestIdMaxLength)return t+r+n;var i=e.requestIdMaxLength-9;if(t.length>i)for(;i>1;--i){var a=t[i-1];if(a==="."||a==="_")break}if(i<=1)return e.generateRootId();for(r=bs.randomu32().toString(16);r.length<8;)r="0"+r;return t.substring(0,i)+r+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=bs.randomu32(),e}();t_.exports=eO});var _i=l((Pw,r_)=>{"use strict";var oe=Ie(),tO=Er(),rO=function(){function e(t,r){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&typeof t=="string")if(t.split(",").length>1)this.traceId=oe.w3cTraceId(),this.spanId=oe.w3cTraceId().substr(0,16);else{var n=t.trim().split("-"),i=n.length;i>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=oe.w3cTraceId(),this.spanId=oe.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=oe.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=oe.w3cTraceId(),this.spanId=oe.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=e.DEFAULT_VERSION,this.traceId=oe.w3cTraceId(),this.spanId=oe.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=oe.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=oe.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=oe.w3cTraceId().substr(0,16),this.traceId=oe.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var a=tO.getRootId(r);e.isValidTraceId(a)||(this.legacyRootId=a,a=oe.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=a,this.spanId=r}else this.traceId=oe.w3cTraceId(),this.spanId=oe.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(t){return t.match(/^[0-9a-f]{32}$/)&&t!=="00000000000000000000000000000000"},e.isValidSpanId=function(t){return t.match(/^[0-9a-f]{16}$/)&&t!=="0000000000000000"},e.formatOpenTelemetryTraceFlags=function(t){var r="0"+t.toString(16);return r.substring(r.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=oe.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();r_.exports=rO});var $u=l((Rw,n_)=>{"use strict";var nO=function(){function e(t){this.fieldmap=[],!!t&&(this.fieldmap=this.parseHeader(t))}return e.prototype.toString=function(){var t=this.fieldmap;return!t||t.length==0?null:t.join(", ")},e.validateKeyChars=function(t){var r=t.split("@");if(r.length==2){var n=r[0].trim(),i=r[1].trim(),a=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),s=Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return a&&s}else if(r.length==1)return Boolean(t.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},e.prototype.parseHeader=function(t){var r=[],n={},i=t.split(",");if(i.length>32)return null;for(var a=0,s=i;a<s.length;a++){var o=s[a],u=o.trim();if(u.length!==0){var c=u.split("=");if(c.length!==2||!e.validateKeyChars(c[0])||n[c[0]])return null;n[c[0]]=!0,r.push(u)}}return r},e.strict=!0,e}();n_.exports=nO});var pt=l((Nw,i_)=>{"use strict";var iO=function(){function e(){}return e}();i_.exports=iO});var s_=l((zu,a_)=>{"use strict";var aO=zu&&zu.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sO=pt(),oO=function(e){aO(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(sO);a_.exports=oO});var Ku=l((Dw,o_)=>{"use strict";var uO=function(){function e(){}return e}();o_.exports=uO});var c_=l((ww,u_)=>{"use strict";var cO=function(){function e(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return e}();u_.exports=cO});var p_=l((Xu,l_)=>{"use strict";var lO=Xu&&Xu.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pO=Ku(),fO=function(e){lO(t,e);function t(){return e.call(this)||this}return t}(pO);l_.exports=fO});var Qu=l((Mw,f_)=>{"use strict";var Yu;(function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"})(Yu||(Yu={}));f_.exports=Yu});var h_=l((xw,d_)=>{"use strict";var dO=Qu(),hO=function(){function e(){this.kind=dO.Measurement}return e}();d_.exports=hO});var g_=l((Lw,__)=>{"use strict";var _O=function(){function e(){this.ver=1,this.sampleRate=100,this.tags={}}return e}();__.exports=_O});var Zu=l((Wu,v_)=>{"use strict";var gO=Wu&&Wu.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vO=pt(),mO=function(e){gO(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(vO);v_.exports=mO});var E_=l((Ju,m_)=>{"use strict";var EO=Ju&&Ju.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yO=pt(),TO=function(e){EO(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return t}(yO);m_.exports=TO});var T_=l((qw,y_)=>{"use strict";var SO=function(){function e(){this.hasFullStack=!0,this.parsedStack=[]}return e}();y_.exports=SO});var A_=l((ec,S_)=>{"use strict";var AO=ec&&ec.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bO=pt(),IO=function(e){AO(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r}return t}(bO);S_.exports=IO});var I_=l((tc,b_)=>{"use strict";var CO=tc&&tc.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OO=pt(),PO=function(e){CO(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return t}(OO);b_.exports=PO});var O_=l((rc,C_)=>{"use strict";var RO=rc&&rc.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NO=Zu(),DO=function(e){RO(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(NO);C_.exports=DO});var R_=l((nc,P_)=>{"use strict";var wO=nc&&nc.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MO=pt(),xO=function(e){wO(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return t}(MO);P_.exports=xO});var D_=l((ic,N_)=>{"use strict";var LO=ic&&ic.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qO=pt(),kO=function(e){LO(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(qO);N_.exports=kO});var M_=l((kw,w_)=>{"use strict";var ac;(function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"})(ac||(ac={}));w_.exports=ac});var L_=l((jw,x_)=>{"use strict";var jO=function(){function e(){}return e}();x_.exports=jO});var sc=l(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.AvailabilityData=s_();J.Base=Ku();J.ContextTagKeys=c_();J.Data=p_();J.DataPoint=h_();J.DataPointType=Qu();J.Domain=pt();J.Envelope=g_();J.EventData=Zu();J.ExceptionData=E_();J.ExceptionDetails=T_();J.MessageData=A_();J.MetricData=I_();J.PageViewData=O_();J.RemoteDependencyData=R_();J.RequestData=D_();J.SeverityLevel=M_();J.StackFrame=L_()});var q_=l(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.domainSupportsProperties=pn.RemoteDependencyDataConstants=void 0;var yr=sc(),HO=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();pn.RemoteDependencyDataConstants=HO;function UO(e){return"properties"in e||e instanceof yr.EventData||e instanceof yr.ExceptionData||e instanceof yr.MessageData||e instanceof yr.MetricData||e instanceof yr.PageViewData||e instanceof yr.RemoteDependencyData||e instanceof yr.RequestData}pn.domainSupportsProperties=UO});var j_=l(k_=>{"use strict";Object.defineProperty(k_,"__esModule",{value:!0})});var U_=l(H_=>{"use strict";Object.defineProperty(H_,"__esModule",{value:!0})});var G_=l(B_=>{"use strict";Object.defineProperty(B_,"__esModule",{value:!0})});var V_=l(F_=>{"use strict";Object.defineProperty(F_,"__esModule",{value:!0})});var z_=l($_=>{"use strict";Object.defineProperty($_,"__esModule",{value:!0})});var X_=l(K_=>{"use strict";Object.defineProperty(K_,"__esModule",{value:!0})});var Q_=l(Y_=>{"use strict";Object.defineProperty(Y_,"__esModule",{value:!0})});var Z_=l(W_=>{"use strict";Object.defineProperty(W_,"__esModule",{value:!0})});var eg=l(J_=>{"use strict";Object.defineProperty(J_,"__esModule",{value:!0})});var rg=l(tg=>{"use strict";Object.defineProperty(tg,"__esModule",{value:!0})});var ig=l(ng=>{"use strict";Object.defineProperty(ng,"__esModule",{value:!0})});var sg=l(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0})});var og=l(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.TelemetryType=Fe.TelemetryTypeString=Fe.baseTypeToTelemetryType=Fe.telemetryTypeToBaseType=void 0;function BO(e){switch(e){case ue.Event:return"EventData";case ue.Exception:return"ExceptionData";case ue.Trace:return"MessageData";case ue.Metric:return"MetricData";case ue.Request:return"RequestData";case ue.Dependency:return"RemoteDependencyData";case ue.Availability:return"AvailabilityData";case ue.PageView:return"PageViewData"}}Fe.telemetryTypeToBaseType=BO;function GO(e){switch(e){case"EventData":return ue.Event;case"ExceptionData":return ue.Exception;case"MessageData":return ue.Trace;case"MetricData":return ue.Metric;case"RequestData":return ue.Request;case"RemoteDependencyData":return ue.Dependency;case"AvailabilityData":return ue.Availability;case"PageViewData":return ue.PageView}}Fe.baseTypeToTelemetryType=GO;Fe.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var ue;(function(e){e[e.Event=0]="Event",e[e.Exception=1]="Exception",e[e.Trace=2]="Trace",e[e.Metric=3]="Metric",e[e.Request=4]="Request",e[e.Dependency=5]="Dependency",e[e.Availability=6]="Availability",e[e.PageView=7]="PageView"})(ue=Fe.TelemetryType||(Fe.TelemetryType={}))});var ug=l(re=>{"use strict";var FO=re&&re.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ce=re&&re.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&FO(t,e,r)};Object.defineProperty(re,"__esModule",{value:!0});Ce(j_(),re);Ce(U_(),re);Ce(G_(),re);Ce(V_(),re);Ce(z_(),re);Ce(X_(),re);Ce(Q_(),re);Ce(Z_(),re);Ce(eg(),re);Ce(rg(),re);Ce(ig(),re);Ce(sg(),re);Ce(og(),re)});var lg=l(cg=>{"use strict";Object.defineProperty(cg,"__esModule",{value:!0})});var fg=l(pg=>{"use strict";Object.defineProperty(pg,"__esModule",{value:!0})});var hg=l(dg=>{"use strict";Object.defineProperty(dg,"__esModule",{value:!0})});var gg=l(_g=>{"use strict";Object.defineProperty(_g,"__esModule",{value:!0})});var mg=l(vg=>{"use strict";Object.defineProperty(vg,"__esModule",{value:!0})});var yg=l(Eg=>{"use strict";Object.defineProperty(Eg,"__esModule",{value:!0})});var Sg=l(Tg=>{"use strict";Object.defineProperty(Tg,"__esModule",{value:!0})});var bg=l(Ag=>{"use strict";Object.defineProperty(Ag,"__esModule",{value:!0})});var Ig=l(Te=>{"use strict";var VO=Te&&Te.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Lt=Te&&Te.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&VO(t,e,r)};Object.defineProperty(Te,"__esModule",{value:!0});Lt(lg(),Te);Lt(fg(),Te);Lt(hg(),Te);Lt(gg(),Te);Lt(mg(),Te);Lt(yg(),Te);Lt(Sg(),Te);Lt(bg(),Te)});var me=l(We=>{"use strict";var $O=We&&We.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Is=We&&We.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&$O(t,e,r)};Object.defineProperty(We,"__esModule",{value:!0});Is(q_(),We);Is(sc(),We);Is(ug(),We);Is(Ig(),We)});var oc=l((pM,Cg)=>{"use strict";var zO=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(t,r){var n=+new Date;this.duration=n-this.startTime,this.statusCode=t;var i=this.properties||{};if(r){if(typeof r=="string")i.error=r;else if(r instanceof Error)i.error=r.message;else if(typeof r=="object")for(var a in r)i[a]=r[a]&&r[a].toString&&r[a].toString()}this.properties=i},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();Cg.exports=zO});var lc=l((cc,Pg)=>{"use strict";var KO=cc&&cc.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cs=require("url"),XO=me(),Og=Ie(),Oe=cn(),YO=oc(),qt=Er(),QO=$u(),uc=_i(),WO=function(e){KO(t,e);function t(r,n){var i=e.call(this)||this;return r&&(i.method=r.method,i.url=i._getAbsoluteUrl(r),i.startTime=+new Date,i.socketRemoteAddress=r.socket&&r.socket.remoteAddress,i.parseHeaders(r,n),r.connection&&(i.connectionRemoteAddress=r.connection.remoteAddress,i.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),i}return t.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n)},t.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n)},t.prototype.getRequestTelemetry=function(r){var n={id:this.requestId,name:this.method+" "+Cs.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r&&r.time?n.time=r.time:this.startTime&&(n.time=new Date(this.startTime)),r){for(var i in r)n[i]||(n[i]=r[i]);if(r.properties)for(var i in r.properties)n.properties[i]=r.properties[i]}return n},t.prototype.getRequestTags=function(r){var n={};for(var i in r)n[i]=r[i];return n[t.keys.locationIp]=r[t.keys.locationIp]||this._getIp(),n[t.keys.sessionId]=r[t.keys.sessionId]||this._getId("ai_session"),n[t.keys.userId]=r[t.keys.userId]||this._getId("ai_user"),n[t.keys.userAuthUserId]=r[t.keys.userAuthUserId]||this._getId("ai_authUser"),n[t.keys.operationName]=this.getOperationName(r),n[t.keys.operationParentId]=this.getOperationParentId(r),n[t.keys.operationId]=this.getOperationId(r),n},t.prototype.getOperationId=function(r){return r[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(r){return r[t.keys.operationParentId]||this.parentId||this.getOperationId(r)},t.prototype.getOperationName=function(r){return r[t.keys.operationName]||this.method+" "+Cs.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,i=Cs.parse(r.url),a=i.pathname,s=i.search,o=n||r.headers["x-forwarded-proto"]=="https"?"https":"http",u=Cs.format({protocol:o,host:r.headers.host,pathname:a,search:s});return u},t.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(a){var s=r.exec(a);if(s)return s[0]},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},t.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",i=t.parseId(Og.getCookie(r,n));return i},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=Og.getCorrelationContextTarget(r,Oe.requestContextSourceKey),r.headers){var i=r.headers[Oe.traceStateHeader]?r.headers[Oe.traceStateHeader].toString():null,a=r.headers[Oe.traceparentHeader]?r.headers[Oe.traceparentHeader].toString():null,s=r.headers[Oe.requestIdHeader]?r.headers[Oe.requestIdHeader].toString():null,o=r.headers[Oe.parentIdHeader]?r.headers[Oe.parentIdHeader].toString():null,u=r.headers[Oe.rootIdHeader]?r.headers[Oe.rootIdHeader].toString():null;this.correlationContextHeader=r.headers[Oe.correlationContextHeader]?r.headers[Oe.correlationContextHeader].toString():null,qt.w3cEnabled&&(a||i)?(this.traceparent=new uc(a?a.toString():null),this.tracestate=a&&i&&new QO(i?i.toString():null),this.setBackCompatFromThisTraceContext()):s?qt.w3cEnabled?(this.traceparent=new uc(null,s),this.setBackCompatFromThisTraceContext()):(this.parentId=s,this.requestId=qt.generateRequestId(this.parentId),this.operationId=qt.getRootId(this.requestId)):qt.w3cEnabled?(this.traceparent=new uc,this.traceparent.parentId=o,this.traceparent.legacyRootId=u||o,this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=qt.generateRequestId(u||this.parentId),this.correlationContextHeader=null,this.operationId=qt.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=qt.getRootId(this.requestId))}},t.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:""},t.keys=new XO.ContextTagKeys,t}(YO);Pg.exports=WO});var Os=l((fM,Dg)=>{"use strict";function pc(e){return typeof e=="function"}var Ee=console.error.bind(console);function gi(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function vi(e){e&&e.logger&&(pc(e.logger)?Ee=e.logger:Ee("new logger isn't a function, not replacing"))}function Rg(e,t,r){if(!e||!e[t]){Ee("no original function "+t+" to wrap");return}if(!r){Ee("no wrapper function"),Ee(new Error().stack);return}if(!pc(e[t])||!pc(r)){Ee("original object and wrapper must be functions");return}var n=e[t],i=r(n,t);return gi(i,"__original",n),gi(i,"__unwrap",function(){e[t]===i&&gi(e,t,n)}),gi(i,"__wrapped",!0),gi(e,t,i),i}function ZO(e,t,r){if(e)Array.isArray(e)||(e=[e]);else{Ee("must provide one or more modules to patch"),Ee(new Error().stack);return}if(!(t&&Array.isArray(t))){Ee("must provide one or more functions to wrap on modules");return}e.forEach(function(n){t.forEach(function(i){Rg(n,i,r)})})}function Ng(e,t){if(!e||!e[t]){Ee("no function to unwrap."),Ee(new Error().stack);return}if(!e[t].__unwrap)Ee("no original to unwrap to -- has "+t+" already been unwrapped?");else return e[t].__unwrap()}function JO(e,t){if(e)Array.isArray(e)||(e=[e]);else{Ee("must provide one or more modules to patch"),Ee(new Error().stack);return}if(!(t&&Array.isArray(t))){Ee("must provide one or more functions to unwrap on modules");return}e.forEach(function(r){t.forEach(function(n){Ng(r,n)})})}vi.wrap=Rg;vi.massWrap=ZO;vi.unwrap=Ng;vi.massUnwrap=JO;Dg.exports=vi});var Ns=l((dM,Lg)=>{"use strict";var wg=Os(),fn=wg.wrap,Ps=wg.unwrap,ft="wrap@before";function Rs(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function eP(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n],a=e[ft];if(typeof a=="function")a(i);else if(Array.isArray(a))for(var s=a.length,o=0;o<s;o++)a[o](i)}}function Mg(e,t){var r;return r=e._events&&e._events[t],Array.isArray(r)||(r?r=[r]:r=[]),r}function tP(e,t,r){var n=Mg(e,t),i=n.filter(function(a){return r.indexOf(a)===-1});i.length>0&&eP(e,i)}function xg(e,t){if(!!e){var r=e;if(typeof e=="function")r=t(e);else if(Array.isArray(e)){r=[];for(var n=0;n<e.length;n++)r[n]=t(e[n])}return r}}Lg.exports=function(t,r,n){if(!t||!t.on||!t.addListener||!t.removeListener||!t.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(s){return function(u,c){var p=Mg(this,u).slice();try{var f=s.call(this,u,c);return tP(this,u,p),f}finally{this.on.__wrapped||fn(this,"on",i),this.addListener.__wrapped||fn(this,"addListener",i)}}}function a(s){return function(u){if(!this._events||!this._events[u])return s.apply(this,arguments);var c=this._events[u];function p(f){return function(){this._events[u]=c;try{return f.apply(this,arguments)}finally{c=this._events[u],this._events[u]=xg(c,n)}}}fn(this,"removeListener",p);try{return this._events[u]=xg(c,n),s.apply(this,arguments)}finally{Ps(this,"removeListener"),this._events[u]=c}}}t[ft]?typeof t[ft]=="function"?Rs(t,ft,[t[ft],r]):Array.isArray(t[ft])&&t[ft].push(r):Rs(t,ft,r),t.__wrapped||(fn(t,"addListener",i),fn(t,"on",i),fn(t,"emit",a),Rs(t,"__unwrap",function(){Ps(t,"addListener"),Ps(t,"on"),Ps(t,"emit"),delete t[ft],delete t.__wrapped}),Rs(t,"__wrapped",!0))}});var Hg=l((hM,jg)=>{"use strict";var O=require("util"),dt=require("assert"),rP=Ns(),q=require("async_hooks"),mi="cls@contexts",Ei="error@context",B=process.env.DEBUG_CLS_HOOKED,P=-1;jg.exports={getNamespace:qg,createNamespace:nP,destroyNamespace:kg,reset:iP,ERROR_SYMBOL:Ei};function xe(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}xe.prototype.set=function(t,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[t]=r,B){let n=" ".repeat(this._indent<0?0:this._indent);j(n+"CONTEXT-SET KEY:"+t+"="+r+" in ns:"+this.name+" currentUid:"+P+" active:"+O.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};xe.prototype.get=function(t){if(!this.active){if(B){let r=q.currentId(),n=q.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);j(`${i}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${t}=undefined currentUid:${P} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(B){let r=q.executionAsyncId(),n=q.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);j(i+"CONTEXT-GETTING KEY:"+t+"="+this.active[t]+" ("+this.name+") currentUid:"+P+" active:"+O.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),j(`${i}CONTEXT-GETTING KEY: (${this.name}) ${t}=${this.active[t]} currentUid:${P} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${O.inspect(this.active)}`)}return this.active[t]};xe.prototype.createContext=function(){let t=Object.create(this.active?this.active:Object.prototype);if(t._ns_name=this.name,t.id=P,B){let r=q.executionAsyncId(),n=q.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);j(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${P} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${O.inspect(t,{showHidden:!0,depth:2,colors:!0})}`)}return t};xe.prototype.run=function(t){let r=this.createContext();this.enter(r);try{if(B){let n=q.triggerAsyncId(),i=q.executionAsyncId(),a=" ".repeat(this._indent<0?0:this._indent);j(`${a}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${P} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} context:${O.inspect(r)}`)}return t(r),r}catch(n){throw n&&(n[Ei]=r),n}finally{if(B){let n=q.triggerAsyncId(),i=q.executionAsyncId(),a=" ".repeat(this._indent<0?0:this._indent);j(`${a}CONTEXT-RUN END: (${this.name}) currentUid:${P} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} ${O.inspect(r)}`)}this.exit(r)}};xe.prototype.runAndReturn=function(t){let r;return this.run(function(n){r=t(n)}),r};xe.prototype.runPromise=function(t){let r=this.createContext();this.enter(r);let n=t(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return B&&j("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+P+" len:"+this._set.length+" "+O.inspect(r)),n.then(i=>(B&&j("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+P+" len:"+this._set.length+" "+O.inspect(r)),this.exit(r),i)).catch(i=>{throw i[Ei]=r,B&&j("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+P+" len:"+this._set.length+" "+O.inspect(r)),this.exit(r),i})};xe.prototype.bind=function(t,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return t.apply(this,arguments)}catch(a){throw a&&(a[Ei]=r),a}finally{n.exit(r)}}};xe.prototype.enter=function(t){if(dt.ok(t,"context must be provided for entering"),B){let r=q.executionAsyncId(),n=q.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);j(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${P} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${O.inspect(t)}`)}this._set.push(this.active),this.active=t};xe.prototype.exit=function(t){if(dt.ok(t,"context must be provided for exiting"),B){let n=q.executionAsyncId(),i=q.triggerAsyncId(),a=" ".repeat(this._indent<0?0:this._indent);j(`${a}CONTEXT-EXIT: (${this.name}) currentUid:${P} triggerId:${i} asyncHooksCurrentId:${n} len:${this._set.length} ${O.inspect(t)}`)}if(this.active===t){dt.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(t);r<0?(B&&j("??ERROR?? context exiting but not entered - ignoring: "+O.inspect(t)),dt.ok(r>=0,`context not currently entered; can't exit. 
`+O.inspect(this)+`
`+O.inspect(t))):(dt.ok(r,"can't remove top context"),this._set.splice(r,1))};xe.prototype.bindEmitter=function(t){dt.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){!s||(s[mi]||(s[mi]=Object.create(null)),s[mi][n]={namespace:r,context:r.active})}function a(s){if(!(s&&s[mi]))return s;let o=s,u=s[mi];return Object.keys(u).forEach(function(c){let p=u[c];o=p.namespace.bind(o,p.context)}),o}rP(t,i,a)};xe.prototype.fromException=function(t){return t[Ei]};function qg(e){return process.namespaces[e]}function nP(e){dt.ok(e,"namespace must be given a name."),B&&j(`NS-CREATING NAMESPACE (${e})`);let t=new xe(e);return t.id=P,q.createHook({init(n,i,a,s){if(P=q.executionAsyncId(),t.active){if(t._contexts.set(n,t.active),B){let o=" ".repeat(t._indent<0?0:t._indent);j(`${o}INIT [${i}] (${e}) asyncId:${n} currentUid:${P} triggerId:${a} active:${O.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(P===0){let o=q.triggerAsyncId(),u=t._contexts.get(o);if(u){if(t._contexts.set(n,u),B){let c=" ".repeat(t._indent<0?0:t._indent);j(`${c}INIT USING CONTEXT FROM TRIGGERID [${i}] (${e}) asyncId:${n} currentUid:${P} triggerId:${o} active:${O.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(B){let c=" ".repeat(t._indent<0?0:t._indent);j(`${c}INIT MISSING CONTEXT [${i}] (${e}) asyncId:${n} currentUid:${P} triggerId:${o} active:${O.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}if(B&&i==="PROMISE"){j(O.inspect(s,{showHidden:!0}));let o=s.parentId,u=" ".repeat(t._indent<0?0:t._indent);j(`${u}INIT RESOURCE-PROMISE [${i}] (${e}) parentId:${o} asyncId:${n} currentUid:${P} triggerId:${a} active:${O.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}},before(n){P=q.executionAsyncId();let i;if(i=t._contexts.get(n)||t._contexts.get(P),i){if(B){let a=q.triggerAsyncId(),s=" ".repeat(t._indent<0?0:t._indent);j(`${s}BEFORE (${e}) asyncId:${n} currentUid:${P} triggerId:${a} active:${O.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${O.inspect(i)}`),t._indent+=2}t.enter(i)}else if(B){let a=q.triggerAsyncId(),s=" ".repeat(t._indent<0?0:t._indent);j(`${s}BEFORE MISSING CONTEXT (${e}) asyncId:${n} currentUid:${P} triggerId:${a} active:${O.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${O.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(n){P=q.executionAsyncId();let i;if(i=t._contexts.get(n)||t._contexts.get(P),i){if(B){let a=q.triggerAsyncId();t._indent-=2;let s=" ".repeat(t._indent<0?0:t._indent);j(`${s}AFTER (${e}) asyncId:${n} currentUid:${P} triggerId:${a} active:${O.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${O.inspect(i)}`)}t.exit(i)}else if(B){let a=q.triggerAsyncId();t._indent-=2;let s=" ".repeat(t._indent<0?0:t._indent);j(`${s}AFTER MISSING CONTEXT (${e}) asyncId:${n} currentUid:${P} triggerId:${a} active:${O.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${O.inspect(i)}`)}},destroy(n){if(P=q.executionAsyncId(),B){let i=q.triggerAsyncId(),a=" ".repeat(t._indent<0?0:t._indent);j(`${a}DESTROY (${e}) currentUid:${P} asyncId:${n} triggerId:${i} active:${O.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${O.inspect(t._contexts.get(P))}`)}t._contexts.delete(n)}}).enable(),process.namespaces[e]=t,t}function kg(e){let t=qg(e);dt.ok(t,`can't delete nonexistent namespace! "`+e+'"'),dt.ok(t.id,"don't assign to process.namespaces directly! "+O.inspect(t)),process.namespaces[e]=null}function iP(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){kg(e)}),process.namespaces=Object.create(null)}process.namespaces={};function j(...e){B&&process._rawDebug(`${O.format(...e)}`)}});var Bg=l((_M,Ug)=>{"use strict";function aP(){}Ug.exports=function(){let t=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let u=0;u<arguments.length;u++)i[u]=arguments[u];let a=i[0];if(typeof a!="function")throw new TypeError("callback is not a function");let s=new aP,o=--r.counter;return t.init.call(s,o,0,null,null),i[0]=function(){t.pre.call(s,o);let u=!0;try{a.apply(this,arguments),u=!1}finally{u&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(s,o,!0),t.destroy.call(null,o)})}t.post.call(s,o,!1),t.destroy.call(null,o)},n.apply(process,i)}}});var Fg=l((gM,Gg)=>{"use strict";function sP(){}Gg.exports=function(){let t=this._hooks,r=this._state,n=global.Promise,i=n.prototype.then;n.prototype.then=u;function a(c,p,f,d){return typeof c!="function"?d?s(f):o(f):function(){t.pre.call(p,f);try{return c.apply(this,arguments)}finally{t.post.call(p,f,!1),t.destroy.call(null,f)}}}function s(c){return function(f){return t.destroy.call(null,c),f}}function o(c){return function(f){throw t.destroy.call(null,c),f}}function u(c,p){if(!r.enabled)return i.call(this,c,p);let f=new sP,d=--r.counter;return t.init.call(f,d,0,null,null),i.call(this,a(c,f,d,!0),a(p,f,d,!1))}}});var $g=l((vM,Vg)=>{"use strict";var Pe=require("timers");function oP(){}function uP(){}function cP(){}var lP=new Map,pP=new Map,fP=new Map,fc=null,dc=!1;Vg.exports=function(){hc(this._hooks,this._state,"setTimeout","clearTimeout",oP,lP,!0),hc(this._hooks,this._state,"setInterval","clearInterval",uP,pP,!1),hc(this._hooks,this._state,"setImmediate","clearImmediate",cP,fP,!0),global.setTimeout=Pe.setTimeout,global.setInterval=Pe.setInterval,global.setImmediate=Pe.setImmediate,global.clearTimeout=Pe.clearTimeout,global.clearInterval=Pe.clearInterval,global.clearImmediate=Pe.clearImmediate};function hc(e,t,r,n,i,a,s){let o=Pe[r],u=Pe[n];Pe[r]=function(){if(!t.enabled)return o.apply(Pe,arguments);let c=new Array(arguments.length);for(let g=0;g<arguments.length;g++)c[g]=arguments[g];let p=c[0];if(typeof p!="function")throw new TypeError('"callback" argument must be a function');let f=new i,d=--t.counter,_;return e.init.call(f,d,0,null,null),c[0]=function(){fc=_,e.pre.call(f,d);let g=!0;try{p.apply(this,arguments),g=!1}finally{g&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(f,d,!0),a.delete(_),e.destroy.call(null,d)})}e.post.call(f,d,!1),fc=null,(s||dc)&&(dc=!1,a.delete(_),e.destroy.call(null,d))},_=o.apply(Pe,c),a.set(_,d),_},Pe[n]=function(c){if(fc===c&&c!==null)dc=!0;else if(a.has(c)){let p=a.get(c);a.delete(c),e.destroy.call(null,p)}u.apply(Pe,arguments)}}});var _c=l((mM,dP)=>{dP.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}});var Xg=l((EM,Kg)=>{"use strict";var yi=process.binding("async_wrap"),hP=yi.Providers.TIMERWRAP,zg={nextTick:Bg(),promise:Fg(),timers:$g()},Ti=new Set;function _P(){this.enabled=!1,this.counter=0}function gc(){let e=this.initFns=[],t=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(i,a,s,o){if(a===hP){Ti.add(i);return}for(let u of e)u(i,this,a,s,o)},this.pre=function(i){if(!Ti.has(i))for(let a of t)a(i,this)},this.post=function(i,a){if(!Ti.has(i))for(let s of r)s(i,this,a)},this.destroy=function(i){if(Ti.has(i)){Ti.delete(i);return}for(let a of n)a(i)}}gc.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)};function Ds(e,t){let r=e.indexOf(t);r!==-1&&e.splice(r,1)}gc.prototype.remove=function(e){e.init&&Ds(this.initFns,e.init),e.pre&&Ds(this.preFns,e.pre),e.post&&Ds(this.postFns,e.post),e.destroy&&Ds(this.destroyFns,e.destroy)};function Si(){this._state=new _P,this._hooks=new gc,this.version=_c().version,this.providers=yi.Providers;for(let e of Object.keys(zg))zg[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),yi.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}Kg.exports=Si;Si.prototype.addHooks=function(e){this._hooks.add(e)};Si.prototype.removeHooks=function(e){this._hooks.remove(e)};Si.prototype.enable=function(){this._state.enabled=!0,yi.enable()};Si.prototype.disable=function(){this._state.enabled=!1,yi.disable()}});var vc=l((yM,gP)=>{gP.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}});var Qg=l((TM,Yg)=>{function vP(e){try{return Error.prototype.toString.call(e)}catch(t){try{return"<error: "+t+">"}catch(r){return"<error>"}}}Yg.exports=function(t,r){var n=[];n.push(vP(t));for(var i=0;i<r.length;i++){var a=r[i],s;try{s=a.toString()}catch(o){try{s="<error: "+o+">"}catch(u){s="<error>"}}n.push("    at "+s)}return n.join(`
`)}});var ev=l((SM,Jg)=>{var ws=Qg();function Wg(){this.extend=new Ai,this.filter=new Ai,this.format=new bi,this.version=vc().version}var mc=!1;Wg.prototype.callSite=function e(t){t||(t={}),mc=!0;var r={};Error.captureStackTrace(r,e);var n=r.stack;return mc=!1,n=n.slice(t.slice||0),t.extend&&(n=this.extend._modify(r,n)),t.filter&&(n=this.filter._modify(r,n)),n};var kt=new Wg;function Ai(){this._modifiers=[]}Ai.prototype._modify=function(e,t){for(var r=0,n=this._modifiers.length;r<n;r++)t=this._modifiers[r](e,t);return t};Ai.prototype.attach=function(e){this._modifiers.push(e)};Ai.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return t===-1?!1:(this._modifiers.splice(t,1),!0)};function bi(){this._formater=ws,this._previous=void 0}bi.prototype.replace=function(e){e?this._formater=e:this.restore()};bi.prototype.restore=function(){this._formater=ws,this._previous=void 0};bi.prototype._backup=function(){this._previous=this._formater};bi.prototype._roolback=function(){this._previous===ws?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&kt.format.replace(Error.prepareStackTrace);var Ec=!1;function Zg(e,t){if(mc)return t;if(Ec)return ws(e,t);var r=t.concat();r=kt.extend._modify(e,r),r=kt.filter._modify(e,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&Object.getOwnPropertyDescriptor(e,"callSite")===void 0&&(e.callSite={original:t,mutated:r}),Ec=!0;var n=kt.format._formater(e,r);return Ec=!1,n}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return Zg},set:function(e){e===Zg?kt.format._roolback():(kt.format._backup(),kt.format.replace(e))}});function mP(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:mP,set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0});Jg.exports=kt});var Tc=l((AM,yc)=>{if(global._stackChain)if(global._stackChain.version===vc().version)yc.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else yc.exports=global._stackChain=ev()});var tv=l((bM,Sc)=>{"use strict";var EP=Xg();if(global._asyncHook)if(global._asyncHook.version===_c().version)Sc.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else Tc().filter.attach(function(t,r){return r.filter(function(n){let i=n.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),Sc.exports=global._asyncHook=new EP});var ov=l((IM,sv)=>{"use strict";var Y=require("util"),ht=require("assert"),yP=Ns(),dn=tv(),Ii="cls@contexts",Ci="error@context",rv=[];for(let e in dn.providers)rv[dn.providers[e]]=e;var z=process.env.DEBUG_CLS_HOOKED,ee=-1;sv.exports={getNamespace:nv,createNamespace:TP,destroyNamespace:iv,reset:SP,ERROR_SYMBOL:Ci};function Le(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}Le.prototype.set=function(t,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return z&&Q("    SETTING KEY:"+t+"="+r+" in ns:"+this.name+" uid:"+ee+" active:"+Y.inspect(this.active,!0)),this.active[t]=r,r};Le.prototype.get=function(t){if(!this.active){z&&Q("    GETTING KEY:"+t+"=undefined "+this.name+" uid:"+ee+" active:"+Y.inspect(this.active,!0));return}return z&&Q("    GETTING KEY:"+t+"="+this.active[t]+" "+this.name+" uid:"+ee+" active:"+Y.inspect(this.active,!0)),this.active[t]};Le.prototype.createContext=function(){z&&Q("   CREATING Context: "+this.name+" uid:"+ee+" len:"+this._set.length+"  active:"+Y.inspect(this.active,!0,2,!0));let t=Object.create(this.active?this.active:Object.prototype);return t._ns_name=this.name,t.id=ee,z&&Q("   CREATED Context: "+this.name+" uid:"+ee+" len:"+this._set.length+"  context:"+Y.inspect(t,!0,2,!0)),t};Le.prototype.run=function(t){let r=this.createContext();this.enter(r);try{return z&&Q(" BEFORE RUN: "+this.name+" uid:"+ee+" len:"+this._set.length+" "+Y.inspect(r)),t(r),r}catch(n){throw n&&(n[Ci]=r),n}finally{z&&Q(" AFTER RUN: "+this.name+" uid:"+ee+" len:"+this._set.length+" "+Y.inspect(r)),this.exit(r)}};Le.prototype.runAndReturn=function(t){var r;return this.run(function(n){r=t(n)}),r};Le.prototype.runPromise=function(t){let r=this.createContext();this.enter(r);let n=t(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return z&&Q(" BEFORE runPromise: "+this.name+" uid:"+ee+" len:"+this._set.length+" "+Y.inspect(r)),n.then(i=>(z&&Q(" AFTER runPromise: "+this.name+" uid:"+ee+" len:"+this._set.length+" "+Y.inspect(r)),this.exit(r),i)).catch(i=>{throw i[Ci]=r,z&&Q(" AFTER runPromise: "+this.name+" uid:"+ee+" len:"+this._set.length+" "+Y.inspect(r)),this.exit(r),i})};Le.prototype.bind=function(t,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return t.apply(this,arguments)}catch(a){throw a&&(a[Ci]=r),a}finally{n.exit(r)}}};Le.prototype.enter=function(t){ht.ok(t,"context must be provided for entering"),z&&Q("  ENTER "+this.name+" uid:"+ee+" len:"+this._set.length+" context: "+Y.inspect(t)),this._set.push(this.active),this.active=t};Le.prototype.exit=function(t){if(ht.ok(t,"context must be provided for exiting"),z&&Q("  EXIT "+this.name+" uid:"+ee+" len:"+this._set.length+" context: "+Y.inspect(t)),this.active===t){ht.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(t);r<0?(z&&Q("??ERROR?? context exiting but not entered - ignoring: "+Y.inspect(t)),ht.ok(r>=0,`context not currently entered; can't exit. 
`+Y.inspect(this)+`
`+Y.inspect(t))):(ht.ok(r,"can't remove top context"),this._set.splice(r,1))};Le.prototype.bindEmitter=function(t){ht.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){!s||(s[Ii]||(s[Ii]=Object.create(null)),s[Ii][n]={namespace:r,context:r.active})}function a(s){if(!(s&&s[Ii]))return s;let o=s,u=s[Ii];return Object.keys(u).forEach(function(c){let p=u[c];o=p.namespace.bind(o,p.context)}),o}yP(t,i,a)};Le.prototype.fromException=function(t){return t[Ci]};function nv(e){return process.namespaces[e]}function TP(e){ht.ok(e,"namespace must be given a name."),z&&Q("CREATING NAMESPACE "+e);let t=new Le(e);return t.id=ee,dn.addHooks({init(r,n,i,a,s){ee=r,a?(t._contexts.set(r,t._contexts.get(a)),z&&Q("PARENTID: "+e+" uid:"+r+" parent:"+a+" provider:"+i)):t._contexts.set(ee,t.active),z&&Q("INIT "+e+" uid:"+r+" parent:"+a+" provider:"+rv[i]+" active:"+Y.inspect(t.active,!0))},pre(r,n){ee=r;let i=t._contexts.get(r);i?(z&&Q(" PRE "+e+" uid:"+r+" handle:"+Ms(n)+" context:"+Y.inspect(i)),t.enter(i)):z&&Q(" PRE MISSING CONTEXT "+e+" uid:"+r+" handle:"+Ms(n))},post(r,n){ee=r;let i=t._contexts.get(r);i?(z&&Q(" POST "+e+" uid:"+r+" handle:"+Ms(n)+" context:"+Y.inspect(i)),t.exit(i)):z&&Q(" POST MISSING CONTEXT "+e+" uid:"+r+" handle:"+Ms(n))},destroy(r){ee=r,z&&Q("DESTROY "+e+" uid:"+r+" context:"+Y.inspect(t._contexts.get(ee))+" active:"+Y.inspect(t.active,!0)),t._contexts.delete(r)}}),process.namespaces[e]=t,t}function iv(e){let t=nv(e);ht.ok(t,`can't delete nonexistent namespace! "`+e+'"'),ht.ok(t.id,"don't assign to process.namespaces directly! "+Y.inspect(t)),process.namespaces[e]=null}function SP(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){iv(e)}),process.namespaces=Object.create(null)}process.namespaces={};dn._state&&!dn._state.enabled&&dn.enable();function Q(e){process.env.DEBUG&&process._rawDebug(e)}function Ms(e){if(!e)return e;if(typeof e=="function")return e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(e.constructor&&e.constructor.name)return e.constructor.name}if(z){Ac=Tc();for(av in Ac.filter._modifiers)Ac.filter.deattach(av)}var Ac,av});var uv=l((CM,bc)=>{"use strict";var AP=ea();process&&AP.gte(process.versions.node,"8.0.0")?bc.exports=Hg():bc.exports=ov()});var pv=l((OM,lv)=>{var bP=Os().wrap,Ic=1<<0,Cc=1<<1,Oc=1<<2,xs=1<<3,M=[],IP=0,he=!1,jt=[],hn,Pc;function Rc(e,t){var r=e.length,n=t.length,i=[];if(r===0&&n===0)return i;for(var a=0;a<r;a++)i[a]=e[a];if(n===0)return i;for(var s=0;s<n;s++){var o=!0;for(a=0;a<r;a++)if(e[a].uid===t[s].uid){o=!1;break}o&&i.push(t[s])}return i}process._fatalException?(Ls=!1,hn=function(t){var r=M.length;if(Ls||r===0)return!1;var n=!1;Ls=!0;for(var i=0;i<r;++i){var a=M[i];if((a.flags&xs)!=0){var s=_n&&_n[a.uid];n=a.error(s,t)||n}}return Ls=!1,jt.length>0&&(M=jt.pop()),_n=void 0,n&&!he},Pc=function(t,r,n){var i=[];he=!0;for(var a=0;a<n;++a){var s=r[a];if(i[s.uid]=s.data,(s.flags&Ic)!=0){var o=s.create(s.data);o!==void 0&&(i[s.uid]=o)}}return he=!1,function(){_n=i,jt.push(M),M=Rc(r,M),he=!0;for(var u=0;u<n;++u)(r[u].flags&Cc)>0&&r[u].before(this,i[r[u].uid]);he=!1;var c=t.apply(this,arguments);for(he=!0,u=0;u<n;++u)(r[u].flags&Oc)>0&&r[u].after(this,i[r[u].uid]);return he=!1,M=jt.pop(),_n=void 0,c}},bP(process,"_fatalException",function(e){return function(r){return hn(r)||e(r)}})):(Nc=!1,hn=function(t){if(Nc)throw t;for(var r=!1,n=M.length,i=0;i<n;++i){var a=M[i];(a.flags&xs)!=0&&(r=a.error(null,t)||r)}if(!r&&he)throw t},Pc=function(t,r,n){var i=[];he=!0;for(var a=0;a<n;++a){var s=r[a];if(i[s.uid]=s.data,(s.flags&Ic)!=0){var o=s.create(s.data);o!==void 0&&(i[s.uid]=o)}}return he=!1,function(){var u=!1,c=!1;jt.push(M),M=Rc(r,M),he=!0;for(var p=0;p<n;++p)(r[p].flags&Cc)>0&&r[p].before(this,i[r[p].uid]);he=!1;var f;try{f=t.apply(this,arguments)}catch(d){u=!0;for(var p=0;p<n;++p)if((M[p].flags&xs)!=0)try{c=M[p].error(i[r[p].uid],d)||c}catch(g){throw Nc=!0,g}if(!c)throw process.removeListener("uncaughtException",hn),process._originalNextTick(function(){process.addListener("uncaughtException",hn)}),d}finally{if(!u||c){for(he=!0,p=0;p<n;++p)(r[p].flags&Oc)>0&&r[p].after(this,i[r[p].uid]);he=!1}M=jt.pop()}return f}},process.addListener("uncaughtException",hn));var Ls,_n,Nc;function CP(e,t,r){he=!0;for(var n=0;n<r;++n){var i=t[n];i.create&&i.create(i.data)}return he=!1,function(){jt.push(M),M=Rc(t,M);var a=e.apply(this,arguments);return M=jt.pop(),a}}function OP(e){var t=M.length;if(t===0)return e;for(var r=M.slice(),n=0;n<t;++n)if(r[n].flags>0)return Pc(e,r,t);return CP(e,r,t)}function Ze(e,t){typeof e.create=="function"&&(this.create=e.create,this.flags|=Ic),typeof e.before=="function"&&(this.before=e.before,this.flags|=Cc),typeof e.after=="function"&&(this.after=e.after,this.flags|=Oc),typeof e.error=="function"&&(this.error=e.error,this.flags|=xs),this.uid=++IP,this.data=t===void 0?null:t}Ze.prototype.create=void 0;Ze.prototype.before=void 0;Ze.prototype.after=void 0;Ze.prototype.error=void 0;Ze.prototype.data=void 0;Ze.prototype.uid=0;Ze.prototype.flags=0;function cv(e,t){if(typeof e!="object"||!e)throw new TypeError("callbacks argument must be an object");return e instanceof Ze?e:new Ze(e,t)}function PP(e,t){var r;e instanceof Ze?r=e:r=cv(e,t);for(var n=!1,i=0;i<M.length;i++)if(r===M[i]){n=!0;break}return n||M.push(r),r}function RP(e){for(var t=0;t<M.length;t++)if(e===M[t]){M.splice(t,1);break}}process.createAsyncListener=cv;process.addAsyncListener=PP;process.removeAsyncListener=RP;lv.exports=OP});var dv=l((RM,fv)=>{"use strict";fv.exports=(e,t)=>class extends e{constructor(n){var i,a;super(o);var s=this;try{n.apply(i,a)}catch(u){a[1](u)}return s;function o(u,c){i=this,a=[p,f];function p(d){return t(s,!1),u(d)}function f(d){return t(s,!1),c(d)}}}}});var yv=l(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var hv=Os(),qs=ea(),Se=hv.wrap,Ht=hv.massWrap,G=pv(),NP=require("util"),DP=qs.gte(process.version,"6.0.0"),Dc=qs.gte(process.version,"7.0.0"),wP=qs.gte(process.version,"8.0.0"),MP=qs.gte(process.version,"11.0.0"),Je=require("net");Dc&&!Je._normalizeArgs?Je._normalizeArgs=function(e){if(e.length===0)return[{},null];var t=e[0],r={};typeof t=="object"&&t!==null?r=t:jP(t)?r.path=t:(r.port=t,e.length>1&&typeof e[1]=="string"&&(r.host=e[1]));var n=e[e.length-1];return typeof n!="function"?[r,null]:[r,n]}:!Dc&&!Je._normalizeConnectArgs&&(Je._normalizeConnectArgs=function(e){var t={};function r(i){return(i=Number(i))>=0?i:!1}typeof e[0]=="object"&&e[0]!==null?t=e[0]:typeof e[0]=="string"&&r(e[0])===!1?t.path=e[0]:(t.port=e[0],typeof e[1]=="string"&&(t.host=e[1]));var n=e[e.length-1];return typeof n=="function"?[t,n]:[t]});"_setUpListenHandle"in Je.Server.prototype?Se(Je.Server.prototype,"_setUpListenHandle",_v):Se(Je.Server.prototype,"_listen2",_v);function _v(e){return function(){this.on("connection",function(t){t._handle&&(t._handle.onread=G(t._handle.onread))});try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=G(this._handle.onconnection))}}}function gv(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=G(t._originalOnread)}}Se(Je.Socket.prototype,"connect",function(e){return function(){var t;wP&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?t=arguments[0]:t=Dc?Je._normalizeArgs(arguments):Je._normalizeConnectArgs(arguments),t[1]&&(t[1]=G(t[1]));var r=e.apply(this,t);return gv(this),r}});var xP=require("http");Se(xP.Agent.prototype,"addRequest",function(e){return function(t){var r=t.onSocket;return t.onSocket=G(function(n){return gv(n),r.apply(this,arguments)}),e.apply(this,arguments)}});var wc=require("child_process");function vv(e){Array.isArray(e.stdio)&&e.stdio.forEach(function(t){t&&t._handle&&(t._handle.onread=G(t._handle.onread),Se(t._handle,"close",js))}),e._handle&&(e._handle.onexit=G(e._handle.onexit))}wc.ChildProcess?Se(wc.ChildProcess.prototype,"spawn",function(e){return function(){var t=e.apply(this,arguments);return vv(this),t}}):Ht(wc,["execFile","fork","spawn"],function(e){return function(){var t=e.apply(this,arguments);return vv(t),t}});process._fatalException||(process._originalNextTick=process.nextTick);var Mc=[];process._nextDomainTick&&Mc.push("_nextDomainTick");process._tickDomainCallback&&Mc.push("_tickDomainCallback");Ht(process,Mc,et);Se(process,"nextTick",js);var xc=["setTimeout","setInterval"];global.setImmediate&&xc.push("setImmediate");var mv=require("timers"),LP=global.setTimeout===mv.setTimeout;Ht(mv,xc,js);LP&&Ht(global,xc,js);var Lc=require("dns");Ht(Lc,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],et);Lc.resolveNaptr&&Se(Lc,"resolveNaptr",et);var Tr=require("fs");Ht(Tr,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],et);Tr.lchown&&Se(Tr,"lchown",et);Tr.lchmod&&Se(Tr,"lchmod",et);Tr.ftruncate&&Se(Tr,"ftruncate",et);var Oi;try{Oi=require("zlib")}catch(e){}Oi&&Oi.Deflate&&Oi.Deflate.prototype&&(Sr=Object.getPrototypeOf(Oi.Deflate.prototype),Sr._transform?Se(Sr,"_transform",et):Sr.write&&Sr.flush&&Sr.end&&Ht(Sr,["write","flush","end"],et));var Sr,qc;try{qc=require("crypto")}catch(e){}qc&&(kc=["pbkdf2","randomBytes"],MP||kc.push("pseudoRandomBytes"),Ht(qc,kc,et));var kc,ks=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";ks&&(Ev=process.addAsyncListener({create:function(){ks=!1}}),global.Promise.resolve(!0).then(function(){ks=!1}),process.removeAsyncListener(Ev));var Ev;ks&&qP();function qP(){var e=global.Promise;function t(s){if(!(this instanceof t))return e(s);if(typeof s!="function")return new e(s);var o,u,c=new e(p);c.__proto__=t.prototype;try{s.apply(o,u)}catch(f){u[1](f)}return c;function p(f,d){o=this,u=[_,g];function _(y){return n(c,!1),f(y)}function g(y){return n(c,!1),d(y)}}}if(NP.inherits(t,e),Se(e.prototype,"then",a),e.prototype.chain&&Se(e.prototype,"chain",a),DP)global.Promise=dv()(e,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(s){typeof e[s]=="function"&&(t[s]=e[s])}),global.Promise=t}function n(s,o){(!s.__asl_wrapper||o)&&(s.__asl_wrapper=G(i))}function i(s,o,u,c){var p;try{return p=o.call(s,u),{returnVal:p,error:!1}}catch(f){return{errorVal:f,error:!0}}finally{p instanceof e?c.__asl_wrapper=function(){var d=p.__asl_wrapper||i;return d.apply(this,arguments)}:n(c,!0)}}function a(s){return function(){var u=this,c=s.apply(u,Array.prototype.map.call(arguments,p));return c.__asl_wrapper=function(d,_,g,y){return u.__asl_wrapper?(u.__asl_wrapper(d,function(){},null,c),c.__asl_wrapper(d,_,g,y)):i(d,_,g,y)},c;function p(f){return typeof f!="function"?f:G(function(d){var _=(u.__asl_wrapper||i)(this,f,d,c);if(_.error)throw _.errorVal;return _.returnVal})}}}}function et(e){var t=function(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)r[i]=arguments[i];r[n]=G(arguments[n])}return e.apply(this,r||arguments)};switch(e.length){case 1:return function(r){return arguments.length!==1?t.apply(this,arguments):(typeof r=="function"&&(r=G(r)),e.call(this,r))};case 2:return function(r,n){return arguments.length!==2?t.apply(this,arguments):(typeof n=="function"&&(n=G(n)),e.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?t.apply(this,arguments):(typeof i=="function"&&(i=G(i)),e.call(this,r,n,i))};case 4:return function(r,n,i,a){return arguments.length!==4?t.apply(this,arguments):(typeof a=="function"&&(a=G(a)),e.call(this,r,n,i,a))};case 5:return function(r,n,i,a,s){return arguments.length!==5?t.apply(this,arguments):(typeof s=="function"&&(s=G(s)),e.call(this,r,n,i,a,s))};case 6:return function(r,n,i,a,s,o){return arguments.length!==6?t.apply(this,arguments):(typeof o=="function"&&(o=G(o)),e.call(this,r,n,i,a,s,o))};default:return t}}function js(e){var t=function(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=G(arguments[0]);for(var n=1;n<arguments.length;n++)r[n]=arguments[n]}return e.apply(this,r||arguments)};switch(e.length){case 1:return function(r){return arguments.length!==1?t.apply(this,arguments):(typeof r=="function"&&(r=G(r)),e.call(this,r))};case 2:return function(r,n){return arguments.length!==2?t.apply(this,arguments):(typeof r=="function"&&(r=G(r)),e.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?t.apply(this,arguments):(typeof r=="function"&&(r=G(r)),e.call(this,r,n,i))};case 4:return function(r,n,i,a){return arguments.length!==4?t.apply(this,arguments):(typeof r=="function"&&(r=G(r)),e.call(this,r,n,i,a))};case 5:return function(r,n,i,a,s){return arguments.length!==5?t.apply(this,arguments):(typeof r=="function"&&(r=G(r)),e.call(this,r,n,i,a,s))};case 6:return function(r,n,i,a,s,o){return arguments.length!==6?t.apply(this,arguments):(typeof r=="function"&&(r=G(r)),e.call(this,r,n,i,a,s,o))};default:return t}}function kP(e){return(e=Number(e))>=0?e:!1}function jP(e){return typeof e=="string"&&kP(e)===!1}});var Iv=l((wM,bv)=>{"use strict";var _t=require("assert"),HP=Ns(),Pi="cls@contexts",jc="error@context";process.addAsyncListener||yv();function Ve(e){this.name=e,this.active=null,this._set=[],this.id=null}Ve.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t};Ve.prototype.get=function(e){if(!!this.active)return this.active[e]};Ve.prototype.createContext=function(){return Object.create(this.active)};Ve.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(r){throw r&&(r[jc]=t),r}finally{this.exit(t)}};Ve.prototype.runAndReturn=function(e){var t;return this.run(function(r){t=e(r)}),t};Ve.prototype.bind=function(e,t){t||(this.active?t=this.active:t=this.createContext());var r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(n){throw n&&(n[jc]=t),n}finally{r.exit(t)}}};Ve.prototype.enter=function(e){_t.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e};Ve.prototype.exit=function(e){if(_t.ok(e,"context must be provided for exiting"),this.active===e){_t.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var t=this._set.lastIndexOf(e);_t.ok(t>=0,"context not currently entered; can't exit"),_t.ok(t,"can't remove top context"),this._set.splice(t,1)};Ve.prototype.bindEmitter=function(e){_t.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,r="context@"+this.name;function n(a){!a||(a[Pi]||(a[Pi]=Object.create(null)),a[Pi][r]={namespace:t,context:t.active})}function i(a){if(!(a&&a[Pi]))return a;var s=a,o=a[Pi];return Object.keys(o).forEach(function(u){var c=o[u];s=c.namespace.bind(s,c.context)}),s}HP(e,n,i)};Ve.prototype.fromException=function(e){return e[jc]};function Tv(e){return process.namespaces[e]}function UP(e){_t.ok(e,"namespace must be given a name!");var t=new Ve(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(r,n){n&&t.enter(n)},after:function(r,n){n&&t.exit(n)},error:function(r){r&&t.exit(r)}}),process.namespaces[e]=t,t}function Sv(e){var t=Tv(e);_t.ok(t,"can't delete nonexistent namespace!"),_t.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function Av(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){Sv(e)}),process.namespaces=Object.create(null)}process.namespaces||Av();bv.exports={getNamespace:Tv,createNamespace:UP,destroyNamespace:Sv,reset:Av}});var Xt=l(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.CorrelationContextManager=void 0;var Cv=ne(),BP=Ss(),gn=_i(),Hc=$u(),Ov=lc(),GP=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return t===void 0?null:t},e.generateContextObject=function(t,r,n,i,a,s){return r=r||t,this.enabled?{operation:{name:n,id:t,parentId:r,traceparent:a,tracestate:s},customProperties:new FP(i)}:null},e.spanToContextObject=function(t,r,n){var i=new gn;return i.traceId=t.traceId,i.spanId=t.spanId,i.traceFlag=gn.formatOpenTelemetryTraceFlags(t.traceFlags)||gn.DEFAULT_TRACE_FLAG,i.parentId=r,e.generateContextObject(i.traceId,i.parentId,n,null,i)},e.runWithContext=function(t,r){var n;return e.enabled?e.session.bind(r,(n={},n[e.CONTEXT_NAME]=t,n))():r()},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t)},e.wrapCallback=function(t,r){var n;return e.enabled?e.session.bind(t,r?(n={},n[e.CONTEXT_NAME]=r,n):void 0):t},e.enable=function(t){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(e.forceClsHooked===!0||e.forceClsHooked===void 0&&e.shouldUseClsHooked()?this.cls=uv():this.cls=Iv()),e.session=this.cls.createNamespace("AI-CLS-Session"),BP.registerContextPreservation(function(r){return e.session.bind(r)})),this.enabled=!0}},e.startOperation=function(t,r){var n=t&&t.traceContext||null,i=t&&t.traceId?t:null,a=t&&t.headers;if(i){var s=new gn("00-"+i.traceId+"-"+i.spanId+"-01"),o=new Hc(i.traceState?i.traceState.serialize():null),u=e.generateContextObject(i.traceId,"|"+i.traceId+"."+i.spanId+".",typeof r=="string"?r:"",void 0,s,o);return u}if(n){var s=new gn(n.traceparent),o=new Hc(n.tracestate),c=typeof r=="object"?new Ov(r):null,u=e.generateContextObject(s.traceId,s.parentId,typeof r=="string"?r:c.getOperationName({}),c&&c.getCorrelationContextHeader()||void 0,s,o);return u}if(a){var s=new gn(a.traceparent?a.traceparent.toString():null),o=new Hc(a.tracestate?a.tracestate.toString():null),c=new Ov(t),u=e.generateContextObject(s.traceId,s.parentId,c.getOperationName({}),c.getCorrelationContextHeader(),s,o);return u}return Cv.warn("startOperation was called with invalid arguments",arguments),null},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var t=process.versions.node.split(".");return parseInt(t[0])>3||parseInt(t[0])>2&&parseInt(t[1])>2},e.shouldUseClsHooked=function(){var t=process.versions.node.split(".");return parseInt(t[0])>8||parseInt(t[0])>=8&&parseInt(t[1])>=2},e.canUseClsHooked=function(){var t=process.versions.node.split("."),r=parseInt(t[0])>8||parseInt(t[0])>=8&&parseInt(t[1])>=0,n=parseInt(t[0])<8||parseInt(t[0])<=8&&parseInt(t[1])<2,i=parseInt(t[0])>4||parseInt(t[0])>=4&&parseInt(t[1])>=7;return!(r&&n)&&i},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();Hs.CorrelationContextManager=GP;var FP=function(){function e(t){this.props=[],this.addHeaderData(t)}return e.prototype.addHeaderData=function(t){var r=t?t.split(", "):[];this.props=r.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map(function(t){return t.key+"="+t.value}).join(", ")},e.prototype.getProperty=function(t){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===t)return n.value}},e.prototype.setProperty=function(t,r){if(e.bannedCharacters.test(t)||e.bannedCharacters.test(r)){Cv.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+t+" and value: "+r);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===t){i.value=r;return}}this.props.push({key:t,value:r})},e.bannedCharacters=/[,=]/,e}()});var Rv=l(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.dispose=vn.enable=void 0;var Pv=me(),Uc=X(),Ar=[],Bc=function(e){var t=e.data.message;Ar.forEach(function(r){t instanceof Error?r.trackException({exception:t}):(t.lastIndexOf(`
`)==t.length-1&&(t=t.substring(0,t.length-1)),r.trackTrace({message:t,severity:e.data.stderr?Pv.SeverityLevel.Warning:Pv.SeverityLevel.Information}))})};function VP(e,t){e?(Ar.length===0&&Uc.channel.subscribe("console",Bc),Ar.push(t)):(Ar=Ar.filter(function(r){return r!=t}),Ar.length===0&&Uc.channel.unsubscribe("console",Bc))}vn.enable=VP;function $P(){Uc.channel.unsubscribe("console",Bc),Ar=[]}vn.dispose=$P});var Nv=l(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.dispose=En.enable=void 0;var mn=me(),Gc=X(),br=[],zP={10:mn.SeverityLevel.Verbose,20:mn.SeverityLevel.Verbose,30:mn.SeverityLevel.Information,40:mn.SeverityLevel.Warning,50:mn.SeverityLevel.Error,60:mn.SeverityLevel.Critical},Fc=function(e){var t=e.data.result;br.forEach(function(r){var n=zP[e.data.level];t instanceof Error?r.trackException({exception:t}):r.trackTrace({message:t,severity:n})})};function KP(e,t){e?(br.length===0&&Gc.channel.subscribe("bunyan",Fc),br.push(t)):(br=br.filter(function(r){return r!=t}),br.length===0&&Gc.channel.unsubscribe("bunyan",Fc))}En.enable=KP;function XP(){Gc.channel.unsubscribe("bunyan",Fc),br=[]}En.dispose=XP});var Dv=l(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.dispose=yn.enable=void 0;var ce=me(),Vc=X(),Ir=[],YP={syslog:function(e){var t={emerg:ce.SeverityLevel.Critical,alert:ce.SeverityLevel.Critical,crit:ce.SeverityLevel.Critical,error:ce.SeverityLevel.Error,warning:ce.SeverityLevel.Warning,notice:ce.SeverityLevel.Information,info:ce.SeverityLevel.Information,debug:ce.SeverityLevel.Verbose};return t[e]===void 0?ce.SeverityLevel.Information:t[e]},npm:function(e){var t={error:ce.SeverityLevel.Error,warn:ce.SeverityLevel.Warning,info:ce.SeverityLevel.Information,verbose:ce.SeverityLevel.Verbose,debug:ce.SeverityLevel.Verbose,silly:ce.SeverityLevel.Verbose};return t[e]===void 0?ce.SeverityLevel.Information:t[e]},unknown:function(e){return ce.SeverityLevel.Information}},$c=function(e){var t=e.data.message;Ir.forEach(function(r){if(t instanceof Error)r.trackException({exception:t,properties:e.data.meta});else{var n=YP[e.data.levelKind](e.data.level);r.trackTrace({message:t,severity:n,properties:e.data.meta})}})};function QP(e,t){e?(Ir.length===0&&Vc.channel.subscribe("winston",$c),Ir.push(t)):(Ir=Ir.filter(function(r){return r!=t}),Ir.length===0&&Vc.channel.unsubscribe("winston",$c))}yn.enable=QP;function WP(){Vc.channel.unsubscribe("winston",$c),Ir=[]}yn.dispose=WP});var Mv=l((kM,wv)=>{"use strict";var ZP=Ss(),JP=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(t,r){ZP.IsInitialized&&(Rv().enable(t&&r,this._client),Nv().enable(t,this._client),Dv().enable(t,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();wv.exports=JP});var Lv=l((jM,xv)=>{"use strict";var eR=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var r=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var r=this;if(t){this._isInitialized=!0;var n=this;if(!this._exceptionListenerHandle){var i=function(a,s,o){o===void 0&&(o=new Error(e._FALLBACK_ERROR_MESSAGE)),r._client.trackException({exception:o}),r._client.flush({isAppCrashing:!0}),a&&s&&process.listeners(s).length===1&&(console.error(o),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=i.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=i.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=i.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();xv.exports=eR});var gt=l(E=>{"use strict";var $e;Object.defineProperty(E,"__esModule",{value:!0});E.HeartBeatMetricName=E.DependencyTypeName=E.SpanAttribute=E.TelemetryTypeStringToQuickPulseDocumentType=E.TelemetryTypeStringToQuickPulseType=E.QuickPulseType=E.QuickPulseDocumentType=E.PerformanceToQuickPulseCounter=E.MetricId=E.PerformanceCounter=E.QuickPulseCounter=E.DEFAULT_LIVEMETRICS_HOST=E.DEFAULT_LIVEMETRICS_ENDPOINT=E.DEFAULT_BREEZE_ENDPOINT=void 0;E.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";E.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";E.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var _e;(function(e){e.COMMITTED_BYTES="\\Memory\\Committed Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",e.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",e.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",e.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",e.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",e.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",e.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(_e=E.QuickPulseCounter||(E.QuickPulseCounter={}));var Us;(function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(Us=E.PerformanceCounter||(E.PerformanceCounter={}));var tR;(function(e){e.REQUESTS_DURATION="requests/duration",e.DEPENDENCIES_DURATION="dependencies/duration",e.EXCEPTIONS_COUNT="exceptions/count",e.TRACES_COUNT="traces/count"})(tR=E.MetricId||(E.MetricId={}));E.PerformanceToQuickPulseCounter=($e={},$e[Us.PROCESSOR_TIME]=_e.PROCESSOR_TIME,$e[Us.REQUEST_RATE]=_e.REQUEST_RATE,$e[Us.REQUEST_DURATION]=_e.REQUEST_DURATION,$e[_e.COMMITTED_BYTES]=_e.COMMITTED_BYTES,$e[_e.REQUEST_FAILURE_RATE]=_e.REQUEST_FAILURE_RATE,$e[_e.DEPENDENCY_RATE]=_e.DEPENDENCY_RATE,$e[_e.DEPENDENCY_FAILURE_RATE]=_e.DEPENDENCY_FAILURE_RATE,$e[_e.DEPENDENCY_DURATION]=_e.DEPENDENCY_DURATION,$e[_e.EXCEPTION_RATE]=_e.EXCEPTION_RATE,$e);E.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};E.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};E.TelemetryTypeStringToQuickPulseType={EventData:E.QuickPulseType.Event,ExceptionData:E.QuickPulseType.Exception,MessageData:E.QuickPulseType.Trace,MetricData:E.QuickPulseType.Metric,RequestData:E.QuickPulseType.Request,RemoteDependencyData:E.QuickPulseType.Dependency,AvailabilityData:E.QuickPulseType.Availability,PageViewData:E.QuickPulseType.PageView};E.TelemetryTypeStringToQuickPulseDocumentType={EventData:E.QuickPulseDocumentType.Event,ExceptionData:E.QuickPulseDocumentType.Exception,MessageData:E.QuickPulseDocumentType.Trace,MetricData:E.QuickPulseDocumentType.Metric,RequestData:E.QuickPulseDocumentType.Request,RemoteDependencyData:E.QuickPulseDocumentType.Dependency,AvailabilityData:E.QuickPulseDocumentType.Availability,PageViewData:E.QuickPulseDocumentType.PageView};E.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"};E.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"};E.HeartBeatMetricName="HeartBeat"});var Gs=l((UM,qv)=>{"use strict";var Bs=require("os"),qe=gt(),rR=function(){function e(t,r,n){r===void 0&&(r=6e4),n===void 0&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=Bs.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,r){var n;if(!!e.isEnabled()){if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;e._intervalRequestExecutionTime+=n,r===!1&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,r){var n;if(!!e.isEnabled()){if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;e._intervalDependencyExecutionTime+=n,r===!1&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var t=Bs.cpus();if(t&&t.length&&this._lastCpus&&t.length===this._lastCpus.length){for(var r=0,n=0,i=0,a=0,s=0,o=0;!!t&&o<t.length;o++){var u=t[o],c=this._lastCpus[o],p="% cpu("+o+") ",f=u.model,d=u.speed,_=u.times,g=c.times,y=_.user-g.user||0;r+=y;var R=_.sys-g.sys||0;n+=R;var K=_.nice-g.nice||0;i+=K;var le=_.idle-g.idle||0;a+=le;var it=_.irq-g.irq||0;s+=it}var Pr=void 0;if(typeof process.cpuUsage=="function"){var qn=process.cpuUsage(),Rr=process.hrtime(),DE=qn.user-this._lastAppCpuUsage.user+(qn.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var wE=(Rr[0]-this._lastHrtime[0])*1e6+(Rr[1]-this._lastHrtime[1])/1e3||0;Pr=100*DE/(wE*t.length)}this._lastAppCpuUsage=qn,this._lastHrtime=Rr}var io=r+n+i+a+s||1;this._client.trackMetric({name:qe.PerformanceCounter.PROCESSOR_TIME,value:(io-a)/io*100}),this._client.trackMetric({name:qe.PerformanceCounter.PROCESS_TIME,value:Pr||r/io*100})}this._lastCpus=t},e.prototype._trackMemory=function(){var t=Bs.freemem(),r=process.memoryUsage().rss,n=Bs.totalmem()-t;this._client.trackMetric({name:qe.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:qe.PerformanceCounter.AVAILABLE_BYTES,value:t}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:qe.QuickPulseCounter.COMMITTED_BYTES,value:n})},e.prototype._trackNetwork=function(){var t=this._lastRequests,r={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-t.totalRequestCount||0,i=r.totalFailedRequestCount-t.totalFailedRequestCount||0,a=r.time-t.time,s=a/1e3,o=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,a>0){var u=n/s,c=i/s;this._client.trackMetric({name:qe.PerformanceCounter.REQUEST_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:qe.PerformanceCounter.REQUEST_DURATION,value:o}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:qe.QuickPulseCounter.REQUEST_FAILURE_RATE,value:c})}this._lastRequests=r},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,r={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-t.totalDependencyCount||0,i=r.totalFailedDependencyCount-t.totalFailedDependencyCount||0,a=r.time-t.time,s=a/1e3,o=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,a>0){var u=n/s,c=i/s;this._client.trackMetric({name:qe.QuickPulseCounter.DEPENDENCY_RATE,value:u}),this._client.trackMetric({name:qe.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:c}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:qe.QuickPulseCounter.DEPENDENCY_DURATION,value:o})}this._lastDependencies=r}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,r={totalExceptionCount:e._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-t.totalExceptionCount||0,i=r.time-t.time,a=i/1e3;if(i>0){var s=n/a;this._client.trackMetric({name:qe.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();qv.exports=rR});var kv=l(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.AggregatedMetricCounter=void 0;var nR=function(){function e(t){this.dimensions=t,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return e}();Fs.AggregatedMetricCounter=nR});var jv=l(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.PreaggregatedMetricPropertyNames=void 0;Vs.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}});var Kc=l((zc,Hv)=>{"use strict";var $s=zc&&zc.__assign||function(){return $s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$s.apply(this,arguments)},zs=gt(),iR=kv(),aR=jv(),sR=function(){function e(t,r){r===void 0&&(r=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=r}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){if(!!e.isEnabled()){var r=e._getAggregatedCounter(t,this._exceptionCountersCollection);r.totalCount++}},e.countTrace=function(t){if(!!e.isEnabled()){var r=e._getAggregatedCounter(t,this._traceCountersCollection);r.totalCount++}},e.countRequest=function(t,r){if(!!e.isEnabled()){var n,i=e._getAggregatedCounter(r,this._requestCountersCollection);if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;i.intervalExecutionTime+=n,i.totalCount++}},e.countDependency=function(t,r){if(!!e.isEnabled()){var n=e._getAggregatedCounter(r,this._dependencyCountersCollection),i;if(typeof t=="string")i=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")i=t;else return;n.intervalExecutionTime+=i,n.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(t,r){for(var n=!1,i=0;i<r.length;i++){if(t===r[i].dimensions)return r[i];if(Object.keys(t).length===Object.keys(r[i].dimensions).length){for(var a in t)if(t[a]!=r[i].dimensions[a]){n=!0;break}if(!n)return r[i];n=!1}}var s=new iR.AggregatedMetricCounter(t);return r.push(s),s},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var r=e._requestCountersCollection[t];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,a=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:a,count:n,aggregationInterval:i,metricType:zs.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var r=e._dependencyCountersCollection[t];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,a=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:a,count:n,aggregationInterval:i,metricType:zs.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var r=e._exceptionCountersCollection[t],n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:zs.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var r=e._traceCountersCollection[t],n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:zs.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackPreAggregatedMetric=function(t){var r={};for(var n in t.dimensions)r[aR.PreaggregatedMetricPropertyNames[n]]=t.dimensions[n];r=$s($s({},r),{"_MS.MetricId":t.metricType,"_MS.AggregationIntervalMs":String(t.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:t.name,value:t.value,count:t.count,properties:r,kind:"Aggregation"};this._client.trackMetric(i)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();Hv.exports=sR});var Ri=l((FM,Fv)=>{"use strict";var vt=require("os"),Uv=require("fs"),Bv=require("path"),oR=me(),Gv=ne(),uR=function(){function e(t){this.keys=new oR.ContextTagKeys,this.tags={},this._loadApplicationContext(t),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||Bv.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var r=JSON.parse(Uv.readFileSync(t,"utf8"));r&&typeof r.version=="string"&&(e.appVersion[t]=r.version)}catch(n){Gv.info("unable to read app version: ",n)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=vt&&vt.hostname(),this.tags[this.keys.deviceOSVersion]=vt&&vt.type()+" "+vt.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=vt&&vt.arch(),this.tags["ai.device.osPlatform"]=vt&&vt.platform()},e.prototype._loadInternalContext=function(){var t=Bv.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var r=JSON.parse(Uv.readFileSync(t,"utf8"));r&&typeof r.version=="string"&&(e.sdkVersion=r.version)}catch(n){Gv.info("unable to read app version: ",n)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();Fv.exports=uR});var $v=l((Yc,Vv)=>{"use strict";var cR=Yc&&Yc.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ze=require("url"),Xc=me(),lR=Ie(),pR=cn(),fR=oc(),dR=Er(),hR=function(e){cR(t,e);function t(r,n){var i=e.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=t._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return t.prototype.onError=function(r){this._setStatus(void 0,r)},t.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=lR.getCorrelationContextTarget(r,pR.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(r,n){var i=ze.parse(this.url);i.search=void 0,i.hash=void 0;var a=this.method.toUpperCase()+" "+i.pathname,s=Xc.RemoteDependencyDataConstants.TYPE_HTTP,o=i.hostname;i.port&&(o+=":"+i.port),this.correlationId?(s=Xc.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==dR.correlationIdPrefix&&(o+=" | "+this.correlationId)):s=Xc.RemoteDependencyDataConstants.TYPE_HTTP;var u={id:n,name:a,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:s,target:o};if(r&&r.time?u.time=r.time:this.startTime&&(u.time=new Date(this.startTime)),r){for(var c in r)u[c]||(u[c]=r[c]);if(r.properties)for(var c in r.properties)u.properties[c]=r.properties[c]}return u},t._getUrlFromRequestOptions=function(r,n){if(typeof r=="string")if(r.indexOf("http://")===0||r.indexOf("https://")===0)r=ze.parse(r);else{var i=ze.parse(r);i.host==="443"?r=ze.parse("https://"+r):r=ze.parse("http://"+r)}else{if(r&&typeof ze.URL=="function"&&r instanceof ze.URL)return ze.format(r);var a=r;r={},a&&Object.keys(a).forEach(function(u){r[u]=a[u]})}if(r.path){var s=ze.parse(r.path);r.pathname=s.pathname,r.search=s.search}if(r.host&&r.port){var o=ze.parse("http://"+r.host);!o.port&&r.port&&(r.hostname=r.host,delete r.host)}return r.protocol=r.protocol||n.agent&&n.agent.protocol||n.protocol||void 0,r.hostname=r.hostname||"localhost",ze.format(r)},t}(fR);Vv.exports=hR});var zv=l(Tn=>{"use strict";var Ni=Tn&&Tn.__assign||function(){return Ni=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ni.apply(this,arguments)};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.spanToTelemetryContract=void 0;var _R=w(),Ae=gt();function Qc(e){var t=Ni({},e);return Object.keys(Ae.SpanAttribute).forEach(function(r){delete t[r]}),t}function gR(e){var t="|"+e.spanContext().traceId+"."+e.spanContext().spanId+".",r=Math.round(e._duration[0]*1e3+e._duration[1]/1e6),n=e.attributes["peer.address"]?e.attributes["peer.address"].toString():"",i=e.attributes.component?e.attributes.component.toString():"",a=i.toUpperCase()===Ae.DependencyTypeName.Http||!!e.attributes[Ae.SpanAttribute.HttpUrl],s=i.toLowerCase()===Ae.DependencyTypeName.Grpc;if(a){var o=e.attributes[Ae.SpanAttribute.HttpMethod]||"GET",u=new URL(e.attributes[Ae.SpanAttribute.HttpUrl].toString()),c=e.attributes[Ae.SpanAttribute.HttpHost]||u.host,p=e.attributes[Ae.SpanAttribute.HttpPort]||u.port||null,f=u.pathname||"/",d=o+" "+f,_=Ae.DependencyTypeName.Http,g=p?(c+":"+p).toString():c.toString(),y=u.toString(),R=e.attributes[Ae.SpanAttribute.HttpStatusCode]||e.status.code||0,K=R<400;return{id:t,name:d,dependencyTypeName:_,target:g,data:y,success:K,duration:r,url:y,resultCode:String(R),properties:Qc(e.attributes)}}else if(s){var o=e.attributes[Ae.SpanAttribute.GrpcMethod]||"rpc",le=e.attributes[Ae.SpanAttribute.GrpcService],it=le?o+" "+le:e.name;return{id:t,duration:r,name:it,target:le.toString(),data:le.toString()||it,url:le.toString()||it,dependencyTypeName:Ae.DependencyTypeName.Grpc,resultCode:String(e.status.code||0),success:e.status.code===0,properties:Qc(e.attributes)}}else{var Pr=e.name,qn=e.links&&e.links.map(function(Rr){return{operation_Id:Rr.context.traceId,id:Rr.context.spanId}});return{id:t,duration:r,name:Pr,target:n,data:n||Pr,url:n||Pr,dependencyTypeName:e.kind===_R.SpanKind.INTERNAL?Ae.DependencyTypeName.InProc:i||e.name,resultCode:String(e.status.code||0),success:e.status.code===0,properties:Ni(Ni({},Qc(e.attributes)),{"_MS.links":qn||void 0})}}}Tn.spanToTelemetryContract=gR});var Yv=l(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.enable=Ut.subscriber=void 0;var Wc=w(),Kv=X(),Xv=_i(),vR=zv(),mR=so(),Sn=[],ER=function(e){var t=e.data,r=vR.spanToTelemetryContract(t),n=t.spanContext(),i=new Xv;i.traceId=n.traceId,i.spanId=n.spanId,i.traceFlag=Xv.formatOpenTelemetryTraceFlags(n.traceFlags),i.parentId=t.parentSpanId?"|"+n.traceId+"."+t.parentSpanId+".":null,mR.AsyncScopeManager.with(t,function(){Sn.forEach(function(a){t.kind===Wc.SpanKind.SERVER?a.trackRequest(r):(t.kind===Wc.SpanKind.CLIENT||t.kind===Wc.SpanKind.INTERNAL)&&a.trackDependency(r)})})};Ut.subscriber=ER;function yR(e,t){e?(Sn.length===0&&Kv.channel.subscribe("azure-coretracing",Ut.subscriber),Sn.push(t)):(Sn=Sn.filter(function(r){return r!=t}),Sn.length===0&&Kv.channel.unsubscribe("azure-coretracing",Ut.subscriber))}Ut.enable=yR});var Wv=l(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.enable=Bt.subscriber=void 0;var Qv=X(),An=[],TR=function(e){e.data.event.commandName!=="ismaster"&&An.forEach(function(t){var r=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:r,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})})};Bt.subscriber=TR;function SR(e,t){e?(An.length===0&&Qv.channel.subscribe("mongodb",Bt.subscriber),An.push(t)):(An=An.filter(function(r){return r!=t}),An.length===0&&Qv.channel.unsubscribe("mongodb",Bt.subscriber))}Bt.enable=SR});var Jv=l(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.enable=Gt.subscriber=void 0;var Zv=X(),bn=[],AR=function(e){bn.forEach(function(t){var r=e.data.query||{},n=r.sql||"Unknown query",i=!e.data.err,a=r._connection||{},s=a.config||{},o=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;t.trackDependency({target:o,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})})};Gt.subscriber=AR;function bR(e,t){e?(bn.length===0&&Zv.channel.subscribe("mysql",Gt.subscriber),bn.push(t)):(bn=bn.filter(function(r){return r!=t}),bn.length===0&&Zv.channel.unsubscribe("mysql",Gt.subscriber))}Gt.enable=bR});var tm=l(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.enable=Ft.subscriber=void 0;var em=X(),In=[],IR=function(e){In.forEach(function(t){e.data.commandObj.command!=="info"&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})})};Ft.subscriber=IR;function CR(e,t){e?(In.length===0&&em.channel.subscribe("redis",Ft.subscriber),In.push(t)):(In=In.filter(function(r){return r!=t}),In.length===0&&em.channel.unsubscribe("redis",Ft.subscriber))}Ft.enable=CR});var nm=l(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.enable=Vt.subscriber=void 0;var rm=X(),Cn=[],OR=function(e){Cn.forEach(function(t){var r=e.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!e.data.error,a=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:a,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})})};Vt.subscriber=OR;function PR(e,t){e?(Cn.length===0&&rm.channel.subscribe("postgres",Vt.subscriber),Cn.push(t)):(Cn=Cn.filter(function(r){return r!=t}),Cn.length===0&&rm.channel.unsubscribe("postgres",Vt.subscriber))}Vt.enable=PR});var Rn=l((el,om)=>{"use strict";var Ks=el&&el.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,i++)n[i]=a[s];return n},On=require("http"),Pn=require("https"),Zc=ne(),im=Ie(),$t=cn(),RR=$v(),am=Xt(),sm=Er(),Jc=_i(),NR=Ss(),DR=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(t){this._isEnabled=t,this._isEnabled&&!this._isInitialized&&this._initialize(),NR.IsInitialized&&(Yv().enable(!0,this._client),Wv().enable(t,this._client),Jv().enable(t,this._client),tm().enable(t,this._client),nm().enable(t,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=On.request,n=Pn.request,i=function(a,s){var o=!s[e.disableCollectionRequestOption]&&!a[e.alreadyAutoCollectedFlag];s.headers&&s.headers["user-agent"]&&s.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(o=!1),a[e.alreadyAutoCollectedFlag]=!0,a&&s&&o&&(am.CorrelationContextManager.wrapEmitter(a),e.trackRequest(t._client,{options:s,request:a}))};On.request=function(a){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];var u=r.call.apply(r,Ks([On,a],s));return i(u,a),u},Pn.request=function(a){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];var u=n.call.apply(n,Ks([Pn,a],s));return i(u,a),u},On.get=function(a){for(var s,o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];var c=(s=On.request).call.apply(s,Ks([On,a],o));return c.end(),c},Pn.get=function(a){for(var s,o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];var c=(s=Pn.request).call.apply(s,Ks([Pn,a],o));return c.end(),c}},e.trackRequest=function(t,r){if(!r.options||!r.request||!t){Zc.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!t);return}var n=new RR(r.options,r.request),i=am.CorrelationContextManager.getCurrentContext(),a,s;if(i&&i.operation&&i.operation.traceparent&&Jc.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),a=i.operation.traceparent.getBackCompatRequestId();else if(sm.w3cEnabled){var o=new Jc;s=o.toString(),a=o.getBackCompatRequestId()}else a=i&&i.operation&&i.operation.parentId+e.requestNumber+++".";if(im.canIncludeCorrelationHeader(t,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&t.config&&t.config.correlationId){var u=r.request.getHeader($t.requestContextHeader);try{im.safeIncludeCorrelationHeader(t,r.request,u)}catch(f){Zc.warn("Request-Context header could not be set. Correlation of requests may be lost",f)}if(i&&i.operation)try{if(r.request.setHeader($t.requestIdHeader,a),t.config.ignoreLegacyHeaders||(r.request.setHeader($t.parentIdHeader,i.operation.id),r.request.setHeader($t.rootIdHeader,a)),s||i.operation.traceparent)r.request.setHeader($t.traceparentHeader,s||i.operation.traceparent.toString());else if(sm.w3cEnabled){var o=new Jc().toString();r.request.setHeader($t.traceparentHeader,o)}if(i.operation.tracestate){var c=i.operation.tracestate.toString();c&&r.request.setHeader($t.traceStateHeader,c)}var p=i.customProperties.serializeToHeader();p&&r.request.setHeader($t.correlationContextHeader,p)}catch(f){Zc.warn("Correlation headers could not be set. Correlation of requests may be lost.",f)}}r.request.on&&(r.request.on("response",function(f){n.onResponse(f);var d=n.getDependencyTelemetry(r,a);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,d.contextObjects["http.ClientResponse"]=f,t.trackDependency(d)}),r.request.on("error",function(f){n.onError(f);var d=n.getDependencyTelemetry(r,a);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,d.contextObjects.Error=f,t.trackDependency(d)}),r.request.on("abort",function(){n.onError(new Error);var f=n.getDependencyTelemetry(r,a);f.contextObjects=f.contextObjects||{},f.contextObjects["http.RequestOptions"]=r.options,f.contextObjects["http.ClientRequest"]=r.request,t.trackDependency(f)}))},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();om.exports=DR});var lm=l((QM,cm)=>{"use strict";var wR=require("os"),um=gt(),MR=Ie(),xR=Ri(),LR=Rn(),qR="http://169.254.169.254/metadata/instance/compute",kR="api-version=2017-12-01",jR="format=json",HR="ENETUNREACH",UR=function(){function e(t){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._handle=setInterval(function(){return n.trackHeartBeat(r,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(t,r){var n=this,i=!1,a={},s=xR.sdkVersion;a.sdk=s,a.osType=wR.type(),process.env.WEBSITE_SITE_NAME?(a.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",a.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",a.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?a.azfunction_appId=process.env.WEBSITE_HOSTNAME:t&&(this._isVM===void 0?(i=!0,this._getAzureComputeMetadata(t,function(){n._isVM&&Object.keys(n._vmData).length>0&&(a.azInst_vmId=n._vmData.vmId||"",a.azInst_subscriptionId=n._vmData.subscriptionId||"",a.azInst_osType=n._vmData.osType||"",n._azInst_vmId=n._vmData.vmId||"",n._azInst_subscriptionId=n._vmData.subscriptionId||"",n._azInst_osType=n._vmData.osType||""),n._client.trackMetric({name:um.HeartBeatMetricName,value:0,properties:a}),r()})):this._isVM&&(a.azInst_vmId=this._azInst_vmId,a.azInst_subscriptionId=this._azInst_subscriptionId,a.azInst_osType=this._azInst_osType)),i||(this._client.trackMetric({name:um.HeartBeatMetricName,value:0,properties:a}),r())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.prototype._getAzureComputeMetadata=function(t,r){var n,i=this,a=qR+"?"+kR+"&"+jR,s=(n={method:"GET"},n[LR.disableCollectionRequestOption]=!0,n.headers={Metadata:"True"},n),o=MR.makeRequest(t,a,s,function(u){if(u.statusCode===200){i._isVM=!0;var c="";u.on("data",function(p){c+=p}),u.on("end",function(){i._vmData=i._isJSON(c)?JSON.parse(c):{},r()})}else r()});o&&(o.on("error",function(u){u&&u.message&&u.message.indexOf(HR)>-1&&(i._isVM=!1),r()}),o.end())},e.prototype._isJSON=function(t){try{return JSON.parse(t)&&!!t}catch(r){return!1}},e}();cm.exports=UR});var rl=l((WM,_m)=>{"use strict";var pm=require("http"),fm=require("https"),dm=ne(),hm=Ie(),BR=cn(),tl=lc(),mt=Xt(),GR=Gs(),FR=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(t){this._isEnabled=t,(this._isAutoCorrelating||this._isEnabled||GR.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(t,r){t&&!this._isAutoCorrelating?mt.CorrelationContextManager.enable(r):!t&&this._isAutoCorrelating&&mt.CorrelationContextManager.disable(),this._isAutoCorrelating=t},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(t){if(!!this._isAutoCorrelating)return mt.CorrelationContextManager.generateContextObject(t.getOperationId(this._client.context.tags),t.getRequestId(),t.getOperationName(this._client.context.tags),t.getCorrelationContextHeader(),t.getTraceparent(),t.getTracestate())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=function(s){if(!!s){if(typeof s!="function")throw new Error("onRequest handler must be a function");return function(o,u){mt.CorrelationContextManager.wrapEmitter(o),mt.CorrelationContextManager.wrapEmitter(u);var c=o&&!o[e.alreadyAutoCollectedFlag];if(o&&c){var p=new tl(o),f=t._generateCorrelationContext(p);mt.CorrelationContextManager.runWithContext(f,function(){t._isEnabled&&(o[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:o,response:u},p)),typeof s=="function"&&s(o,u)})}else typeof s=="function"&&s(o,u)}}},n=function(s){var o=s.addListener.bind(s);s.addListener=function(u,c){switch(u){case"request":case"checkContinue":return o(u,r(c));default:return o(u,c)}},s.on=s.addListener},i=pm.createServer;pm.createServer=function(s,o){if(o&&typeof o=="function"){var u=i(s,r(o));return n(u),u}else{var u=i(r(s));return n(u),u}};var a=fm.createServer;fm.createServer=function(s,o){var u=a(s,r(o));return n(u),u}},e.trackRequestSync=function(t,r){if(!r.request||!r.response||!t){dm.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!t);return}e.addResponseCorrelationIdHeader(t,r.response);var n=mt.CorrelationContextManager.getCurrentContext(),i=new tl(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(t.context.tags)||n.operation.id,n.operation.name=i.getOperationName(t.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),e.endRequest(t,i,r,r.duration,r.error)},e.trackRequest=function(t,r,n){if(!r.request||!r.response||!t){dm.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!t);return}var i=mt.CorrelationContextManager.getCurrentContext(),a=n||new tl(r.request,i&&i.operation.parentId);hm.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,r.response),i&&!n&&(i.operation.id=a.getOperationId(t.context.tags)||i.operation.id,i.operation.name=a.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=a.getOperationParentId(t.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(a.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){e.endRequest(t,a,r,null,null)}),r.request.on&&r.request.on("error",function(s){e.endRequest(t,a,r,null,s)}),r.request.on&&r.request.on("aborted",function(){var s="The request has been aborted and the network socket has closed.";e.endRequest(t,a,r,null,s)})},e.addResponseCorrelationIdHeader=function(t,r){if(t.config&&t.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(BR.requestContextHeader);hm.safeIncludeCorrelationHeader(t,r,n)}},e.endRequest=function(t,r,n,i,a){a?r.onError(a,i):r.onResponse(n.response,i);var s=r.getRequestTelemetry(n);if(s.tagOverrides=r.getRequestTags(t.context.tags),n.tagOverrides)for(var o in n.tagOverrides)s.tagOverrides[o]=n.tagOverrides[o];var u=r.getLegacyRootId();u&&(s.properties.ai_legacyRootId=u),s.contextObjects=s.contextObjects||{},s.contextObjects["http.ServerRequest"]=n.request,s.contextObjects["http.ServerResponse"]=n.response,t.trackRequest(s)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,mt.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();_m.exports=FR});var mm=l((il,vm)=>{"use strict";var ke=il&&il.__assign||function(){return ke=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ke.apply(this,arguments)},nl=require("os"),Cr=me(),gm=gt(),VR=Ie(),$R=ne(),zR=VR.w3cTraceId(),KR=function(){function e(){}return e.createQuickPulseEnvelope=function(t,r,n,i){var a=nl&&typeof nl.hostname=="function"&&nl.hostname()||"Unknown",s=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||a,o=i.tags&&i.keys&&i.keys.cloudRole&&i.tags[i.keys.cloudRole]||null,u={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:t.length>0?t:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:zR,MachineName:a,Instance:s,RoleName:o};return u},e.createQuickPulseMetric=function(t){var r;return r={Name:t.name,Value:t.value,Weight:t.count||1},r},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case Cr.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case Cr.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case Cr.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case Cr.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case Cr.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.name,i=ke(ke({},r),{Name:n});return i},e.createQuickPulseTraceDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.severityLevel||0,i=ke(ke({},r),{Message:t.data.baseData.message,SeverityLevel:Cr.SeverityLevel[n]});return i},e.createQuickPulseExceptionDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.exceptions,i="",a="",s="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(u){i+=u.assembly+`
`}):n[0].stack&&n[0].stack.length>0&&(i=n[0].stack),a=n[0].message,s=n[0].typeName);var o=ke(ke({},r),{Exception:i,ExceptionMessage:a,ExceptionType:s});return o},e.createQuickPulseRequestDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData,i=ke(ke({},r),{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i},e.createQuickPulseDependencyDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData,i=ke(ke({},r),{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return i},e.createQuickPulseDocument=function(t){var r,n,i,a;t.data.baseType?(n=gm.TelemetryTypeStringToQuickPulseType[t.data.baseType],r=gm.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):$R.warn("Document type invalid; not sending live metric document",t.data.baseType),i=t.tags[e.keys.operationId],a=e.aggregateProperties(t);var s={DocumentType:r,__type:n,OperationId:i,Version:"1.0",Properties:a};return s},e.aggregateProperties=function(t){var r=[],n=t.data.baseData.measurements||{};for(var i in n)if(n.hasOwnProperty(i)){var a=n[i],s={key:i,value:a};r.push(s)}var o=t.data.baseData.properties||{};for(var i in o)if(o.hasOwnProperty(i)){var a=o[i],s={key:i,value:a};r.push(s)}return r},e.keys=new Cr.ContextTagKeys,e}();vm.exports=KR});var ym=l((ZM,Em)=>{"use strict";var XR=function(){return(Date.now()+621355968e5)*1e4};Em.exports={getTransmissionTime:XR}});var Im=l((Di,bm)=>{"use strict";var Tm=Di&&Di.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(p){try{c(n.next(p))}catch(f){s(f)}}function u(p){try{c(n.throw(p))}catch(f){s(f)}}function c(p){p.done?a(p.value):i(p.value).then(o,u)}c((n=n.apply(e,t||[])).next())})},Sm=Di&&Di.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(p){return u([c,p])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(p){c=[6,p],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},YR=require("https"),QR=Rn(),Am=ne(),WR=ym(),ZR=Ie(),je={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},JR=function(){function e(t){this._config=t,this._consecutiveErrors=0}return e.prototype.ping=function(t,r,n){var i=[{name:je.streamId,value:t.StreamId},{name:je.machineName,value:t.MachineName},{name:je.roleName,value:t.RoleName},{name:je.instanceName,value:t.Instance},{name:je.invariantVersion,value:t.InvariantVersion.toString()}];this._submitData(t,r,n,"ping",i)},e.prototype.post=function(t,r,n){return Tm(this,void 0,void 0,function(){return Sm(this,function(i){switch(i.label){case 0:return[4,this._submitData([t],r,n,"post")];case 1:return i.sent(),[2]}})})},e.prototype._submitData=function(t,r,n,i,a){return Tm(this,void 0,void 0,function(){var s,o,u,c,p,f=this;return Sm(this,function(d){return s=JSON.stringify(t),o=(c={},c[QR.disableCollectionRequestOption]=!0,c.host=r&&r.length>0?r:this._config.quickPulseHost,c.method=je.method,c.path="/QuickPulseService.svc/"+i+"?ikey="+this._config.instrumentationKey,c.headers=(p={Expect:"100-continue"},p[je.time]=WR.getTransmissionTime(),p["Content-Type"]="application/json",p["Content-Length"]=Buffer.byteLength(s),p),c),a&&a.length>0&&a.forEach(function(_){return o.headers[_.name]=_.value}),this._config.httpsAgent?o.agent=this._config.httpsAgent:o.agent=ZR.tlsRestrictedAgent,u=YR.request(o,function(_){if(_.statusCode==200){var g=_.headers[je.subscribed]==="true",y=_.headers[je.endpointRedirect]?_.headers[je.endpointRedirect].toString():null,R=_.headers[je.pollingIntervalHint]?parseInt(_.headers[je.pollingIntervalHint].toString()):null;f._consecutiveErrors=0,n(g,_,y,R)}else f._onError("StatusCode:"+_.statusCode+" StatusMessage:"+_.statusMessage),n()}),u.on("error",function(_){f._onError(_),n()}),u.write(s),u.end(),[2]})})},e.prototype._onError=function(t){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",Am.warn(e.TAG,r,t)):Am.info(e.TAG,r,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();bm.exports=JR});var Nm=l((wi,Rm)=>{"use strict";var Cm=wi&&wi.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(p){try{c(n.next(p))}catch(f){s(f)}}function u(p){try{c(n.throw(p))}catch(f){s(f)}}function c(p){p.done?a(p.value):i(p.value).then(o,u)}c((n=n.apply(e,t||[])).next())})},Om=wi&&wi.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(p){return u([c,p])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(p){c=[6,p],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Pm=ne(),al=mm(),eN=Im(),tN=gt(),rN=Ri(),nN=function(){function e(t,r){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=t,this.context=r||new rN,this._sender=new eN(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(t){this._collectors.push(t)},e.prototype.trackMetric=function(t){this._addMetric(t)},e.prototype.addDocument=function(t){var r=al.telemetryEnvelopeToQuickPulseDocument(t);r&&this._documents.push(r)},e.prototype.enable=function(t){t&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!t&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(t){this._collectors.forEach(function(r){r.enable(t)})},e.prototype._addMetric=function(t){var r=t.value,n=t.count||1,i=tN.PerformanceToQuickPulseCounter[t.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+r*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=al.createQuickPulseMetric(t),this._metrics[i].Name=i,this._metrics[i].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return Cm(this,void 0,void 0,function(){var t,r,n,i,a=this;return Om(this,function(s){switch(s.label){case 0:return t=Object.keys(this._metrics).map(function(o){return a._metrics[o]}),r=al.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return s.sent(),[3,3];case 2:this._ping(r),s.label=3;case 3:return n=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,i=this._isCollectingData?e.POST_INTERVAL:n,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref(),[2]}})})},e.prototype._ping=function(t){this._sender.ping(t,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(t){return Cm(this,void 0,void 0,function(){return Om(this,function(r){switch(r.label){case 0:return[4,this._sender.post(t,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return r.sent(),[2]}})})},e.prototype._quickPulseDone=function(t,r,n,i){t!=null?(this._isCollectingData!==t&&(Pm.info("Live Metrics sending data",t),this.enableCollectors(t)),this._isCollectingData=t,n&&n.length>0&&(this._redirectedHost=n,Pm.info("Redirecting endpoint to: ",n)),i&&i>0&&(this._pollingIntervalHint=i),r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();Rm.exports=nN});var Mm=l((JM,wm)=>{"use strict";var Dm=gt(),iN=function(){function e(){}return e.parse=function(t){if(!t)return{};var r=t.split(e._FIELDS_SEPARATOR),n=r.reduce(function(a,s){var o=s.split(e._FIELD_KEY_VALUE_SEPARATOR);if(o.length===2){var u=o[0].toLowerCase(),c=o[1];a[u]=c}return a},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||Dm.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||Dm.DEFAULT_LIVEMETRICS_ENDPOINT}return n},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();wm.exports=iN});var ol=l((tx,qm)=>{"use strict";var sl=Er(),xm=Mm(),ex=ne(),Lm=gt(),aN=require("url"),sN=function(){function e(t){var r=this;this.endpointBase=Lm.DEFAULT_BREEZE_ENDPOINT;var n=process.env[e.ENV_connectionString],i=xm.parse(t),a=xm.parse(n),s=!i.instrumentationkey&&Object.keys(i).length>0?null:t;this.instrumentationKey=i.instrumentationkey||s||a.instrumentationkey||e._getInstrumentationKey(),!e._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(i.ingestionendpoint||a.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(o){return r.correlationId=o},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=i.ingestionendpoint||a.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=i.liveendpoint||a.liveendpoint||process.env[e.ENV_quickPulseHost]||Lm.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=aN.parse(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(t){sl.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=t,this.correlationId=sl.correlationIdPrefix,sl.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(t){this._quickPulseHost=t},enumerable:!1,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||t=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e._validateInstrumentationKey=function(t){var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(t)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();qm.exports=sN});var jm=l(Nn=>{"use strict";var Xs=Nn&&Nn.__assign||function(){return Xs=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Xs.apply(this,arguments)};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.AutoCollectNativePerformance=void 0;var km=ol(),Mi=Ri(),oN=ne(),uN=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.isNodeVersionCompatible=function(){var t=process.versions.node.split(".");return parseInt(t[0])>=6},e.prototype.enable=function(t,r,n){var i=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),!!e.isNodeVersionCompatible()){if(e._metricsAvailable==null&&t&&!this._isInitialized)try{var a=require("applicationinsights-native-metrics");e._emitter=new a,e._metricsAvailable=!0,oN.info("Native metrics module successfully loaded!")}catch(s){e._metricsAvailable=!1;return}this._isEnabled=t,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,n),this._handle||(this._handle=setInterval(function(){return i._trackNativeMetrics()},n),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(t){var r=process.env[km.ENV_nativeMetricsDisableAll],n=process.env[km.ENV_nativeMetricsDisablers];if(r)return{isEnabled:!1,disabledMetrics:{}};if(n){var i=n.split(","),a={};if(i.length>0)for(var s=0,o=i;s<o.length;s++){var u=o[s];a[u]=!0}return typeof t=="object"?{isEnabled:!0,disabledMetrics:Xs(Xs({},t),a)}:{isEnabled:t,disabledMetrics:a}}return typeof t=="boolean"?{isEnabled:t,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:t}},e.prototype._trackNativeMetrics=function(){var t=!0;typeof this._isEnabled!="object"&&(t=this._isEnabled),t&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var r=e._emitter.getGCData();for(var n in r){var i=r[n].metrics,a=n+" Garbage Collection Duration",s=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:a,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:s,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Mi.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var r=e._emitter.getLoopData(),n=r.loopUsage;if(n.count!=0){var i="Event Loop CPU Time",a=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:i,value:n.total,count:n.count,min:n.min,max:n.max,stdDev:a,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Mi.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var t,r,n;if(!this._disabledMetrics.heap){var i=process.memoryUsage(),a=i.heapUsed,s=i.heapTotal,o=i.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:a,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Mi.sdkVersion,t)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Mi.sdkVersion,r)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:o-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Mi.sdkVersion,n)})}},e}();Nn.AutoCollectNativePerformance=uN});var Um=l((nx,Hm)=>{"use strict";var cN=ne(),lN=function(){function e(t,r,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=t,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=i}return e.prototype.setUseDiskRetryCaching=function(t,r,n){this._sender.setDiskRetryMode(t,r,n)},e.prototype.send=function(t){var r=this;if(!this._isDisabled()){if(!t){cN.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(t),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(!1)},this._getBatchIntervalMs()))}},e.prototype.triggerSend=function(t,r){var n=this._buffer.length<1;n||(t?(this._sender.saveOnCrash(this._buffer),typeof r=="function"&&r("data saved on crash")):this._sender.send(this._buffer,r)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send")},e}();Hm.exports=lN});var Bm=l(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.azureRoleEnvironmentTelemetryProcessor=void 0;function pN(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}Ys.azureRoleEnvironmentTelemetryProcessor=pN});var Vm=l(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.getSamplingHashCode=Dn.samplingTelemetryProcessor=void 0;var Gm=me();function fN(e,t){var r=e.sampleRate,n=!1;return r==null||r>=100||e.data&&Gm.TelemetryType.Metric===Gm.baseTypeToTelemetryType(e.data.baseType)?!0:(t.correlationContext&&t.correlationContext.operation?n=Fm(t.correlationContext.operation.id)<r:n=Math.random()*100<r,n)}Dn.samplingTelemetryProcessor=fN;function Fm(e){var t=-2147483648,r=2147483647,n=5381;if(!e)return 0;for(;e.length<8;)e=e+e;for(var i=0;i<e.length;i++)n=((n<<5)+n|0)+e.charCodeAt(i)|0;return n=n<=t?r:Math.abs(n),n/r*100}Dn.getSamplingHashCode=Fm});var $m=l(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.performanceMetricsTelemetryProcessor=void 0;var ul=Gs(),cl=me();function dN(e,t){switch(t&&t.addDocument(e),e.data.baseType){case cl.TelemetryTypeString.Exception:ul.countException();break;case cl.TelemetryTypeString.Request:var r=e.data.baseData;ul.countRequest(r.duration,r.success);break;case cl.TelemetryTypeString.Dependency:var n=e.data.baseData;ul.countDependency(n.duration,n.success);break}return!0}Qs.performanceMetricsTelemetryProcessor=dN});var zm=l(wn=>{"use strict";var tt=wn&&wn.__assign||function(){return tt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},tt.apply(this,arguments)};Object.defineProperty(wn,"__esModule",{value:!0});wn.preAggregatedMetricsTelemetryProcessor=void 0;var hN=me(),xi=Kc(),Ws=me();function _N(e,t){if(xi.isEnabled())switch(e.data.baseType){case Ws.TelemetryTypeString.Exception:var r=e.data.baseData;r.properties=tt(tt({},r.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var n={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole]};xi.countException(n);break;case Ws.TelemetryTypeString.Trace:var i=e.data.baseData;i.properties=tt(tt({},i.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],traceSeverityLevel:hN.SeverityLevel[i.severity]};xi.countTrace(a);break;case Ws.TelemetryTypeString.Request:var s=e.data.baseData;s.properties=tt(tt({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var o={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],requestSuccess:s.success,requestResultCode:s.responseCode};xi.countRequest(s.duration,o);break;case Ws.TelemetryTypeString.Dependency:var u=e.data.baseData;u.properties=tt(tt({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var c={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],dependencySuccess:u.success,dependencyType:u.type,dependencyTarget:u.target,dependencyResultCode:u.resultCode};xi.countDependency(u.duration,c);break}return!0}wn.preAggregatedMetricsTelemetryProcessor=_N});var Km=l(rt=>{"use strict";var gN=rt&&rt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Zs=rt&&rt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&gN(t,e,r)};Object.defineProperty(rt,"__esModule",{value:!0});Zs(Bm(),rt);Zs(Vm(),rt);Zs($m(),rt);Zs(zm(),rt)});var Qm=l((Li,Ym)=>{"use strict";var vN=Li&&Li.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(p){try{c(n.next(p))}catch(f){s(f)}}function u(p){try{c(n.throw(p))}catch(f){s(f)}}function c(p){p.done?a(p.value):i(p.value).then(o,u)}c((n=n.apply(e,t||[])).next())})},mN=Li&&Li.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(p){return u([c,p])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(p){c=[6,p],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ae=require("fs"),Xm=require("os"),Et=require("path"),EN=require("zlib"),Mn=require("child_process"),se=ne(),yN=Rn(),Js=Ie(),TN=function(){function e(t,r,n){if(this._redirectedHost=null,this._config=t,this._onSuccess=r,this._onError=n,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=Et.join(Xm.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=ae.existsSync(e.ICACLS_PATH)}catch(i){}e.OS_PROVIDES_FILE_PROTECTION||se.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,r,n){var i=this;this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,se.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){i._fileCleanupTask()},e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},e.prototype.send=function(t,r){return vN(this,void 0,void 0,function(){var n,i,a,s,o=this;return mN(this,function(u){return t&&(n=this._redirectedHost||this._config.endpointUrl,i={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},a="",t.forEach(function(c){var p=o._stringify(c);typeof p=="string"&&(a+=p+`
`)}),a.length>0&&(a=a.substring(0,a.length-1)),s=Buffer.from?Buffer.from(a):new Buffer(a),EN.gzip(s,function(c,p){var f=p;c?(se.warn(c),f=s,i.headers["Content-Length"]=s.length.toString()):(i.headers["Content-Encoding"]="gzip",i.headers["Content-Length"]=p.length.toString()),se.info(e.TAG,i),i[yN.disableCollectionRequestOption]=!0;var d=function(g){g.setEncoding("utf-8");var y="";g.on("data",function(R){y+=R}),g.on("end",function(){if(o._numConsecutiveFailures=0,o._enableDiskRetryMode){if(g.statusCode===200)o._resendTimer||(o._resendTimer=setTimeout(function(){o._resendTimer=null,o._sendFirstFileOnDisk()},o._resendInterval),o._resendTimer.unref());else if(o._isRetriable(g.statusCode))try{var R=JSON.parse(y),K=[];R.errors.forEach(function(it){o._isRetriable(it.statusCode)&&K.push(t[it.index])}),K.length>0&&o._storeToDisk(K)}catch(it){o._storeToDisk(t)}}if(g.statusCode===307||g.statusCode===308)if(o._numConsecutiveRedirects++,o._numConsecutiveRedirects<10){var le=g.headers.location?g.headers.location.toString():null;le&&(o._redirectedHost=le,o.send(t,r))}else typeof r=="function"&&r("Error sending telemetry because of circular redirects.");else o._numConsecutiveRedirects=0,typeof r=="function"&&r(y),se.info(e.TAG,y),typeof o._onSuccess=="function"&&o._onSuccess(y)})},_=Js.makeRequest(o._config,n,i,d);_.on("error",function(g){if(o._numConsecutiveFailures++,!o._enableDiskRetryMode||o._numConsecutiveFailures>0&&o._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var y="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";o._enableDiskRetryMode&&(y="Ingestion endpoint could not be reached "+o._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),se.warn(e.TAG,y,Js.dumpObj(g))}else{var y="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";se.info(e.TAG,y,Js.dumpObj(g))}o._onErrorHelper(g),typeof r=="function"&&(g&&r(Js.dumpObj(g)),r("Error sending telemetry")),o._enableDiskRetryMode&&o._storeToDisk(t)}),_.write(f),_.end()})),[2]})})},e.prototype.saveOnCrash=function(t){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(t))},e.prototype._isRetriable=function(t){return t===206||t===408||t===429||t===439||t===500||t===503},e.prototype._runICACLS=function(t,r){var n=Mn.spawn(e.ICACLS_PATH,t,{windowsHide:!0});n.on("error",function(i){return r(i)}),n.on("close",function(i,a){return r(i===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+i+")"))})},e.prototype._runICACLSSync=function(t){if(Mn.spawnSync){var r=Mn.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var r=Mn.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";r.stdout.on("data",function(i){return n+=i}),r.on("error",function(i){return t(i,null)}),r.on("close",function(i,a){return e.ACL_IDENTITY=n&&n.trim(),t(i===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+i+")"),e.ACL_IDENTITY)})},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(Mn.spawnSync){var t=Mn.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(t.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(t,r){return[t,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",r+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,r){var n=this;if(!e.USE_ICACLS)return r(null);if(e.ACLED_DIRECTORIES[t]===void 0)e.ACLED_DIRECTORIES[t]=!1,this._getACLIdentity(function(i,a){if(i)return e.ACLED_DIRECTORIES[t]=!1,r(i);n._runICACLS(n._getACLArguments(t,a),function(s){return e.ACLED_DIRECTORIES[t]=!s,r(s)})});else return r(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(e.ACLED_DIRECTORIES[t]===void 0){this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),e.ACLED_DIRECTORIES[t]=!0;return}else if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(t,r){var n=this;ae.lstat(t,function(i,a){i&&i.code==="ENOENT"?ae.mkdir(t,function(s){s&&s.code!=="EEXIST"?r(s):n._applyACLRules(t,r)}):!i&&a.isDirectory()?n._applyACLRules(t,r):r(i||new Error("Path existed but was not a directory"))})},e.prototype._getShallowDirectorySize=function(t,r){ae.readdir(t,function(n,i){if(n)return r(n,-1);var a=null,s=0,o=0;if(i.length===0){r(null,0);return}for(var u=0;u<i.length;u++)ae.stat(Et.join(t,i[u]),function(c,p){o++,c?a=c:p.isFile()&&(s+=p.size),o===i.length&&(a?r(a,-1):r(a,s))})})},e.prototype._getShallowDirectorySizeSync=function(t){for(var r=ae.readdirSync(t),n=0,i=0;i<r.length;i++)n+=ae.statSync(Et.join(t,r[i])).size;return n},e.prototype._storeToDisk=function(t){var r=this;se.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(n){if(n){se.warn(e.TAG,"Error while checking/creating directory: "+(n&&n.message)),r._onErrorHelper(n);return}r._getShallowDirectorySize(r._tempDir,function(i,a){if(i||a<0){se.warn(e.TAG,"Error while checking directory size: "+(i&&i.message)),r._onErrorHelper(i);return}else if(a>r._maxBytesOnDisk){se.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+a);return}var s=new Date().getTime()+".ai.json",o=Et.join(r._tempDir,s);se.info(e.TAG,"saving data to disk at: "+o),ae.writeFile(o,r._stringify(t),{mode:384},function(u){return r._onErrorHelper(u)})})})},e.prototype._storeToDiskSync=function(t){try{se.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),ae.existsSync(this._tempDir)||ae.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var r=this._getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk){se.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+r);return}var n=new Date().getTime()+".ai.json",i=Et.join(this._tempDir,n);se.info(e.TAG,"saving data before crash to disk at: "+i),ae.writeFileSync(i,t,{mode:384})}catch(a){se.warn(e.TAG,"Error while saving data to disk: "+(a&&a.message)),this._onErrorHelper(a)}},e.prototype._sendFirstFileOnDisk=function(){var t=this;ae.exists(this._tempDir,function(r){r&&ae.readdir(t._tempDir,function(n,i){if(n)t._onErrorHelper(n);else if(i=i.filter(function(o){return Et.basename(o).indexOf(".ai.json")>-1}),i.length>0){var a=i[0],s=Et.join(t._tempDir,a);ae.readFile(s,function(o,u){o?t._onErrorHelper(o):ae.unlink(s,function(c){if(c)t._onErrorHelper(c);else try{var p=JSON.parse(u.toString());t.send(p)}catch(f){se.warn("Failed to read persisted file",f)}})})}})})},e.prototype._onErrorHelper=function(t){typeof this._onError=="function"&&this._onError(t)},e.prototype._stringify=function(t){try{return JSON.stringify(t)}catch(r){se.warn("Failed to serialize payload",r,t)}},e.prototype._fileCleanupTask=function(){var t=this;ae.exists(this._tempDir,function(r){r&&ae.readdir(t._tempDir,function(n,i){n?t._onErrorHelper(n):(i=i.filter(function(a){return Et.basename(a).indexOf(".ai.json")>-1}),i.length>0&&i.forEach(function(a){var s=new Date(parseInt(a.split(".ai.json")[0])),o=new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>s;if(o){var u=Et.join(t._tempDir,a);ae.unlink(u,function(c){c&&t._onErrorHelper(c)})}}))})})},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=60*1e3,e.MAX_BYTES_ON_DISK=50*1024*1024,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=60*60*1e3,e.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS=Xm.type()==="Windows_NT",e}();Ym.exports=TN});var Jm=l((cx,Zm)=>{"use strict";var T=me(),He=Ie(),SN=Xt(),AN=function(){function e(){}return e.createEnvelope=function(t,r,n,i,a){var s=null;switch(r){case T.TelemetryType.Trace:s=e.createTraceData(t);break;case T.TelemetryType.Dependency:s=e.createDependencyData(t);break;case T.TelemetryType.Event:s=e.createEventData(t);break;case T.TelemetryType.Exception:s=e.createExceptionData(t);break;case T.TelemetryType.Request:s=e.createRequestData(t);break;case T.TelemetryType.Metric:s=e.createMetricData(t);break;case T.TelemetryType.Availability:s=e.createAvailabilityData(t);break;case T.TelemetryType.PageView:s=e.createPageViewData(t);break}if(n&&T.domainSupportsProperties(s.baseData)){if(s&&s.baseData)if(!s.baseData.properties)s.baseData.properties=n;else for(var o in n)s.baseData.properties[o]||(s.baseData.properties[o]=n[o]);s.baseData.properties=He.validateStringMap(s.baseData.properties)}var u=a&&a.instrumentationKey||"",c=new T.Envelope;return c.data=s,c.iKey=u,c.name="Microsoft.ApplicationInsights."+u.replace(/-/g,"")+"."+s.baseType.substr(0,s.baseType.length-4),c.tags=this.getTags(i,t.tagOverrides),c.time=new Date().toISOString(),c.ver=1,c.sampleRate=a?a.samplingPercentage:100,r===T.TelemetryType.Metric&&(c.sampleRate=100),c},e.createTraceData=function(t){var r=new T.MessageData;r.message=t.message,r.properties=t.properties,isNaN(t.severity)?r.severityLevel=T.SeverityLevel.Information:r.severityLevel=t.severity;var n=new T.Data;return n.baseType=T.telemetryTypeToBaseType(T.TelemetryType.Trace),n.baseData=r,n},e.createDependencyData=function(t){var r=new T.RemoteDependencyData;typeof t.name=="string"&&(r.name=t.name.length>1024?t.name.slice(0,1021)+"...":t.name),r.data=t.data,r.target=t.target,r.duration=He.msToTimeSpan(t.duration),r.success=t.success,r.type=t.dependencyTypeName,r.properties=t.properties,r.resultCode=t.resultCode?t.resultCode+"":"",t.id?r.id=t.id:r.id=He.w3cTraceId();var n=new T.Data;return n.baseType=T.telemetryTypeToBaseType(T.TelemetryType.Dependency),n.baseData=r,n},e.createEventData=function(t){var r=new T.EventData;r.name=t.name,r.properties=t.properties,r.measurements=t.measurements;var n=new T.Data;return n.baseType=T.telemetryTypeToBaseType(T.TelemetryType.Event),n.baseData=r,n},e.createExceptionData=function(t){var r=new T.ExceptionData;r.properties=t.properties,isNaN(t.severity)?r.severityLevel=T.SeverityLevel.Error:r.severityLevel=t.severity,r.measurements=t.measurements,r.exceptions=[];var n=t.exception.stack,i=new T.ExceptionDetails;i.message=t.exception.message,i.typeName=t.exception.name,i.parsedStack=this.parseStack(n),i.hasFullStack=He.isArray(i.parsedStack)&&i.parsedStack.length>0,r.exceptions.push(i);var a=new T.Data;return a.baseType=T.telemetryTypeToBaseType(T.TelemetryType.Exception),a.baseData=r,a},e.createRequestData=function(t){var r=new T.RequestData;t.id?r.id=t.id:r.id=He.w3cTraceId(),r.name=t.name,r.url=t.url,r.source=t.source,r.duration=He.msToTimeSpan(t.duration),r.responseCode=t.resultCode?t.resultCode+"":"",r.success=t.success,r.properties=t.properties;var n=new T.Data;return n.baseType=T.telemetryTypeToBaseType(T.TelemetryType.Request),n.baseData=r,n},e.createMetricData=function(t){var r=new T.MetricData;r.metrics=[];var n=new T.DataPoint;n.count=isNaN(t.count)?1:t.count,n.kind=T.DataPointType.Aggregation,n.max=isNaN(t.max)?t.value:t.max,n.min=isNaN(t.min)?t.value:t.min,n.name=t.name,n.stdDev=isNaN(t.stdDev)?0:t.stdDev,n.value=t.value,r.metrics.push(n),r.properties=t.properties;var i=new T.Data;return i.baseType=T.telemetryTypeToBaseType(T.TelemetryType.Metric),i.baseData=r,i},e.createAvailabilityData=function(t){var r=new T.AvailabilityData;t.id?r.id=t.id:r.id=He.w3cTraceId(),r.name=t.name,r.duration=He.msToTimeSpan(t.duration),r.success=t.success,r.runLocation=t.runLocation,r.message=t.message,r.measurements=t.measurements,r.properties=t.properties;var n=new T.Data;return n.baseType=T.telemetryTypeToBaseType(T.TelemetryType.Availability),n.baseData=r,n},e.createPageViewData=function(t){var r=new T.PageViewData;r.name=t.name,r.duration=He.msToTimeSpan(t.duration),r.url=t.url,r.measurements=t.measurements,r.properties=t.properties;var n=new T.Data;return n.baseType=T.telemetryTypeToBaseType(T.TelemetryType.PageView),n.baseData=r,n},e.getTags=function(t,r){var n=SN.CorrelationContextManager.getCurrentContext(),i={};if(t&&t.tags)for(var a in t.tags)i[a]=t.tags[a];if(r)for(var a in r)i[a]=r[a];return n&&(i[t.keys.operationId]=i[t.keys.operationId]||n.operation.id,i[t.keys.operationName]=i[t.keys.operationName]||n.operation.name,i[t.keys.operationParentId]=i[t.keys.operationParentId]||n.operation.parentId),i},e.parseStack=function(t){var r=void 0;if(typeof t=="string"){var n=t.split(`
`);r=[];for(var i=0,a=0,s=0;s<=n.length;s++){var o=n[s];if(Wm.regex.test(o)){var u=new Wm(n[s],i++);a+=u.sizeInBytes,r.push(u)}}var c=32*1024;if(a>c)for(var p=0,f=r.length-1,d=0,_=p,g=f;p<f;){var y=r[p].sizeInBytes,R=r[f].sizeInBytes;if(d+=y+R,d>c){var K=g-_+1;r.splice(_,K);break}_=p,g=f,p++,f--}}return r},e}(),Wm=function(){function e(t,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=He.trim(t);var n=t.match(e.regex);n&&n.length>=5&&(this.method=He.trim(n[2])||this.method,this.fileName=He.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();Zm.exports=AN});var nE=l((lx,rE)=>{"use strict";var bN=require("url"),IN=ol(),CN=Ri(),yt=me(),ON=Um(),eo=Km(),eE=Xt(),PN=Qm(),ll=Ie(),tE=ne(),RN=Jm(),NN=function(){function e(t){this._telemetryProcessors=[],this._enableAzureProperties=!1;var r=new IN(t);this.config=r,this.context=new CN,this.commonProperties={};var n=new PN(this.config);this.channel=new ON(function(){return r.disableAppInsights},function(){return r.maxBatchSize},function(){return r.maxBatchIntervalMs},n)}return e.prototype.trackAvailability=function(t){this.track(t,yt.TelemetryType.Availability)},e.prototype.trackPageView=function(t){this.track(t,yt.TelemetryType.PageView)},e.prototype.trackTrace=function(t){this.track(t,yt.TelemetryType.Trace)},e.prototype.trackMetric=function(t){this.track(t,yt.TelemetryType.Metric)},e.prototype.trackException=function(t){t&&t.exception&&!ll.isError(t.exception)&&(t.exception=new Error(t.exception.toString())),this.track(t,yt.TelemetryType.Exception)},e.prototype.trackEvent=function(t){this.track(t,yt.TelemetryType.Event)},e.prototype.trackRequest=function(t){this.track(t,yt.TelemetryType.Request)},e.prototype.trackDependency=function(t){t&&!t.target&&t.data&&(t.target=bN.parse(t.data).host),this.track(t,yt.TelemetryType.Dependency)},e.prototype.flush=function(t){this.channel.triggerSend(t?!!t.isAppCrashing:!1,t?t.callback:void 0)},e.prototype.track=function(t,r){if(t&&yt.telemetryTypeToBaseType(r)){var n=RN.createEnvelope(t,r,this.commonProperties,this.context,this.config);t.time&&(n.time=t.time.toISOString()),this._enableAzureProperties&&eo.azureRoleEnvironmentTelemetryProcessor(n,this.context);var i=this.runTelemetryProcessors(n,t.contextObjects);i=i&&eo.samplingTelemetryProcessor(n,{correlationContext:eE.CorrelationContextManager.getCurrentContext()}),eo.preAggregatedMetricsTelemetryProcessor(n,this.context),i&&(eo.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else tE.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(t){this._enableAzureProperties=t},e.prototype.addTelemetryProcessor=function(t){this._telemetryProcessors.push(t)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(t,r){var n=!0,i=this._telemetryProcessors.length;if(i===0)return n;r=r||{},r.correlationContext=eE.CorrelationContextManager.getCurrentContext();for(var a=0;a<i;++a)try{var s=this._telemetryProcessors[a];if(s&&s.apply(null,[t,r])===!1){n=!1;break}}catch(o){n=!0,tE.warn("One of telemetry processors failed, telemetry item will be sent.",o,t)}return n&&(t&&t.tags&&(t.tags=ll.validateStringMap(t.tags)),t&&t.data&&t.data.baseData&&t.data.baseData.properties&&(t.data.baseData.properties=ll.validateStringMap(t.data.baseData.properties))),n},e}();rE.exports=NN});var sE=l((pl,aE)=>{"use strict";var DN=pl&&pl.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wN=nE(),iE=rl(),MN=Rn(),to=ne(),xN=function(e){DN(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?iE.trackRequestSync(this,r):to.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&to.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?iE.trackRequest(this,r):to.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(r){r&&r.request?MN.trackRequest(this,r):to.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(wN);aE.exports=xN});var uE=l(oE=>{"use strict";Object.defineProperty(oE,"__esModule",{value:!0})});var RE=l(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.dispose=v.Configuration=v.wrapWithCorrelationContext=v.startOperation=v.getCorrelationContext=v.start=v.setup=v.liveMetricsClient=v.defaultClient=v.DistributedTracingModes=void 0;var fl=Xt(),LN=Mv(),qN=Lv(),cE=Gs(),kN=Kc(),jN=lm(),HN=Rn(),UN=rl(),lE=Er(),qi=ne(),BN=Nm(),pE=jm();v.TelemetryClient=sE();v.Contracts=me();v.azureFunctionsTypes=uE();var fE;(function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C"})(fE=v.DistributedTracingModes||(v.DistributedTracingModes={}));var dE=!0,hE=!1,_E=!0,gE=!0,vE=!0,mE=!1,EE=!0,yE=!0,TE=!0,dl=!0,SE,ro=!1,AE=!0,bE,IE=void 0,CE=void 0,ki,ji,Hi,Ui,Bi,xn,Or,Gi,nt=!1,OE;function GN(e){return v.defaultClient?qi.info("The default client is already setup"):(v.defaultClient=new v.TelemetryClient(e),ki=new LN(v.defaultClient),ji=new qN(v.defaultClient),Hi=new cE(v.defaultClient),Ui=new kN(v.defaultClient),Bi=new jN(v.defaultClient),Or=new UN(v.defaultClient),Gi=new HN(v.defaultClient),xn||(xn=new pE.AutoCollectNativePerformance(v.defaultClient))),v.defaultClient&&v.defaultClient.channel&&v.defaultClient.channel.setUseDiskRetryCaching(TE,IE,CE),hl}v.setup=GN;function PE(){return v.defaultClient?(nt=!0,ki.enable(dE,hE),ji.enable(_E),Hi.enable(gE),Ui.enable(vE),Bi.enable(mE,v.defaultClient.config),xn.enable(AE,bE),Or.useAutoCorrelation(dl,SE),Or.enable(EE),Gi.enable(yE),v.liveMetricsClient&&ro&&v.liveMetricsClient.enable(ro)):qi.warn("Start cannot be called before setup"),hl}v.start=PE;function FN(){return dl?fl.CorrelationContextManager.getCurrentContext():null}v.getCorrelationContext=FN;function VN(e,t){return fl.CorrelationContextManager.startOperation(e,t)}v.startOperation=VN;function $N(e,t){return fl.CorrelationContextManager.wrapCallback(e,t)}v.wrapWithCorrelationContext=$N;var hl=function(){function e(){}return e.setDistributedTracingMode=function(t){return lE.w3cEnabled=t===fE.AI_AND_W3C,e},e.setAutoCollectConsole=function(t,r){return r===void 0&&(r=!1),dE=t,hE=r,nt&&ki.enable(t,r),e},e.setAutoCollectExceptions=function(t){return _E=t,nt&&ji.enable(t),e},e.setAutoCollectPerformance=function(t,r){r===void 0&&(r=!0),gE=t;var n=pE.AutoCollectNativePerformance.parseEnabled(r);return AE=n.isEnabled,bE=n.disabledMetrics,nt&&(Hi.enable(t),xn.enable(n.isEnabled,n.disabledMetrics)),e},e.setAutoCollectPreAggregatedMetrics=function(t){return vE=t,nt&&Ui.enable(t),e},e.setAutoCollectHeartbeat=function(t){return mE=t,nt&&Bi.enable(t,v.defaultClient.config),e},e.setAutoCollectRequests=function(t){return EE=t,nt&&Or.enable(t),e},e.setAutoCollectDependencies=function(t){return yE=t,nt&&Gi.enable(t),e},e.setAutoDependencyCorrelation=function(t,r){return dl=t,SE=r,nt&&Or.useAutoCorrelation(t,r),e},e.setUseDiskRetryCaching=function(t,r,n){return TE=t,IE=r,CE=n,v.defaultClient&&v.defaultClient.channel&&v.defaultClient.channel.setUseDiskRetryCaching(t,r,n),e},e.setInternalLogging=function(t,r){return t===void 0&&(t=!1),r===void 0&&(r=!0),qi.enableDebug=t,qi.disableWarnings=!r,e},e.setSendLiveMetrics=function(t){return t===void 0&&(t=!1),v.defaultClient?(!v.liveMetricsClient&&t?(v.liveMetricsClient=new BN(v.defaultClient.config,null),OE=new cE(v.liveMetricsClient,1e3,!0),v.liveMetricsClient.addCollector(OE),v.defaultClient.quickPulseClient=v.liveMetricsClient):v.liveMetricsClient&&v.liveMetricsClient.enable(t),ro=t,e):(qi.warn("Live metrics client cannot be setup without the default client"),e)},e.start=PE,e}();v.Configuration=hl;function zN(){lE.w3cEnabled=!0,v.defaultClient=null,nt=!1,ki&&ki.dispose(),ji&&ji.dispose(),Hi&&Hi.dispose(),Ui&&Ui.dispose(),Bi&&Bi.dispose(),xn&&xn.dispose(),Or&&Or.dispose(),Gi&&Gi.dispose(),v.liveMetricsClient&&(v.liveMetricsClient.enable(!1),ro=!1,v.liveMetricsClient=void 0)}v.dispose=zN});jE(exports,{default:()=>_l});var no=jn(require("os")),Ln=jn(require("vscode"));var H=jn(require("vscode"));var Hn=jn(require("vscode")),Re;(function(n){n.ON="on",n.ERROR="error",n.OFF="off"})(Re||(Re={}));function Fi(){let e="telemetry",t="enableTelemetry";return Hn.env.isTelemetryEnabled!==void 0?Hn.env.isTelemetryEnabled?Re.ON:Re.OFF:Hn.workspace.getConfiguration(e).get(t)?Re.ON:Re.OFF}var ao=class{constructor(t,r,n,i,a){this.extensionId=t;this.extensionVersion=r;this.telemetryAppender=n;this.osShim=i;this.firstParty=!1;this.userOptIn=!1;this.errorOptIn=!1;this.disposables=[];this.firstParty=!!a,this.updateUserOptStatus(),H.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(H.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(H.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(H.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let t=Fi();this.userOptIn=t===Re.ON,this.errorOptIn=t===Re.ERROR||t===Re.ON,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(t){if(!t)return"none";let r="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach(n=>{t.indexOf(`${n}+`)===0&&(r=n)}),r}get extension(){return this._extension===void 0&&(this._extension=H.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(t,r){if(t===null||typeof t!="object"||typeof r!="function")return t;let n={};for(let i in t)n[i]=r(i,t[i]);return n}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?this.cleanRemoteName(H.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===H.ExtensionKind.Workspace||H.env.uiKind===H.UIKind.Web):!0}getCommonProperties(){let t=Object.create(null);if(t["common.os"]=this.osShim.platform,t["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),t["common.extname"]=this.extensionId,t["common.extversion"]=this.extensionVersion,H&&H.env){switch(t["common.vscodemachineid"]=H.env.machineId,t["common.vscodesessionid"]=H.env.sessionId,t["common.vscodeversion"]=H.version,t["common.isnewappinstall"]=H.env.isNewAppInstall?H.env.isNewAppInstall.toString():"false",t["common.product"]=H.env.appHost,H.env.uiKind){case H.UIKind.Web:t["common.uikind"]="web";break;case H.UIKind.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}t["common.remotename"]=this.cleanRemoteName(H.env.remoteName)}return t}anonymizeFilePaths(t,r){let n;if(t==null)return"";let i=[];H.env.appRoot!==""&&i.push(new RegExp(H.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&i.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let a=t;if(r){let s=[];for(let p of i)for(;(n=p.exec(t))&&n;)s.push([n.index,p.lastIndex]);let o=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,u=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(a="";(n=u.exec(t))&&n;)n[0]&&!o.test(n[0])&&s.every(([p,f])=>n.index<p||n.index>=f)&&(a+=t.substring(c,n.index)+"<REDACTED: user-file-path>",c=u.lastIndex);c<t.length&&(a+=t.substr(c))}for(let s of i)a=a.replace(s,"");return a}removePropertiesWithPossibleUserInfo(t){if(typeof t!="object")return;let r=Object.create(null);for(let n of Object.keys(t)){let i=t[n];if(!i)continue;let a=/@[a-zA-Z0-9-.]+/;/\S*(key|token|sig|password|passwd|pwd)[="':\s]+\S*/.test(i.toLowerCase())?r[n]="<REDACTED: secret>":a.test(i)?r[n]="<REDACTED: email>":r[n]=i}return r}sendTelemetryEvent(t,r,n){if(this.userOptIn&&t!==""){r=zt(zt({},r),this.getCommonProperties());let i=this.cloneAndChange(r,(a,s)=>this.anonymizeFilePaths(s,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(i),measurements:n})}}sendTelemetryErrorEvent(t,r,n,i){if(this.errorOptIn&&t!==""){r=zt(zt({},r),this.getCommonProperties());let a=this.cloneAndChange(r,(s,o)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(o,this.firstParty):i===void 0||i.indexOf(s)!==-1?"REDACTED":this.anonymizeFilePaths(o,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(a),measurements:n})}}sendTelemetryException(t,r,n){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&t){r=zt(zt({},r),this.getCommonProperties());let i=this.cloneAndChange(r,(a,s)=>this.anonymizeFilePaths(s,this.firstParty));t.stack&&(t.stack=this.anonymizeFilePaths(t.stack,this.firstParty)),this.telemetryAppender.logException(t,{properties:this.removePropertiesWithPossibleUserInfo(i),measurements:n})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(t=>t.dispose()))}};var NE=class{constructor(t){this._key=t;this._isInstantiated=!1;Fi()!==Re.OFF&&this.instantiateAppender()}logEvent(t,r){!this._appInsightsClient||this._appInsightsClient.trackEvent({name:t,properties:r==null?void 0:r.properties,measurements:r==null?void 0:r.measurements})}logException(t,r){!this._appInsightsClient||this._appInsightsClient.trackException({exception:t,properties:r==null?void 0:r.properties,measurements:r==null?void 0:r.measurements})}flush(){return this._appInsightsClient&&(this._appInsightsClient.flush(),this._appInsightsClient=void 0),Promise.resolve(void 0)}instantiateAppender(){this._isInstantiated||Promise.resolve().then(()=>jn(RE())).then(t=>{t.defaultClient?(this._appInsightsClient=new t.TelemetryClient(this._key),this._appInsightsClient.channel.setUseDiskRetryCaching(!0)):(t.setup(this._key).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this._appInsightsClient=t.defaultClient),Ln&&Ln.env&&(this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.userId]=Ln.env.machineId,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.sessionId]=Ln.env.sessionId,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.cloudRole]=Ln.env.appName,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.cloudRoleInstance]=Ln.env.appName),this._key&&this._key.indexOf("AIF-")===0&&(this._appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1"),this._isInstantiated=!0})}},_l=class extends ao{constructor(t,r,n,i){let a=new NE(n);n&&n.indexOf("AIF-")===0&&(i=!0);super(t,r,a,{release:no.release(),platform:no.platform()},i)}};0&&(module.exports={});
