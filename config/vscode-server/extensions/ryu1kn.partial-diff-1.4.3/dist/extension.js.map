{"version":3,"sources":[".././node_modules/applicationinsights/out/AutoCollection/Console.js",".././node_modules/applicationinsights/out/AutoCollection/CorrelationContextManager.js",".././node_modules/applicationinsights/out/AutoCollection/Exceptions.js",".././node_modules/applicationinsights/out/AutoCollection/HttpDependencies.js",".././node_modules/applicationinsights/out/AutoCollection/HttpDependencyParser.js",".././node_modules/applicationinsights/out/AutoCollection/HttpRequestParser.js",".././node_modules/applicationinsights/out/AutoCollection/HttpRequests.js",".././node_modules/applicationinsights/out/AutoCollection/NativePerformance.js",".././node_modules/applicationinsights/out/AutoCollection/Performance.js",".././node_modules/applicationinsights/out/AutoCollection/RequestParser.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/bunyan.sub.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/console.sub.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/initialization.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mongodb.sub.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mysql.sub.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/postgres.sub.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/redis.sub.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/winston.sub.js",".././node_modules/applicationinsights/out/Declarations/Constants.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Constants.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/AvailabilityData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/Base.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/ContextTagKeys.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/Data.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPoint.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPointType.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/Domain.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/Envelope.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/EventData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionDetails.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/MessageData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/MetricData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/PageViewData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/RemoteDependencyData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/RequestData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/SeverityLevel.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/StackFrame.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/index.js",".././node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/TelemetryType.js",".././node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/index.js",".././node_modules/applicationinsights/out/Declarations/Contracts/index.js",".././node_modules/applicationinsights/out/Library/Channel.js",".././node_modules/applicationinsights/out/Library/Config.js",".././node_modules/applicationinsights/out/Library/ConnectionStringParser.js",".././node_modules/applicationinsights/out/Library/Context.js",".././node_modules/applicationinsights/out/Library/CorrelationIdManager.js",".././node_modules/applicationinsights/out/Library/EnvelopeFactory.js",".././node_modules/applicationinsights/out/Library/Logging.js",".././node_modules/applicationinsights/out/Library/NodeClient.js",".././node_modules/applicationinsights/out/Library/QuickPulseEnvelopeFactory.js",".././node_modules/applicationinsights/out/Library/QuickPulseSender.js",".././node_modules/applicationinsights/out/Library/QuickPulseStateManager.js",".././node_modules/applicationinsights/out/Library/RequestResponseHeaders.js",".././node_modules/applicationinsights/out/Library/Sender.js",".././node_modules/applicationinsights/out/Library/TelemetryClient.js",".././node_modules/applicationinsights/out/Library/Traceparent.js",".././node_modules/applicationinsights/out/Library/Tracestate.js",".././node_modules/applicationinsights/out/Library/Util.js",".././node_modules/applicationinsights/out/TelemetryProcessors/PerformanceMetricsTelemetryProcessor.js",".././node_modules/applicationinsights/out/TelemetryProcessors/SamplingTelemetryProcessor.js",".././node_modules/applicationinsights/out/TelemetryProcessors/index.js",".././node_modules/applicationinsights/out/applicationinsights.js",".././node_modules/async-hook-jl/async-hook.js",".././node_modules/async-hook-jl/index.js",".././node_modules/async-hook-jl/patches/next-tick.js",".././node_modules/async-hook-jl/patches/promise.js",".././node_modules/async-hook-jl/patches/timers.js",".././node_modules/async-listener/es6-wrapped-promise.js",".././node_modules/async-listener/glue.js",".././node_modules/async-listener/index.js",".././node_modules/cls-hooked/context-legacy.js",".././node_modules/cls-hooked/context.js",".././node_modules/cls-hooked/index.js",".././node_modules/continuation-local-storage/context.js",".././node_modules/diagnostic-channel-publishers/dist/src/azure-coretracing.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src/bunyan.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src/console.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src/index.js",".././node_modules/diagnostic-channel-publishers/dist/src/mongodb-core.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src/mongodb.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src/mysql.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src/pg-pool.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src/pg.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src/redis.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src/tedious.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src/winston.pub.js","..//Users/ryuichi/repos/vscode-partial-diff/node_modules/diagnostic-channel-publishers/dist/src|sync|/^.*\\/lib\\/Connection$/","..//Users/ryuichi/repos/vscode-partial-diff/node_modules/diagnostic-channel-publishers/dist/src|sync|/^.*\\/lib\\/Pool$/",".././node_modules/diagnostic-channel/dist/src/channel.js",".././node_modules/diagnostic-channel/dist/src/patchRequire.js",".././node_modules/emitter-listener/listener.js",".././node_modules/lodash.isequal/index.js",".././node_modules/lodash.omit/index.js",".././node_modules/semver/semver.js",".././node_modules/shimmer/index.js",".././node_modules/stack-chain/format.js",".././node_modules/stack-chain/index.js",".././node_modules/stack-chain/stack-chain.js",".././src/lib/adaptors/command.ts",".././src/lib/adaptors/text-editor.ts",".././src/lib/adaptors/window.ts",".././src/lib/adaptors/workspace.ts",".././src/lib/bootstrapper-factory.ts",".././src/lib/bootstrapper.ts",".././src/lib/command-factory.ts",".././src/lib/command-wrapper.ts",".././src/lib/commands/compare-selection-with-clipboard.ts",".././src/lib/commands/compare-selection-with-text1.ts",".././src/lib/commands/compare-visible-editors.ts",".././src/lib/commands/save-text-1.ts",".././src/lib/commands/toggle-normalisation-rules.ts",".././src/lib/const.ts",".././src/lib/content-provider.ts",".././src/lib/diff-presenter.ts",".././src/lib/diff-title-builder.ts",".././src/lib/normalisation-rule-picker.ts",".././src/lib/normalisation-rule-store.ts",".././src/lib/selection-info-registry.ts",".././src/lib/telemetry-reporter.ts",".././src/lib/text-process-rule-applier.ts",".././src/lib/text-title-builder.ts",".././src/lib/utils/text-resource.ts",".././node_modules/vscode-extension-telemetry/lib/telemetryReporter.js","../external \"assert\"","../external \"async_hooks\"","../external \"child_process\"","../external \"console\"","../external \"constants\"","../external \"crypto\"","../external \"dns\"","../external \"events\"","../external \"fs\"","../external \"http\"","../external \"https\"","../external \"module\"","../external \"net\"","../external \"os\"","../external \"path\"","../external \"stream\"","../external \"timers\"","../external \"url\"","../external \"util\"","../external \"vscode\"","../external \"zlib\"","../webpack/bootstrap","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/node module decorator",".././src/extension.ts"],"names":["DiagChannel","AutoCollectConsole","client","INSTANCE","Error","this","_client","prototype","enable","isEnabled","collectConsoleLog","IsInitialized","isInitialized","_isInitialized","dispose","_methodNames","module","exports","Object","defineProperty","value","Logging","CorrelationContextManager","getCurrentContext","enabled","context","session","get","CONTEXT_NAME","undefined","generateContextObject","operationId","parentId","operationName","correlationContextHeader","traceparent","tracestate","operation","name","id","customProperties","CustomPropertiesImpl","runWithContext","fn","bind","_a","wrapEmitter","emitter","bindEmitter","wrapCallback","forceClsHooked","isNodeVersionCompatible","hasEverEnabled","cls","shouldUseClsHooked","createNamespace","registerContextPreservation","cb","disable","reset","nodeVer","process","versions","node","split","parseInt","canUseClsHooked","greater800","less820","greater470","header","props","addHeaderData","keyvals","map","keyval","parts","key","concat","serializeToHeader","join","getProperty","prop","i","length","setProperty","val","bannedCharacters","test","warn","push","AutoCollectExceptions","_canUseUncaughtExceptionMonitor","_this","_exceptionListenerHandle","handle","reThrow","error","_FALLBACK_ERROR_MESSAGE","trackException","exception","flush","isAppCrashing","listeners","console","exit","on","UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME","UNCAUGHT_EXCEPTION_HANDLER_NAME","_rejectionListenerHandle","UNHANDLED_REJECTION_HANDLER_NAME","removeListener","_RETHROW_EXIT_MESSAGE","http","https","Util","RequestResponseHeaders","HttpDependencyParser","CorrelationContextManager_1","CorrelationIdManager","Traceparent","AutoCollectHttpDependencies","_isEnabled","_initialize","originalRequest","request","originalHttpsRequest","clientRequestPatch","options","shouldCollect","disableCollectionRequestOption","alreadyAutoCollectedFlag","trackRequest","requestArgs","_i","arguments","call","apply","end","telemetry","uniqueRequestId","uniqueTraceparent","requestParser","currentContext","isValidTraceId","traceId","updateSpanId","getBackCompatRequestId","w3cEnabled","toString","requestNumber","canIncludeCorrelationHeader","getUrl","getHeader","setHeader","config","correlationId","correlationHeader","requestContextHeader","safeIncludeCorrelationHeader","err","requestIdHeader","parentIdHeader","rootIdHeader","traceparentHeader","traceStateHeader","response","onResponse","dependencyTelemetry","getDependencyTelemetry","contextObjects","trackDependency","e","onError","info","extendStatics","__extends","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","create","url","Contracts","RequestParser","_super","requestOptions","method","_getUrlFromRequestOptions","startTime","Date","_setStatus","statusCode","getCorrelationContextTarget","requestContextTargetKey","baseTelemetry","dependencyId","urlObject","parse","search","hash","dependencyName","toUpperCase","pathname","remoteDependencyType","RemoteDependencyDataConstants","TYPE_HTTP","remoteDependencyTarget","hostname","TYPE_AI","correlationIdPrefix","port","data","duration","success","_isSuccess","resultCode","properties","dependencyTypeName","target","originalOptions_1","keys","forEach","path","parsedQuery","host","protocol","agent","format","Tracestate","HttpRequestParser","requestId","_getAbsoluteUrl","socketRemoteAddress","socket","remoteAddress","parseHeaders","connection","connectionRemoteAddress","legacySocketRemoteAddress","ellapsedMilliseconds","getRequestTelemetry","requestTelemetry","source","sourceCorrelationId","getRequestTags","tags","newTags","locationIp","_getIp","sessionId","_getId","userId","userAuthUserId","getOperationName","operationParentId","getOperationParentId","getOperationId","getRequestId","getCorrelationContextHeader","getTraceparent","getTracestate","getLegacyRootId","legacyRootId","headers","encrypted","requestUrl","pathName","ipMatch","check","str","results","exec","ip","rawHeaders","substr","cookie","parseId","getCookie","setBackCompatFromThisTraceContext","userAgent","requestContextSourceKey","tracestateHeader","legacy_parentId","legacy_rootId","generateRequestId","getRootId","cookieValue","cookieParts","ContextTagKeys","AutoCollectPerformance","AutoCollectHttpRequests","_isAutoCorrelating","useAutoCorrelation","isAutoCorrelating","_generateCorrelationContext","wrapOnRequestHandler","onRequest","requestParser_1","correlationContext","wrapServerEventHandler","server","originalAddListener","addListener","eventType","eventHandler","originalHttpServer","createServer","originalHttpsServer","trackRequestSync","addResponseCorrelationIdHeader","endRequest","_requestParser","once","headersSent","tagOverrides","__assign","assign","t","s","n","Config","Context","AutoCollectNativePerformance","_disabledMetrics","disabledMetrics","collectionInterval","_metricsAvailable","NativeMetricsEmitters","_emitter","_handle","setInterval","_trackNativeMetrics","unref","clearInterval","parseEnabled","collectExtendedMetrics","disableAll","env","ENV_nativeMetricsDisableAll","individualOptOuts","ENV_nativeMetricsDisablers","optOutsArr","optOutsArr_1","shouldSendAll","_trackGarbageCollection","_trackEventLoop","_trackHeapUsage","gc","gcData","getGCData","metrics","name_1","stdDev","Math","sqrt","sumSquares","count","pow","total","trackMetric","max","min","internalSdkVersion","sdkVersion","loop","getLoopData","loopUsage","heap","_b","_c","memoryUsage","heapUsed","heapTotal","rss","os","Constants","enableLiveMetricsCounters","_lastIntervalRequestExecutionTime","_lastIntervalDependencyExecutionTime","_collectionInterval","_enableLiveMetricsCounters","_lastCpus","cpus","_lastRequests","totalRequestCount","_totalRequestCount","totalFailedRequestCount","_totalFailedRequestCount","time","_lastDependencies","totalDependencyCount","_totalDependencyCount","totalFailedDependencyCount","_totalFailedDependencyCount","_lastExceptions","totalExceptionCount","_totalExceptionCount","cpuUsage","_lastAppCpuUsage","_lastHrtime","hrtime","trackPerformance","countRequest","durationMs","_intervalRequestExecutionTime","countException","countDependency","_intervalDependencyExecutionTime","_trackCpu","_trackMemory","_trackNetwork","_trackDependencyRate","_trackExceptionRate","totalUser","totalSys","totalNice","totalIdle","totalIrq","cpu","lastCpu","times","model","speed","lastTimes","user","sys","nice","idle","irq","appCpuPercent","appCpuUsage","totalApp","system","combinedTotal","PerformanceCounter","PROCESSOR_TIME","PROCESS_TIME","freeMem","freemem","usedMem","committedMemory","totalmem","PRIVATE_BYTES","AVAILABLE_BYTES","QuickPulseCounter","COMMITTED_BYTES","lastRequests","requests","intervalRequests","intervalFailedRequests","elapsedMs","elapsedSeconds","averageRequestExecutionTime","requestsPerSec","failedRequestsPerSec","REQUEST_RATE","REQUEST_DURATION","REQUEST_FAILURE_RATE","lastDependencies","dependencies","intervalDependencies","intervalFailedDependencies","averageDependencyExecutionTime","dependenciesPerSec","failedDependenciesPerSec","DEPENDENCY_RATE","DEPENDENCY_FAILURE_RATE","DEPENDENCY_DURATION","lastExceptions","exceptions","intervalExceptions","exceptionsPerSec","EXCEPTION_RATE","_lastRequestExecutionTime","_lastDependencyExecutionTime","status","endTime","message","Contracts_1","diagnostic_channel_1","clients","bunyanToAILevelMap","10","SeverityLevel","Verbose","20","30","Information","40","Warning","50","60","Critical","subscriber","event","result","AIlevel","level","trackTrace","severity","channel","subscribe","filter","c","unsubscribe","lastIndexOf","substring","stderr","TAG","publishers","unpatchedModules","modules","bunyan","mongodb","mongodbCore","mysql","redis","pg","pgPool","winston","mod","indexOf","commandName","dbName","startedData","databaseName","succeeded","queryObj","query","sqlString","sql","connectionConfig","_connection","socketPath","q","preparable","text","plan","conn","database","commandObj","command","address","winstonToAILevelMap","syslog","og","emerg","alert","crit","warning","notice","debug","npm","verbose","silly","unknown","meta","levelKind","DEFAULT_BREEZE_ENDPOINT","DEFAULT_LIVEMETRICS_ENDPOINT","DEFAULT_LIVEMETRICS_HOST","PerformanceToQuickPulseCounter","QuickPulseDocumentType","Event","Exception","Trace","Metric","Request","Dependency","Availability","QuickPulseType","TelemetryTypeStringToQuickPulseType","EventData","ExceptionData","MessageData","MetricData","RequestData","RemoteDependencyData","AvailabilityData","TelemetryTypeStringToQuickPulseDocumentType","Generated_1","domainSupportsProperties","domain","PageViewData","ver","measurements","applicationVersion","deviceId","deviceLocale","deviceModel","deviceOEMName","deviceOSVersion","deviceType","operationSyntheticSource","operationCorrelationVector","sessionIsFirst","userAccountId","cloudRole","cloudRoleInstance","internalAgentVersion","internalNodeName","Data","DataPointType","kind","Measurement","sampleRate","hasFullStack","parsedStack","Base","DataPoint","Domain","Envelope","ExceptionDetails","StackFrame","TelemetryType","telemetryTypeToBaseType","type","baseTypeToTelemetryType","baseType","TelemetryTypeString","m","__export","Channel","isDisabled","getBatchSize","getBatchIntervalMs","sender","_buffer","_lastSend","_isDisabled","_getBatchSize","_getBatchIntervalMs","_sender","setUseDiskRetryCaching","resendInterval","maxBytesOnDisk","setDiskRetryMode","send","envelope","payload","_stringify","triggerSend","_timeoutHandle","setTimeout","isNodeCrashing","callback","bufferIsEmpty","batch","saveOnCrash","Buffer","from","clearTimeout","JSON","stringify","ConnectionStringParser","setupString","endpointBase","connectionStringEnv","ENV_connectionString","csCode","csEnv","iKeyCode","instrumentationkey","instrumentationKey","_getInstrumentationKey","endpointUrl","ingestionendpoint","maxBatchSize","maxBatchIntervalMs","disableAppInsights","samplingPercentage","correlationIdRetryIntervalMs","correlationHeaderExcludedDomains","setCorrelationId","proxyHttpUrl","ENV_http_proxy","proxyHttpsUrl","ENV_https_proxy","httpAgent","httpsAgent","profileQueryEndpoint","ENV_profileQueryEndpoint","_quickPulseHost","liveendpoint","ENV_quickPulseHost","match","_profileQueryEndpoint","set","endpoint","cancelCorrelationIdQuery","queryCorrelationId","enumerable","configurable","iKey","ENV_iKey","ENV_azurePrefix","legacy_ENV_iKey","connectionString","_FIELDS_SEPARATOR","reduce","fields","kv","kvParts","_FIELD_KEY_VALUE_SEPARATOR","toLowerCase","endpointsuffix","locationPrefix","location","fs","packageJsonPath","_loadApplicationContext","_loadDeviceContext","_loadInternalContext","resolve","__dirname","appVersion","packageJson","readFileSync","version","release","DefaultRoleName","arch","platform","appIdUrlString","completedLookups","pendingLookups","fetchAppId","disableAppInsightsAutoCollection","req","makeRequest","res","appId_1","setEncoding","suffix","currentRootId","appendSuffix","generateRootId","endIndex","startIndex","w3cTraceId","delimiter","requestIdMaxLength","trimPosition","randomu32","EnvelopeFactory","createEnvelope","telemetryType","commonProperties","createTraceData","createDependencyData","createEventData","createExceptionData","createRequestData","createMetricData","createAvailabilityData","baseData","validateStringMap","replace","getTags","toISOString","trace","isNaN","severityLevel","remoteDependency","slice","msToTimeSpan","stack","exceptionDetails","typeName","parseStack","isArray","requestData","responseCode","metric","Aggregation","availabilityData","runLocation","frames","totalSizeInBytes","frame","_StackFrame","regex","parsedFrame","sizeInBytes","left","right","size","acceptedLeft","acceptedRight","howMany","splice","assembly","trim","matches","fileName","line","baseSize","optionalParams","enableDebug","disableWarnings","disableErrors","TelemetryClient","ServerRequestTracking","ClientRequestTracking","NodeClient","trackNodeHttpRequestSync","trackNodeHttpRequest","trackNodeHttpDependency","StreamId","QuickPulseEnvelopeFactory","createQuickPulseEnvelope","documents","machineName","instance","Documents","InstrumentationKey","Metrics","InvariantVersion","Timestamp","now","Version","MachineName","Instance","createQuickPulseMetric","Name","Value","Weight","telemetryEnvelopeToQuickPulseDocument","createQuickPulseEventDocument","createQuickPulseExceptionDocument","createQuickPulseTraceDocument","createQuickPulseDependencyDocument","createQuickPulseRequestDocument","document","createQuickPulseDocument","Message","exceptionMessage","exceptionType","ExceptionMessage","ExceptionType","Success","Duration","ResponseCode","OperationName","Target","ResultCode","CommandName","OperationId","DependencyTypeName","documentType","__type","DocumentType","Properties","aggregateProperties","meas","property","QuickPulseSender","_config","_consecutiveErrors","ping","done","_submitData","post","postOrPing","quickPulseHost","byteLength","shouldPOSTData","MAX_QPS_FAILURES_BEFORE_WARN","write","QuickPulseStateManager","_isCollectingData","_lastSuccessTime","_lastSendSucceeded","_metrics","_documents","_collectors","addCollector","collector","_addMetric","addDocument","_goQuickPulse","enableCollectors","_resetQuickPulseBuffer","k","_post","_ping","currentTimeout","POST_INTERVAL","PING_INTERVAL","MAX_POST_WAIT_TIME","FALLBACK_INTERVAL","MAX_PING_WAIT_TIME","_quickPulseDone","shouldPOST","zlib","child_process","Sender","onSuccess","_onSuccess","_onError","_enableDiskRetryMode","_resendInterval","WAIT_BETWEEN_RESEND","_maxBytesOnDisk","MAX_BYTES_ON_DISK","_numConsecutiveFailures","OS_PROVIDES_FILE_PROTECTION","USE_ICACLS","existsSync","ICACLS_PATH","floor","withCredentials","gzip","buffer","dataToSend","responseString","_sendFirstFileOnDisk","_storeToDisk","MAX_CONNECTION_FAILURES_BEFORE_WARN","_onErrorHelper","errorMessage","_storeToDiskSync","_runICACLS","args","aclProc","spawn","windowsHide","code","signal","_runICACLSSync","spawnSync","_getACLIdentity","ACL_IDENTITY","psProc","POWERSHELL_PATH","stdio","stdout","_getACLIdentitySync","_getACLArguments","directory","identity","_applyACLRules","ACLED_DIRECTORIES","_applyACLRulesSync","_confirmDirExists","lstat","stats","mkdir","isDirectory","_getShallowDirectorySize","readdir","files","totalSize","stat","fileStats","isFile","_getShallowDirectorySizeSync","readdirSync","statSync","tmpdir","TEMPDIR_PREFIX","getTime","fileFullPath","writeFile","mode","mkdirSync","dirSize","writeFileSync","tempDir","exists","f","basename","firstFile","filePath","readFile","unlink","systemdrive","TelemetryProcessors","_telemetryProcessors","trackAvailability","track","isError","trackEvent","accepted","runTelemetryProcessors","samplingTelemetryProcessor","performanceMetricsTelemetryProcessor","quickPulseClient","addTelemetryProcessor","telemetryProcessor","clearTelemetryProcessors","telemetryProcessorsCount","processor","traceFlag","DEFAULT_TRACE_FLAG","DEFAULT_VERSION","spanId","traceparentArr","len","isValidSpanId","fieldmap","parseHeader","fieldarr","validateKeyChars","keyParts","tenant","vendor","tenantValid","Boolean","vendorValid","keydeduper","parts_1","part","pair","strict","constants","cookieName","cookies","int32ArrayToBase64","array","toChar","v","String","fromCharCode","x","random32","random","tmp","hexValues","oct","a","clockSequenceHi","isValidW3CId","obj","isPrimitive","input","propType","isDate","totalms","sec","toFixed","hour","days","extractError","looseError","extractObject","origProperty","toJSON","field","stringTarget","MAX_PROPERTY_LENGTH","excludedDomains","RegExp","contextHeaders","keyValues","keyValue","requestCallback","requestUrlParsed","proxyUrl","proxyUrlParsed","Host","isHttps","tlsRestrictedAgent","addCorrelationIdHeaderFromString","components","some","Agent","secureOptions","SSL_OP_NO_SSLv2","SSL_OP_NO_SSLv3","SSL_OP_NO_TLSv1","SSL_OP_NO_TLSv1_1","remoteDependencyData","getSamplingHashCode","csharpMax","charCodeAt","abs","DistributedTracingModes","QuickPulseClient","NativePerformance_1","_forceClsHooked","_disabledExtendedMetrics","_console","_exceptions","_performance","_nativePerformance","_serverRequests","_clientRequests","_performanceLiveMetrics","_isConsole","_isConsoleLog","_isExceptions","_isPerformance","_isRequests","_isDependencies","_isDiskRetry","_isCorrelating","_isSendingLiveMetrics","_isNativePerformance","_diskRetryInterval","_diskRetryMaxBytes","_isStarted","start","defaultClient","liveMetricsClient","Configuration","setup","getCorrelationContext","wrapWithCorrelationContext","setDistributedTracingMode","AI_AND_W3C","setAutoCollectConsole","setAutoCollectExceptions","setAutoCollectPerformance","extendedMetricsConfig","setAutoCollectRequests","setAutoCollectDependencies","setAutoDependencyCorrelation","useAsyncHooks","setInternalLogging","enableDebugLogging","enableWarningLogging","setSendLiveMetrics","asyncWrap","binding","TIMERWRAP","Providers","patchs","ignoreUIDs","Set","State","counter","Hooks","initFns","preFns","postFns","destroyFns","init","uid","provider","parentUid","parentHandle","hook","add","pre","has","didThrow","destroy","delete","removeElement","item","index","AsyncHook","_state","_hooks","providers","setupHooks","hooks","remove","addHooks","removeHooks","global","_asyncHook","attach","callSite","filename","getFileName","NextTickWrap","state","oldNextTick","nextTick","TypeError","listenerCount","PromiseWrap","Promise","oldThen","then","makeWrappedHandler","isOnFulfilled","makeUnhandledResolutionHandler","makeUnhandledRejectionHandler","onFulfilled","onRejected","timers","TimeoutWrap","IntervalWrap","ImmediateWrap","timeoutMap","Map","intervalMap","ImmediateMap","activeCallback","clearedInCallback","patchTimer","setFn","clearFn","Handle","timerMap","singleCall","oldSetFn","oldClearFn","timerId","setImmediate","clearImmediate","ensureAslWrapper","executor","super","reject","promise","asyncCatcher","wrap","inAsyncTick","listenerStack","union","dest","added","destLength","addedLength","returned","j","missing","_fatalException","errorValues","inErrorTick","er","handled","listener","flags","pop","original","list","values","before","after","errorThrew","threw","_originalNextTick","AsyncListener","callbacks","createAsyncListener","addAsyncListener","registered","removeAsyncListener","simpleWrap","shimmer","semver","massWrap","util","v6plus","gte","v7plus","v8plus","v11plus","net","wrapSetUpListenHandle","onread","onconnection","patchOnRead","ctx","_originalOnread","_normalizeArgs","arg0","Number","_normalizeConnectArgs","Server","Socket","getOwnPropertySymbols","onSocket","childProcess","wrapChildProcess","child","activatorFirst","onexit","ChildProcess","processors","_nextDomainTick","_tickDomainCallback","activator","asynchronizers","patchGlobalTimers","dns","resolveNaptr","crypto","lchown","lchmod","ftruncate","Deflate","proto","getPrototypeOf","_transform","toWrap","instrumentPromise","promiseListener","fallback","cbIdx","wrappedPromise","overwrite","__asl_wrapper","propagateAslWrapper","next","nextResult","returnVal","errorVal","wrapThen","last","inherits","chain","wrapPromise","assert","asyncHook","ERROR_SYMBOL","invertedProviders","DEBUG_CLS_HOOKED","currentUid","Namespace","active","_set","_contexts","getNamespace","namespaces","destroyNamespace","namespace","ok","inspect","debug2","msg","DEBUG","_rawDebug","getFunctionName","enter","createContext","_ns_name","run","runAndReturn","runPromise","catch","self","emit","thisSymbol","CONTEXTS_SYMBOL","unwrapped","wrapped","unwrappedContexts","thunk","fromException","stackChain","modifier","_modifiers","deattach","async_hooks","_indent","createHook","asyncId","triggerId","resource","executionAsyncId","repeat","showHidden","depth","colors","triggerAsyncId","triggerIdContext","asyncHooksCurrentId","indentStr","currentId","contexts","storage","AzureMonitorSymbol","AzureMonitorSpanProcessor","onStart","span","onEnd","publish","shutdown","azureCoreTracing","versionSpecifier","patch","coreTracing","tracer_1","BasicTracer","spanContextPropagator","scopeManager","startSpanOriginal_1","startSpan","parent","parentOperation","getCurrentSpan","addEvent","addSpanProcessor","setTracer","registerMonkeyPatch","originalBunyan","originalEmit","_emit","rec","noemit","ret","stream_1","originalConsole","aiLoggingOutStream","Writable","aiLoggingErrStream","chunk","aiLoggingConsole","Console","_loop_1","originalMethod","consoleMethods_1","azuresdk","consolePub","tedious","mongoCore","originalMongoCore","originalConnect","connect","originalWrite","pool","cbidx","bindToContext","originalLogout","logout","mongo2","originalMongo","instrument","operationIdGenerator","eventMap","mongo3","contextMap","mongo330","coreTopology","mongodbcorePatchFunction","originalMysql","originalMysqlPath","patchObjectFunction","func","cbWrapper","originalFunc","resultContainer","startDate","patchClassMemberFunction","classObject","connectionClass","dirname","hrDuration","callbackArgs","poolClass","postgresPool1","originalPgPool","events_1","postgres6","originalPg","originalPgPath","originalClientQuery","Client","diagnosticOriginalFunc","queryResult","connectionParameters","patchCallback","trackingCallback","rowCount","ceil","EventEmitter","postgres7","callbackProvided","_Promise","originalRedis","originalSend","RedisClient","internal_send_command","cb_1","pubsubBound","address_1","startTime_1","startDate_1","originalTedious","originalMakeRequest","Connection","getPatchedCallback","origCallback","rows","parametersByName","statement","__rest","winston3","originalWinston","AppInsightsTransport","opts","log","splat","Symbol","levels","mapLevelToKind","Transport","patchedConfigure","lastLevel","origCreate","createLogger","origConfigure","configure","origRootConfigure","winston2","curLevels","originalLog","Logger","loggingFilter","filters","webpackEmptyContext","patchRequire_1","patchRequire_2","makePatchingRequire","trueFilter","publishing","ContextPreservingEventEmitter","subscribers","contextPreservationFunction","knownPatches","currentlyPublishing","shouldPublish","standardEvent_1","timestamp","getOwnPropertyNames","addContextPreservation","preserver","previousPreservationStack","packageName","patcher","getPatchesObject","diagnosticsSource","require","moduleModule","nativeModules","originalRequire","patchedModules","moduleId","originalModule","modulePath","_resolveFilename","moduleVersion","prereleaseTagIndex","modifiedModule","modulePatcher","satisfies","unwrap","SYMBOL","propertyIsEnumerable","writable","_listeners","_events","_wrap","visit","onAddListener","onEmit","adding","existing","unprocessed","l","_process","_findAndProcess","__wrapped","remover","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","weakMapTag","arrayBufferTag","dataViewTag","reIsHostCtor","reIsUint","typedArrayTags","freeGlobal","freeSelf","root","Function","freeExports","nodeType","freeModule","moduleExports","freeProcess","nodeUtil","nodeIsTypedArray","isTypedArray","arraySome","predicate","mapToArray","setToArray","transform","arrayProto","funcProto","objectProto","coreJsData","funcToString","maskSrcKey","IE_PROTO","nativeObjectToString","reIsNative","Uint8Array","symToStringTag","toStringTag","nativeGetSymbols","nativeIsBuffer","isBuffer","nativeKeys","arg","DataView","getNative","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","entries","clear","entry","ListCache","MapCache","SetCache","__data__","Stack","assocIndexOf","eq","baseGetTag","isOwn","tag","unmasked","getRawTag","objectToString","baseIsArguments","isObjectLike","baseIsEqual","other","bitmask","customizer","object","equalFunc","objIsArr","othIsArr","objTag","getTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","byteOffset","convert","isPartial","stacked","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","getAllKeys","objLength","skipCtor","objValue","othValue","compared","objCtor","othCtor","equalObjects","baseIsEqualDeep","arrLength","othLength","seen","arrValue","othIndex","keysFunc","symbolsFunc","offset","arrayPush","baseGetAllKeys","getSymbols","getMapData","getValue","isObject","isMasked","isFunction","baseIsNative","pairs","LARGE_ARRAY_SIZE","resIndex","symbol","arrayFilter","isIndex","ArrayBuffer","Ctor","ctorString","isArguments","isLength","baseUnary","inherited","isArr","isArg","isBuff","isType","skipIndexes","iteratee","baseTimes","arrayLikeKeys","baseKeys","thisArg","arrayIncludes","fromIndex","fromRight","baseFindIndex","baseIsNaN","baseIndexOf","arrayMap","cacheHas","cache","overArg","getPrototype","spreadableSymbol","isConcatSpreadable","nativeMax","baseFlatten","isStrict","isFlattenable","isHostObject","stubArray","getSymbolsIn","toKey","isSymbol","isArrayLike","isArrayLikeObject","keysIn","nativeKeysIn","isProto","baseKeysIn","omit","basePickBy","basePick","comparator","includes","isCommon","valuesLength","outer","computed","valuesIndex","baseDifference","getAllKeysIn","otherArgs","SemVer","NODE_DEBUG","unshift","SEMVER_SPEC_VERSION","re","src","R","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULL","FULLPLAIN","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","raw","major","minor","prerelease","num","build","valid","clean","compare","compareMain","comparePre","compareIdentifiers","inc","identifier","diff","version1","version2","v1","v2","numeric","anum","bnum","gt","lt","neq","lte","cmp","op","Comparator","comp","ANY","operator","rcompareIdentifiers","compareLoose","rcompare","sort","rsort","Range","range","parseRange","isX","hyphenReplace","$0","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","tb","testSet","allowed","outside","hilo","gtfn","ltefn","ltfn","ecomp","comparators","high","low","r","intersects","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","_","M","pr","charAt","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","every","thisComparator","rangeComparators","rangeComparator","toComparators","maxSatisfying","maxSV","rangeObj","minSatisfying","minSV","validRange","ltr","gtr","parsed","r1","r2","coerce","funktion","logger","nodule","wrapper","__unwrap","nodules","names","massUnwrap","lines","ee","FormatErrorString","_stackChain","defaultFormater","extend","TraceModifier","StackFormater","SHORTCIRCUIT_CALLSITE","collectCallSites","captureStackTrace","callSites","_modify","_formater","_previous","formater","restore","_backup","_roolback","prepareStackTrace","SHORTCIRCUIT_FORMATER","originalFrames","stackTraceLimit","isExtensible","getOwnPropertyDescriptor","mutated","commands","parseUri","uri1","uri2","title","executeCommand","cmd","registerer","getCommandRegisterer","execute","commandType","registerTextEditorCommand","registerCommand","vsEditor","extractTextFromSelection","selection","getText","viewColumn","validSelections","collectNonEmptySelections","selections","extractText","extractLineRanges","isEmpty","s1","s2","lineComparison","character","window","visibleTextEditors","editor","items","showQuickPick","canPickMany","showInformationMessage","workspace","configName","getConfiguration","EXTENSION_ID","EXTENSION_SCHEME","contentProvider","registerTextDocumentContentProvider","selectionInfoRegistry","workspaceAdaptor","getWorkspaceAdaptor","commandAdaptor","vscode","Uri","normalisationRuleStore","commandFactory","clipboard","telemetryKey","NullVsTelemetryReporter","registerProviders","registerCommands","disposable","subscriptions","commandList","EXTENSION_NAMESPACE","createCompareVisibleEditorsCommand","crateSaveText1Command","createCompareSelectionWithText1Command","createCompareSelectionWithClipboardCommand","createToggleNormalisationRulesCommand","windowAdaptor","getCurrentDate","getDiffPresenter","diffPresenter","createDiffPresenter","telemetryReporter","TelemetryReporterLocator","getReporter","logCommandTrigger","handleError","logCommandErrored","readText","TextKey","CLIPBOARD","lineRanges","REGISTER2","selectedText","selectedLineRanges","takeDiff","textInfo","REGISTER1","editors","textInfos","registerTextInfo","VISIBLE_EDITOR1","VISIBLE_EDITOR2","isReverseOrder","textInfo1","textInfo2","normalisationRulePicker","rules","getAllRules","newRules","show","specifyActiveRules","textProcessRuleApplier","uri","textKey","extractTextKey","registeredText","applyTo","diffTitleBuilder","textKey1","textKey2","getUri","makeUriString","textTitleBuilder","title1","buildTextTitle","title2","hasActiveRules","convertToQuickPickItems","activeItems","picked","convertToRules","rule","label","ruleIndex","description","pickedItems","pickedItem","isEqual","setupRules","baseRules","resetRuleStatus","enableOnStart","newBaseRules","activeRules","ruleIndices","packageConfPath","reporterCreator","packageInfo","vsTelemetryReporter","publisher","TelemetryReporter","reporter","sendTelemetryEvent","_eventName","_properties","_measurements","applyRulesToText","newText","applyRuleToText","pattern","replaceWith","matched","letterCase","lineRangesSuffix","lineRangeLabel","lineRange","appInsights","extensionId","extensionVersion","firstParty","userOptIn","logFilePath","logStream","createWriteStream","encoding","autoClose","updateUserOptIn","onDidChangeTelemetryEnabled","optOutListener","onDidChangeConfiguration","TELEMETRY_CONFIG_ID","newOptInValue","isTelemetryEnabled","TELEMETRY_CONFIG_ENABLED_ID","createAppInsightsClient","appInsightsClient","getCommonProperties","machineId","isNewAppInstall","uiKind","UIKind","Web","Desktop","cleanRemoteName","remoteName","shouldSendErrorTelemetry","extension","extensionKind","ExtensionKind","Workspace","_extension","extensions","getExtension","cloneAndChange","change","anonymizeFilePaths","cleanupPatterns","appRoot","extensionPath","updatedStack","cleanUpIndexes","cleanupPatterns_1","regexp","lastIndex","nodeModulesRegex","fileRegex","y","cleanupPatterns_2","eventName","cleanProperties","_key","sendTelemetryErrorEvent","errorProps","sendTelemetryException","flushEventsToLogger","flushEventsToAI","all","default","__webpack_module_cache__","__webpack_require__","cachedModule","loaded","__webpack_modules__","o","nmd","paths","children","bootstrapperFactory","getVsTelemetryReporterCreator","load","activate","initiate","deactivate"],"mappings":"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","file":"extension.js","sourcesContent":["\"use strict\";\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar AutoCollectConsole = (function () {\n    function AutoCollectConsole(client) {\n        if (!!AutoCollectConsole.INSTANCE) {\n            throw new Error(\"Console logging adapter tracking should be configured from the applicationInsights object\");\n        }\n        this._client = client;\n        AutoCollectConsole.INSTANCE = this;\n    }\n    AutoCollectConsole.prototype.enable = function (isEnabled, collectConsoleLog) {\n        if (DiagChannel.IsInitialized) {\n            require(\"./diagnostic-channel/console.sub\").enable(isEnabled && collectConsoleLog, this._client);\n            require(\"./diagnostic-channel/bunyan.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/winston.sub\").enable(isEnabled, this._client);\n        }\n    };\n    AutoCollectConsole.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectConsole.prototype.dispose = function () {\n        AutoCollectConsole.INSTANCE = null;\n        this.enable(false, false);\n    };\n    AutoCollectConsole._methodNames = [\"debug\", \"info\", \"log\", \"warn\", \"error\"];\n    return AutoCollectConsole;\n}());\nmodule.exports = AutoCollectConsole;\n//# sourceMappingURL=Console.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Logging = require(\"../Library/Logging\");\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar CorrelationContextManager = (function () {\n    function CorrelationContextManager() {\n    }\n    /**\n     *  Provides the current Context.\n     *  The context is the most recent one entered into for the current\n     *  logical chain of execution, including across asynchronous calls.\n     */\n    CorrelationContextManager.getCurrentContext = function () {\n        if (!CorrelationContextManager.enabled) {\n            return null;\n        }\n        var context = CorrelationContextManager.session.get(CorrelationContextManager.CONTEXT_NAME);\n        if (context === undefined) {\n            return null;\n        }\n        return context;\n    };\n    /**\n     *  A helper to generate objects conforming to the CorrelationContext interface\n     */\n    CorrelationContextManager.generateContextObject = function (operationId, parentId, operationName, correlationContextHeader, traceparent, tracestate) {\n        parentId = parentId || operationId;\n        if (this.enabled) {\n            return {\n                operation: {\n                    name: operationName,\n                    id: operationId,\n                    parentId: parentId,\n                    traceparent: traceparent,\n                    tracestate: tracestate\n                },\n                customProperties: new CustomPropertiesImpl(correlationContextHeader)\n            };\n        }\n        return null;\n    };\n    /**\n     *  Runs a function inside a given Context.\n     *  All logical children of the execution path that entered this Context\n     *  will receive this Context object on calls to GetCurrentContext.\n     */\n    CorrelationContextManager.runWithContext = function (context, fn) {\n        if (CorrelationContextManager.enabled) {\n            return CorrelationContextManager.session.bind(fn, (_a = {}, _a[CorrelationContextManager.CONTEXT_NAME] = context, _a))();\n        }\n        else {\n            return fn();\n        }\n        var _a;\n    };\n    /**\n     * Wrapper for cls-hooked bindEmitter method\n     */\n    CorrelationContextManager.wrapEmitter = function (emitter) {\n        if (CorrelationContextManager.enabled) {\n            CorrelationContextManager.session.bindEmitter(emitter);\n        }\n    };\n    /**\n     *  Patches a callback to restore the correct Context when getCurrentContext\n     *  is run within it. This is necessary if automatic correlation fails to work\n     *  with user-included libraries.\n     *\n     *  The supplied callback will be given the same context that was present for\n     *  the call to wrapCallback.  */\n    CorrelationContextManager.wrapCallback = function (fn) {\n        if (CorrelationContextManager.enabled) {\n            return CorrelationContextManager.session.bind(fn);\n        }\n        return fn;\n    };\n    /**\n     *  Enables the CorrelationContextManager.\n     */\n    CorrelationContextManager.enable = function (forceClsHooked) {\n        if (this.enabled) {\n            return;\n        }\n        if (!this.isNodeVersionCompatible()) {\n            this.enabled = false;\n            return;\n        }\n        if (!CorrelationContextManager.hasEverEnabled) {\n            this.forceClsHooked = forceClsHooked;\n            this.hasEverEnabled = true;\n            if (typeof this.cls === \"undefined\") {\n                if ((CorrelationContextManager.forceClsHooked === true) || (CorrelationContextManager.forceClsHooked === undefined && CorrelationContextManager.shouldUseClsHooked())) {\n                    this.cls = require('cls-hooked');\n                }\n                else {\n                    this.cls = require('continuation-local-storage');\n                }\n            }\n            CorrelationContextManager.session = this.cls.createNamespace(\"AI-CLS-Session\");\n            DiagChannel.registerContextPreservation(function (cb) {\n                return CorrelationContextManager.session.bind(cb);\n            });\n        }\n        this.enabled = true;\n    };\n    /**\n     *  Disables the CorrelationContextManager.\n     */\n    CorrelationContextManager.disable = function () {\n        this.enabled = false;\n    };\n    /**\n     * Reset the namespace\n     */\n    CorrelationContextManager.reset = function () {\n        if (CorrelationContextManager.hasEverEnabled) {\n            CorrelationContextManager.session = null;\n            CorrelationContextManager.session = this.cls.createNamespace('AI-CLS-Session');\n        }\n    };\n    /**\n     *  Reports if CorrelationContextManager is able to run in this environment\n     */\n    CorrelationContextManager.isNodeVersionCompatible = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        return parseInt(nodeVer[0]) > 3 || (parseInt(nodeVer[0]) > 2 && parseInt(nodeVer[1]) > 2);\n    };\n    /**\n     * We only want to use cls-hooked when it uses async_hooks api (8.2+), else\n     * use async-listener (plain -cls)\n     */\n    CorrelationContextManager.shouldUseClsHooked = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        return (parseInt(nodeVer[0]) > 8) || (parseInt(nodeVer[0]) >= 8 && parseInt(nodeVer[1]) >= 2);\n    };\n    /**\n     * A TypeError is triggered by cls-hooked for node [8.0, 8.2)\n     * @internal Used in tests only\n     */\n    CorrelationContextManager.canUseClsHooked = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        var greater800 = (parseInt(nodeVer[0]) > 8) || (parseInt(nodeVer[0]) >= 8 && parseInt(nodeVer[1]) >= 0);\n        var less820 = (parseInt(nodeVer[0]) < 8) || (parseInt(nodeVer[0]) <= 8 && parseInt(nodeVer[1]) < 2);\n        var greater470 = parseInt(nodeVer[0]) > 4 || (parseInt(nodeVer[0]) >= 4 && parseInt(nodeVer[1]) >= 7); // cls-hooked requires node 4.7+\n        return !(greater800 && less820) && greater470;\n    };\n    CorrelationContextManager.enabled = false;\n    CorrelationContextManager.hasEverEnabled = false;\n    CorrelationContextManager.forceClsHooked = undefined; // true: use cls-hooked, false: use cls, undefined: choose based on node version\n    CorrelationContextManager.CONTEXT_NAME = \"ApplicationInsights-Context\";\n    return CorrelationContextManager;\n}());\nexports.CorrelationContextManager = CorrelationContextManager;\nvar CustomPropertiesImpl = (function () {\n    function CustomPropertiesImpl(header) {\n        this.props = [];\n        this.addHeaderData(header);\n    }\n    CustomPropertiesImpl.prototype.addHeaderData = function (header) {\n        var keyvals = header ? header.split(\", \") : [];\n        this.props = keyvals.map(function (keyval) {\n            var parts = keyval.split(\"=\");\n            return { key: parts[0], value: parts[1] };\n        }).concat(this.props);\n    };\n    CustomPropertiesImpl.prototype.serializeToHeader = function () {\n        return this.props.map(function (keyval) {\n            return keyval.key + \"=\" + keyval.value;\n        }).join(\", \");\n    };\n    CustomPropertiesImpl.prototype.getProperty = function (prop) {\n        for (var i = 0; i < this.props.length; ++i) {\n            var keyval = this.props[i];\n            if (keyval.key === prop) {\n                return keyval.value;\n            }\n        }\n        return;\n    };\n    // TODO: Strictly according to the spec, properties which are recieved from\n    // an incoming request should be left untouched, while we may add our own new\n    // properties. The logic here will need to change to track that.\n    CustomPropertiesImpl.prototype.setProperty = function (prop, val) {\n        if (CustomPropertiesImpl.bannedCharacters.test(prop) || CustomPropertiesImpl.bannedCharacters.test(val)) {\n            Logging.warn(\"Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: \" + prop + \" and value: \" + val);\n            return;\n        }\n        for (var i = 0; i < this.props.length; ++i) {\n            var keyval = this.props[i];\n            if (keyval.key === prop) {\n                keyval.value = val;\n                return;\n            }\n        }\n        this.props.push({ key: prop, value: val });\n    };\n    CustomPropertiesImpl.bannedCharacters = /[,=]/;\n    return CustomPropertiesImpl;\n}());\n//# sourceMappingURL=CorrelationContextManager.js.map","\"use strict\";\nvar AutoCollectExceptions = (function () {\n    function AutoCollectExceptions(client) {\n        if (!!AutoCollectExceptions.INSTANCE) {\n            throw new Error(\"Exception tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectExceptions.INSTANCE = this;\n        this._client = client;\n        // Only use for 13.7.0+\n        var nodeVer = process.versions.node.split(\".\");\n        AutoCollectExceptions._canUseUncaughtExceptionMonitor = parseInt(nodeVer[0]) > 13 || (parseInt(nodeVer[0]) === 13 && parseInt(nodeVer[1]) >= 7);\n    }\n    AutoCollectExceptions.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectExceptions.prototype.enable = function (isEnabled) {\n        var _this = this;\n        if (isEnabled) {\n            this._isInitialized = true;\n            var self = this;\n            if (!this._exceptionListenerHandle) {\n                // For scenarios like Promise.reject(), an error won't be passed to the handle. Create a placeholder\n                // error for these scenarios.\n                var handle = function (reThrow, name, error) {\n                    if (error === void 0) { error = new Error(AutoCollectExceptions._FALLBACK_ERROR_MESSAGE); }\n                    _this._client.trackException({ exception: error });\n                    _this._client.flush({ isAppCrashing: true });\n                    // only rethrow when we are the only listener\n                    if (reThrow && name && process.listeners(name).length === 1) {\n                        console.error(error);\n                        process.exit(1);\n                    }\n                };\n                if (AutoCollectExceptions._canUseUncaughtExceptionMonitor) {\n                    // Node.js >= 13.7.0, use uncaughtExceptionMonitor. It handles both promises and exceptions\n                    this._exceptionListenerHandle = handle.bind(this, false); // never rethrows\n                    process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME, this._exceptionListenerHandle);\n                }\n                else {\n                    this._exceptionListenerHandle = handle.bind(this, true, AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME);\n                    this._rejectionListenerHandle = handle.bind(this, false); // never rethrows\n                    process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\n                    process.on(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\n                }\n            }\n        }\n        else {\n            if (this._exceptionListenerHandle) {\n                if (AutoCollectExceptions._canUseUncaughtExceptionMonitor) {\n                    process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME, this._exceptionListenerHandle);\n                }\n                else {\n                    process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\n                    process.removeListener(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\n                }\n                this._exceptionListenerHandle = undefined;\n                this._rejectionListenerHandle = undefined;\n                delete this._exceptionListenerHandle;\n                delete this._rejectionListenerHandle;\n            }\n        }\n    };\n    AutoCollectExceptions.prototype.dispose = function () {\n        AutoCollectExceptions.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectExceptions.INSTANCE = null;\n    AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME = \"uncaughtExceptionMonitor\";\n    AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME = \"uncaughtException\";\n    AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME = \"unhandledRejection\";\n    AutoCollectExceptions._RETHROW_EXIT_MESSAGE = \"Application Insights Rethrow Exception Handler\";\n    AutoCollectExceptions._FALLBACK_ERROR_MESSAGE = \"A promise was rejected without providing an error. Application Insights generated this error stack for you.\";\n    AutoCollectExceptions._canUseUncaughtExceptionMonitor = false;\n    return AutoCollectExceptions;\n}());\nmodule.exports = AutoCollectExceptions;\n//# sourceMappingURL=Exceptions.js.map","\"use strict\";\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar Logging = require(\"../Library/Logging\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar HttpDependencyParser = require(\"./HttpDependencyParser\");\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\nvar Traceparent = require(\"../Library/Traceparent\");\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar AutoCollectHttpDependencies = (function () {\n    function AutoCollectHttpDependencies(client) {\n        if (!!AutoCollectHttpDependencies.INSTANCE) {\n            throw new Error(\"Client request tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectHttpDependencies.INSTANCE = this;\n        this._client = client;\n    }\n    AutoCollectHttpDependencies.prototype.enable = function (isEnabled) {\n        this._isEnabled = isEnabled;\n        if (this._isEnabled && !this._isInitialized) {\n            this._initialize();\n        }\n        if (DiagChannel.IsInitialized) {\n            require(\"./diagnostic-channel/mongodb.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/mysql.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/redis.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/postgres.sub\").enable(isEnabled, this._client);\n        }\n    };\n    AutoCollectHttpDependencies.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectHttpDependencies.prototype._initialize = function () {\n        var _this = this;\n        this._isInitialized = true;\n        var originalGet = http.get;\n        var originalRequest = http.request;\n        var originalHttpsRequest = https.request;\n        var clientRequestPatch = function (request, options) {\n            var shouldCollect = !options[AutoCollectHttpDependencies.disableCollectionRequestOption] &&\n                !request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag];\n            request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag] = true;\n            if (request && options && shouldCollect) {\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request);\n                AutoCollectHttpDependencies.trackRequest(_this._client, { options: options, request: request });\n            }\n        };\n        // On node >= v0.11.12 and < 9.0 (excluding 8.9.0) https.request just calls http.request (with additional options).\n        // On node < 0.11.12, 8.9.0, and 9.0 > https.request is handled separately\n        // Patch both and leave a flag to not double-count on versions that just call through\n        // We add the flag to both http and https to protect against strange double collection in other scenarios\n        http.request = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = originalRequest.call.apply(originalRequest, [http, options].concat(requestArgs));\n            clientRequestPatch(request, options);\n            return request;\n        };\n        https.request = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = originalHttpsRequest.call.apply(originalHttpsRequest, [https, options].concat(requestArgs));\n            clientRequestPatch(request, options);\n            return request;\n        };\n        // Node 8 calls http.request from http.get using a local reference!\n        // We have to patch .get manually in this case and can't just assume request is enough\n        // We have to replace the entire method in this case. We can't call the original.\n        // This is because calling the original will give us no chance to set headers as it internally does .end().\n        http.get = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = (_a = http.request).call.apply(_a, [http, options].concat(requestArgs));\n            request.end();\n            return request;\n            var _a;\n        };\n        https.get = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = (_a = https.request).call.apply(_a, [https, options].concat(requestArgs));\n            request.end();\n            return request;\n            var _a;\n        };\n    };\n    /**\n     * Tracks an outgoing request. Because it may set headers this method must be called before\n     * writing content to or ending the request.\n     */\n    AutoCollectHttpDependencies.trackRequest = function (client, telemetry) {\n        if (!telemetry.options || !telemetry.request || !client) {\n            Logging.info(\"AutoCollectHttpDependencies.trackRequest was called with invalid parameters: \", !telemetry.options, !telemetry.request, !client);\n            return;\n        }\n        var requestParser = new HttpDependencyParser(telemetry.options, telemetry.request);\n        var currentContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var uniqueRequestId;\n        var uniqueTraceparent;\n        if (currentContext && currentContext.operation && currentContext.operation.traceparent && Traceparent.isValidTraceId(currentContext.operation.traceparent.traceId)) {\n            currentContext.operation.traceparent.updateSpanId();\n            uniqueRequestId = currentContext.operation.traceparent.getBackCompatRequestId();\n        }\n        else if (CorrelationIdManager.w3cEnabled) {\n            // Start an operation now so that we can include the w3c headers in the outgoing request\n            var traceparent = new Traceparent();\n            uniqueTraceparent = traceparent.toString();\n            uniqueRequestId = traceparent.getBackCompatRequestId();\n        }\n        else {\n            uniqueRequestId = currentContext && currentContext.operation && (currentContext.operation.parentId + AutoCollectHttpDependencies.requestNumber++ + '.');\n        }\n        // Add the source correlationId to the request headers, if a value was not already provided.\n        // The getHeader/setHeader methods aren't available on very old Node versions, and\n        // are not included in the v0.10 type declarations currently used. So check if the\n        // methods exist before invoking them.\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl()) && telemetry.request.getHeader && telemetry.request.setHeader) {\n            if (client.config && client.config.correlationId) {\n                // getHeader returns \"any\" type in newer versions of node. In basic scenarios, this will be <string | string[] | number>, but could be modified to anything else via middleware\n                var correlationHeader = telemetry.request.getHeader(RequestResponseHeaders.requestContextHeader);\n                try {\n                    Util.safeIncludeCorrelationHeader(client, telemetry.request, correlationHeader);\n                }\n                catch (err) {\n                    Logging.warn(\"Request-Context header could not be set. Correlation of requests may be lost\", err);\n                }\n                if (currentContext && currentContext.operation) {\n                    try {\n                        telemetry.request.setHeader(RequestResponseHeaders.requestIdHeader, uniqueRequestId);\n                        // Also set legacy headers\n                        telemetry.request.setHeader(RequestResponseHeaders.parentIdHeader, currentContext.operation.id);\n                        telemetry.request.setHeader(RequestResponseHeaders.rootIdHeader, uniqueRequestId);\n                        // Set W3C headers, if available\n                        if (uniqueTraceparent || currentContext.operation.traceparent) {\n                            telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader, uniqueTraceparent || currentContext.operation.traceparent.toString());\n                        }\n                        else if (CorrelationIdManager.w3cEnabled) {\n                            // should never get here since we set uniqueTraceparent above for the w3cEnabled scenario\n                            var traceparent = new Traceparent().toString();\n                            telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader, traceparent);\n                        }\n                        if (currentContext.operation.tracestate) {\n                            var tracestate = currentContext.operation.tracestate.toString();\n                            if (tracestate) {\n                                telemetry.request.setHeader(RequestResponseHeaders.traceStateHeader, tracestate);\n                            }\n                        }\n                        var correlationContextHeader = currentContext.customProperties.serializeToHeader();\n                        if (correlationContextHeader) {\n                            telemetry.request.setHeader(RequestResponseHeaders.correlationContextHeader, correlationContextHeader);\n                        }\n                    }\n                    catch (err) {\n                        Logging.warn(\"Correlation headers could not be set. Correlation of requests may be lost.\", err);\n                    }\n                }\n            }\n        }\n        // Collect dependency telemetry about the request when it finishes.\n        if (telemetry.request.on) {\n            telemetry.request.on('response', function (response) {\n                requestParser.onResponse(response);\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\n                dependencyTelemetry.contextObjects[\"http.ClientResponse\"] = response;\n                client.trackDependency(dependencyTelemetry);\n            });\n            telemetry.request.on('error', function (e) {\n                requestParser.onError(e);\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\n                dependencyTelemetry.contextObjects[\"Error\"] = e;\n                client.trackDependency(dependencyTelemetry);\n            });\n        }\n    };\n    AutoCollectHttpDependencies.prototype.dispose = function () {\n        AutoCollectHttpDependencies.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectHttpDependencies.disableCollectionRequestOption = 'disableAppInsightsAutoCollection';\n    AutoCollectHttpDependencies.requestNumber = 1;\n    AutoCollectHttpDependencies.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\n    return AutoCollectHttpDependencies;\n}());\nmodule.exports = AutoCollectHttpDependencies;\n//# sourceMappingURL=HttpDependencies.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar url = require(\"url\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar RequestParser = require(\"./RequestParser\");\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\n/**\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\n */\nvar HttpDependencyParser = (function (_super) {\n    __extends(HttpDependencyParser, _super);\n    function HttpDependencyParser(requestOptions, request) {\n        var _this = _super.call(this) || this;\n        if (request && request.method && requestOptions) {\n            // The ClientRequest.method property isn't documented, but is always there.\n            _this.method = request.method;\n            _this.url = HttpDependencyParser._getUrlFromRequestOptions(requestOptions, request);\n            _this.startTime = +new Date();\n        }\n        return _this;\n    }\n    /**\n     * Called when the ClientRequest emits an error event.\n     */\n    HttpDependencyParser.prototype.onError = function (error) {\n        this._setStatus(undefined, error);\n    };\n    /**\n     * Called when the ClientRequest emits a response event.\n     */\n    HttpDependencyParser.prototype.onResponse = function (response) {\n        this._setStatus(response.statusCode, undefined);\n        this.correlationId = Util.getCorrelationContextTarget(response, RequestResponseHeaders.requestContextTargetKey);\n    };\n    /**\n     * Gets a dependency data contract object for a completed ClientRequest.\n     */\n    HttpDependencyParser.prototype.getDependencyTelemetry = function (baseTelemetry, dependencyId) {\n        var urlObject = url.parse(this.url);\n        urlObject.search = undefined;\n        urlObject.hash = undefined;\n        var dependencyName = this.method.toUpperCase() + \" \" + urlObject.pathname;\n        var remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\n        var remoteDependencyTarget = urlObject.hostname;\n        if (this.correlationId) {\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_AI;\n            if (this.correlationId !== CorrelationIdManager.correlationIdPrefix) {\n                remoteDependencyTarget = urlObject.hostname + \" | \" + this.correlationId;\n            }\n        }\n        else {\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\n        }\n        if (urlObject.port) {\n            remoteDependencyTarget += \":\" + urlObject.port;\n        }\n        var dependencyTelemetry = {\n            id: dependencyId,\n            name: dependencyName,\n            data: this.url,\n            duration: this.duration,\n            success: this._isSuccess(),\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\n            properties: this.properties || {},\n            dependencyTypeName: remoteDependencyType,\n            target: remoteDependencyTarget\n        };\n        // We should keep any parameters the user passed in\n        // Except the fields defined above in requestTelemetry, which take priority\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\n        if (baseTelemetry) {\n            // Copy missing fields\n            for (var key in baseTelemetry) {\n                if (!dependencyTelemetry[key]) {\n                    dependencyTelemetry[key] = baseTelemetry[key];\n                }\n            }\n            // Merge properties\n            if (baseTelemetry.properties) {\n                for (var key in baseTelemetry.properties) {\n                    dependencyTelemetry.properties[key] = baseTelemetry.properties[key];\n                }\n            }\n        }\n        return dependencyTelemetry;\n    };\n    /**\n     * Builds a URL from request options, using the same logic as http.request(). This is\n     * necessary because a ClientRequest object does not expose a url property.\n     */\n    HttpDependencyParser._getUrlFromRequestOptions = function (options, request) {\n        if (typeof options === 'string') {\n            options = url.parse(options);\n        }\n        else {\n            // Avoid modifying the original options object.\n            var originalOptions_1 = options;\n            options = {};\n            if (originalOptions_1) {\n                Object.keys(originalOptions_1).forEach(function (key) {\n                    options[key] = originalOptions_1[key];\n                });\n            }\n        }\n        // Oddly, url.format ignores path and only uses pathname and search,\n        // so create them from the path, if path was specified\n        if (options.path) {\n            var parsedQuery = url.parse(options.path);\n            options.pathname = parsedQuery.pathname;\n            options.search = parsedQuery.search;\n        }\n        // Simiarly, url.format ignores hostname and port if host is specified,\n        // even if host doesn't have the port, but http.request does not work\n        // this way. It will use the port if one is not specified in host,\n        // effectively treating host as hostname, but will use the port specified\n        // in host if it exists.\n        if (options.host && options.port) {\n            // Force a protocol so it will parse the host as the host, not path.\n            // It is discarded and not used, so it doesn't matter if it doesn't match\n            var parsedHost = url.parse(\"http://\" + options.host);\n            if (!parsedHost.port && options.port) {\n                options.hostname = options.host;\n                delete options.host;\n            }\n        }\n        // Mix in default values used by http.request and others\n        options.protocol = options.protocol || (request.agent && request.agent.protocol) || undefined;\n        options.hostname = options.hostname || 'localhost';\n        return url.format(options);\n    };\n    return HttpDependencyParser;\n}(RequestParser));\nmodule.exports = HttpDependencyParser;\n//# sourceMappingURL=HttpDependencyParser.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar url = require(\"url\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar RequestParser = require(\"./RequestParser\");\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\nvar Tracestate = require(\"../Library/Tracestate\");\nvar Traceparent = require(\"../Library/Traceparent\");\n/**\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\n */\nvar HttpRequestParser = (function (_super) {\n    __extends(HttpRequestParser, _super);\n    function HttpRequestParser(request, requestId) {\n        var _this = _super.call(this) || this;\n        if (request) {\n            _this.method = request.method;\n            _this.url = _this._getAbsoluteUrl(request);\n            _this.startTime = +new Date();\n            _this.socketRemoteAddress = request.socket && request.socket.remoteAddress;\n            _this.parseHeaders(request, requestId);\n            if (request.connection) {\n                _this.connectionRemoteAddress = request.connection.remoteAddress;\n                _this.legacySocketRemoteAddress = request.connection[\"socket\"] && request.connection[\"socket\"].remoteAddress;\n            }\n        }\n        return _this;\n    }\n    HttpRequestParser.prototype.onError = function (error, ellapsedMilliseconds) {\n        this._setStatus(undefined, error);\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\n        if (ellapsedMilliseconds) {\n            this.duration = ellapsedMilliseconds;\n        }\n    };\n    HttpRequestParser.prototype.onResponse = function (response, ellapsedMilliseconds) {\n        this._setStatus(response.statusCode, undefined);\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\n        if (ellapsedMilliseconds) {\n            this.duration = ellapsedMilliseconds;\n        }\n    };\n    HttpRequestParser.prototype.getRequestTelemetry = function (baseTelemetry) {\n        var requestTelemetry = {\n            id: this.requestId,\n            name: this.method + \" \" + url.parse(this.url).pathname,\n            url: this.url,\n            /*\n            See https://github.com/Microsoft/ApplicationInsights-dotnet-server/blob/25d695e6a906fbe977f67be3966d25dbf1c50a79/Src/Web/Web.Shared.Net/RequestTrackingTelemetryModule.cs#L250\n            for reference\n            */\n            source: this.sourceCorrelationId,\n            duration: this.duration,\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\n            success: this._isSuccess(),\n            properties: this.properties\n        };\n        // We should keep any parameters the user passed in\n        // Except the fields defined above in requestTelemetry, which take priority\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\n        if (baseTelemetry) {\n            // Copy missing fields\n            for (var key in baseTelemetry) {\n                if (!requestTelemetry[key]) {\n                    requestTelemetry[key] = baseTelemetry[key];\n                }\n            }\n            // Merge properties\n            if (baseTelemetry.properties) {\n                for (var key in baseTelemetry.properties) {\n                    requestTelemetry.properties[key] = baseTelemetry.properties[key];\n                }\n            }\n        }\n        return requestTelemetry;\n    };\n    HttpRequestParser.prototype.getRequestTags = function (tags) {\n        // create a copy of the context for requests since client info will be used here\n        var newTags = {};\n        for (var key in tags) {\n            newTags[key] = tags[key];\n        }\n        // don't override tags if they are already set\n        newTags[HttpRequestParser.keys.locationIp] = tags[HttpRequestParser.keys.locationIp] || this._getIp();\n        newTags[HttpRequestParser.keys.sessionId] = tags[HttpRequestParser.keys.sessionId] || this._getId(\"ai_session\");\n        newTags[HttpRequestParser.keys.userId] = tags[HttpRequestParser.keys.userId] || this._getId(\"ai_user\");\n        newTags[HttpRequestParser.keys.userAuthUserId] = tags[HttpRequestParser.keys.userAuthUserId] || this._getId(\"ai_authUser\");\n        newTags[HttpRequestParser.keys.operationName] = this.getOperationName(tags);\n        newTags[HttpRequestParser.keys.operationParentId] = this.getOperationParentId(tags);\n        newTags[HttpRequestParser.keys.operationId] = this.getOperationId(tags);\n        return newTags;\n    };\n    HttpRequestParser.prototype.getOperationId = function (tags) {\n        return tags[HttpRequestParser.keys.operationId] || this.operationId;\n    };\n    HttpRequestParser.prototype.getOperationParentId = function (tags) {\n        return tags[HttpRequestParser.keys.operationParentId] || this.parentId || this.getOperationId(tags);\n    };\n    HttpRequestParser.prototype.getOperationName = function (tags) {\n        return tags[HttpRequestParser.keys.operationName] || this.method + \" \" + url.parse(this.url).pathname;\n    };\n    HttpRequestParser.prototype.getRequestId = function () {\n        return this.requestId;\n    };\n    HttpRequestParser.prototype.getCorrelationContextHeader = function () {\n        return this.correlationContextHeader;\n    };\n    HttpRequestParser.prototype.getTraceparent = function () {\n        return this.traceparent;\n    };\n    HttpRequestParser.prototype.getTracestate = function () {\n        return this.tracestate;\n    };\n    HttpRequestParser.prototype.getLegacyRootId = function () {\n        return this.legacyRootId;\n    };\n    HttpRequestParser.prototype._getAbsoluteUrl = function (request) {\n        if (!request.headers) {\n            return request.url;\n        }\n        var encrypted = request.connection ? request.connection.encrypted : null;\n        var requestUrl = url.parse(request.url);\n        var pathName = requestUrl.pathname;\n        var search = requestUrl.search;\n        var absoluteUrl = url.format({\n            protocol: encrypted ? \"https\" : \"http\",\n            host: request.headers.host,\n            pathname: pathName,\n            search: search\n        });\n        return absoluteUrl;\n    };\n    HttpRequestParser.prototype._getIp = function () {\n        // regex to match ipv4 without port\n        // Note: including the port would cause the payload to be rejected by the data collector\n        var ipMatch = /[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}/;\n        var check = function (str) {\n            var results = ipMatch.exec(str);\n            if (results) {\n                return results[0];\n            }\n        };\n        var ip = check(this.rawHeaders[\"x-forwarded-for\"])\n            || check(this.rawHeaders[\"x-client-ip\"])\n            || check(this.rawHeaders[\"x-real-ip\"])\n            || check(this.connectionRemoteAddress)\n            || check(this.socketRemoteAddress)\n            || check(this.legacySocketRemoteAddress);\n        // node v12 returns this if the address is \"localhost\"\n        if (!ip\n            && this.connectionRemoteAddress\n            && this.connectionRemoteAddress.substr\n            && this.connectionRemoteAddress.substr(0, 2) === \"::\") {\n            ip = \"127.0.0.1\";\n        }\n        return ip;\n    };\n    HttpRequestParser.prototype._getId = function (name) {\n        var cookie = (this.rawHeaders && this.rawHeaders[\"cookie\"] &&\n            typeof this.rawHeaders[\"cookie\"] === 'string' && this.rawHeaders[\"cookie\"]) || \"\";\n        var value = HttpRequestParser.parseId(Util.getCookie(name, cookie));\n        return value;\n    };\n    /**\n     * Sets this operation's operationId, parentId, requestId (and legacyRootId, if necessary) based on this operation's traceparent\n     */\n    HttpRequestParser.prototype.setBackCompatFromThisTraceContext = function () {\n        // Set operationId\n        this.operationId = this.traceparent.traceId;\n        if (this.traceparent.legacyRootId) {\n            this.legacyRootId = this.traceparent.legacyRootId;\n        }\n        // Set parentId with existing spanId\n        this.parentId = this.traceparent.parentId;\n        // Update the spanId and set the current requestId\n        this.traceparent.updateSpanId();\n        this.requestId = this.traceparent.getBackCompatRequestId();\n    };\n    HttpRequestParser.prototype.parseHeaders = function (request, requestId) {\n        this.rawHeaders = request.headers || request.rawHeaders;\n        this.userAgent = request.headers && request.headers[\"user-agent\"];\n        this.sourceCorrelationId = Util.getCorrelationContextTarget(request, RequestResponseHeaders.requestContextSourceKey);\n        if (request.headers) {\n            var tracestateHeader = request.headers[RequestResponseHeaders.traceStateHeader]; // w3c header\n            var traceparentHeader = request.headers[RequestResponseHeaders.traceparentHeader]; // w3c header\n            var requestIdHeader = request.headers[RequestResponseHeaders.requestIdHeader]; // default AI header\n            var legacy_parentId = request.headers[RequestResponseHeaders.parentIdHeader]; // legacy AI header\n            var legacy_rootId = request.headers[RequestResponseHeaders.rootIdHeader]; // legacy AI header\n            this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader];\n            if (CorrelationIdManager.w3cEnabled && (traceparentHeader || tracestateHeader)) {\n                // Parse W3C Trace Context headers\n                this.traceparent = new Traceparent(traceparentHeader); // new traceparent is always created from this\n                this.tracestate = traceparentHeader && tracestateHeader && new Tracestate(tracestateHeader); // discard tracestate if no traceparent is present\n                this.setBackCompatFromThisTraceContext();\n            }\n            else if (requestIdHeader) {\n                // Parse AI headers\n                if (CorrelationIdManager.w3cEnabled) {\n                    this.traceparent = new Traceparent(null, requestIdHeader);\n                    this.setBackCompatFromThisTraceContext();\n                }\n                else {\n                    this.parentId = requestIdHeader;\n                    this.requestId = CorrelationIdManager.generateRequestId(this.parentId);\n                    this.operationId = CorrelationIdManager.getRootId(this.requestId);\n                }\n            }\n            else {\n                // Legacy fallback\n                if (CorrelationIdManager.w3cEnabled) {\n                    this.traceparent = new Traceparent();\n                    this.traceparent.parentId = legacy_parentId;\n                    this.traceparent.legacyRootId = legacy_rootId || legacy_parentId;\n                    this.setBackCompatFromThisTraceContext();\n                }\n                else {\n                    this.parentId = legacy_parentId;\n                    this.requestId = CorrelationIdManager.generateRequestId(legacy_rootId || this.parentId);\n                    this.correlationContextHeader = null;\n                    this.operationId = CorrelationIdManager.getRootId(this.requestId);\n                }\n            }\n            if (requestId) {\n                // For the scenarios that don't guarantee an AI-created context,\n                // override the requestId with the provided one.\n                this.requestId = requestId;\n                this.operationId = CorrelationIdManager.getRootId(this.requestId);\n            }\n        }\n    };\n    HttpRequestParser.parseId = function (cookieValue) {\n        var cookieParts = cookieValue.split(\"|\");\n        if (cookieParts.length > 0) {\n            return cookieParts[0];\n        }\n        return \"\"; // old behavior was to return \"\" for incorrect parsing\n    };\n    HttpRequestParser.keys = new Contracts.ContextTagKeys();\n    return HttpRequestParser;\n}(RequestParser));\nmodule.exports = HttpRequestParser;\n//# sourceMappingURL=HttpRequestParser.js.map","\"use strict\";\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar Logging = require(\"../Library/Logging\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar HttpRequestParser = require(\"./HttpRequestParser\");\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\nvar AutoCollectPerformance = require(\"./Performance\");\nvar AutoCollectHttpRequests = (function () {\n    function AutoCollectHttpRequests(client) {\n        if (!!AutoCollectHttpRequests.INSTANCE) {\n            throw new Error(\"Server request tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectHttpRequests.INSTANCE = this;\n        this._client = client;\n    }\n    AutoCollectHttpRequests.prototype.enable = function (isEnabled) {\n        this._isEnabled = isEnabled;\n        // Autocorrelation requires automatic monitoring of incoming server requests\n        // Disabling autocollection but enabling autocorrelation will still enable\n        // request monitoring but will not produce request events\n        if ((this._isAutoCorrelating || this._isEnabled || AutoCollectPerformance.isEnabled()) && !this._isInitialized) {\n            this.useAutoCorrelation(this._isAutoCorrelating);\n            this._initialize();\n        }\n    };\n    AutoCollectHttpRequests.prototype.useAutoCorrelation = function (isEnabled, forceClsHooked) {\n        if (isEnabled && !this._isAutoCorrelating) {\n            CorrelationContextManager_1.CorrelationContextManager.enable(forceClsHooked);\n        }\n        else if (!isEnabled && this._isAutoCorrelating) {\n            CorrelationContextManager_1.CorrelationContextManager.disable();\n        }\n        this._isAutoCorrelating = isEnabled;\n    };\n    AutoCollectHttpRequests.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectHttpRequests.prototype.isAutoCorrelating = function () {\n        return this._isAutoCorrelating;\n    };\n    AutoCollectHttpRequests.prototype._generateCorrelationContext = function (requestParser) {\n        if (!this._isAutoCorrelating) {\n            return;\n        }\n        return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.getOperationId(this._client.context.tags), requestParser.getRequestId(), requestParser.getOperationName(this._client.context.tags), requestParser.getCorrelationContextHeader(), requestParser.getTraceparent(), requestParser.getTracestate());\n    };\n    AutoCollectHttpRequests.prototype._initialize = function () {\n        var _this = this;\n        this._isInitialized = true;\n        var wrapOnRequestHandler = function (onRequest) {\n            if (!onRequest) {\n                return undefined;\n            }\n            if (typeof onRequest !== 'function') {\n                throw new Error('onRequest handler must be a function');\n            }\n            return function (request, response) {\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request);\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(response);\n                var shouldCollect = request && !request[AutoCollectHttpRequests.alreadyAutoCollectedFlag];\n                if (request && shouldCollect) {\n                    // Set up correlation context\n                    var requestParser_1 = new HttpRequestParser(request);\n                    var correlationContext = _this._generateCorrelationContext(requestParser_1);\n                    // Note: Check for if correlation is enabled happens within this method.\n                    // If not enabled, function will directly call the callback.\n                    CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {\n                        if (_this._isEnabled) {\n                            // Mark as auto collected\n                            request[AutoCollectHttpRequests.alreadyAutoCollectedFlag] = true;\n                            // Auto collect request\n                            AutoCollectHttpRequests.trackRequest(_this._client, { request: request, response: response }, requestParser_1);\n                        }\n                        if (typeof onRequest === \"function\") {\n                            onRequest(request, response);\n                        }\n                    });\n                }\n                else {\n                    if (typeof onRequest === \"function\") {\n                        onRequest(request, response);\n                    }\n                }\n            };\n        };\n        // The `http.createServer` function will instantiate a new http.Server object.\n        // Inside the Server's constructor, it is using addListener to register the\n        // onRequest handler. So there are two ways to inject the wrapped onRequest handler:\n        // 1) Overwrite Server.prototype.addListener (and .on()) globally and not patching\n        //    the http.createServer call. Or\n        // 2) Overwrite the http.createServer method and add a patched addListener to the\n        //    fresh server instance. This seems more stable for possible future changes as\n        //    it also covers the case where the Server might not use addListener to manage\n        //    the callback internally.\n        //    And also as long as the constructor uses addListener to add the handle, it is\n        //    ok to patch the addListener after construction only. Because if we would patch\n        //    the prototype one and the createServer method, we would wrap the handler twice\n        //    in case of the constructor call.\n        var wrapServerEventHandler = function (server) {\n            var originalAddListener = server.addListener.bind(server);\n            server.addListener = function (eventType, eventHandler) {\n                switch (eventType) {\n                    case 'request':\n                    case 'checkContinue':\n                        return originalAddListener(eventType, wrapOnRequestHandler(eventHandler));\n                    default:\n                        return originalAddListener(eventType, eventHandler);\n                }\n            };\n            // on is an alias to addListener only\n            server.on = server.addListener;\n        };\n        var originalHttpServer = http.createServer;\n        http.createServer = function (onRequest) {\n            // todo: get a pointer to the server so the IP address can be read from server.address\n            var server = originalHttpServer(wrapOnRequestHandler(onRequest));\n            wrapServerEventHandler(server);\n            return server;\n        };\n        var originalHttpsServer = https.createServer;\n        https.createServer = function (options, onRequest) {\n            var server = originalHttpsServer(options, wrapOnRequestHandler(onRequest));\n            wrapServerEventHandler(server);\n            return server;\n        };\n    };\n    /**\n     * Tracks a request synchronously (doesn't wait for response 'finish' event)\n     */\n    AutoCollectHttpRequests.trackRequestSync = function (client, telemetry) {\n        if (!telemetry.request || !telemetry.response || !client) {\n            Logging.info(\"AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\n            return;\n        }\n        AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\n        // store data about the request\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var requestParser = new HttpRequestParser(telemetry.request, (correlationContext && correlationContext.operation.parentId));\n        // Overwrite correlation context with request parser results\n        if (correlationContext) {\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\n            correlationContext.operation.parentId = requestParser.getRequestId() || correlationContext.operation.parentId;\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\n        }\n        AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, telemetry.duration, telemetry.error);\n    };\n    /**\n     * Tracks a request by listening to the response 'finish' event\n     */\n    AutoCollectHttpRequests.trackRequest = function (client, telemetry, _requestParser) {\n        if (!telemetry.request || !telemetry.response || !client) {\n            Logging.info(\"AutoCollectHttpRequests.trackRequest was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\n            return;\n        }\n        // store data about the request\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var requestParser = _requestParser || new HttpRequestParser(telemetry.request, correlationContext && correlationContext.operation.parentId);\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl())) {\n            AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\n        }\n        // Overwrite correlation context with request parser results (if not an automatic track. we've already precalculated the correlation context in that case)\n        if (correlationContext && !_requestParser) {\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\n            correlationContext.operation.parentId = requestParser.getOperationParentId(client.context.tags) || correlationContext.operation.parentId;\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\n        }\n        // response listeners\n        if (telemetry.response.once) {\n            telemetry.response.once(\"finish\", function () {\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, null);\n            });\n        }\n        // track a failed request if an error is emitted\n        if (telemetry.request.on) {\n            telemetry.request.on(\"error\", function (error) {\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, error);\n            });\n        }\n    };\n    /**\n     * Add the target correlationId to the response headers, if not already provided.\n     */\n    AutoCollectHttpRequests.addResponseCorrelationIdHeader = function (client, response) {\n        if (client.config && client.config.correlationId &&\n            response.getHeader && response.setHeader && !response.headersSent) {\n            var correlationHeader = response.getHeader(RequestResponseHeaders.requestContextHeader);\n            Util.safeIncludeCorrelationHeader(client, response, correlationHeader);\n        }\n    };\n    AutoCollectHttpRequests.endRequest = function (client, requestParser, telemetry, ellapsedMilliseconds, error) {\n        if (error) {\n            requestParser.onError(error, ellapsedMilliseconds);\n        }\n        else {\n            requestParser.onResponse(telemetry.response, ellapsedMilliseconds);\n        }\n        var requestTelemetry = requestParser.getRequestTelemetry(telemetry);\n        requestTelemetry.tagOverrides = requestParser.getRequestTags(client.context.tags);\n        if (telemetry.tagOverrides) {\n            for (var key in telemetry.tagOverrides) {\n                requestTelemetry.tagOverrides[key] = telemetry.tagOverrides[key];\n            }\n        }\n        var legacyRootId = requestParser.getLegacyRootId();\n        if (legacyRootId) {\n            requestTelemetry.properties[\"ai_legacyRootId\"] = legacyRootId;\n        }\n        requestTelemetry.contextObjects = requestTelemetry.contextObjects || {};\n        requestTelemetry.contextObjects[\"http.ServerRequest\"] = telemetry.request;\n        requestTelemetry.contextObjects[\"http.ServerResponse\"] = telemetry.response;\n        client.trackRequest(requestTelemetry);\n    };\n    AutoCollectHttpRequests.prototype.dispose = function () {\n        AutoCollectHttpRequests.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n        CorrelationContextManager_1.CorrelationContextManager.disable();\n        this._isAutoCorrelating = false;\n    };\n    AutoCollectHttpRequests.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\n    return AutoCollectHttpRequests;\n}());\nmodule.exports = AutoCollectHttpRequests;\n//# sourceMappingURL=HttpRequests.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Config = require(\"../Library/Config\");\nvar Context = require(\"../Library/Context\");\nvar Logging = require(\"../Library/Logging\");\nvar AutoCollectNativePerformance = (function () {\n    function AutoCollectNativePerformance(client) {\n        this._disabledMetrics = {};\n        // Note: Only 1 instance of this can exist. So when we reconstruct this object,\n        // just disable old native instance and reset JS member variables\n        if (AutoCollectNativePerformance.INSTANCE) {\n            AutoCollectNativePerformance.INSTANCE.dispose();\n        }\n        AutoCollectNativePerformance.INSTANCE = this;\n        this._client = client;\n    }\n    /**\n     *  Reports if NativePerformance is able to run in this environment\n     */\n    AutoCollectNativePerformance.isNodeVersionCompatible = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        return parseInt(nodeVer[0]) >= 6;\n    };\n    /**\n     * Start instance of native metrics agent.\n     *\n     * @param {boolean} isEnabled\n     * @param {number} [collectionInterval=60000]\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype.enable = function (isEnabled, disabledMetrics, collectionInterval) {\n        var _this = this;\n        if (disabledMetrics === void 0) { disabledMetrics = {}; }\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\n        if (!AutoCollectNativePerformance.isNodeVersionCompatible()) {\n            return;\n        }\n        if (AutoCollectNativePerformance._metricsAvailable == undefined && isEnabled && !this._isInitialized) {\n            // Try to require in the native-metrics library. If it's found initialize it, else do nothing and never try again.\n            try {\n                var NativeMetricsEmitters = require(\"applicationinsights-native-metrics\");\n                AutoCollectNativePerformance._emitter = new NativeMetricsEmitters();\n                AutoCollectNativePerformance._metricsAvailable = true;\n                Logging.info(\"Native metrics module successfully loaded!\");\n            }\n            catch (err) {\n                // Package not available. Never try again\n                AutoCollectNativePerformance._metricsAvailable = false;\n                return;\n            }\n        }\n        this._isEnabled = isEnabled;\n        this._disabledMetrics = disabledMetrics;\n        if (this._isEnabled && !this._isInitialized) {\n            this._isInitialized = true;\n        }\n        // Enable the emitter if we were able to construct one\n        if (this._isEnabled && AutoCollectNativePerformance._emitter) {\n            // enable self\n            AutoCollectNativePerformance._emitter.enable(true, collectionInterval);\n            this._handle = setInterval(function () { return _this._trackNativeMetrics(); }, collectionInterval);\n            this._handle.unref();\n        }\n        else if (AutoCollectNativePerformance._emitter) {\n            // disable self\n            AutoCollectNativePerformance._emitter.enable(false);\n            if (this._handle) {\n                clearInterval(this._handle);\n                this._handle = undefined;\n            }\n        }\n    };\n    /**\n     * Cleanup this instance of AutoCollectNativePerformance\n     *\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype.dispose = function () {\n        this.enable(false);\n    };\n    /**\n     * Parse environment variable and overwrite isEnabled based on respective fields being set\n     *\n     * @private\n     * @static\n     * @param {(boolean | IDisabledExtendedMetrics)} collectExtendedMetrics\n     * @returns {(boolean | IDisabledExtendedMetrics)}\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.parseEnabled = function (collectExtendedMetrics) {\n        var disableAll = process.env[Config.ENV_nativeMetricsDisableAll];\n        var individualOptOuts = process.env[Config.ENV_nativeMetricsDisablers];\n        // case 1: disable all env var set, RETURN with isEnabled=false\n        if (disableAll) {\n            return { isEnabled: false, disabledMetrics: {} };\n        }\n        // case 2: individual env vars set, RETURN with isEnabled=true, disabledMetrics={...}\n        if (individualOptOuts) {\n            var optOutsArr = individualOptOuts.split(\",\");\n            var disabledMetrics = {};\n            if (optOutsArr.length > 0) {\n                for (var _i = 0, optOutsArr_1 = optOutsArr; _i < optOutsArr_1.length; _i++) {\n                    var opt = optOutsArr_1[_i];\n                    disabledMetrics[opt] = true;\n                }\n            }\n            // case 2a: collectExtendedMetrics is an object, overwrite existing ones if they exist\n            if (typeof collectExtendedMetrics === \"object\") {\n                return { isEnabled: true, disabledMetrics: __assign({}, collectExtendedMetrics, disabledMetrics) };\n            }\n            // case 2b: collectExtendedMetrics is a boolean, set disabledMetrics as is\n            return { isEnabled: collectExtendedMetrics, disabledMetrics: disabledMetrics };\n        }\n        // case 4: no env vars set, input arg is a boolean, RETURN with isEnabled=collectExtendedMetrics, disabledMetrics={}\n        if (typeof collectExtendedMetrics === \"boolean\") {\n            return { isEnabled: collectExtendedMetrics, disabledMetrics: {} };\n        }\n        else {\n            // case 5: no env vars set, input arg is object, RETURN with isEnabled=true, disabledMetrics=collectExtendedMetrics\n            return { isEnabled: true, disabledMetrics: collectExtendedMetrics };\n        }\n    };\n    /**\n     * Trigger an iteration of native metrics collection\n     *\n     * @private\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackNativeMetrics = function () {\n        var shouldSendAll = true;\n        if (typeof this._isEnabled !== \"object\") {\n            shouldSendAll = this._isEnabled;\n        }\n        if (shouldSendAll) {\n            this._trackGarbageCollection();\n            this._trackEventLoop();\n            this._trackHeapUsage();\n        }\n    };\n    /**\n     * Tracks garbage collection stats for this interval. One custom metric is sent per type of garbage\n     * collection that occurred during this collection interval.\n     *\n     * @private\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackGarbageCollection = function () {\n        if (this._disabledMetrics.gc) {\n            return;\n        }\n        var gcData = AutoCollectNativePerformance._emitter.getGCData();\n        for (var gc in gcData) {\n            var metrics = gcData[gc].metrics;\n            var name_1 = gc + \" Garbage Collection Duration\";\n            var stdDev = Math.sqrt(metrics.sumSquares / metrics.count - Math.pow(metrics.total / metrics.count, 2)) || 0;\n            this._client.trackMetric({\n                name: name_1,\n                value: metrics.total,\n                count: metrics.count,\n                max: metrics.max,\n                min: metrics.min,\n                stdDev: stdDev,\n                tagOverrides: (_a = {},\n                    _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                    _a)\n            });\n        }\n        var _a;\n    };\n    /**\n     * Tracks event loop ticks per interval as a custom metric. Also included in the metric is min/max/avg\n     * time spent in event loop for this interval.\n     *\n     * @private\n     * @returns {void}\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackEventLoop = function () {\n        if (this._disabledMetrics.loop) {\n            return;\n        }\n        var loopData = AutoCollectNativePerformance._emitter.getLoopData();\n        var metrics = loopData.loopUsage;\n        if (metrics.count == 0) {\n            return;\n        }\n        var name = \"Event Loop CPU Time\";\n        var stdDev = Math.sqrt(metrics.sumSquares / metrics.count - Math.pow(metrics.total / metrics.count, 2)) || 0;\n        this._client.trackMetric({\n            name: name,\n            value: metrics.total,\n            count: metrics.count,\n            min: metrics.min,\n            max: metrics.max,\n            stdDev: stdDev,\n            tagOverrides: (_a = {},\n                _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _a)\n        });\n        var _a;\n    };\n    /**\n     * Track heap memory usage metrics as a custom metric.\n     *\n     * @private\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackHeapUsage = function () {\n        if (this._disabledMetrics.heap) {\n            return;\n        }\n        var memoryUsage = process.memoryUsage();\n        var heapUsed = memoryUsage.heapUsed, heapTotal = memoryUsage.heapTotal, rss = memoryUsage.rss;\n        this._client.trackMetric({\n            name: \"Memory Usage (Heap)\",\n            value: heapUsed,\n            count: 1,\n            tagOverrides: (_a = {},\n                _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _a)\n        });\n        this._client.trackMetric({\n            name: \"Memory Total (Heap)\",\n            value: heapTotal,\n            count: 1,\n            tagOverrides: (_b = {},\n                _b[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _b)\n        });\n        this._client.trackMetric({\n            name: \"Memory Usage (Non-Heap)\",\n            value: rss - heapTotal,\n            count: 1,\n            tagOverrides: (_c = {},\n                _c[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _c)\n        });\n        var _a, _b, _c;\n    };\n    return AutoCollectNativePerformance;\n}());\nexports.AutoCollectNativePerformance = AutoCollectNativePerformance;\n//# sourceMappingURL=NativePerformance.js.map","\"use strict\";\nvar os = require(\"os\");\nvar Constants = require(\"../Declarations/Constants\");\nvar AutoCollectPerformance = (function () {\n    /**\n     * @param enableLiveMetricsCounters - enable sending additional live metrics information (dependency metrics, exception metrics, committed memory)\n     */\n    function AutoCollectPerformance(client, collectionInterval, enableLiveMetricsCounters) {\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\n        if (enableLiveMetricsCounters === void 0) { enableLiveMetricsCounters = false; }\n        this._lastIntervalRequestExecutionTime = 0; // the sum of durations which took place during from app start until last interval\n        this._lastIntervalDependencyExecutionTime = 0;\n        if (!AutoCollectPerformance.INSTANCE) {\n            AutoCollectPerformance.INSTANCE = this;\n        }\n        this._isInitialized = false;\n        this._client = client;\n        this._collectionInterval = collectionInterval;\n        this._enableLiveMetricsCounters = enableLiveMetricsCounters;\n    }\n    AutoCollectPerformance.prototype.enable = function (isEnabled, collectionInterval) {\n        var _this = this;\n        this._isEnabled = isEnabled;\n        if (this._isEnabled && !this._isInitialized) {\n            this._isInitialized = true;\n        }\n        if (isEnabled) {\n            if (!this._handle) {\n                this._lastCpus = os.cpus();\n                this._lastRequests = {\n                    totalRequestCount: AutoCollectPerformance._totalRequestCount,\n                    totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\n                    time: +new Date\n                };\n                this._lastDependencies = {\n                    totalDependencyCount: AutoCollectPerformance._totalDependencyCount,\n                    totalFailedDependencyCount: AutoCollectPerformance._totalFailedDependencyCount,\n                    time: +new Date\n                };\n                this._lastExceptions = {\n                    totalExceptionCount: AutoCollectPerformance._totalExceptionCount,\n                    time: +new Date\n                };\n                if (typeof process.cpuUsage === 'function') {\n                    this._lastAppCpuUsage = process.cpuUsage();\n                }\n                this._lastHrtime = process.hrtime();\n                this._collectionInterval = collectionInterval || this._collectionInterval;\n                this._handle = setInterval(function () { return _this.trackPerformance(); }, this._collectionInterval);\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\n            }\n        }\n        else {\n            if (this._handle) {\n                clearInterval(this._handle);\n                this._handle = undefined;\n            }\n        }\n    };\n    AutoCollectPerformance.countRequest = function (duration, success) {\n        var durationMs;\n        if (!AutoCollectPerformance.isEnabled()) {\n            return;\n        }\n        if (typeof duration === 'string') {\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\n            durationMs = +new Date('1970-01-01T' + duration + 'Z'); // convert to num ms, returns NaN if wrong\n        }\n        else if (typeof duration === 'number') {\n            durationMs = duration;\n        }\n        else {\n            return;\n        }\n        AutoCollectPerformance._intervalRequestExecutionTime += durationMs;\n        if (success === false) {\n            AutoCollectPerformance._totalFailedRequestCount++;\n        }\n        AutoCollectPerformance._totalRequestCount++;\n    };\n    AutoCollectPerformance.countException = function () {\n        AutoCollectPerformance._totalExceptionCount++;\n    };\n    AutoCollectPerformance.countDependency = function (duration, success) {\n        var durationMs;\n        if (!AutoCollectPerformance.isEnabled()) {\n            return;\n        }\n        if (typeof duration === 'string') {\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\n            durationMs = +new Date('1970-01-01T' + duration + 'Z'); // convert to num ms, returns NaN if wrong\n        }\n        else if (typeof duration === 'number') {\n            durationMs = duration;\n        }\n        else {\n            return;\n        }\n        AutoCollectPerformance._intervalDependencyExecutionTime += durationMs;\n        if (success === false) {\n            AutoCollectPerformance._totalFailedDependencyCount++;\n        }\n        AutoCollectPerformance._totalDependencyCount++;\n    };\n    AutoCollectPerformance.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectPerformance.isEnabled = function () {\n        return AutoCollectPerformance.INSTANCE && AutoCollectPerformance.INSTANCE._isEnabled;\n    };\n    AutoCollectPerformance.prototype.trackPerformance = function () {\n        this._trackCpu();\n        this._trackMemory();\n        this._trackNetwork();\n        this._trackDependencyRate();\n        this._trackExceptionRate();\n    };\n    AutoCollectPerformance.prototype._trackCpu = function () {\n        // this reports total ms spent in each category since the OS was booted, to calculate percent it is necessary\n        // to find the delta since the last measurement\n        var cpus = os.cpus();\n        if (cpus && cpus.length && this._lastCpus && cpus.length === this._lastCpus.length) {\n            var totalUser = 0;\n            var totalSys = 0;\n            var totalNice = 0;\n            var totalIdle = 0;\n            var totalIrq = 0;\n            for (var i = 0; !!cpus && i < cpus.length; i++) {\n                var cpu = cpus[i];\n                var lastCpu = this._lastCpus[i];\n                var name = \"% cpu(\" + i + \") \";\n                var model = cpu.model;\n                var speed = cpu.speed;\n                var times = cpu.times;\n                var lastTimes = lastCpu.times;\n                // user cpu time (or) % CPU time spent in user space\n                var user = (times.user - lastTimes.user) || 0;\n                totalUser += user;\n                // system cpu time (or) % CPU time spent in kernel space\n                var sys = (times.sys - lastTimes.sys) || 0;\n                totalSys += sys;\n                // user nice cpu time (or) % CPU time spent on low priority processes\n                var nice = (times.nice - lastTimes.nice) || 0;\n                totalNice += nice;\n                // idle cpu time (or) % CPU time spent idle\n                var idle = (times.idle - lastTimes.idle) || 0;\n                totalIdle += idle;\n                // irq (or) % CPU time spent servicing/handling hardware interrupts\n                var irq = (times.irq - lastTimes.irq) || 0;\n                totalIrq += irq;\n            }\n            // Calculate % of total cpu time (user + system) this App Process used (Only supported by node v6.1.0+)\n            var appCpuPercent = undefined;\n            if (typeof process.cpuUsage === 'function') {\n                var appCpuUsage = process.cpuUsage();\n                var hrtime = process.hrtime();\n                var totalApp = ((appCpuUsage.user - this._lastAppCpuUsage.user) + (appCpuUsage.system - this._lastAppCpuUsage.system)) || 0;\n                if (typeof this._lastHrtime !== 'undefined' && this._lastHrtime.length === 2) {\n                    var elapsedTime = ((hrtime[0] - this._lastHrtime[0]) * 1e6 + (hrtime[1] - this._lastHrtime[1]) / 1e3) || 0; // convert to microseconds\n                    appCpuPercent = 100 * totalApp / (elapsedTime * cpus.length);\n                }\n                // Set previous\n                this._lastAppCpuUsage = appCpuUsage;\n                this._lastHrtime = hrtime;\n            }\n            var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;\n            this._client.trackMetric({ name: Constants.PerformanceCounter.PROCESSOR_TIME, value: ((combinedTotal - totalIdle) / combinedTotal) * 100 });\n            this._client.trackMetric({ name: Constants.PerformanceCounter.PROCESS_TIME, value: appCpuPercent || ((totalUser / combinedTotal) * 100) });\n        }\n        this._lastCpus = cpus;\n    };\n    AutoCollectPerformance.prototype._trackMemory = function () {\n        var freeMem = os.freemem();\n        var usedMem = process.memoryUsage().rss;\n        var committedMemory = os.totalmem() - freeMem;\n        this._client.trackMetric({ name: Constants.PerformanceCounter.PRIVATE_BYTES, value: usedMem });\n        this._client.trackMetric({ name: Constants.PerformanceCounter.AVAILABLE_BYTES, value: freeMem });\n        // Only supported by quickpulse service\n        if (this._enableLiveMetricsCounters) {\n            this._client.trackMetric({ name: Constants.QuickPulseCounter.COMMITTED_BYTES, value: committedMemory });\n        }\n    };\n    AutoCollectPerformance.prototype._trackNetwork = function () {\n        // track total request counters\n        var lastRequests = this._lastRequests;\n        var requests = {\n            totalRequestCount: AutoCollectPerformance._totalRequestCount,\n            totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\n            time: +new Date\n        };\n        var intervalRequests = (requests.totalRequestCount - lastRequests.totalRequestCount) || 0;\n        var intervalFailedRequests = (requests.totalFailedRequestCount - lastRequests.totalFailedRequestCount) || 0;\n        var elapsedMs = requests.time - lastRequests.time;\n        var elapsedSeconds = elapsedMs / 1000;\n        var averageRequestExecutionTime = ((AutoCollectPerformance._intervalRequestExecutionTime - this._lastIntervalRequestExecutionTime) / intervalRequests) || 0; // default to 0 in case no requests in this interval\n        this._lastIntervalRequestExecutionTime = AutoCollectPerformance._intervalRequestExecutionTime; // reset\n        if (elapsedMs > 0) {\n            var requestsPerSec = intervalRequests / elapsedSeconds;\n            var failedRequestsPerSec = intervalFailedRequests / elapsedSeconds;\n            this._client.trackMetric({ name: Constants.PerformanceCounter.REQUEST_RATE, value: requestsPerSec });\n            // Only send duration to live metrics if it has been updated!\n            if (!this._enableLiveMetricsCounters || intervalRequests > 0) {\n                this._client.trackMetric({ name: Constants.PerformanceCounter.REQUEST_DURATION, value: averageRequestExecutionTime });\n            }\n            // Only supported by quickpulse service\n            if (this._enableLiveMetricsCounters) {\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.REQUEST_FAILURE_RATE, value: failedRequestsPerSec });\n            }\n        }\n        this._lastRequests = requests;\n    };\n    // Static counter is accumulated externally. Report the rate to client here\n    // Note: This is currently only used with QuickPulse client\n    AutoCollectPerformance.prototype._trackDependencyRate = function () {\n        if (this._enableLiveMetricsCounters) {\n            var lastDependencies = this._lastDependencies;\n            var dependencies = {\n                totalDependencyCount: AutoCollectPerformance._totalDependencyCount,\n                totalFailedDependencyCount: AutoCollectPerformance._totalFailedDependencyCount,\n                time: +new Date\n            };\n            var intervalDependencies = (dependencies.totalDependencyCount - lastDependencies.totalDependencyCount) || 0;\n            var intervalFailedDependencies = (dependencies.totalFailedDependencyCount - lastDependencies.totalFailedDependencyCount) || 0;\n            var elapsedMs = dependencies.time - lastDependencies.time;\n            var elapsedSeconds = elapsedMs / 1000;\n            var averageDependencyExecutionTime = ((AutoCollectPerformance._intervalDependencyExecutionTime - this._lastIntervalDependencyExecutionTime) / intervalDependencies) || 0;\n            this._lastIntervalDependencyExecutionTime = AutoCollectPerformance._intervalDependencyExecutionTime; // reset\n            if (elapsedMs > 0) {\n                var dependenciesPerSec = intervalDependencies / elapsedSeconds;\n                var failedDependenciesPerSec = intervalFailedDependencies / elapsedSeconds;\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_RATE, value: dependenciesPerSec });\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_FAILURE_RATE, value: failedDependenciesPerSec });\n                // redundant check for livemetrics, but kept for consistency w/ requests\n                // Only send duration to live metrics if it has been updated!\n                if (!this._enableLiveMetricsCounters || intervalDependencies > 0) {\n                    this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_DURATION, value: averageDependencyExecutionTime });\n                }\n            }\n            this._lastDependencies = dependencies;\n        }\n    };\n    // Static counter is accumulated externally. Report the rate to client here\n    // Note: This is currently only used with QuickPulse client\n    AutoCollectPerformance.prototype._trackExceptionRate = function () {\n        if (this._enableLiveMetricsCounters) {\n            var lastExceptions = this._lastExceptions;\n            var exceptions = {\n                totalExceptionCount: AutoCollectPerformance._totalExceptionCount,\n                time: +new Date\n            };\n            var intervalExceptions = (exceptions.totalExceptionCount - lastExceptions.totalExceptionCount) || 0;\n            var elapsedMs = exceptions.time - lastExceptions.time;\n            var elapsedSeconds = elapsedMs / 1000;\n            if (elapsedMs > 0) {\n                var exceptionsPerSec = intervalExceptions / elapsedSeconds;\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.EXCEPTION_RATE, value: exceptionsPerSec });\n            }\n            this._lastExceptions = exceptions;\n        }\n    };\n    AutoCollectPerformance.prototype.dispose = function () {\n        AutoCollectPerformance.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectPerformance._totalRequestCount = 0;\n    AutoCollectPerformance._totalFailedRequestCount = 0;\n    AutoCollectPerformance._lastRequestExecutionTime = 0;\n    AutoCollectPerformance._totalDependencyCount = 0;\n    AutoCollectPerformance._totalFailedDependencyCount = 0;\n    AutoCollectPerformance._lastDependencyExecutionTime = 0;\n    AutoCollectPerformance._totalExceptionCount = 0;\n    AutoCollectPerformance._intervalDependencyExecutionTime = 0;\n    AutoCollectPerformance._intervalRequestExecutionTime = 0;\n    return AutoCollectPerformance;\n}());\nmodule.exports = AutoCollectPerformance;\n//# sourceMappingURL=Performance.js.map","\"use strict\";\n/**\n * Base class for helpers that read data from HTTP requst/response objects and convert them\n * into the telemetry contract objects.\n */\nvar RequestParser = (function () {\n    function RequestParser() {\n    }\n    /**\n     * Gets a url parsed out from request options\n     */\n    RequestParser.prototype.getUrl = function () {\n        return this.url;\n    };\n    RequestParser.prototype.RequestParser = function () {\n        this.startTime = +new Date();\n    };\n    RequestParser.prototype._setStatus = function (status, error) {\n        var endTime = +new Date();\n        this.duration = endTime - this.startTime;\n        this.statusCode = status;\n        var properties = this.properties || {};\n        if (error) {\n            if (typeof error === \"string\") {\n                properties[\"error\"] = error;\n            }\n            else if (error instanceof Error) {\n                properties[\"error\"] = error.message;\n            }\n            else if (typeof error === \"object\") {\n                for (var key in error) {\n                    properties[key] = error[key] && error[key].toString && error[key].toString();\n                }\n            }\n        }\n        this.properties = properties;\n    };\n    RequestParser.prototype._isSuccess = function () {\n        return (0 < this.statusCode) && (this.statusCode < 400);\n    };\n    return RequestParser;\n}());\nmodule.exports = RequestParser;\n//# sourceMappingURL=RequestParser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\n// Mapping from bunyan levels defined at https://github.com/trentm/node-bunyan/blob/master/lib/bunyan.js#L256\nvar bunyanToAILevelMap = {\n    10: Contracts_1.SeverityLevel.Verbose,\n    20: Contracts_1.SeverityLevel.Verbose,\n    30: Contracts_1.SeverityLevel.Information,\n    40: Contracts_1.SeverityLevel.Warning,\n    50: Contracts_1.SeverityLevel.Error,\n    60: Contracts_1.SeverityLevel.Critical,\n};\nvar subscriber = function (event) {\n    var message = event.data.result;\n    clients.forEach(function (client) {\n        var AIlevel = bunyanToAILevelMap[event.data.level];\n        if (message instanceof Error) {\n            client.trackException({ exception: (message) });\n        }\n        else {\n            client.trackTrace({ message: message, severity: AIlevel });\n        }\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"bunyan\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\nfunction dispose() {\n    diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\n    clients = [];\n}\nexports.dispose = dispose;\n//# sourceMappingURL=bunyan.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nvar subscriber = function (event) {\n    var message = event.data.message;\n    clients.forEach(function (client) {\n        if (message instanceof Error) {\n            client.trackException({ exception: message });\n        }\n        else {\n            // Message can have a trailing newline\n            if (message.lastIndexOf(\"\\n\") == message.length - 1) {\n                message = message.substring(0, message.length - 1);\n            }\n            client.trackTrace({ message: message, severity: (event.data.stderr ? Contracts_1.SeverityLevel.Warning : Contracts_1.SeverityLevel.Information) });\n        }\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"console\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\nfunction dispose() {\n    diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\n    clients = [];\n}\nexports.dispose = dispose;\n//# sourceMappingURL=console.sub.js.map","\"use strict\";\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Logging = require(\"../../Library/Logging\");\nexports.IsInitialized = !process.env[\"APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL\"];\nvar TAG = \"DiagnosticChannel\";\nif (exports.IsInitialized) {\n    var publishers = require(\"diagnostic-channel-publishers\");\n    var individualOptOuts = process.env[\"APPLICATION_INSIGHTS_NO_PATCH_MODULES\"] || \"\";\n    var unpatchedModules = individualOptOuts.split(\",\");\n    var modules = {\n        bunyan: publishers.bunyan,\n        console: publishers.console,\n        mongodb: publishers.mongodb,\n        mongodbCore: publishers.mongodbCore,\n        mysql: publishers.mysql,\n        redis: publishers.redis,\n        pg: publishers.pg,\n        pgPool: publishers.pgPool,\n        winston: publishers.winston\n    };\n    for (var mod in modules) {\n        if (unpatchedModules.indexOf(mod) === -1) {\n            modules[mod].enable();\n            Logging.info(TAG, \"Subscribed to \" + mod + \" events\");\n        }\n    }\n    if (unpatchedModules.length > 0) {\n        Logging.info(TAG, \"Some modules will not be patched\", unpatchedModules);\n    }\n}\nelse {\n    Logging.info(TAG, \"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set\");\n}\nfunction registerContextPreservation(cb) {\n    if (!exports.IsInitialized) {\n        return;\n    }\n    require(\"diagnostic-channel\").channel.addContextPreservation(cb);\n}\nexports.registerContextPreservation = registerContextPreservation;\n//# sourceMappingURL=initialization.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    if (event.data.event.commandName === \"ismaster\") {\n        // suppress noisy ismaster commands\n    }\n    clients.forEach(function (client) {\n        var dbName = (event.data.startedData && event.data.startedData.databaseName) || \"Unknown database\";\n        client.trackDependency({\n            target: dbName,\n            data: event.data.event.commandName,\n            name: event.data.event.commandName,\n            duration: event.data.event.duration,\n            success: event.data.succeeded,\n            /* TODO: transmit result code from mongo */\n            resultCode: event.data.succeeded ? \"0\" : \"1\",\n            dependencyTypeName: 'mongodb'\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"mongodb\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"mongodb\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        var queryObj = event.data.query || {};\n        var sqlString = queryObj.sql || \"Unknown query\";\n        var success = !event.data.err;\n        var connection = queryObj._connection || {};\n        var connectionConfig = connection.config || {};\n        var dbName = connectionConfig.socketPath ? connectionConfig.socketPath : (connectionConfig.host || \"localhost\") + \":\" + connectionConfig.port;\n        client.trackDependency({\n            target: dbName,\n            data: sqlString,\n            name: sqlString,\n            duration: event.data.duration,\n            success: success,\n            /* TODO: transmit result code from mysql */\n            resultCode: success ? \"0\" : \"1\",\n            dependencyTypeName: \"mysql\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"mysql\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"mysql\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=mysql.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        var q = event.data.query;\n        var sql = (q.preparable && q.preparable.text) || q.plan || q.text || \"unknown query\";\n        var success = !event.data.error;\n        var conn = event.data.database.host + \":\" + event.data.database.port;\n        client.trackDependency({\n            target: conn,\n            data: sql,\n            name: sql,\n            duration: event.data.duration,\n            success: success,\n            resultCode: success ? \"0\" : \"1\",\n            dependencyTypeName: \"postgres\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"postgres\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"postgres\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=postgres.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        if (event.data.commandObj.command === \"info\") {\n            // We don't want to report 'info', it's irrelevant\n            return;\n        }\n        client.trackDependency({\n            target: event.data.address,\n            name: event.data.commandObj.command,\n            data: event.data.commandObj.command,\n            duration: event.data.duration,\n            success: !event.data.err,\n            /* TODO: transmit result code from redis */\n            resultCode: event.data.err ? \"1\" : \"0\",\n            dependencyTypeName: \"redis\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"redis\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"redis\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=redis.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nvar winstonToAILevelMap = {\n    syslog: function (og) {\n        var map = {\n            emerg: Contracts_1.SeverityLevel.Critical,\n            alert: Contracts_1.SeverityLevel.Critical,\n            crit: Contracts_1.SeverityLevel.Critical,\n            error: Contracts_1.SeverityLevel.Error,\n            warning: Contracts_1.SeverityLevel.Warning,\n            notice: Contracts_1.SeverityLevel.Information,\n            info: Contracts_1.SeverityLevel.Information,\n            debug: Contracts_1.SeverityLevel.Verbose\n        };\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\n    },\n    npm: function (og) {\n        var map = {\n            error: Contracts_1.SeverityLevel.Error,\n            warn: Contracts_1.SeverityLevel.Warning,\n            info: Contracts_1.SeverityLevel.Information,\n            verbose: Contracts_1.SeverityLevel.Verbose,\n            debug: Contracts_1.SeverityLevel.Verbose,\n            silly: Contracts_1.SeverityLevel.Verbose\n        };\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\n    },\n    unknown: function (og) {\n        return Contracts_1.SeverityLevel.Information;\n    }\n};\nvar subscriber = function (event) {\n    var message = event.data.message;\n    clients.forEach(function (client) {\n        if (message instanceof Error) {\n            client.trackException({\n                exception: message,\n                properties: event.data.meta\n            });\n        }\n        else {\n            var AIlevel = winstonToAILevelMap[event.data.levelKind](event.data.level);\n            client.trackTrace({\n                message: message,\n                severity: AIlevel,\n                properties: event.data.meta\n            });\n        }\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"winston\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\nfunction dispose() {\n    diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\n    clients = [];\n}\nexports.dispose = dispose;\n//# sourceMappingURL=winston.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_BREEZE_ENDPOINT = \"https://dc.services.visualstudio.com\";\nexports.DEFAULT_LIVEMETRICS_ENDPOINT = \"https://rt.services.visualstudio.com\";\nexports.DEFAULT_LIVEMETRICS_HOST = \"rt.services.visualstudio.com\";\nvar QuickPulseCounter;\n(function (QuickPulseCounter) {\n    // Memory\n    QuickPulseCounter[\"COMMITTED_BYTES\"] = \"\\\\Memory\\\\Committed Bytes\";\n    // CPU\n    QuickPulseCounter[\"PROCESSOR_TIME\"] = \"\\\\Processor(_Total)\\\\% Processor Time\";\n    // Request\n    QuickPulseCounter[\"REQUEST_RATE\"] = \"\\\\ApplicationInsights\\\\Requests/Sec\";\n    QuickPulseCounter[\"REQUEST_FAILURE_RATE\"] = \"\\\\ApplicationInsights\\\\Requests Failed/Sec\";\n    QuickPulseCounter[\"REQUEST_DURATION\"] = \"\\\\ApplicationInsights\\\\Request Duration\";\n    // Dependency\n    QuickPulseCounter[\"DEPENDENCY_RATE\"] = \"\\\\ApplicationInsights\\\\Dependency Calls/Sec\";\n    QuickPulseCounter[\"DEPENDENCY_FAILURE_RATE\"] = \"\\\\ApplicationInsights\\\\Dependency Calls Failed/Sec\";\n    QuickPulseCounter[\"DEPENDENCY_DURATION\"] = \"\\\\ApplicationInsights\\\\Dependency Call Duration\";\n    // Exception\n    QuickPulseCounter[\"EXCEPTION_RATE\"] = \"\\\\ApplicationInsights\\\\Exceptions/Sec\";\n})(QuickPulseCounter = exports.QuickPulseCounter || (exports.QuickPulseCounter = {}));\nvar PerformanceCounter;\n(function (PerformanceCounter) {\n    // Memory\n    PerformanceCounter[\"PRIVATE_BYTES\"] = \"\\\\Process(??APP_WIN32_PROC??)\\\\Private Bytes\";\n    PerformanceCounter[\"AVAILABLE_BYTES\"] = \"\\\\Memory\\\\Available Bytes\";\n    // CPU\n    PerformanceCounter[\"PROCESSOR_TIME\"] = \"\\\\Processor(_Total)\\\\% Processor Time\";\n    PerformanceCounter[\"PROCESS_TIME\"] = \"\\\\Process(??APP_WIN32_PROC??)\\\\% Processor Time\";\n    // Requests\n    PerformanceCounter[\"REQUEST_RATE\"] = \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Requests/Sec\";\n    PerformanceCounter[\"REQUEST_DURATION\"] = \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Request Execution Time\";\n})(PerformanceCounter = exports.PerformanceCounter || (exports.PerformanceCounter = {}));\n;\n/**\n * Map a PerformanceCounter/QuickPulseCounter to a QuickPulseCounter. If no mapping exists, mapping is *undefined*\n */\nexports.PerformanceToQuickPulseCounter = (_a = {},\n    _a[PerformanceCounter.PROCESSOR_TIME] = QuickPulseCounter.PROCESSOR_TIME,\n    _a[PerformanceCounter.REQUEST_RATE] = QuickPulseCounter.REQUEST_RATE,\n    _a[PerformanceCounter.REQUEST_DURATION] = QuickPulseCounter.REQUEST_DURATION,\n    // Remap quick pulse only counters\n    _a[QuickPulseCounter.COMMITTED_BYTES] = QuickPulseCounter.COMMITTED_BYTES,\n    _a[QuickPulseCounter.REQUEST_FAILURE_RATE] = QuickPulseCounter.REQUEST_FAILURE_RATE,\n    _a[QuickPulseCounter.DEPENDENCY_RATE] = QuickPulseCounter.DEPENDENCY_RATE,\n    _a[QuickPulseCounter.DEPENDENCY_FAILURE_RATE] = QuickPulseCounter.DEPENDENCY_FAILURE_RATE,\n    _a[QuickPulseCounter.DEPENDENCY_DURATION] = QuickPulseCounter.DEPENDENCY_DURATION,\n    _a[QuickPulseCounter.EXCEPTION_RATE] = QuickPulseCounter.EXCEPTION_RATE,\n    _a);\nexports.QuickPulseDocumentType = {\n    Event: \"Event\",\n    Exception: \"Exception\",\n    Trace: \"Trace\",\n    Metric: \"Metric\",\n    Request: \"Request\",\n    Dependency: \"RemoteDependency\",\n    Availability: \"Availability\"\n};\nexports.QuickPulseType = {\n    Event: \"EventTelemetryDocument\",\n    Exception: \"ExceptionTelemetryDocument\",\n    Trace: \"TraceTelemetryDocument\",\n    Metric: \"MetricTelemetryDocument\",\n    Request: \"RequestTelemetryDocument\",\n    Dependency: \"DependencyTelemetryDocument\",\n    Availability: \"AvailabilityTelemetryDocument\"\n};\nexports.TelemetryTypeStringToQuickPulseType = {\n    EventData: exports.QuickPulseType.Event,\n    ExceptionData: exports.QuickPulseType.Exception,\n    MessageData: exports.QuickPulseType.Trace,\n    MetricData: exports.QuickPulseType.Metric,\n    RequestData: exports.QuickPulseType.Request,\n    RemoteDependencyData: exports.QuickPulseType.Dependency,\n    AvailabilityData: exports.QuickPulseType.Availability\n};\nexports.TelemetryTypeStringToQuickPulseDocumentType = {\n    EventData: exports.QuickPulseDocumentType.Event,\n    ExceptionData: exports.QuickPulseDocumentType.Exception,\n    MessageData: exports.QuickPulseDocumentType.Trace,\n    MetricData: exports.QuickPulseDocumentType.Metric,\n    RequestData: exports.QuickPulseDocumentType.Request,\n    RemoteDependencyData: exports.QuickPulseDocumentType.Dependency,\n    AvailabilityData: exports.QuickPulseDocumentType.Availability\n};\nvar _a;\n//# sourceMappingURL=Constants.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Generated_1 = require(\"./Generated\");\nvar RemoteDependencyDataConstants = (function () {\n    function RemoteDependencyDataConstants() {\n    }\n    RemoteDependencyDataConstants.TYPE_HTTP = \"Http\";\n    RemoteDependencyDataConstants.TYPE_AI = \"Http (tracked component)\";\n    return RemoteDependencyDataConstants;\n}());\nexports.RemoteDependencyDataConstants = RemoteDependencyDataConstants;\nfunction domainSupportsProperties(domain) {\n    return \"properties\" in domain ||\n        domain instanceof Generated_1.EventData ||\n        domain instanceof Generated_1.ExceptionData ||\n        domain instanceof Generated_1.MessageData ||\n        domain instanceof Generated_1.MetricData ||\n        domain instanceof Generated_1.PageViewData ||\n        domain instanceof Generated_1.RemoteDependencyData ||\n        domain instanceof Generated_1.RequestData;\n}\nexports.domainSupportsProperties = domainSupportsProperties;\n//# sourceMappingURL=Constants.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of AvailabilityData represent the result of executing an availability test.\n */\nvar AvailabilityData = (function (_super) {\n    __extends(AvailabilityData, _super);\n    function AvailabilityData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return AvailabilityData;\n}(Domain));\nmodule.exports = AvailabilityData;\n//# sourceMappingURL=AvailabilityData.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Data struct to contain only C section with custom fields.\n */\nvar Base = (function () {\n    function Base() {\n    }\n    return Base;\n}());\nmodule.exports = Base;\n//# sourceMappingURL=Base.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\nvar ContextTagKeys = (function () {\n    function ContextTagKeys() {\n        this.applicationVersion = \"ai.application.ver\";\n        this.deviceId = \"ai.device.id\";\n        this.deviceLocale = \"ai.device.locale\";\n        this.deviceModel = \"ai.device.model\";\n        this.deviceOEMName = \"ai.device.oemName\";\n        this.deviceOSVersion = \"ai.device.osVersion\";\n        this.deviceType = \"ai.device.type\";\n        this.locationIp = \"ai.location.ip\";\n        this.operationId = \"ai.operation.id\";\n        this.operationName = \"ai.operation.name\";\n        this.operationParentId = \"ai.operation.parentId\";\n        this.operationSyntheticSource = \"ai.operation.syntheticSource\";\n        this.operationCorrelationVector = \"ai.operation.correlationVector\";\n        this.sessionId = \"ai.session.id\";\n        this.sessionIsFirst = \"ai.session.isFirst\";\n        this.userAccountId = \"ai.user.accountId\";\n        this.userId = \"ai.user.id\";\n        this.userAuthUserId = \"ai.user.authUserId\";\n        this.cloudRole = \"ai.cloud.role\";\n        this.cloudRoleInstance = \"ai.cloud.roleInstance\";\n        this.internalSdkVersion = \"ai.internal.sdkVersion\";\n        this.internalAgentVersion = \"ai.internal.agentVersion\";\n        this.internalNodeName = \"ai.internal.nodeName\";\n    }\n    return ContextTagKeys;\n}());\nmodule.exports = ContextTagKeys;\n//# sourceMappingURL=ContextTagKeys.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Base = require(\"./Base\");\n\"use strict\";\n/**\n * Data struct to contain both B and C sections.\n */\nvar Data = (function (_super) {\n    __extends(Data, _super);\n    function Data() {\n        return _super.call(this) || this;\n    }\n    return Data;\n}(Base));\nmodule.exports = Data;\n//# sourceMappingURL=Data.js.map","\"use strict\";\n// THIS FILE WAS AUTOGENERATED\nvar DataPointType = require(\"./DataPointType\");\n\"use strict\";\n/**\n * Metric data single measurement.\n */\nvar DataPoint = (function () {\n    function DataPoint() {\n        this.kind = DataPointType.Measurement;\n    }\n    return DataPoint;\n}());\nmodule.exports = DataPoint;\n//# sourceMappingURL=DataPoint.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Type of the metric data measurement.\n */\nvar DataPointType;\n(function (DataPointType) {\n    DataPointType[DataPointType[\"Measurement\"] = 0] = \"Measurement\";\n    DataPointType[DataPointType[\"Aggregation\"] = 1] = \"Aggregation\";\n})(DataPointType || (DataPointType = {}));\nmodule.exports = DataPointType;\n//# sourceMappingURL=DataPointType.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * The abstract common base of all domains.\n */\nvar Domain = (function () {\n    function Domain() {\n    }\n    return Domain;\n}());\nmodule.exports = Domain;\n//# sourceMappingURL=Domain.js.map","\"use strict\";\n/**\n * System variables for a telemetry item.\n */\nvar Envelope = (function () {\n    function Envelope() {\n        this.ver = 1;\n        this.sampleRate = 100.0;\n        this.tags = {};\n    }\n    return Envelope;\n}());\nmodule.exports = Envelope;\n//# sourceMappingURL=Envelope.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of Event represent structured event records that can be grouped and searched by their properties. Event data item also creates a metric of event count by name.\n */\nvar EventData = (function (_super) {\n    __extends(EventData, _super);\n    function EventData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return EventData;\n}(Domain));\nmodule.exports = EventData;\n//# sourceMappingURL=EventData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Exception represents a handled or unhandled exception that occurred during execution of the monitored application.\n */\nvar ExceptionData = (function (_super) {\n    __extends(ExceptionData, _super);\n    function ExceptionData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.exceptions = [];\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return ExceptionData;\n}(Domain));\nmodule.exports = ExceptionData;\n//# sourceMappingURL=ExceptionData.js.map","\"use strict\";\n/**\n * Exception details of the exception in a chain.\n */\nvar ExceptionDetails = (function () {\n    function ExceptionDetails() {\n        this.hasFullStack = true;\n        this.parsedStack = [];\n    }\n    return ExceptionDetails;\n}());\nmodule.exports = ExceptionDetails;\n//# sourceMappingURL=ExceptionDetails.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of Message represent printf-like trace statements that are text-searched. Log4Net, NLog and other text-based log file entries are translated into intances of this type. The message does not have measurements.\n */\nvar MessageData = (function (_super) {\n    __extends(MessageData, _super);\n    function MessageData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        return _this;\n    }\n    return MessageData;\n}(Domain));\nmodule.exports = MessageData;\n//# sourceMappingURL=MessageData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of the Metric item is a list of measurements (single data points) and/or aggregations.\n */\nvar MetricData = (function (_super) {\n    __extends(MetricData, _super);\n    function MetricData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.metrics = [];\n        _this.properties = {};\n        return _this;\n    }\n    return MetricData;\n}(Domain));\nmodule.exports = MetricData;\n//# sourceMappingURL=MetricData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar EventData = require(\"./EventData\");\n\"use strict\";\n/**\n * An instance of PageView represents a generic action on a page like a button click. It is also the base type for PageView.\n */\nvar PageViewData = (function (_super) {\n    __extends(PageViewData, _super);\n    function PageViewData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return PageViewData;\n}(EventData));\nmodule.exports = PageViewData;\n//# sourceMappingURL=PageViewData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Remote Dependency represents an interaction of the monitored component with a remote component/service like SQL or an HTTP endpoint.\n */\nvar RemoteDependencyData = (function (_super) {\n    __extends(RemoteDependencyData, _super);\n    function RemoteDependencyData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.success = true;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return RemoteDependencyData;\n}(Domain));\nmodule.exports = RemoteDependencyData;\n//# sourceMappingURL=RemoteDependencyData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Request represents completion of an external request to the application to do work and contains a summary of that request execution and the results.\n */\nvar RequestData = (function (_super) {\n    __extends(RequestData, _super);\n    function RequestData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return RequestData;\n}(Domain));\nmodule.exports = RequestData;\n//# sourceMappingURL=RequestData.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Defines the level of severity for the event.\n */\nvar SeverityLevel;\n(function (SeverityLevel) {\n    SeverityLevel[SeverityLevel[\"Verbose\"] = 0] = \"Verbose\";\n    SeverityLevel[SeverityLevel[\"Information\"] = 1] = \"Information\";\n    SeverityLevel[SeverityLevel[\"Warning\"] = 2] = \"Warning\";\n    SeverityLevel[SeverityLevel[\"Error\"] = 3] = \"Error\";\n    SeverityLevel[SeverityLevel[\"Critical\"] = 4] = \"Critical\";\n})(SeverityLevel || (SeverityLevel = {}));\nmodule.exports = SeverityLevel;\n//# sourceMappingURL=SeverityLevel.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Stack frame information.\n */\nvar StackFrame = (function () {\n    function StackFrame() {\n    }\n    return StackFrame;\n}());\nmodule.exports = StackFrame;\n//# sourceMappingURL=StackFrame.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AvailabilityData = require(\"./AvailabilityData\");\nexports.Base = require(\"./Base\");\nexports.ContextTagKeys = require(\"./ContextTagKeys\");\nexports.Data = require(\"./Data\");\nexports.DataPoint = require(\"./DataPoint\");\nexports.DataPointType = require(\"./DataPointType\");\nexports.Domain = require(\"./Domain\");\nexports.Envelope = require(\"./Envelope\");\nexports.EventData = require(\"./EventData\");\nexports.ExceptionData = require(\"./ExceptionData\");\nexports.ExceptionDetails = require(\"./ExceptionDetails\");\nexports.MessageData = require(\"./MessageData\");\nexports.MetricData = require(\"./MetricData\");\nexports.PageViewData = require(\"./PageViewData\");\nexports.RemoteDependencyData = require(\"./RemoteDependencyData\");\nexports.RequestData = require(\"./RequestData\");\nexports.SeverityLevel = require(\"./SeverityLevel\");\nexports.StackFrame = require(\"./StackFrame\");\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Converts the user-friendly enumeration TelemetryType to the underlying schema baseType value\n * @param type Type to convert to BaseData string\n */\nfunction telemetryTypeToBaseType(type) {\n    switch (type) {\n        case TelemetryType.Event:\n            return \"EventData\";\n        case TelemetryType.Exception:\n            return \"ExceptionData\";\n        case TelemetryType.Trace:\n            return \"MessageData\";\n        case TelemetryType.Metric:\n            return \"MetricData\";\n        case TelemetryType.Request:\n            return \"RequestData\";\n        case TelemetryType.Dependency:\n            return \"RemoteDependencyData\";\n        case TelemetryType.Availability:\n            return \"AvailabilityData\";\n    }\n    return undefined;\n}\nexports.telemetryTypeToBaseType = telemetryTypeToBaseType;\n/**\n * Converts the schema baseType value to the user-friendly enumeration TelemetryType\n * @param baseType BaseData string to convert to TelemetryType\n */\nfunction baseTypeToTelemetryType(baseType) {\n    switch (baseType) {\n        case \"EventData\":\n            return TelemetryType.Event;\n        case \"ExceptionData\":\n            return TelemetryType.Exception;\n        case \"MessageData\":\n            return TelemetryType.Trace;\n        case \"MetricData\":\n            return TelemetryType.Metric;\n        case \"RequestData\":\n            return TelemetryType.Request;\n        case \"RemoteDependencyData\":\n            return TelemetryType.Dependency;\n        case \"AvailabilityData\":\n            return TelemetryType.Availability;\n    }\n    return undefined;\n}\nexports.baseTypeToTelemetryType = baseTypeToTelemetryType;\nexports.TelemetryTypeString = {\n    Event: \"EventData\",\n    Exception: \"ExceptionData\",\n    Trace: \"MessageData\",\n    Metric: \"MetricData\",\n    Request: \"RequestData\",\n    Dependency: \"RemoteDependencyData\",\n    Availability: \"AvailabilityData\"\n};\n/**\n * Telemetry types supported by this SDK\n */\nvar TelemetryType;\n(function (TelemetryType) {\n    TelemetryType[TelemetryType[\"Event\"] = 0] = \"Event\";\n    TelemetryType[TelemetryType[\"Exception\"] = 1] = \"Exception\";\n    TelemetryType[TelemetryType[\"Trace\"] = 2] = \"Trace\";\n    TelemetryType[TelemetryType[\"Metric\"] = 3] = \"Metric\";\n    TelemetryType[TelemetryType[\"Request\"] = 4] = \"Request\";\n    TelemetryType[TelemetryType[\"Dependency\"] = 5] = \"Dependency\";\n    TelemetryType[TelemetryType[\"Availability\"] = 6] = \"Availability\";\n})(TelemetryType = exports.TelemetryType || (exports.TelemetryType = {}));\n//# sourceMappingURL=TelemetryType.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./TelemetryType\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./Constants\"));\n__export(require(\"./Generated\"));\n__export(require(\"./TelemetryTypes\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar Logging = require(\"./Logging\");\nvar Channel = (function () {\n    function Channel(isDisabled, getBatchSize, getBatchIntervalMs, sender) {\n        this._buffer = [];\n        this._lastSend = 0;\n        this._isDisabled = isDisabled;\n        this._getBatchSize = getBatchSize;\n        this._getBatchIntervalMs = getBatchIntervalMs;\n        this._sender = sender;\n    }\n    /**\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\n     * @param value if true events that occured while client is offline will be cached on disk\n     * @param resendInterval The wait interval for resending cached events.\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\n     * @returns {Configuration} this class\n     */\n    Channel.prototype.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\n        this._sender.setDiskRetryMode(value, resendInterval, maxBytesOnDisk);\n    };\n    /**\n     * Add a telemetry item to the send buffer\n     */\n    Channel.prototype.send = function (envelope) {\n        var _this = this;\n        // if master off switch is set, don't send any data\n        if (this._isDisabled()) {\n            // Do not send/save data\n            return;\n        }\n        // validate input\n        if (!envelope) {\n            Logging.warn(\"Cannot send null/undefined telemetry\");\n            return;\n        }\n        // check if the incoming payload is too large, truncate if necessary\n        var payload = this._stringify(envelope);\n        if (typeof payload !== \"string\") {\n            return;\n        }\n        // enqueue the payload\n        this._buffer.push(payload);\n        // flush if we would exceed the max-size limit by adding this item\n        if (this._buffer.length >= this._getBatchSize()) {\n            this.triggerSend(false);\n            return;\n        }\n        // ensure an invocation timeout is set if anything is in the buffer\n        if (!this._timeoutHandle && this._buffer.length > 0) {\n            this._timeoutHandle = setTimeout(function () {\n                _this._timeoutHandle = null;\n                _this.triggerSend(false);\n            }, this._getBatchIntervalMs());\n        }\n    };\n    /**\n     * Immediately send buffered data\n     */\n    Channel.prototype.triggerSend = function (isNodeCrashing, callback) {\n        var bufferIsEmpty = this._buffer.length < 1;\n        if (!bufferIsEmpty) {\n            // compose an array of payloads\n            var batch = this._buffer.join(\"\\n\");\n            // invoke send\n            if (isNodeCrashing) {\n                this._sender.saveOnCrash(batch);\n                if (typeof callback === \"function\") {\n                    callback(\"data saved on crash\");\n                }\n            }\n            else {\n                this._sender.send(Buffer.from ? Buffer.from(batch) : new Buffer(batch), callback);\n            }\n        }\n        // update lastSend time to enable throttling\n        this._lastSend = +new Date;\n        // clear buffer\n        this._buffer.length = 0;\n        clearTimeout(this._timeoutHandle);\n        this._timeoutHandle = null;\n        if (bufferIsEmpty && typeof callback === \"function\") {\n            callback(\"no data to send\");\n        }\n    };\n    Channel.prototype._stringify = function (envelope) {\n        try {\n            return JSON.stringify(envelope);\n        }\n        catch (error) {\n            Logging.warn(\"Failed to serialize payload\", error, envelope);\n        }\n    };\n    return Channel;\n}());\nmodule.exports = Channel;\n//# sourceMappingURL=Channel.js.map","\"use strict\";\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\nvar ConnectionStringParser = require(\"./ConnectionStringParser\");\nvar Constants = require(\"../Declarations/Constants\");\nvar url = require(\"url\");\nvar Config = (function () {\n    function Config(setupString) {\n        var _this = this;\n        this.endpointBase = Constants.DEFAULT_BREEZE_ENDPOINT;\n        var connectionStringEnv = process.env[Config.ENV_connectionString];\n        var csCode = ConnectionStringParser.parse(setupString);\n        var csEnv = ConnectionStringParser.parse(connectionStringEnv);\n        var iKeyCode = !csCode.instrumentationkey && Object.keys(csCode).length > 0\n            ? null // CS was valid but instrumentation key was not provided, null and grab from env var\n            : setupString; // CS was invalid, so it must be an ikey\n        this.instrumentationKey = csCode.instrumentationkey || iKeyCode /* === instrumentationKey */ || csEnv.instrumentationkey || Config._getInstrumentationKey();\n        this.endpointUrl = (csCode.ingestionendpoint || csEnv.ingestionendpoint || this.endpointBase) + \"/v2/track\";\n        this.maxBatchSize = 250;\n        this.maxBatchIntervalMs = 15000;\n        this.disableAppInsights = false;\n        this.samplingPercentage = 100;\n        this.correlationIdRetryIntervalMs = 30 * 1000;\n        this.correlationHeaderExcludedDomains = [\n            \"*.core.windows.net\",\n            \"*.core.chinacloudapi.cn\",\n            \"*.core.cloudapi.de\",\n            \"*.core.usgovcloudapi.net\",\n            \"*.core.microsoft.scloud\",\n            \"*.core.eaglex.ic.gov\"\n        ];\n        this.setCorrelationId = function (correlationId) { return _this.correlationId = correlationId; };\n        this.proxyHttpUrl = process.env[Config.ENV_http_proxy] || undefined;\n        this.proxyHttpsUrl = process.env[Config.ENV_https_proxy] || undefined;\n        this.httpAgent = undefined;\n        this.httpsAgent = undefined;\n        this.profileQueryEndpoint = csCode.ingestionendpoint || csEnv.ingestionendpoint || process.env[Config.ENV_profileQueryEndpoint] || this.endpointBase;\n        this._quickPulseHost = csCode.liveendpoint || csEnv.liveendpoint || process.env[Config.ENV_quickPulseHost] || Constants.DEFAULT_LIVEMETRICS_HOST;\n        // Parse quickPulseHost if it startswith http(s)://\n        if (this._quickPulseHost.match(/^https?:\\/\\//)) {\n            this._quickPulseHost = url.parse(this._quickPulseHost).host;\n        }\n    }\n    Object.defineProperty(Config.prototype, \"profileQueryEndpoint\", {\n        get: function () {\n            return this._profileQueryEndpoint;\n        },\n        set: function (endpoint) {\n            CorrelationIdManager.cancelCorrelationIdQuery(this, this.setCorrelationId);\n            this._profileQueryEndpoint = endpoint;\n            this.correlationId = CorrelationIdManager.correlationIdPrefix; // Reset the correlationId while we wait for the new query\n            CorrelationIdManager.queryCorrelationId(this, this.setCorrelationId);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Config.prototype, \"quickPulseHost\", {\n        get: function () {\n            return this._quickPulseHost;\n        },\n        set: function (host) {\n            this._quickPulseHost = host;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Config._getInstrumentationKey = function () {\n        // check for both the documented env variable and the azure-prefixed variable\n        var iKey = process.env[Config.ENV_iKey]\n            || process.env[Config.ENV_azurePrefix + Config.ENV_iKey]\n            || process.env[Config.legacy_ENV_iKey]\n            || process.env[Config.ENV_azurePrefix + Config.legacy_ENV_iKey];\n        if (!iKey || iKey == \"\") {\n            throw new Error(\"Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server\");\n        }\n        return iKey;\n    };\n    // Azure adds this prefix to all environment variables\n    Config.ENV_azurePrefix = \"APPSETTING_\";\n    // This key is provided in the readme\n    Config.ENV_iKey = \"APPINSIGHTS_INSTRUMENTATIONKEY\";\n    Config.legacy_ENV_iKey = \"APPINSIGHTS_INSTRUMENTATION_KEY\";\n    Config.ENV_profileQueryEndpoint = \"APPINSIGHTS_PROFILE_QUERY_ENDPOINT\";\n    Config.ENV_quickPulseHost = \"APPINSIGHTS_QUICKPULSE_HOST\";\n    // Azure Connection String\n    Config.ENV_connectionString = \"APPLICATIONINSIGHTS_CONNECTION_STRING\";\n    // Native Metrics Opt Outs\n    Config.ENV_nativeMetricsDisablers = \"APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC\";\n    Config.ENV_nativeMetricsDisableAll = \"APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS\";\n    Config.ENV_http_proxy = \"http_proxy\";\n    Config.ENV_https_proxy = \"https_proxy\";\n    return Config;\n}());\nmodule.exports = Config;\n//# sourceMappingURL=Config.js.map","\"use strict\";\nvar Constants = require(\"../Declarations/Constants\");\nvar ConnectionStringParser = (function () {\n    function ConnectionStringParser() {\n    }\n    ConnectionStringParser.parse = function (connectionString) {\n        if (!connectionString) {\n            return {};\n        }\n        var kvPairs = connectionString.split(ConnectionStringParser._FIELDS_SEPARATOR);\n        var result = kvPairs.reduce(function (fields, kv) {\n            var kvParts = kv.split(ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR);\n            if (kvParts.length === 2) {\n                var key = kvParts[0].toLowerCase();\n                var value = kvParts[1];\n                fields[key] = value;\n            }\n            return fields;\n        }, {});\n        if (Object.keys(result).length > 0) {\n            // this is a valid connection string, so parse the results\n            if (result.endpointsuffix) {\n                // use endpoint suffix where overrides are not provided\n                var locationPrefix = result.location ? result.location + \".\" : \"\";\n                result.ingestionendpoint = result.ingestionendpoint || (\"https://\" + locationPrefix + \"dc.\" + result.endpointsuffix);\n                result.liveendpoint = result.liveendpoint || (\"https://\" + locationPrefix + \"live.\" + result.endpointsuffix);\n            }\n            // apply the default endpoints\n            result.ingestionendpoint = result.ingestionendpoint || Constants.DEFAULT_BREEZE_ENDPOINT;\n            result.liveendpoint = result.liveendpoint || Constants.DEFAULT_LIVEMETRICS_ENDPOINT;\n        }\n        return result;\n    };\n    ConnectionStringParser._FIELDS_SEPARATOR = \";\";\n    ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR = \"=\";\n    return ConnectionStringParser;\n}());\nmodule.exports = ConnectionStringParser;\n//# sourceMappingURL=ConnectionStringParser.js.map","\"use strict\";\nvar os = require(\"os\");\nvar fs = require(\"fs\");\nvar path = require(\"path\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Logging = require(\"./Logging\");\nvar Context = (function () {\n    function Context(packageJsonPath) {\n        this.keys = new Contracts.ContextTagKeys();\n        this.tags = {};\n        this._loadApplicationContext();\n        this._loadDeviceContext();\n        this._loadInternalContext();\n    }\n    Context.prototype._loadApplicationContext = function (packageJsonPath) {\n        // note: this should return the host package.json\n        packageJsonPath = packageJsonPath || path.resolve(__dirname, \"../../../../package.json\");\n        if (!Context.appVersion[packageJsonPath]) {\n            Context.appVersion[packageJsonPath] = \"unknown\";\n            try {\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\n                if (packageJson && typeof packageJson.version === \"string\") {\n                    Context.appVersion[packageJsonPath] = packageJson.version;\n                }\n            }\n            catch (exception) {\n                Logging.info(\"unable to read app version: \", exception);\n            }\n        }\n        this.tags[this.keys.applicationVersion] = Context.appVersion[packageJsonPath];\n    };\n    Context.prototype._loadDeviceContext = function () {\n        this.tags[this.keys.deviceId] = \"\";\n        this.tags[this.keys.cloudRoleInstance] = os && os.hostname();\n        this.tags[this.keys.deviceOSVersion] = os && (os.type() + \" \" + os.release());\n        this.tags[this.keys.cloudRole] = Context.DefaultRoleName;\n        // not yet supported tags\n        this.tags[\"ai.device.osArchitecture\"] = os && os.arch();\n        this.tags[\"ai.device.osPlatform\"] = os && os.platform();\n    };\n    Context.prototype._loadInternalContext = function () {\n        // note: this should return the sdk package.json\n        var packageJsonPath = path.resolve(__dirname, \"../../package.json\");\n        if (!Context.sdkVersion) {\n            Context.sdkVersion = \"unknown\";\n            try {\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\n                if (packageJson && typeof packageJson.version === \"string\") {\n                    Context.sdkVersion = packageJson.version;\n                }\n            }\n            catch (exception) {\n                Logging.info(\"unable to read app version: \", exception);\n            }\n        }\n        this.tags[this.keys.internalSdkVersion] = \"node:\" + Context.sdkVersion;\n    };\n    Context.DefaultRoleName = \"Web\";\n    Context.appVersion = {};\n    Context.sdkVersion = null;\n    return Context;\n}());\nmodule.exports = Context;\n//# sourceMappingURL=Context.js.map","\"use strict\";\nvar Util = require(\"./Util\");\nvar Logging = require(\"./Logging\");\nvar CorrelationIdManager = (function () {\n    function CorrelationIdManager() {\n    }\n    CorrelationIdManager.queryCorrelationId = function (config, callback) {\n        // GET request to `${this.endpointBase}/api/profiles/${this.instrumentationKey}/appId`\n        // If it 404s, the iKey is bad and we should give up\n        // If it fails otherwise, try again later\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\n        if (CorrelationIdManager.completedLookups.hasOwnProperty(appIdUrlString)) {\n            callback(CorrelationIdManager.completedLookups[appIdUrlString]);\n            return;\n        }\n        else if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\n            CorrelationIdManager.pendingLookups[appIdUrlString].push(callback);\n            return;\n        }\n        CorrelationIdManager.pendingLookups[appIdUrlString] = [callback];\n        var fetchAppId = function () {\n            if (!CorrelationIdManager.pendingLookups[appIdUrlString]) {\n                // This query has been cancelled.\n                return;\n            }\n            var requestOptions = {\n                method: 'GET',\n                // Ensure this request is not captured by auto-collection.\n                // Note: we don't refer to the property in HttpDependencyParser because that would cause a cyclical dependency\n                disableAppInsightsAutoCollection: true\n            };\n            Logging.info(CorrelationIdManager.TAG, requestOptions);\n            var req = Util.makeRequest(config, appIdUrlString, requestOptions, function (res) {\n                if (res.statusCode === 200) {\n                    // Success; extract the appId from the body\n                    var appId_1 = \"\";\n                    res.setEncoding(\"utf-8\");\n                    res.on('data', function (data) {\n                        appId_1 += data;\n                    });\n                    res.on('end', function () {\n                        Logging.info(CorrelationIdManager.TAG, appId_1);\n                        var result = CorrelationIdManager.correlationIdPrefix + appId_1;\n                        CorrelationIdManager.completedLookups[appIdUrlString] = result;\n                        if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\n                            CorrelationIdManager.pendingLookups[appIdUrlString].forEach(function (cb) { return cb(result); });\n                        }\n                        delete CorrelationIdManager.pendingLookups[appIdUrlString];\n                    });\n                }\n                else if (res.statusCode >= 400 && res.statusCode < 500) {\n                    // Not found, probably a bad key. Do not try again.\n                    CorrelationIdManager.completedLookups[appIdUrlString] = undefined;\n                    delete CorrelationIdManager.pendingLookups[appIdUrlString];\n                }\n                else {\n                    // Retry after timeout.\n                    setTimeout(fetchAppId, config.correlationIdRetryIntervalMs);\n                }\n            });\n            if (req) {\n                req.on('error', function (error) {\n                    // Unable to contact endpoint.\n                    // Do nothing for now.\n                    Logging.warn(CorrelationIdManager.TAG, error);\n                });\n                req.end();\n            }\n        };\n        setTimeout(fetchAppId, 0);\n    };\n    CorrelationIdManager.cancelCorrelationIdQuery = function (config, callback) {\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\n        var pendingLookups = CorrelationIdManager.pendingLookups[appIdUrlString];\n        if (pendingLookups) {\n            CorrelationIdManager.pendingLookups[appIdUrlString] = pendingLookups.filter(function (cb) { return cb != callback; });\n            if (CorrelationIdManager.pendingLookups[appIdUrlString].length == 0) {\n                delete CorrelationIdManager.pendingLookups[appIdUrlString];\n            }\n        }\n    };\n    /**\n     * Generate a request Id according to https://github.com/lmolkova/correlation/blob/master/hierarchical_request_id.md\n     * @param parentId\n     */\n    CorrelationIdManager.generateRequestId = function (parentId) {\n        if (parentId) {\n            parentId = parentId[0] == '|' ? parentId : '|' + parentId;\n            if (parentId[parentId.length - 1] !== '.') {\n                parentId += '.';\n            }\n            var suffix = (CorrelationIdManager.currentRootId++).toString(16);\n            return CorrelationIdManager.appendSuffix(parentId, suffix, '_');\n        }\n        else {\n            return CorrelationIdManager.generateRootId();\n        }\n    };\n    /**\n     * Given a hierarchical identifier of the form |X.*\n     * return the root identifier X\n     * @param id\n     */\n    CorrelationIdManager.getRootId = function (id) {\n        var endIndex = id.indexOf('.');\n        if (endIndex < 0) {\n            endIndex = id.length;\n        }\n        var startIndex = id[0] === '|' ? 1 : 0;\n        return id.substring(startIndex, endIndex);\n    };\n    CorrelationIdManager.generateRootId = function () {\n        return '|' + Util.w3cTraceId() + '.';\n    };\n    CorrelationIdManager.appendSuffix = function (parentId, suffix, delimiter) {\n        if (parentId.length + suffix.length < CorrelationIdManager.requestIdMaxLength) {\n            return parentId + suffix + delimiter;\n        }\n        // Combined identifier would be too long, so we must truncate it.\n        // We need 9 characters of space: 8 for the overflow ID, 1 for the\n        // overflow delimiter '#'\n        var trimPosition = CorrelationIdManager.requestIdMaxLength - 9;\n        if (parentId.length > trimPosition) {\n            for (; trimPosition > 1; --trimPosition) {\n                var c = parentId[trimPosition - 1];\n                if (c === '.' || c === '_') {\n                    break;\n                }\n            }\n        }\n        if (trimPosition <= 1) {\n            // parentId is not a valid ID\n            return CorrelationIdManager.generateRootId();\n        }\n        suffix = Util.randomu32().toString(16);\n        while (suffix.length < 8) {\n            suffix = '0' + suffix;\n        }\n        return parentId.substring(0, trimPosition) + suffix + '#';\n    };\n    CorrelationIdManager.TAG = \"CorrelationIdManager\";\n    CorrelationIdManager.correlationIdPrefix = \"cid-v1:\";\n    CorrelationIdManager.w3cEnabled = false;\n    // To avoid extraneous HTTP requests, we maintain a queue of callbacks waiting on a particular appId lookup,\n    // as well as a cache of completed lookups so future requests can be resolved immediately.\n    CorrelationIdManager.pendingLookups = {};\n    CorrelationIdManager.completedLookups = {};\n    CorrelationIdManager.requestIdMaxLength = 1024;\n    CorrelationIdManager.currentRootId = Util.randomu32();\n    return CorrelationIdManager;\n}());\nmodule.exports = CorrelationIdManager;\n//# sourceMappingURL=CorrelationIdManager.js.map","\"use strict\";\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"./Util\");\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\n/**\n * Manages the logic of creating envelopes from Telemetry objects\n */\nvar EnvelopeFactory = (function () {\n    function EnvelopeFactory() {\n    }\n    /**\n     * Creates envelope ready to be sent by Channel\n     * @param telemetry Telemetry data\n     * @param telemetryType Type of telemetry\n     * @param commonProperties Bag of custom common properties to be added to the envelope\n     * @param context Client context\n     * @param config Client configuration\n     */\n    EnvelopeFactory.createEnvelope = function (telemetry, telemetryType, commonProperties, context, config) {\n        var data = null;\n        switch (telemetryType) {\n            case Contracts.TelemetryType.Trace:\n                data = EnvelopeFactory.createTraceData(telemetry);\n                break;\n            case Contracts.TelemetryType.Dependency:\n                data = EnvelopeFactory.createDependencyData(telemetry);\n                break;\n            case Contracts.TelemetryType.Event:\n                data = EnvelopeFactory.createEventData(telemetry);\n                break;\n            case Contracts.TelemetryType.Exception:\n                data = EnvelopeFactory.createExceptionData(telemetry);\n                break;\n            case Contracts.TelemetryType.Request:\n                data = EnvelopeFactory.createRequestData(telemetry);\n                break;\n            case Contracts.TelemetryType.Metric:\n                data = EnvelopeFactory.createMetricData(telemetry);\n                break;\n            case Contracts.TelemetryType.Availability:\n                data = EnvelopeFactory.createAvailabilityData(telemetry);\n                break;\n        }\n        if (commonProperties && Contracts.domainSupportsProperties(data.baseData)) {\n            if (data && data.baseData) {\n                // if no properties are specified just add the common ones\n                if (!data.baseData.properties) {\n                    data.baseData.properties = commonProperties;\n                }\n                else {\n                    // otherwise, check each of the common ones\n                    for (var name in commonProperties) {\n                        // only override if the property `name` has not been set on this item\n                        if (!data.baseData.properties[name]) {\n                            data.baseData.properties[name] = commonProperties[name];\n                        }\n                    }\n                }\n            }\n            // sanitize properties\n            data.baseData.properties = Util.validateStringMap(data.baseData.properties);\n        }\n        var iKey = config ? config.instrumentationKey || \"\" : \"\";\n        var envelope = new Contracts.Envelope();\n        envelope.data = data;\n        envelope.iKey = iKey;\n        // this is kind of a hack, but the envelope name is always the same as the data name sans the chars \"data\"\n        envelope.name =\n            \"Microsoft.ApplicationInsights.\" +\n                iKey.replace(/-/g, \"\") +\n                \".\" +\n                data.baseType.substr(0, data.baseType.length - 4);\n        envelope.tags = this.getTags(context, telemetry.tagOverrides);\n        envelope.time = (new Date()).toISOString();\n        envelope.ver = 1;\n        envelope.sampleRate = config ? config.samplingPercentage : 100;\n        // Exclude metrics from sampling by default\n        if (telemetryType === Contracts.TelemetryType.Metric) {\n            envelope.sampleRate = 100;\n        }\n        return envelope;\n    };\n    EnvelopeFactory.createTraceData = function (telemetry) {\n        var trace = new Contracts.MessageData();\n        trace.message = telemetry.message;\n        trace.properties = telemetry.properties;\n        if (!isNaN(telemetry.severity)) {\n            trace.severityLevel = telemetry.severity;\n        }\n        else {\n            trace.severityLevel = Contracts.SeverityLevel.Information;\n        }\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Trace);\n        data.baseData = trace;\n        return data;\n    };\n    EnvelopeFactory.createDependencyData = function (telemetry) {\n        var remoteDependency = new Contracts.RemoteDependencyData();\n        if (typeof telemetry.name === \"string\") {\n            remoteDependency.name = telemetry.name.length > 1024 ? telemetry.name.slice(0, 1021) + '...' : telemetry.name;\n        }\n        remoteDependency.data = telemetry.data;\n        remoteDependency.target = telemetry.target;\n        remoteDependency.duration = Util.msToTimeSpan(telemetry.duration);\n        remoteDependency.success = telemetry.success;\n        remoteDependency.type = telemetry.dependencyTypeName;\n        remoteDependency.properties = telemetry.properties;\n        remoteDependency.resultCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\n        if (telemetry.id) {\n            remoteDependency.id = telemetry.id;\n        }\n        else {\n            remoteDependency.id = Util.w3cTraceId();\n        }\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Dependency);\n        data.baseData = remoteDependency;\n        return data;\n    };\n    EnvelopeFactory.createEventData = function (telemetry) {\n        var event = new Contracts.EventData();\n        event.name = telemetry.name;\n        event.properties = telemetry.properties;\n        event.measurements = telemetry.measurements;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Event);\n        data.baseData = event;\n        return data;\n    };\n    EnvelopeFactory.createExceptionData = function (telemetry) {\n        var exception = new Contracts.ExceptionData();\n        exception.properties = telemetry.properties;\n        if (!isNaN(telemetry.severity)) {\n            exception.severityLevel = telemetry.severity;\n        }\n        else {\n            exception.severityLevel = Contracts.SeverityLevel.Error;\n        }\n        exception.measurements = telemetry.measurements;\n        exception.exceptions = [];\n        var stack = telemetry.exception[\"stack\"];\n        var exceptionDetails = new Contracts.ExceptionDetails();\n        exceptionDetails.message = telemetry.exception.message;\n        exceptionDetails.typeName = telemetry.exception.name;\n        exceptionDetails.parsedStack = this.parseStack(stack);\n        exceptionDetails.hasFullStack = Util.isArray(exceptionDetails.parsedStack) && exceptionDetails.parsedStack.length > 0;\n        exception.exceptions.push(exceptionDetails);\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Exception);\n        data.baseData = exception;\n        return data;\n    };\n    EnvelopeFactory.createRequestData = function (telemetry) {\n        var requestData = new Contracts.RequestData();\n        if (telemetry.id) {\n            requestData.id = telemetry.id;\n        }\n        else {\n            requestData.id = Util.w3cTraceId();\n        }\n        requestData.name = telemetry.name;\n        requestData.url = telemetry.url;\n        requestData.source = telemetry.source;\n        requestData.duration = Util.msToTimeSpan(telemetry.duration);\n        requestData.responseCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\n        requestData.success = telemetry.success;\n        requestData.properties = telemetry.properties;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Request);\n        data.baseData = requestData;\n        return data;\n    };\n    EnvelopeFactory.createMetricData = function (telemetry) {\n        var metrics = new Contracts.MetricData(); // todo: enable client-batching of these\n        metrics.metrics = [];\n        var metric = new Contracts.DataPoint();\n        metric.count = !isNaN(telemetry.count) ? telemetry.count : 1;\n        metric.kind = Contracts.DataPointType.Aggregation;\n        metric.max = !isNaN(telemetry.max) ? telemetry.max : telemetry.value;\n        metric.min = !isNaN(telemetry.min) ? telemetry.min : telemetry.value;\n        metric.name = telemetry.name;\n        metric.stdDev = !isNaN(telemetry.stdDev) ? telemetry.stdDev : 0;\n        metric.value = telemetry.value;\n        metrics.metrics.push(metric);\n        metrics.properties = telemetry.properties;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Metric);\n        data.baseData = metrics;\n        return data;\n    };\n    EnvelopeFactory.createAvailabilityData = function (telemetry) {\n        var availabilityData = new Contracts.AvailabilityData();\n        if (telemetry.id) {\n            availabilityData.id = telemetry.id;\n        }\n        else {\n            availabilityData.id = Util.w3cTraceId();\n        }\n        availabilityData.name = telemetry.name;\n        availabilityData.duration = Util.msToTimeSpan(telemetry.duration);\n        availabilityData.success = telemetry.success;\n        availabilityData.runLocation = telemetry.runLocation;\n        availabilityData.message = telemetry.message;\n        availabilityData.measurements = telemetry.measurements;\n        availabilityData.properties = telemetry.properties;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Availability);\n        data.baseData = availabilityData;\n        return data;\n    };\n    EnvelopeFactory.getTags = function (context, tagOverrides) {\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        // Make a copy of context tags so we don't alter the actual object\n        // Also perform tag overriding\n        var newTags = {};\n        if (context && context.tags) {\n            for (var key in context.tags) {\n                newTags[key] = context.tags[key];\n            }\n        }\n        if (tagOverrides) {\n            for (var key in tagOverrides) {\n                newTags[key] = tagOverrides[key];\n            }\n        }\n        // Fill in internally-populated values if not already set\n        if (correlationContext) {\n            newTags[context.keys.operationId] = newTags[context.keys.operationId] || correlationContext.operation.id;\n            newTags[context.keys.operationName] = newTags[context.keys.operationName] || correlationContext.operation.name;\n            newTags[context.keys.operationParentId] = newTags[context.keys.operationParentId] || correlationContext.operation.parentId;\n        }\n        return newTags;\n    };\n    EnvelopeFactory.parseStack = function (stack) {\n        var parsedStack = undefined;\n        if (typeof stack === \"string\") {\n            var frames = stack.split(\"\\n\");\n            parsedStack = [];\n            var level = 0;\n            var totalSizeInBytes = 0;\n            for (var i = 0; i <= frames.length; i++) {\n                var frame = frames[i];\n                if (_StackFrame.regex.test(frame)) {\n                    var parsedFrame = new _StackFrame(frames[i], level++);\n                    totalSizeInBytes += parsedFrame.sizeInBytes;\n                    parsedStack.push(parsedFrame);\n                }\n            }\n            // DP Constraint - exception parsed stack must be < 32KB\n            // remove frames from the middle to meet the threshold\n            var exceptionParsedStackThreshold = 32 * 1024;\n            if (totalSizeInBytes > exceptionParsedStackThreshold) {\n                var left = 0;\n                var right = parsedStack.length - 1;\n                var size = 0;\n                var acceptedLeft = left;\n                var acceptedRight = right;\n                while (left < right) {\n                    // check size\n                    var lSize = parsedStack[left].sizeInBytes;\n                    var rSize = parsedStack[right].sizeInBytes;\n                    size += lSize + rSize;\n                    if (size > exceptionParsedStackThreshold) {\n                        // remove extra frames from the middle\n                        var howMany = acceptedRight - acceptedLeft + 1;\n                        parsedStack.splice(acceptedLeft, howMany);\n                        break;\n                    }\n                    // update pointers\n                    acceptedLeft = left;\n                    acceptedRight = right;\n                    left++;\n                    right--;\n                }\n            }\n        }\n        return parsedStack;\n    };\n    return EnvelopeFactory;\n}());\nvar _StackFrame = (function () {\n    function _StackFrame(frame, level) {\n        this.sizeInBytes = 0;\n        this.level = level;\n        this.method = \"<no_method>\";\n        this.assembly = Util.trim(frame);\n        var matches = frame.match(_StackFrame.regex);\n        if (matches && matches.length >= 5) {\n            this.method = Util.trim(matches[2]) || this.method;\n            this.fileName = Util.trim(matches[4]) || \"<no_filename>\";\n            this.line = parseInt(matches[5]) || 0;\n        }\n        this.sizeInBytes += this.method.length;\n        this.sizeInBytes += this.fileName.length;\n        this.sizeInBytes += this.assembly.length;\n        // todo: these might need to be removed depending on how the back-end settles on their size calculation\n        this.sizeInBytes += _StackFrame.baseSize;\n        this.sizeInBytes += this.level.toString().length;\n        this.sizeInBytes += this.line.toString().length;\n    }\n    // regex to match stack frames from ie/chrome/ff\n    // methodName=$2, fileName=$4, lineNo=$5, column=$6\n    _StackFrame.regex = /^([\\s]+at)?(.*?)(\\@|\\s\\(|\\s)([^\\(\\@\\n]+):([0-9]+):([0-9]+)(\\)?)$/;\n    _StackFrame.baseSize = 58; //'{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length\n    return _StackFrame;\n}());\nmodule.exports = EnvelopeFactory;\n//# sourceMappingURL=EnvelopeFactory.js.map","\"use strict\";\nvar Logging = (function () {\n    function Logging() {\n    }\n    Logging.info = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (Logging.enableDebug) {\n            console.info(Logging.TAG + message, optionalParams);\n        }\n    };\n    Logging.warn = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (!Logging.disableWarnings) {\n            console.warn(Logging.TAG + message, optionalParams);\n        }\n    };\n    Logging.enableDebug = false;\n    Logging.disableWarnings = false;\n    Logging.disableErrors = false;\n    Logging.TAG = \"ApplicationInsights:\";\n    return Logging;\n}());\nmodule.exports = Logging;\n//# sourceMappingURL=Logging.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar TelemetryClient = require(\"./TelemetryClient\");\nvar ServerRequestTracking = require(\"../AutoCollection/HttpRequests\");\nvar ClientRequestTracking = require(\"../AutoCollection/HttpDependencies\");\nvar Logging = require(\"./Logging\");\n/**\n * Application Insights Telemetry Client for Node.JS. Provides the Application Insights TelemetryClient API\n * in addition to Node-specific helper functions.\n * Construct a new TelemetryClient to have an instance with a different configuration than the default client.\n * In most cases, `appInsights.defaultClient` should be used instead.\n */\nvar NodeClient = (function (_super) {\n    __extends(NodeClient, _super);\n    function NodeClient() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Log RequestTelemetry from HTTP request and response. This method will log immediately without waitng for request completion\n     * and it requires duration parameter to be specified on NodeHttpRequestTelemetry object.\n     * Use trackNodeHttpRequest function to log the telemetry after request completion\n     * @param telemetry Object encapsulating incoming request, response and duration information\n     */\n    NodeClient.prototype.trackNodeHttpRequestSync = function (telemetry) {\n        if (telemetry && telemetry.request && telemetry.response && telemetry.duration) {\n            ServerRequestTracking.trackRequestSync(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.\");\n        }\n    };\n    /**\n     * Log RequestTelemetry from HTTP request and response. This method will `follow` the request to completion.\n     * Use trackNodeHttpRequestSync function to log telemetry immediately without waiting for request completion\n     * @param telemetry Object encapsulating incoming request and response information\n     */\n    NodeClient.prototype.trackNodeHttpRequest = function (telemetry) {\n        if (telemetry.duration || telemetry.error) {\n            Logging.warn(\"trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects.\");\n        }\n        if (telemetry && telemetry.request && telemetry.response) {\n            ServerRequestTracking.trackRequest(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.\");\n        }\n    };\n    /**\n     * Log DependencyTelemetry from outgoing HTTP request. This method will instrument the outgoing request and append\n     * the specified headers and will log the telemetry when outgoing request is complete\n     * @param telemetry Object encapsulating outgoing request information\n     */\n    NodeClient.prototype.trackNodeHttpDependency = function (telemetry) {\n        if (telemetry && telemetry.request) {\n            ClientRequestTracking.trackRequest(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.\");\n        }\n    };\n    return NodeClient;\n}(TelemetryClient));\nmodule.exports = NodeClient;\n//# sourceMappingURL=NodeClient.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar os = require(\"os\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Constants = require(\"../Declarations/Constants\");\nvar Util = require(\"./Util\");\nvar Logging = require(\"./Logging\");\nvar StreamId = Util.w3cTraceId(); // Create a guid\nvar QuickPulseEnvelopeFactory = (function () {\n    function QuickPulseEnvelopeFactory() {\n    }\n    QuickPulseEnvelopeFactory.createQuickPulseEnvelope = function (metrics, documents, config, context) {\n        var machineName = (os && typeof os.hostname === \"function\"\n            && os.hostname()) || \"Unknown\"; // Note: os.hostname() was added in node v0.3.3\n        var instance = (context.tags\n            && context.keys\n            && context.keys.cloudRoleInstance\n            && context.tags[context.keys.cloudRoleInstance]) || machineName;\n        var envelope = {\n            Documents: documents.length > 0 ? documents : null,\n            InstrumentationKey: config.instrumentationKey || \"\",\n            Metrics: metrics.length > 0 ? metrics : null,\n            InvariantVersion: 1,\n            Timestamp: \"/Date(\" + Date.now() + \")/\",\n            Version: context.tags[context.keys.internalSdkVersion],\n            StreamId: StreamId,\n            MachineName: machineName,\n            Instance: instance\n        };\n        return envelope;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseMetric = function (telemetry) {\n        var data;\n        data = {\n            Name: telemetry.name,\n            Value: telemetry.value,\n            Weight: telemetry.count || 1\n        };\n        return data;\n    };\n    QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument = function (envelope) {\n        switch (envelope.data.baseType) {\n            case Contracts.TelemetryTypeString.Event:\n                return QuickPulseEnvelopeFactory.createQuickPulseEventDocument(envelope);\n            case Contracts.TelemetryTypeString.Exception:\n                return QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument(envelope);\n            case Contracts.TelemetryTypeString.Trace:\n                return QuickPulseEnvelopeFactory.createQuickPulseTraceDocument(envelope);\n            case Contracts.TelemetryTypeString.Dependency:\n                return QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument(envelope);\n            case Contracts.TelemetryTypeString.Request:\n                return QuickPulseEnvelopeFactory.createQuickPulseRequestDocument(envelope);\n        }\n        return null;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseEventDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var name = envelope.data.baseData.name;\n        var eventDocument = __assign({}, document, { Name: name });\n        return eventDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseTraceDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var severityLevel = envelope.data.baseData.severityLevel || 0;\n        var traceDocument = __assign({}, document, { Message: envelope.data.baseData.message, SeverityLevel: Contracts.SeverityLevel[severityLevel] });\n        return traceDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var exceptionDetails = envelope.data.baseData.exceptions;\n        var exception = '';\n        var exceptionMessage = '';\n        var exceptionType = '';\n        // Try to fill exception information from first error only\n        if (exceptionDetails && exceptionDetails.length > 0) {\n            // Try to grab the stack from parsedStack or stack\n            if (exceptionDetails[0].parsedStack && exceptionDetails[0].parsedStack.length > 0) {\n                exceptionDetails[0].parsedStack.forEach(function (err) {\n                    exception += err.assembly + \"\\n\";\n                });\n            }\n            else if (exceptionDetails[0].stack && exceptionDetails[0].stack.length > 0) {\n                exception = exceptionDetails[0].stack;\n            }\n            exceptionMessage = exceptionDetails[0].message;\n            exceptionType = exceptionDetails[0].typeName;\n        }\n        var exceptionDocument = __assign({}, document, { Exception: exception, ExceptionMessage: exceptionMessage, ExceptionType: exceptionType });\n        return exceptionDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseRequestDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var baseData = envelope.data.baseData;\n        var requestDocument = __assign({}, document, { Name: baseData.name, Success: baseData.success, Duration: baseData.duration, ResponseCode: baseData.responseCode, OperationName: baseData.name // TODO: is this correct?\n         });\n        return requestDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var baseData = envelope.data.baseData;\n        var dependencyDocument = __assign({}, document, { Name: baseData.name, Target: baseData.target, Success: baseData.success, Duration: baseData.duration, ResultCode: baseData.resultCode, CommandName: baseData.data, OperationName: document.OperationId, DependencyTypeName: baseData.type });\n        return dependencyDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseDocument = function (envelope) {\n        var documentType;\n        var __type;\n        var operationId, properties;\n        if (envelope.data.baseType) {\n            __type = Constants.TelemetryTypeStringToQuickPulseType[envelope.data.baseType];\n            documentType = Constants.TelemetryTypeStringToQuickPulseDocumentType[envelope.data.baseType];\n        }\n        else {\n            // Remark: This should never be hit because createQuickPulseDocument is only called within\n            // valid baseType values\n            Logging.warn(\"Document type invalid; not sending live metric document\", envelope.data.baseType);\n        }\n        operationId = envelope.tags[QuickPulseEnvelopeFactory.keys.operationId];\n        properties = QuickPulseEnvelopeFactory.aggregateProperties(envelope);\n        var document = {\n            DocumentType: documentType,\n            __type: __type,\n            OperationId: operationId,\n            Version: \"1.0\",\n            Properties: properties\n        };\n        return document;\n    };\n    QuickPulseEnvelopeFactory.aggregateProperties = function (envelope) {\n        var properties = [];\n        // Collect measurements\n        var meas = (envelope.data.baseData).measurements || {};\n        for (var key in meas) {\n            if (meas.hasOwnProperty(key)) {\n                var value = meas[key];\n                var property = { key: key, value: value };\n                properties.push(property);\n            }\n        }\n        // Collect properties\n        var props = (envelope.data.baseData).properties || {};\n        for (var key in props) {\n            if (props.hasOwnProperty(key)) {\n                var value = props[key];\n                var property = { key: key, value: value };\n                properties.push(property);\n            }\n        }\n        return properties;\n    };\n    QuickPulseEnvelopeFactory.keys = new Contracts.ContextTagKeys();\n    return QuickPulseEnvelopeFactory;\n}());\nmodule.exports = QuickPulseEnvelopeFactory;\n//# sourceMappingURL=QuickPulseEnvelopeFactory.js.map","\"use strict\";\nvar https = require(\"https\");\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\nvar Logging = require(\"./Logging\");\nvar QuickPulseConfig = {\n    method: \"POST\",\n    time: \"x-ms-qps-transmission-time\",\n    subscribed: \"x-ms-qps-subscribed\"\n};\nvar QuickPulseSender = (function () {\n    function QuickPulseSender(config) {\n        this._config = config;\n        this._consecutiveErrors = 0;\n    }\n    QuickPulseSender.prototype.ping = function (envelope, done) {\n        this._submitData(envelope, done, \"ping\");\n    };\n    QuickPulseSender.prototype.post = function (envelope, done) {\n        // Important: When POSTing data, envelope must be an array\n        this._submitData([envelope], done, \"post\");\n    };\n    QuickPulseSender.prototype._submitData = function (envelope, done, postOrPing) {\n        var _this = this;\n        var payload = JSON.stringify(envelope);\n        var options = (_a = {},\n            _a[AutoCollectHttpDependencies.disableCollectionRequestOption] = true,\n            _a.host = this._config.quickPulseHost,\n            _a.method = QuickPulseConfig.method,\n            _a.path = \"/QuickPulseService.svc/\" + postOrPing + \"?ikey=\" + this._config.instrumentationKey,\n            _a.headers = (_b = {\n                    'Expect': '100-continue'\n                },\n                _b[QuickPulseConfig.time] = 10000 * Date.now(),\n                _b['Content-Type'] = 'application\\/json',\n                _b['Content-Length'] = Buffer.byteLength(payload),\n                _b),\n            _a);\n        var req = https.request(options, function (res) {\n            var shouldPOSTData = res.headers[QuickPulseConfig.subscribed] === \"true\";\n            _this._consecutiveErrors = 0;\n            done(shouldPOSTData, res);\n        });\n        req.on(\"error\", function (error) {\n            // Unable to contact qps endpoint.\n            // Do nothing for now.\n            _this._consecutiveErrors++;\n            // LOG every error, but WARN instead when X number of consecutive errors occur\n            var notice = \"Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:\";\n            if (_this._consecutiveErrors % QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN === 0) {\n                notice = \"Live Metrics endpoint could not be reached \" + _this._consecutiveErrors + \" consecutive times. Most recent error:\";\n                Logging.warn(QuickPulseSender.TAG, notice, error);\n            }\n            else {\n                // Potentially transient error, do not change the ping/post state yet.\n                Logging.info(QuickPulseSender.TAG, notice, error);\n            }\n            done();\n        });\n        req.write(payload);\n        req.end();\n        var _a, _b;\n    };\n    QuickPulseSender.TAG = \"QuickPulseSender\";\n    QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN = 25;\n    return QuickPulseSender;\n}());\nmodule.exports = QuickPulseSender;\n//# sourceMappingURL=QuickPulseSender.js.map","\"use strict\";\nvar Logging = require(\"./Logging\");\nvar Config = require(\"./Config\");\nvar QuickPulseEnvelopeFactory = require(\"./QuickPulseEnvelopeFactory\");\nvar QuickPulseSender = require(\"./QuickPulseSender\");\nvar Constants = require(\"../Declarations/Constants\");\nvar Context = require(\"./Context\");\n/** State Container for sending to the QuickPulse Service */\nvar QuickPulseStateManager = (function () {\n    function QuickPulseStateManager(iKey, context) {\n        this._isCollectingData = false;\n        this._lastSuccessTime = Date.now();\n        this._lastSendSucceeded = true;\n        this._metrics = {};\n        this._documents = [];\n        this._collectors = [];\n        this.config = new Config(iKey);\n        this.context = context || new Context();\n        this._sender = new QuickPulseSender(this.config);\n        this._isEnabled = false;\n    }\n    /**\n     *\n     * @param collector\n     */\n    QuickPulseStateManager.prototype.addCollector = function (collector) {\n        this._collectors.push(collector);\n    };\n    /**\n     * Override of TelemetryClient.trackMetric\n     */\n    QuickPulseStateManager.prototype.trackMetric = function (telemetry) {\n        this._addMetric(telemetry);\n    };\n    /**\n     * Add a document to the current buffer\n     * @param envelope\n     */\n    QuickPulseStateManager.prototype.addDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument(envelope);\n        if (document) {\n            this._documents.push(document);\n        }\n    };\n    /**\n     * Enable or disable communication with QuickPulseService\n     * @param isEnabled\n     */\n    QuickPulseStateManager.prototype.enable = function (isEnabled) {\n        if (isEnabled && !this._isEnabled) {\n            this._isEnabled = true;\n            this._goQuickPulse();\n        }\n        else if (!isEnabled && this._isEnabled) {\n            this._isEnabled = false;\n            clearTimeout(this._handle);\n            this._handle = undefined;\n        }\n    };\n    /**\n     * Enable or disable all collectors in this instance\n     * @param enable\n     */\n    QuickPulseStateManager.prototype.enableCollectors = function (enable) {\n        this._collectors.forEach(function (collector) {\n            collector.enable(enable);\n        });\n    };\n    /**\n     * Add the metric to this buffer. If same metric already exists in this buffer, add weight to it\n     * @param telemetry\n     */\n    QuickPulseStateManager.prototype._addMetric = function (telemetry) {\n        var value = telemetry.value;\n        var count = telemetry.count || 1;\n        var name = Constants.PerformanceToQuickPulseCounter[telemetry.name];\n        if (name) {\n            if (this._metrics[name]) {\n                this._metrics[name].Value = (this._metrics[name].Value * this._metrics[name].Weight + value * count) / (this._metrics[name].Weight + count);\n                this._metrics[name].Weight += count;\n            }\n            else {\n                this._metrics[name] = QuickPulseEnvelopeFactory.createQuickPulseMetric(telemetry);\n                this._metrics[name].Name = name;\n                this._metrics[name].Weight = 1;\n            }\n        }\n    };\n    QuickPulseStateManager.prototype._resetQuickPulseBuffer = function () {\n        delete this._metrics;\n        this._metrics = {};\n        this._documents.length = 0;\n    };\n    QuickPulseStateManager.prototype._goQuickPulse = function () {\n        var _this = this;\n        // Create envelope from Documents and Metrics\n        var metrics = Object.keys(this._metrics).map(function (k) { return _this._metrics[k]; });\n        var envelope = QuickPulseEnvelopeFactory.createQuickPulseEnvelope(metrics, this._documents.slice(), this.config, this.context);\n        // Clear this document, metric buffer\n        this._resetQuickPulseBuffer();\n        // Send it to QuickPulseService, if collecting\n        if (this._isCollectingData) {\n            this._post(envelope);\n        }\n        else {\n            this._ping(envelope);\n        }\n        var currentTimeout = this._isCollectingData ? QuickPulseStateManager.POST_INTERVAL : QuickPulseStateManager.PING_INTERVAL;\n        if (this._isCollectingData && Date.now() - this._lastSuccessTime >= QuickPulseStateManager.MAX_POST_WAIT_TIME && !this._lastSendSucceeded) {\n            // Haven't posted successfully in 20 seconds, so wait 60 seconds and ping\n            this._isCollectingData = false;\n            currentTimeout = QuickPulseStateManager.FALLBACK_INTERVAL;\n        }\n        else if (!this._isCollectingData && Date.now() - this._lastSuccessTime >= QuickPulseStateManager.MAX_PING_WAIT_TIME && !this._lastSendSucceeded) {\n            // Haven't pinged successfully in 60 seconds, so wait another 60 seconds\n            currentTimeout = QuickPulseStateManager.FALLBACK_INTERVAL;\n        }\n        this._lastSendSucceeded = null;\n        this._handle = setTimeout(this._goQuickPulse.bind(this), currentTimeout);\n        this._handle.unref(); // Don't block apps from terminating\n    };\n    QuickPulseStateManager.prototype._ping = function (envelope) {\n        this._sender.ping(envelope, this._quickPulseDone.bind(this));\n    };\n    QuickPulseStateManager.prototype._post = function (envelope) {\n        this._sender.post(envelope, this._quickPulseDone.bind(this));\n    };\n    /**\n     * Change the current QPS send state. (shouldPOST == undefined) --> error, but do not change the state yet.\n     */\n    QuickPulseStateManager.prototype._quickPulseDone = function (shouldPOST, res) {\n        if (shouldPOST != undefined) {\n            if (this._isCollectingData !== shouldPOST) {\n                Logging.info(\"Live Metrics sending data\", shouldPOST);\n                this.enableCollectors(shouldPOST);\n            }\n            this._isCollectingData = shouldPOST;\n            if (res && res.statusCode < 300 && res.statusCode >= 200) {\n                this._lastSuccessTime = Date.now();\n                this._lastSendSucceeded = true;\n            }\n            else {\n                this._lastSendSucceeded = false;\n            }\n        }\n        else {\n            // Received an error, keep the state as is\n            this._lastSendSucceeded = false;\n        }\n    };\n    QuickPulseStateManager.MAX_POST_WAIT_TIME = 20000;\n    QuickPulseStateManager.MAX_PING_WAIT_TIME = 60000;\n    QuickPulseStateManager.FALLBACK_INTERVAL = 60000;\n    QuickPulseStateManager.PING_INTERVAL = 5000;\n    QuickPulseStateManager.POST_INTERVAL = 1000;\n    return QuickPulseStateManager;\n}());\nmodule.exports = QuickPulseStateManager;\n//# sourceMappingURL=QuickPulseStateManager.js.map","\"use strict\";\nmodule.exports = {\n    /**\n     * Request-Context header\n     */\n    requestContextHeader: \"request-context\",\n    /**\n     * Source instrumentation header that is added by an application while making http\n     * requests and retrieved by the other application when processing incoming requests.\n     */\n    requestContextSourceKey: \"appId\",\n    /**\n     * Target instrumentation header that is added to the response and retrieved by the\n     * calling application when processing incoming responses.\n     */\n    requestContextTargetKey: \"appId\",\n    /**\n     * Request-Id header\n     */\n    requestIdHeader: \"request-id\",\n    /**\n     * Legacy Header containing the id of the immidiate caller\n     */\n    parentIdHeader: \"x-ms-request-id\",\n    /**\n     * Legacy Header containing the correlation id that kept the same for every telemetry item\n     * accross transactions\n     */\n    rootIdHeader: \"x-ms-request-root-id\",\n    /**\n     * Correlation-Context header\n     *\n     * Not currently actively used, but the contents should be passed from incoming to outgoing requests\n     */\n    correlationContextHeader: \"correlation-context\",\n    /**\n     * W3C distributed tracing protocol header\n     */\n    traceparentHeader: \"traceparent\",\n    /**\n     * W3C distributed tracing protocol state header\n     */\n    traceStateHeader: \"tracestate\"\n};\n//# sourceMappingURL=RequestResponseHeaders.js.map","\"use strict\";\nvar fs = require(\"fs\");\nvar os = require(\"os\");\nvar path = require(\"path\");\nvar zlib = require(\"zlib\");\nvar child_process = require(\"child_process\");\nvar Logging = require(\"./Logging\");\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\nvar Util = require(\"./Util\");\nvar Sender = (function () {\n    function Sender(config, onSuccess, onError) {\n        this._config = config;\n        this._onSuccess = onSuccess;\n        this._onError = onError;\n        this._enableDiskRetryMode = false;\n        this._resendInterval = Sender.WAIT_BETWEEN_RESEND;\n        this._maxBytesOnDisk = Sender.MAX_BYTES_ON_DISK;\n        this._numConsecutiveFailures = 0;\n        if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\n            // Node's chmod levels do not appropriately restrict file access on Windows\n            // Use the built-in command line tool ICACLS on Windows to properly restrict\n            // access to the temporary directory used for disk retry mode.\n            if (Sender.USE_ICACLS) {\n                // This should be async - but it's currently safer to have this synchronous\n                // This guarantees we can immediately fail setDiskRetryMode if we need to\n                try {\n                    Sender.OS_PROVIDES_FILE_PROTECTION = fs.existsSync(Sender.ICACLS_PATH);\n                }\n                catch (e) { }\n                if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\n                    Logging.warn(Sender.TAG, \"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.\");\n                }\n            }\n            else {\n                // chmod works everywhere else\n                Sender.OS_PROVIDES_FILE_PROTECTION = true;\n            }\n        }\n    }\n    /**\n    * Enable or disable offline mode\n    */\n    Sender.prototype.setDiskRetryMode = function (value, resendInterval, maxBytesOnDisk) {\n        this._enableDiskRetryMode = Sender.OS_PROVIDES_FILE_PROTECTION && value;\n        if (typeof resendInterval === 'number' && resendInterval >= 0) {\n            this._resendInterval = Math.floor(resendInterval);\n        }\n        if (typeof maxBytesOnDisk === 'number' && maxBytesOnDisk >= 0) {\n            this._maxBytesOnDisk = Math.floor(maxBytesOnDisk);\n        }\n        if (value && !Sender.OS_PROVIDES_FILE_PROTECTION) {\n            this._enableDiskRetryMode = false;\n            Logging.warn(Sender.TAG, \"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.\");\n        }\n    };\n    Sender.prototype.send = function (payload, callback) {\n        var _this = this;\n        var endpointUrl = this._config.endpointUrl;\n        // todo: investigate specifying an agent here: https://nodejs.org/api/http.html#http_class_http_agent\n        var options = {\n            method: \"POST\",\n            withCredentials: false,\n            headers: {\n                \"Content-Type\": \"application/x-json-stream\"\n            }\n        };\n        zlib.gzip(payload, function (err, buffer) {\n            var dataToSend = buffer;\n            if (err) {\n                Logging.warn(err);\n                dataToSend = payload; // something went wrong so send without gzip\n                options.headers[\"Content-Length\"] = payload.length.toString();\n            }\n            else {\n                options.headers[\"Content-Encoding\"] = \"gzip\";\n                options.headers[\"Content-Length\"] = buffer.length;\n            }\n            Logging.info(Sender.TAG, options);\n            // Ensure this request is not captured by auto-collection.\n            options[AutoCollectHttpDependencies.disableCollectionRequestOption] = true;\n            var requestCallback = function (res) {\n                res.setEncoding(\"utf-8\");\n                //returns empty if the data is accepted\n                var responseString = \"\";\n                res.on(\"data\", function (data) {\n                    responseString += data;\n                });\n                res.on(\"end\", function () {\n                    _this._numConsecutiveFailures = 0;\n                    Logging.info(Sender.TAG, responseString);\n                    if (typeof _this._onSuccess === \"function\") {\n                        _this._onSuccess(responseString);\n                    }\n                    if (typeof callback === \"function\") {\n                        callback(responseString);\n                    }\n                    if (_this._enableDiskRetryMode) {\n                        // try to send any cached events if the user is back online\n                        if (res.statusCode === 200) {\n                            setTimeout(function () { return _this._sendFirstFileOnDisk(); }, _this._resendInterval).unref();\n                            // store to disk in case of burst throttling\n                        }\n                        else if (res.statusCode === 408 ||\n                            res.statusCode === 429 ||\n                            res.statusCode === 439 ||\n                            res.statusCode === 500 ||\n                            res.statusCode === 503) {\n                            // TODO: Do not support partial success (206) until _sendFirstFileOnDisk checks payload age\n                            _this._storeToDisk(payload);\n                        }\n                    }\n                });\n            };\n            var req = Util.makeRequest(_this._config, endpointUrl, options, requestCallback);\n            req.on(\"error\", function (error) {\n                // todo: handle error codes better (group to recoverable/non-recoverable and persist)\n                _this._numConsecutiveFailures++;\n                // Only use warn level if retries are disabled or we've had some number of consecutive failures sending data\n                // This is because warn level is printed in the console by default, and we don't want to be noisy for transient and self-recovering errors\n                // Continue informing on each failure if verbose logging is being used\n                if (!_this._enableDiskRetryMode || _this._numConsecutiveFailures > 0 && _this._numConsecutiveFailures % Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN === 0) {\n                    var notice = \"Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:\";\n                    if (_this._enableDiskRetryMode) {\n                        notice = \"Ingestion endpoint could not be reached \" + _this._numConsecutiveFailures + \" consecutive times. There may be resulting telemetry loss. Most recent error:\";\n                    }\n                    Logging.warn(Sender.TAG, notice, error);\n                }\n                else {\n                    var notice = \"Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:\";\n                    Logging.info(Sender.TAG, notice, error);\n                }\n                _this._onErrorHelper(error);\n                if (typeof callback === \"function\") {\n                    var errorMessage = \"error sending telemetry\";\n                    if (error && (typeof error.toString === \"function\")) {\n                        errorMessage = error.toString();\n                    }\n                    callback(errorMessage);\n                }\n                if (_this._enableDiskRetryMode) {\n                    _this._storeToDisk(payload);\n                }\n            });\n            req.write(dataToSend);\n            req.end();\n        });\n    };\n    Sender.prototype.saveOnCrash = function (payload) {\n        if (this._enableDiskRetryMode) {\n            this._storeToDiskSync(payload);\n        }\n    };\n    Sender.prototype._runICACLS = function (args, callback) {\n        var aclProc = child_process.spawn(Sender.ICACLS_PATH, args, { windowsHide: true });\n        aclProc.on(\"error\", function (e) { return callback(e); });\n        aclProc.on(\"close\", function (code, signal) {\n            return callback(code === 0 ? null : new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + code + \")\"));\n        });\n    };\n    Sender.prototype._runICACLSSync = function (args) {\n        // Some very old versions of Node (< 0.11) don't have this\n        if (child_process.spawnSync) {\n            var aclProc = child_process.spawnSync(Sender.ICACLS_PATH, args, { windowsHide: true });\n            if (aclProc.error) {\n                throw aclProc.error;\n            }\n            else if (aclProc.status !== 0) {\n                throw new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + aclProc.status + \")\");\n            }\n        }\n        else {\n            throw new Error(\"Could not synchronously call ICACLS under current version of Node.js\");\n        }\n    };\n    Sender.prototype._getACLIdentity = function (callback) {\n        if (Sender.ACL_IDENTITY) {\n            return callback(null, Sender.ACL_IDENTITY);\n        }\n        var psProc = child_process.spawn(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\n            windowsHide: true,\n            stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\n        });\n        var data = \"\";\n        psProc.stdout.on(\"data\", function (d) { return data += d; });\n        psProc.on(\"error\", function (e) { return callback(e, null); });\n        psProc.on(\"close\", function (code, signal) {\n            Sender.ACL_IDENTITY = data && data.trim();\n            return callback(code === 0 ? null : new Error(\"Getting ACL identity did not succeed (PS returned code \" + code + \")\"), Sender.ACL_IDENTITY);\n        });\n    };\n    Sender.prototype._getACLIdentitySync = function () {\n        if (Sender.ACL_IDENTITY) {\n            return Sender.ACL_IDENTITY;\n        }\n        // Some very old versions of Node (< 0.11) don't have this\n        if (child_process.spawnSync) {\n            var psProc = child_process.spawnSync(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\n                windowsHide: true,\n                stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\n            });\n            if (psProc.error) {\n                throw psProc.error;\n            }\n            else if (psProc.status !== 0) {\n                throw new Error(\"Getting ACL identity did not succeed (PS returned code \" + psProc.status + \")\");\n            }\n            Sender.ACL_IDENTITY = psProc.stdout && psProc.stdout.toString().trim();\n            return Sender.ACL_IDENTITY;\n        }\n        else {\n            throw new Error(\"Could not synchronously get ACL identity under current version of Node.js\");\n        }\n    };\n    Sender.prototype._getACLArguments = function (directory, identity) {\n        return [directory,\n            \"/grant\", \"*S-1-5-32-544:(OI)(CI)F\",\n            \"/grant\", identity + \":(OI)(CI)F\",\n            \"/inheritance:r\"]; // Remove all inherited permissions\n    };\n    Sender.prototype._applyACLRules = function (directory, callback) {\n        var _this = this;\n        if (!Sender.USE_ICACLS) {\n            return callback(null);\n        }\n        // For performance, only run ACL rules if we haven't already during this session\n        if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\n            // Avoid multiple calls race condition by setting ACLED_DIRECTORIES to false for this directory immediately\n            // If batches are being failed faster than the processes spawned below return, some data won't be stored to disk\n            // This is better than the alternative of potentially infinitely spawned processes\n            Sender.ACLED_DIRECTORIES[directory] = false;\n            // Restrict this directory to only current user and administrator access\n            this._getACLIdentity(function (err, identity) {\n                if (err) {\n                    Sender.ACLED_DIRECTORIES[directory] = false; // false is used to cache failed (vs undefined which is \"not yet tried\")\n                    return callback(err);\n                }\n                else {\n                    _this._runICACLS(_this._getACLArguments(directory, identity), function (err) {\n                        Sender.ACLED_DIRECTORIES[directory] = !err;\n                        return callback(err);\n                    });\n                }\n            });\n        }\n        else {\n            return callback(Sender.ACLED_DIRECTORIES[directory] ? null :\n                new Error(\"Setting ACL restrictions did not succeed (cached result)\"));\n        }\n    };\n    Sender.prototype._applyACLRulesSync = function (directory) {\n        if (Sender.USE_ICACLS) {\n            // For performance, only run ACL rules if we haven't already during this session\n            if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\n                this._runICACLSSync(this._getACLArguments(directory, this._getACLIdentitySync()));\n                Sender.ACLED_DIRECTORIES[directory] = true; // If we get here, it succeeded. _runIACLSSync will throw on failures\n                return;\n            }\n            else if (!Sender.ACLED_DIRECTORIES[directory]) {\n                throw new Error(\"Setting ACL restrictions did not succeed (cached result)\");\n            }\n        }\n    };\n    Sender.prototype._confirmDirExists = function (directory, callback) {\n        var _this = this;\n        fs.lstat(directory, function (err, stats) {\n            if (err && err.code === 'ENOENT') {\n                fs.mkdir(directory, function (err) {\n                    if (err && err.code !== 'EEXIST') {\n                        callback(err);\n                    }\n                    else {\n                        _this._applyACLRules(directory, callback);\n                    }\n                });\n            }\n            else if (!err && stats.isDirectory()) {\n                _this._applyACLRules(directory, callback);\n            }\n            else {\n                callback(err || new Error(\"Path existed but was not a directory\"));\n            }\n        });\n    };\n    /**\n     * Computes the size (in bytes) of all files in a directory at the root level. Asynchronously.\n     */\n    Sender.prototype._getShallowDirectorySize = function (directory, callback) {\n        // Get the directory listing\n        fs.readdir(directory, function (err, files) {\n            if (err) {\n                return callback(err, -1);\n            }\n            var error = null;\n            var totalSize = 0;\n            var count = 0;\n            if (files.length === 0) {\n                callback(null, 0);\n                return;\n            }\n            // Query all file sizes\n            for (var i = 0; i < files.length; i++) {\n                fs.stat(path.join(directory, files[i]), function (err, fileStats) {\n                    count++;\n                    if (err) {\n                        error = err;\n                    }\n                    else {\n                        if (fileStats.isFile()) {\n                            totalSize += fileStats.size;\n                        }\n                    }\n                    if (count === files.length) {\n                        // Did we get an error?\n                        if (error) {\n                            callback(error, -1);\n                        }\n                        else {\n                            callback(error, totalSize);\n                        }\n                    }\n                });\n            }\n        });\n    };\n    /**\n     * Computes the size (in bytes) of all files in a directory at the root level. Synchronously.\n     */\n    Sender.prototype._getShallowDirectorySizeSync = function (directory) {\n        var files = fs.readdirSync(directory);\n        var totalSize = 0;\n        for (var i = 0; i < files.length; i++) {\n            totalSize += fs.statSync(path.join(directory, files[i])).size;\n        }\n        return totalSize;\n    };\n    /**\n     * Stores the payload as a json file on disk in the temp directory\n     */\n    Sender.prototype._storeToDisk = function (payload) {\n        var _this = this;\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        // This will create the dir if it does not exist\n        // Default permissions on *nix are directory listing from other users but no file creations\n        Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\n        this._confirmDirExists(directory, function (error) {\n            if (error) {\n                Logging.warn(Sender.TAG, \"Error while checking/creating directory: \" + (error && error.message));\n                _this._onErrorHelper(error);\n                return;\n            }\n            _this._getShallowDirectorySize(directory, function (err, size) {\n                if (err || size < 0) {\n                    Logging.warn(Sender.TAG, \"Error while checking directory size: \" + (err && err.message));\n                    _this._onErrorHelper(err);\n                    return;\n                }\n                else if (size > _this._maxBytesOnDisk) {\n                    Logging.warn(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + size);\n                    return;\n                }\n                //create file - file name for now is the timestamp, a better approach would be a UUID but that\n                //would require an external dependency\n                var fileName = new Date().getTime() + \".ai.json\";\n                var fileFullPath = path.join(directory, fileName);\n                // Mode 600 is w/r for creator and no read access for others (only applies on *nix)\n                // For Windows, ACL rules are applied to the entire directory (see logic in _confirmDirExists and _applyACLRules)\n                Logging.info(Sender.TAG, \"saving data to disk at: \" + fileFullPath);\n                fs.writeFile(fileFullPath, payload, { mode: 384 }, function (error) { return _this._onErrorHelper(error); });\n            });\n        });\n    };\n    /**\n     * Stores the payload as a json file on disk using sync file operations\n     * this is used when storing data before crashes\n     */\n    Sender.prototype._storeToDiskSync = function (payload) {\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        try {\n            Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\n            if (!fs.existsSync(directory)) {\n                fs.mkdirSync(directory);\n            }\n            // Make sure permissions are valid\n            this._applyACLRulesSync(directory);\n            var dirSize = this._getShallowDirectorySizeSync(directory);\n            if (dirSize > this._maxBytesOnDisk) {\n                Logging.info(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + dirSize);\n                return;\n            }\n            //create file - file name for now is the timestamp, a better approach would be a UUID but that\n            //would require an external dependency\n            var fileName = new Date().getTime() + \".ai.json\";\n            var fileFullPath = path.join(directory, fileName);\n            // Mode 600 is w/r for creator and no access for anyone else (only applies on *nix)\n            Logging.info(Sender.TAG, \"saving data before crash to disk at: \" + fileFullPath);\n            fs.writeFileSync(fileFullPath, payload, { mode: 384 });\n        }\n        catch (error) {\n            Logging.warn(Sender.TAG, \"Error while saving data to disk: \" + (error && error.message));\n            this._onErrorHelper(error);\n        }\n    };\n    /**\n     * Check for temp telemetry files\n     * reads the first file if exist, deletes it and tries to send its load\n     */\n    Sender.prototype._sendFirstFileOnDisk = function () {\n        var _this = this;\n        var tempDir = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        fs.exists(tempDir, function (exists) {\n            if (exists) {\n                fs.readdir(tempDir, function (error, files) {\n                    if (!error) {\n                        files = files.filter(function (f) { return path.basename(f).indexOf(\".ai.json\") > -1; });\n                        if (files.length > 0) {\n                            var firstFile = files[0];\n                            var filePath = path.join(tempDir, firstFile);\n                            fs.readFile(filePath, function (error, payload) {\n                                if (!error) {\n                                    // delete the file first to prevent double sending\n                                    fs.unlink(filePath, function (error) {\n                                        if (!error) {\n                                            _this.send(payload);\n                                        }\n                                        else {\n                                            _this._onErrorHelper(error);\n                                        }\n                                    });\n                                }\n                                else {\n                                    _this._onErrorHelper(error);\n                                }\n                            });\n                        }\n                    }\n                    else {\n                        _this._onErrorHelper(error);\n                    }\n                });\n            }\n        });\n    };\n    Sender.prototype._onErrorHelper = function (error) {\n        if (typeof this._onError === \"function\") {\n            this._onError(error);\n        }\n    };\n    Sender.TAG = \"Sender\";\n    Sender.ICACLS_PATH = process.env.systemdrive + \"/windows/system32/icacls.exe\";\n    Sender.POWERSHELL_PATH = process.env.systemdrive + \"/windows/system32/windowspowershell/v1.0/powershell.exe\";\n    Sender.ACLED_DIRECTORIES = {};\n    Sender.ACL_IDENTITY = null;\n    // the amount of time the SDK will wait between resending cached data, this buffer is to avoid any throtelling from the service side\n    Sender.WAIT_BETWEEN_RESEND = 60 * 1000;\n    Sender.MAX_BYTES_ON_DISK = 50 * 1000 * 1000;\n    Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN = 5;\n    Sender.TEMPDIR_PREFIX = \"appInsights-node\";\n    Sender.OS_PROVIDES_FILE_PROTECTION = false;\n    Sender.USE_ICACLS = os.type() === \"Windows_NT\";\n    return Sender;\n}());\nmodule.exports = Sender;\n//# sourceMappingURL=Sender.js.map","\"use strict\";\nvar url = require(\"url\");\nvar Config = require(\"./Config\");\nvar Context = require(\"./Context\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Channel = require(\"./Channel\");\nvar TelemetryProcessors = require(\"../TelemetryProcessors\");\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\nvar Sender = require(\"./Sender\");\nvar Util = require(\"./Util\");\nvar Logging = require(\"./Logging\");\nvar EnvelopeFactory = require(\"./EnvelopeFactory\");\n/**\n * Application Insights telemetry client provides interface to track telemetry items, register telemetry initializers and\n * and manually trigger immediate sending (flushing)\n */\nvar TelemetryClient = (function () {\n    /**\n     * Constructs a new client of the client\n     * @param setupString the Connection String or Instrumentation Key to use (read from environment variable if not specified)\n     */\n    function TelemetryClient(setupString) {\n        this._telemetryProcessors = [];\n        var config = new Config(setupString);\n        this.config = config;\n        this.context = new Context();\n        this.commonProperties = {};\n        var sender = new Sender(this.config);\n        this.channel = new Channel(function () { return config.disableAppInsights; }, function () { return config.maxBatchSize; }, function () { return config.maxBatchIntervalMs; }, sender);\n    }\n    /**\n     * Log information about availability of an application\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackAvailability = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Availability);\n    };\n    /**\n     * Log a trace message\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackTrace = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Trace);\n    };\n    /**\n     * Log a numeric value that is not associated with a specific event. Typically used to send regular reports of performance indicators.\n     * To send a single measurement, use just the first two parameters. If you take measurements very frequently, you can reduce the\n     * telemetry bandwidth by aggregating multiple measurements and sending the resulting average at intervals.\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackMetric = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Metric);\n    };\n    /**\n     * Log an exception\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackException = function (telemetry) {\n        if (telemetry && telemetry.exception && !Util.isError(telemetry.exception)) {\n            telemetry.exception = new Error(telemetry.exception.toString());\n        }\n        this.track(telemetry, Contracts.TelemetryType.Exception);\n    };\n    /**\n     * Log a user action or other occurrence.\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackEvent = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Event);\n    };\n    /**\n     * Log a request. Note that the default client will attempt to collect HTTP requests automatically so only use this for requests\n     * that aren't automatically captured or if you've disabled automatic request collection.\n     *\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackRequest = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Request);\n    };\n    /**\n     * Log a dependency. Note that the default client will attempt to collect dependencies automatically so only use this for dependencies\n     * that aren't automatically captured or if you've disabled automatic dependency collection.\n     *\n     * @param telemetry      Object encapsulating tracking option\n     * */\n    TelemetryClient.prototype.trackDependency = function (telemetry) {\n        if (telemetry && !telemetry.target && telemetry.data) {\n            // url.parse().host returns null for non-urls,\n            // making this essentially a no-op in those cases\n            // If this logic is moved, update jsdoc in DependencyTelemetry.target\n            telemetry.target = url.parse(telemetry.data).host;\n        }\n        this.track(telemetry, Contracts.TelemetryType.Dependency);\n    };\n    /**\n     * Immediately send all queued telemetry.\n     * @param options Flush options, including indicator whether app is crashing and callback\n     */\n    TelemetryClient.prototype.flush = function (options) {\n        this.channel.triggerSend(options ? !!options.isAppCrashing : false, options ? options.callback : undefined);\n    };\n    /**\n     * Generic track method for all telemetry types\n     * @param data the telemetry to send\n     * @param telemetryType specify the type of telemetry you are tracking from the list of Contracts.DataTypes\n     */\n    TelemetryClient.prototype.track = function (telemetry, telemetryType) {\n        if (telemetry && Contracts.telemetryTypeToBaseType(telemetryType)) {\n            var envelope = EnvelopeFactory.createEnvelope(telemetry, telemetryType, this.commonProperties, this.context, this.config);\n            // Set time on the envelope if it was set on the telemetry item\n            if (telemetry.time) {\n                envelope.time = telemetry.time.toISOString();\n            }\n            var accepted = this.runTelemetryProcessors(envelope, telemetry.contextObjects);\n            // Ideally we would have a central place for \"internal\" telemetry processors and users can configure which ones are in use.\n            // This will do for now. Otherwise clearTelemetryProcessors() would be problematic.\n            accepted = accepted && TelemetryProcessors.samplingTelemetryProcessor(envelope, { correlationContext: CorrelationContextManager_1.CorrelationContextManager.getCurrentContext() });\n            TelemetryProcessors.performanceMetricsTelemetryProcessor(envelope, this.quickPulseClient);\n            if (accepted) {\n                this.channel.send(envelope);\n            }\n        }\n        else {\n            Logging.warn(\"track() requires telemetry object and telemetryType to be specified.\");\n        }\n    };\n    /**\n     * Adds telemetry processor to the collection. Telemetry processors will be called one by one\n     * before telemetry item is pushed for sending and in the order they were added.\n     *\n     * @param telemetryProcessor function, takes Envelope, and optional context object and returns boolean\n     */\n    TelemetryClient.prototype.addTelemetryProcessor = function (telemetryProcessor) {\n        this._telemetryProcessors.push(telemetryProcessor);\n    };\n    /*\n     * Removes all telemetry processors\n     */\n    TelemetryClient.prototype.clearTelemetryProcessors = function () {\n        this._telemetryProcessors = [];\n    };\n    TelemetryClient.prototype.runTelemetryProcessors = function (envelope, contextObjects) {\n        var accepted = true;\n        var telemetryProcessorsCount = this._telemetryProcessors.length;\n        if (telemetryProcessorsCount === 0) {\n            return accepted;\n        }\n        contextObjects = contextObjects || {};\n        contextObjects['correlationContext'] = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        for (var i = 0; i < telemetryProcessorsCount; ++i) {\n            try {\n                var processor = this._telemetryProcessors[i];\n                if (processor) {\n                    if (processor.apply(null, [envelope, contextObjects]) === false) {\n                        accepted = false;\n                        break;\n                    }\n                }\n            }\n            catch (error) {\n                accepted = true;\n                Logging.warn(\"One of telemetry processors failed, telemetry item will be sent.\", error, envelope);\n            }\n        }\n        return accepted;\n    };\n    return TelemetryClient;\n}());\nmodule.exports = TelemetryClient;\n//# sourceMappingURL=TelemetryClient.js.map","\"use strict\";\nvar Util = require(\"./Util\");\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\n/**\n * Helper class to manage parsing and validation of traceparent header. Also handles hierarchical\n * back-compatibility headers generated from traceparent. W3C traceparent spec is documented at\n * https://www.w3.org/TR/trace-context/#traceparent-field\n */\nvar Traceparent = (function () {\n    function Traceparent(traceparent, parentId) {\n        this.traceFlag = Traceparent.DEFAULT_TRACE_FLAG;\n        this.version = Traceparent.DEFAULT_VERSION;\n        if (traceparent && typeof traceparent === \"string\") {\n            // If incoming request contains traceparent: parse it, set operation, parent and telemetry id accordingly. traceparent should be injected into outgoing requests. request-id should be injected in back-compat format |traceId.spanId. so that older SDKs could understand it.\n            if (traceparent.split(\",\").length > 1) {\n                this.traceId = Util.w3cTraceId();\n                this.spanId = Util.w3cTraceId().substr(0, 16);\n            }\n            else {\n                var traceparentArr = traceparent.trim().split(\"-\");\n                var len = traceparentArr.length;\n                if (len >= 4) {\n                    this.version = traceparentArr[0];\n                    this.traceId = traceparentArr[1];\n                    this.spanId = traceparentArr[2];\n                    this.traceFlag = traceparentArr[3];\n                }\n                else {\n                    this.traceId = Util.w3cTraceId();\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                }\n                // Version validation\n                if (!this.version.match(/^[0-9a-f]{2}$/g)) {\n                    this.version = Traceparent.DEFAULT_VERSION;\n                    this.traceId = Util.w3cTraceId();\n                }\n                if (this.version === \"00\" && len !== 4) {\n                    this.traceId = Util.w3cTraceId();\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                }\n                if (this.version === \"ff\") {\n                    this.version = Traceparent.DEFAULT_VERSION;\n                    this.traceId = Util.w3cTraceId();\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                }\n                if (!this.version.match(/^0[0-9a-f]$/g)) {\n                    this.version = Traceparent.DEFAULT_VERSION;\n                }\n                // TraceFlag validation\n                if (!this.traceFlag.match(/^[0-9a-f]{2}$/g)) {\n                    this.traceFlag = Traceparent.DEFAULT_TRACE_FLAG;\n                    this.traceId = Util.w3cTraceId();\n                }\n                // Validate TraceId, regenerate new traceid if invalid\n                if (!Traceparent.isValidTraceId(this.traceId)) {\n                    this.traceId = Util.w3cTraceId();\n                }\n                // Validate Span Id, discard entire traceparent if invalid\n                if (!Traceparent.isValidSpanId(this.spanId)) {\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                    this.traceId = Util.w3cTraceId();\n                }\n                // Save backCompat parentId\n                this.parentId = this.getBackCompatRequestId();\n            }\n        }\n        else if (parentId) {\n            // If incoming request contains only request-id, new traceid and spanid should be started, request-id value should be used as a parent. Root part of request-id should be stored in custom dimension on the request telemetry if root part is different from traceid. On the outgoing request side, request-id should be emitted in the |traceId.spanId. format.\n            this.parentId = parentId.slice(); // copy\n            var operationId = CorrelationIdManager.getRootId(parentId);\n            if (!Traceparent.isValidTraceId(operationId)) {\n                this.legacyRootId = operationId;\n                operationId = Util.w3cTraceId();\n            }\n            if (parentId.indexOf(\"|\") !== -1) {\n                parentId = parentId.substring(1 + parentId.substring(0, parentId.length - 1).lastIndexOf(\".\"), parentId.length - 1);\n            }\n            this.traceId = operationId;\n            this.spanId = parentId;\n        }\n        else {\n            // Fallback default constructor\n            // if request does not contain any correlation headers, see case p2\n            this.traceId = Util.w3cTraceId();\n            this.spanId = Util.w3cTraceId().substr(0, 16);\n        }\n    }\n    Traceparent.isValidTraceId = function (id) {\n        return id.match(/^[0-9a-f]{32}$/) && id !== \"00000000000000000000000000000000\";\n    };\n    Traceparent.isValidSpanId = function (id) {\n        return id.match(/^[0-9a-f]{16}$/) && id !== \"0000000000000000\";\n    };\n    Traceparent.prototype.getBackCompatRequestId = function () {\n        return \"|\" + this.traceId + \".\" + this.spanId + \".\";\n    };\n    Traceparent.prototype.toString = function () {\n        return this.version + \"-\" + this.traceId + \"-\" + this.spanId + \"-\" + this.traceFlag;\n    };\n    Traceparent.prototype.updateSpanId = function () {\n        this.spanId = Util.w3cTraceId().substr(0, 16);\n    };\n    Traceparent.DEFAULT_TRACE_FLAG = \"01\";\n    Traceparent.DEFAULT_VERSION = \"00\";\n    return Traceparent;\n}());\nmodule.exports = Traceparent;\n//# sourceMappingURL=Traceparent.js.map","\"use strict\";\n/**\n * Helper class to manage parsing and strict-validation of tracestate header. W3C tracestate spec\n * is documented at https://www.w3.org/TR/trace-context/#header-value\n * @class Tracestate\n */\nvar Tracestate = (function () {\n    // if true, performs strict tracestate header checking, else just passes it along\n    function Tracestate(id) {\n        this.fieldmap = [];\n        if (!id) {\n            return;\n        }\n        this.fieldmap = this.parseHeader(id);\n    }\n    Tracestate.prototype.toString = function () {\n        var fieldarr = this.fieldmap;\n        if (!fieldarr || fieldarr.length == 0) {\n            return null;\n        }\n        return fieldarr.join(\", \");\n    };\n    Tracestate.validateKeyChars = function (key) {\n        var keyParts = key.split(\"@\");\n        if (keyParts.length == 2) {\n            // Parse for tenant@vendor format\n            var tenant = keyParts[0].trim();\n            var vendor = keyParts[1].trim();\n            var tenantValid = Boolean(tenant.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,241}$/));\n            var vendorValid = Boolean(vendor.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,14}$/));\n            return tenantValid && vendorValid;\n        }\n        else if (keyParts.length == 1) {\n            // Parse for standard key format\n            return Boolean(key.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,256}$/));\n        }\n        return false;\n    };\n    Tracestate.prototype.parseHeader = function (id) {\n        var res = [];\n        var keydeduper = {};\n        var parts = id.split(\",\");\n        if (parts.length > 32)\n            return null;\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n            var rawPart = parts_1[_i];\n            var part = rawPart.trim(); // trim out whitespace\n            if (part.length === 0) {\n                continue; // Discard empty pairs, but keep the rest of this tracestate\n            }\n            var pair = part.split(\"=\");\n            // pair should contain exactly one \"=\"\n            if (pair.length !== 2) {\n                return null; // invalid pair: discard entire tracestate\n            }\n            // Validate length and charset of this key\n            if (!Tracestate.validateKeyChars(pair[0])) {\n                return null;\n            }\n            // Assert uniqueness of this key\n            if (keydeduper[pair[0]]) {\n                return null; // duplicate key: discard entire tracestate\n            }\n            else {\n                keydeduper[pair[0]] = true;\n            }\n            // All checks passed -- add this part\n            res.push(part);\n        }\n        return res;\n    };\n    Tracestate.strict = true;\n    return Tracestate;\n}());\nmodule.exports = Tracestate;\n//# sourceMappingURL=Tracestate.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar url = require(\"url\");\nvar constants = require(\"constants\");\nvar Logging = require(\"./Logging\");\nvar RequestResponseHeaders = require(\"./RequestResponseHeaders\");\nvar Util = (function () {\n    function Util() {\n    }\n    /**\n     * helper method to access userId and sessionId cookie\n     */\n    Util.getCookie = function (name, cookie) {\n        var value = \"\";\n        if (name && name.length && typeof cookie === \"string\") {\n            var cookieName = name + \"=\";\n            var cookies = cookie.split(\";\");\n            for (var i = 0; i < cookies.length; i++) {\n                var cookie = cookies[i];\n                cookie = Util.trim(cookie);\n                if (cookie && cookie.indexOf(cookieName) === 0) {\n                    value = cookie.substring(cookieName.length, cookies[i].length);\n                    break;\n                }\n            }\n        }\n        return value;\n    };\n    /**\n     * helper method to trim strings (IE8 does not implement String.prototype.trim)\n     */\n    Util.trim = function (str) {\n        if (typeof str === \"string\") {\n            return str.replace(/^\\s+|\\s+$/g, \"\");\n        }\n        else {\n            return \"\";\n        }\n    };\n    /**\n     * Convert an array of int32 to Base64 (no '==' at the end).\n     * MSB first.\n     */\n    Util.int32ArrayToBase64 = function (array) {\n        var toChar = function (v, i) {\n            return String.fromCharCode((v >> i) & 0xFF);\n        };\n        var int32AsString = function (v) {\n            return toChar(v, 24) + toChar(v, 16) + toChar(v, 8) + toChar(v, 0);\n        };\n        var x = array.map(int32AsString).join(\"\");\n        var b = Buffer.from ? Buffer.from(x, \"binary\") : new Buffer(x, \"binary\");\n        var s = b.toString(\"base64\");\n        return s.substr(0, s.indexOf(\"=\"));\n    };\n    /**\n     * generate a random 32bit number (-0x80000000..0x7FFFFFFF).\n     */\n    Util.random32 = function () {\n        return (0x100000000 * Math.random()) | 0;\n    };\n    /**\n     * generate a random 32bit number (0x00000000..0xFFFFFFFF).\n     */\n    Util.randomu32 = function () {\n        return Util.random32() + 0x80000000;\n    };\n    /**\n     * generate W3C-compatible trace id\n     * https://github.com/w3c/distributed-tracing/blob/master/trace_context/HTTP_HEADER_FORMAT.md#trace-id\n     */\n    Util.w3cTraceId = function () {\n        var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\n        // rfc4122 version 4 UUID without dashes and with lowercase letters\n        var oct = \"\", tmp;\n        for (var a = 0; a < 4; a++) {\n            tmp = Util.random32();\n            oct +=\n                hexValues[tmp & 0xF] +\n                    hexValues[tmp >> 4 & 0xF] +\n                    hexValues[tmp >> 8 & 0xF] +\n                    hexValues[tmp >> 12 & 0xF] +\n                    hexValues[tmp >> 16 & 0xF] +\n                    hexValues[tmp >> 20 & 0xF] +\n                    hexValues[tmp >> 24 & 0xF] +\n                    hexValues[tmp >> 28 & 0xF];\n        }\n        // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\n        var clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];\n        return oct.substr(0, 8) + oct.substr(9, 4) + \"4\" + oct.substr(13, 3) + clockSequenceHi + oct.substr(16, 3) + oct.substr(19, 12);\n    };\n    Util.isValidW3CId = function (id) {\n        return id.length === 32 && id !== \"00000000000000000000000000000000\";\n    };\n    /**\n     * Check if an object is of type Array\n     */\n    Util.isArray = function (obj) {\n        return Object.prototype.toString.call(obj) === \"[object Array]\";\n    };\n    /**\n     * Check if an object is of type Error\n     */\n    Util.isError = function (obj) {\n        return obj instanceof Error;\n    };\n    Util.isPrimitive = function (input) {\n        var propType = typeof input;\n        return propType === \"string\" || propType === \"number\" || propType === \"boolean\";\n    };\n    /**\n     * Check if an object is of type Date\n     */\n    Util.isDate = function (obj) {\n        return Object.prototype.toString.call(obj) === \"[object Date]\";\n    };\n    /**\n     * Convert ms to c# time span format\n     */\n    Util.msToTimeSpan = function (totalms) {\n        if (isNaN(totalms) || totalms < 0) {\n            totalms = 0;\n        }\n        var sec = ((totalms / 1000) % 60).toFixed(7).replace(/0{0,4}$/, \"\");\n        var min = \"\" + Math.floor(totalms / (1000 * 60)) % 60;\n        var hour = \"\" + Math.floor(totalms / (1000 * 60 * 60)) % 24;\n        var days = Math.floor(totalms / (1000 * 60 * 60 * 24));\n        sec = sec.indexOf(\".\") < 2 ? \"0\" + sec : sec;\n        min = min.length < 2 ? \"0\" + min : min;\n        hour = hour.length < 2 ? \"0\" + hour : hour;\n        var daysText = days > 0 ? days + \".\" : \"\";\n        return daysText + hour + \":\" + min + \":\" + sec;\n    };\n    /**\n     * Using JSON.stringify, by default Errors do not serialize to something useful:\n     * Simplify a generic Node Error into a simpler map for customDimensions\n     * Custom errors can still implement toJSON to override this functionality\n     */\n    Util.extractError = function (err) {\n        // Error is often subclassed so may have code OR id properties:\n        // https://nodejs.org/api/errors.html#errors_error_code\n        var looseError = err;\n        return {\n            message: err.message,\n            code: looseError.code || looseError.id || \"\",\n        };\n    };\n    /**\n     * Manually call toJSON if available to pre-convert the value.\n     * If a primitive is returned, then the consumer of this function can skip JSON.stringify.\n     * This avoids double escaping of quotes for Date objects, for example.\n     */\n    Util.extractObject = function (origProperty) {\n        if (origProperty instanceof Error) {\n            return Util.extractError(origProperty);\n        }\n        if (typeof origProperty.toJSON === \"function\") {\n            return origProperty.toJSON();\n        }\n        return origProperty;\n    };\n    /**\n     * Validate that an object is of type { [key: string]: string }\n     */\n    Util.validateStringMap = function (obj) {\n        if (typeof obj !== \"object\") {\n            Logging.info(\"Invalid properties dropped from payload\");\n            return;\n        }\n        var map = {};\n        for (var field in obj) {\n            var property = '';\n            var origProperty = obj[field];\n            var propType = typeof origProperty;\n            if (Util.isPrimitive(origProperty)) {\n                property = origProperty.toString();\n            }\n            else if (origProperty === null || propType === \"undefined\") {\n                property = \"\";\n            }\n            else if (propType === \"function\") {\n                Logging.info(\"key: \" + field + \" was function; will not serialize\");\n                continue;\n            }\n            else {\n                var stringTarget = Util.isArray(origProperty) ? origProperty : Util.extractObject(origProperty);\n                try {\n                    if (Util.isPrimitive(stringTarget)) {\n                        property = stringTarget;\n                    }\n                    else {\n                        property = JSON.stringify(stringTarget);\n                    }\n                }\n                catch (e) {\n                    property = origProperty.constructor.name.toString() + \" (Error: \" + e.message + \")\";\n                    Logging.info(\"key: \" + field + \", could not be serialized\");\n                }\n            }\n            map[field] = property.substring(0, Util.MAX_PROPERTY_LENGTH);\n        }\n        return map;\n    };\n    /**\n     * Checks if a request url is not on a excluded domain list\n     * and if it is safe to add correlation headers\n     */\n    Util.canIncludeCorrelationHeader = function (client, requestUrl) {\n        var excludedDomains = client && client.config && client.config.correlationHeaderExcludedDomains;\n        if (!excludedDomains || excludedDomains.length == 0 || !requestUrl) {\n            return true;\n        }\n        for (var i = 0; i < excludedDomains.length; i++) {\n            var regex = new RegExp(excludedDomains[i].replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\n            if (regex.test(url.parse(requestUrl).hostname)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    Util.getCorrelationContextTarget = function (response, key) {\n        var contextHeaders = response.headers && response.headers[RequestResponseHeaders.requestContextHeader];\n        if (contextHeaders) {\n            var keyValues = contextHeaders.split(\",\");\n            for (var i = 0; i < keyValues.length; ++i) {\n                var keyValue = keyValues[i].split(\"=\");\n                if (keyValue.length == 2 && keyValue[0] == key) {\n                    return keyValue[1];\n                }\n            }\n        }\n    };\n    /**\n     * Generate request\n     *\n     * Proxify the request creation to handle proxy http\n     *\n     * @param {string} requestUrl url endpoint\n     * @param {Object} requestOptions Request option\n     * @param {Function} requestCallback callback on request\n     * @returns {http.ClientRequest} request object\n     */\n    Util.makeRequest = function (config, requestUrl, requestOptions, requestCallback) {\n        if (requestUrl && requestUrl.indexOf('//') === 0) {\n            requestUrl = 'https:' + requestUrl;\n        }\n        var requestUrlParsed = url.parse(requestUrl);\n        var options = __assign({}, requestOptions, { host: requestUrlParsed.hostname, port: requestUrlParsed.port, path: requestUrlParsed.pathname });\n        var proxyUrl = undefined;\n        if (requestUrlParsed.protocol === 'https:') {\n            proxyUrl = config.proxyHttpsUrl || undefined;\n        }\n        if (requestUrlParsed.protocol === 'http:') {\n            proxyUrl = config.proxyHttpUrl || undefined;\n        }\n        if (proxyUrl) {\n            if (proxyUrl.indexOf('//') === 0) {\n                proxyUrl = 'http:' + proxyUrl;\n            }\n            var proxyUrlParsed = url.parse(proxyUrl);\n            // https is not supported at the moment\n            if (proxyUrlParsed.protocol === 'https:') {\n                Logging.info(\"Proxies that use HTTPS are not supported\");\n                proxyUrl = undefined;\n            }\n            else {\n                options = __assign({}, options, { host: proxyUrlParsed.hostname, port: proxyUrlParsed.port || \"80\", path: requestUrl, headers: __assign({}, options.headers, { Host: requestUrlParsed.hostname }) });\n            }\n        }\n        var isHttps = requestUrlParsed.protocol === 'https:' && !proxyUrl;\n        if (isHttps && config.httpsAgent !== undefined) {\n            options.agent = config.httpsAgent;\n        }\n        else if (!isHttps && config.httpAgent !== undefined) {\n            options.agent = config.httpAgent;\n        }\n        else if (isHttps) {\n            // HTTPS without a passed in agent. Use one that enforces our TLS rules\n            options.agent = Util.tlsRestrictedAgent;\n        }\n        if (isHttps) {\n            return https.request(options, requestCallback);\n        }\n        else {\n            return http.request(options, requestCallback);\n        }\n    };\n    ;\n    /**\n     * Parse standard <string | string[] | number> request-context header\n     */\n    Util.safeIncludeCorrelationHeader = function (client, request, correlationHeader) {\n        var header; // attempt to cast correlationHeader to string\n        if (typeof correlationHeader === \"string\") {\n            header = correlationHeader;\n        }\n        else if (correlationHeader instanceof Array) {\n            header = correlationHeader.join(\",\");\n        }\n        else if (correlationHeader && typeof correlationHeader.toString === \"function\") {\n            // best effort attempt: requires well-defined toString\n            try {\n                header = correlationHeader.toString();\n            }\n            catch (err) {\n                Logging.warn(\"Outgoing request-context header could not be read. Correlation of requests may be lost.\", err, correlationHeader);\n            }\n        }\n        if (header) {\n            Util.addCorrelationIdHeaderFromString(client, request, header);\n        }\n        else {\n            request.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\n        }\n    };\n    Util.addCorrelationIdHeaderFromString = function (client, response, correlationHeader) {\n        var components = correlationHeader.split(\",\");\n        var key = RequestResponseHeaders.requestContextSourceKey + \"=\";\n        var found = components.some(function (value) { return value.substring(0, key.length) === key; });\n        if (!found) {\n            response.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\n        }\n    };\n    Util.MAX_PROPERTY_LENGTH = 8192;\n    Util.tlsRestrictedAgent = new https.Agent({\n        secureOptions: constants.SSL_OP_NO_SSLv2 | constants.SSL_OP_NO_SSLv3 |\n            constants.SSL_OP_NO_TLSv1 | constants.SSL_OP_NO_TLSv1_1\n    });\n    return Util;\n}());\nmodule.exports = Util;\n//# sourceMappingURL=Util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar AutoCollectPerformance = require(\"../AutoCollection/Performance\");\nvar TelemetryType = require(\"../Declarations/Contracts\");\nfunction performanceMetricsTelemetryProcessor(envelope, client) {\n    // If live metrics is enabled, forward all telemetry there\n    if (client) {\n        client.addDocument(envelope);\n    }\n    // Increment rate counters (for standard metrics and live metrics)\n    switch (envelope.data.baseType) {\n        case TelemetryType.TelemetryTypeString.Exception:\n            AutoCollectPerformance.countException();\n            break;\n        case TelemetryType.TelemetryTypeString.Request:\n            var requestData = envelope.data.baseData;\n            AutoCollectPerformance.countRequest(requestData.duration, requestData.success);\n            break;\n        case TelemetryType.TelemetryTypeString.Dependency:\n            var remoteDependencyData = envelope.data.baseData;\n            AutoCollectPerformance.countDependency(remoteDependencyData.duration, remoteDependencyData.success);\n            break;\n    }\n    return true;\n}\nexports.performanceMetricsTelemetryProcessor = performanceMetricsTelemetryProcessor;\n//# sourceMappingURL=PerformanceMetricsTelemetryProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts = require(\"../Declarations/Contracts\");\n/**\n *  A telemetry processor that handles sampling.\n */\nfunction samplingTelemetryProcessor(envelope, contextObjects) {\n    var samplingPercentage = envelope.sampleRate; // Set for us in Client.getEnvelope\n    var isSampledIn = false;\n    if (samplingPercentage === null || samplingPercentage === undefined || samplingPercentage >= 100) {\n        return true;\n    }\n    else if (envelope.data && Contracts.TelemetryType.Metric === Contracts.baseTypeToTelemetryType(envelope.data.baseType)) {\n        // Exclude MetricData telemetry from sampling\n        return true;\n    }\n    else if (contextObjects.correlationContext && contextObjects.correlationContext.operation) {\n        // If we're using dependency correlation, sampling should retain all telemetry from a given request\n        isSampledIn = getSamplingHashCode(contextObjects.correlationContext.operation.id) < samplingPercentage;\n    }\n    else {\n        // If we're not using dependency correlation, sampling should use a random distribution on each item\n        isSampledIn = (Math.random() * 100) < samplingPercentage;\n    }\n    return isSampledIn;\n}\nexports.samplingTelemetryProcessor = samplingTelemetryProcessor;\n/** Ported from AI .NET SDK */\nfunction getSamplingHashCode(input) {\n    var csharpMin = -2147483648;\n    var csharpMax = 2147483647;\n    var hash = 5381;\n    if (!input) {\n        return 0;\n    }\n    while (input.length < 8) {\n        input = input + input;\n    }\n    for (var i = 0; i < input.length; i++) {\n        // JS doesn't respond to integer overflow by wrapping around. Simulate it with bitwise operators ( | 0)\n        hash = ((((hash << 5) + hash) | 0) + input.charCodeAt(i) | 0);\n    }\n    hash = hash <= csharpMin ? csharpMax : Math.abs(hash);\n    return (hash / csharpMax) * 100;\n}\nexports.getSamplingHashCode = getSamplingHashCode;\n//# sourceMappingURL=SamplingTelemetryProcessor.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./SamplingTelemetryProcessor\"));\n__export(require(\"./PerformanceMetricsTelemetryProcessor\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CorrelationContextManager = require(\"./AutoCollection/CorrelationContextManager\"); // Keep this first\nvar AutoCollectConsole = require(\"./AutoCollection/Console\");\nvar AutoCollectExceptions = require(\"./AutoCollection/Exceptions\");\nvar AutoCollectPerformance = require(\"./AutoCollection/Performance\");\nvar AutoCollectHttpDependencies = require(\"./AutoCollection/HttpDependencies\");\nvar AutoCollectHttpRequests = require(\"./AutoCollection/HttpRequests\");\nvar CorrelationIdManager = require(\"./Library/CorrelationIdManager\");\nvar Logging = require(\"./Library/Logging\");\nvar QuickPulseClient = require(\"./Library/QuickPulseStateManager\");\nvar NativePerformance_1 = require(\"./AutoCollection/NativePerformance\");\n// We export these imports so that SDK users may use these classes directly.\n// They're exposed using \"export import\" so that types are passed along as expected\nexports.TelemetryClient = require(\"./Library/NodeClient\");\nexports.Contracts = require(\"./Declarations/Contracts\");\nvar DistributedTracingModes;\n(function (DistributedTracingModes) {\n    /**\n     * (Default) Send Application Insights correlation headers\n     */\n    DistributedTracingModes[DistributedTracingModes[\"AI\"] = 0] = \"AI\";\n    /**\n     * Send both W3C Trace Context headers and back-compatibility Application Insights headers\n     */\n    DistributedTracingModes[DistributedTracingModes[\"AI_AND_W3C\"] = 1] = \"AI_AND_W3C\";\n})(DistributedTracingModes = exports.DistributedTracingModes || (exports.DistributedTracingModes = {}));\n// Default autocollection configuration\nvar _isConsole = true;\nvar _isConsoleLog = false;\nvar _isExceptions = true;\nvar _isPerformance = true;\nvar _isRequests = true;\nvar _isDependencies = true;\nvar _isDiskRetry = true;\nvar _isCorrelating = true;\nvar _forceClsHooked;\nvar _isSendingLiveMetrics = false; // Off by default\nvar _isNativePerformance = true;\nvar _disabledExtendedMetrics;\nvar _diskRetryInterval = undefined;\nvar _diskRetryMaxBytes = undefined;\nvar _console;\nvar _exceptions;\nvar _performance;\nvar _nativePerformance;\nvar _serverRequests;\nvar _clientRequests;\nvar _isStarted = false;\nvar _performanceLiveMetrics;\n/**\n * Initializes the default client. Should be called after setting\n * configuration options.\n *\n * @param setupString the Connection String or Instrumentation Key to use. Optional, if\n * this is not specified, the value will be read from the environment\n * variable APPLICATIONINSIGHTS_CONNECTION_STRING or APPINSIGHTS_INSTRUMENTATIONKEY.\n * @returns {Configuration} the configuration class to initialize\n * and start the SDK.\n */\nfunction setup(setupString) {\n    if (!exports.defaultClient) {\n        exports.defaultClient = new exports.TelemetryClient(setupString);\n        _console = new AutoCollectConsole(exports.defaultClient);\n        _exceptions = new AutoCollectExceptions(exports.defaultClient);\n        _performance = new AutoCollectPerformance(exports.defaultClient);\n        _serverRequests = new AutoCollectHttpRequests(exports.defaultClient);\n        _clientRequests = new AutoCollectHttpDependencies(exports.defaultClient);\n        if (!_nativePerformance) {\n            _nativePerformance = new NativePerformance_1.AutoCollectNativePerformance(exports.defaultClient);\n        }\n    }\n    else {\n        Logging.info(\"The default client is already setup\");\n    }\n    if (exports.defaultClient && exports.defaultClient.channel) {\n        exports.defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry, _diskRetryInterval, _diskRetryMaxBytes);\n    }\n    return Configuration;\n}\nexports.setup = setup;\n/**\n * Starts automatic collection of telemetry. Prior to calling start no\n * telemetry will be *automatically* collected, though manual collection\n * is enabled.\n * @returns {ApplicationInsights} this class\n */\nfunction start() {\n    if (!!exports.defaultClient) {\n        _isStarted = true;\n        _console.enable(_isConsole, _isConsoleLog);\n        _exceptions.enable(_isExceptions);\n        _performance.enable(_isPerformance);\n        _nativePerformance.enable(_isNativePerformance, _disabledExtendedMetrics);\n        _serverRequests.useAutoCorrelation(_isCorrelating, _forceClsHooked);\n        _serverRequests.enable(_isRequests);\n        _clientRequests.enable(_isDependencies);\n        if (exports.liveMetricsClient && _isSendingLiveMetrics) {\n            exports.liveMetricsClient.enable(_isSendingLiveMetrics);\n        }\n    }\n    else {\n        Logging.warn(\"Start cannot be called before setup\");\n    }\n    return Configuration;\n}\nexports.start = start;\n/**\n * Returns an object that is shared across all code handling a given request.\n * This can be used similarly to thread-local storage in other languages.\n * Properties set on this object will be available to telemetry processors.\n *\n * Do not store sensitive information here.\n * Custom properties set on this object can be exposed in a future SDK\n * release via outgoing HTTP headers.\n * This is to allow for correlating data cross-component.\n *\n * This method will return null if automatic dependency correlation is disabled.\n * @returns A plain object for request storage or null if automatic dependency correlation is disabled.\n */\nfunction getCorrelationContext() {\n    if (_isCorrelating) {\n        return CorrelationContextManager.CorrelationContextManager.getCurrentContext();\n    }\n    return null;\n}\nexports.getCorrelationContext = getCorrelationContext;\n/**\n * Returns a function that will get the same correlation context within its\n * function body as the code executing this function.\n * Use this method if automatic dependency correlation is not propagating\n * correctly to an asynchronous callback.\n */\nfunction wrapWithCorrelationContext(fn) {\n    return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn);\n}\nexports.wrapWithCorrelationContext = wrapWithCorrelationContext;\n/**\n * The active configuration for global SDK behaviors, such as autocollection.\n */\nvar Configuration = (function () {\n    function Configuration() {\n    }\n    /**\n     * Sets the distributed tracing modes. If W3C mode is enabled, W3C trace context\n     * headers (traceparent/tracestate) will be parsed in all incoming requests, and included in outgoing\n     * requests. In W3C mode, existing back-compatibility AI headers will also be parsed and included.\n     * Enabling W3C mode will not break existing correlation with other Application Insights instrumented\n     * services. Default=AI\n    */\n    Configuration.setDistributedTracingMode = function (value) {\n        CorrelationIdManager.w3cEnabled = value === DistributedTracingModes.AI_AND_W3C;\n        return Configuration;\n    };\n    /**\n     * Sets the state of console and logger tracking (enabled by default for third-party loggers only)\n     * @param value if true logger activity will be sent to Application Insights\n     * @param collectConsoleLog if true, logger autocollection will include console.log calls (default false)\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectConsole = function (value, collectConsoleLog) {\n        if (collectConsoleLog === void 0) { collectConsoleLog = false; }\n        _isConsole = value;\n        _isConsoleLog = collectConsoleLog;\n        if (_isStarted) {\n            _console.enable(value, collectConsoleLog);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of exception tracking (enabled by default)\n     * @param value if true uncaught exceptions will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectExceptions = function (value) {\n        _isExceptions = value;\n        if (_isStarted) {\n            _exceptions.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of performance tracking (enabled by default)\n     * @param value if true performance counters will be collected every second and sent to Application Insights\n     * @param collectExtendedMetrics if true, extended metrics counters will be collected every minute and sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectPerformance = function (value, collectExtendedMetrics) {\n        if (collectExtendedMetrics === void 0) { collectExtendedMetrics = true; }\n        _isPerformance = value;\n        var extendedMetricsConfig = NativePerformance_1.AutoCollectNativePerformance.parseEnabled(collectExtendedMetrics);\n        _isNativePerformance = extendedMetricsConfig.isEnabled;\n        _disabledExtendedMetrics = extendedMetricsConfig.disabledMetrics;\n        if (_isStarted) {\n            _performance.enable(value);\n            _nativePerformance.enable(extendedMetricsConfig.isEnabled, extendedMetricsConfig.disabledMetrics);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of request tracking (enabled by default)\n     * @param value if true requests will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectRequests = function (value) {\n        _isRequests = value;\n        if (_isStarted) {\n            _serverRequests.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of dependency tracking (enabled by default)\n     * @param value if true dependencies will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectDependencies = function (value) {\n        _isDependencies = value;\n        if (_isStarted) {\n            _clientRequests.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of automatic dependency correlation (enabled by default)\n     * @param value if true dependencies will be correlated with requests\n     * @param useAsyncHooks if true, forces use of experimental async_hooks module to provide correlation. If false, instead uses only patching-based techniques. If left blank, the best option is chosen for you based on your version of Node.js.\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoDependencyCorrelation = function (value, useAsyncHooks) {\n        _isCorrelating = value;\n        _forceClsHooked = useAsyncHooks;\n        if (_isStarted) {\n            _serverRequests.useAutoCorrelation(value, useAsyncHooks);\n        }\n        return Configuration;\n    };\n    /**\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\n     * Note that this method only applies to the default client. Disk-backed retry caching is disabled by default for additional clients.\n     * For enable for additional clients, use client.channel.setUseDiskRetryCaching(true).\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\n     * @param value if true events that occured while client is offline will be cached on disk\n     * @param resendInterval The wait interval for resending cached events.\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\n     * @returns {Configuration} this class\n     */\n    Configuration.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\n        _isDiskRetry = value;\n        _diskRetryInterval = resendInterval;\n        _diskRetryMaxBytes = maxBytesOnDisk;\n        if (exports.defaultClient && exports.defaultClient.channel) {\n            exports.defaultClient.channel.setUseDiskRetryCaching(value, resendInterval, maxBytesOnDisk);\n        }\n        return Configuration;\n    };\n    /**\n     * Enables debug and warning logging for AppInsights itself.\n     * @param enableDebugLogging if true, enables debug logging\n     * @param enableWarningLogging if true, enables warning logging\n     * @returns {Configuration} this class\n     */\n    Configuration.setInternalLogging = function (enableDebugLogging, enableWarningLogging) {\n        if (enableDebugLogging === void 0) { enableDebugLogging = false; }\n        if (enableWarningLogging === void 0) { enableWarningLogging = true; }\n        Logging.enableDebug = enableDebugLogging;\n        Logging.disableWarnings = !enableWarningLogging;\n        return Configuration;\n    };\n    /**\n     * Enables communication with Application Insights Live Metrics.\n     * @param enable if true, enables communication with the live metrics service\n     */\n    Configuration.setSendLiveMetrics = function (enable) {\n        if (enable === void 0) { enable = false; }\n        if (!exports.defaultClient) {\n            // Need a defaultClient so that we can add the QPS telemetry processor to it\n            Logging.warn(\"Live metrics client cannot be setup without the default client\");\n            return Configuration;\n        }\n        if (!exports.liveMetricsClient && enable) {\n            // No qps client exists. Create one and prepare it to be enabled at .start()\n            exports.liveMetricsClient = new QuickPulseClient(exports.defaultClient.config.instrumentationKey);\n            _performanceLiveMetrics = new AutoCollectPerformance(exports.liveMetricsClient, 1000, true);\n            exports.liveMetricsClient.addCollector(_performanceLiveMetrics);\n            exports.defaultClient.quickPulseClient = exports.liveMetricsClient; // Need this so we can forward all manual tracks to live metrics via PerformanceMetricsTelemetryProcessor\n        }\n        else if (exports.liveMetricsClient) {\n            // qps client already exists; enable/disable it\n            exports.liveMetricsClient.enable(enable);\n        }\n        _isSendingLiveMetrics = enable;\n        return Configuration;\n    };\n    // Convenience shortcut to ApplicationInsights.start\n    Configuration.start = start;\n    return Configuration;\n}());\nexports.Configuration = Configuration;\n/**\n * Disposes the default client and all the auto collectors so they can be reinitialized with different configuration\n*/\nfunction dispose() {\n    exports.defaultClient = null;\n    _isStarted = false;\n    if (_console) {\n        _console.dispose();\n    }\n    if (_exceptions) {\n        _exceptions.dispose();\n    }\n    if (_performance) {\n        _performance.dispose();\n    }\n    if (_nativePerformance) {\n        _nativePerformance.dispose();\n    }\n    if (_serverRequests) {\n        _serverRequests.dispose();\n    }\n    if (_clientRequests) {\n        _clientRequests.dispose();\n    }\n    if (exports.liveMetricsClient) {\n        exports.liveMetricsClient.enable(false);\n        _isSendingLiveMetrics = false;\n        exports.liveMetricsClient = undefined;\n    }\n}\nexports.dispose = dispose;\n//# sourceMappingURL=applicationinsights.js.map","'use strict';\n\nconst asyncWrap = process.binding('async_wrap');\nconst TIMERWRAP = asyncWrap.Providers.TIMERWRAP;\n\nconst patchs = {\n  'nextTick': require('./patches/next-tick.js'),\n  'promise': require('./patches/promise.js'),\n  'timers': require('./patches/timers.js')\n};\n\nconst ignoreUIDs = new Set();\n\nfunction State() {\n  this.enabled = false;\n  this.counter = 0;\n}\n\nfunction Hooks() {\n  const initFns = this.initFns = [];\n  const preFns = this.preFns = [];\n  const postFns = this.postFns = [];\n  const destroyFns = this.destroyFns = [];\n\n  this.init = function (uid, provider, parentUid, parentHandle) {\n    // Ignore TIMERWRAP, since setTimeout etc. is monkey patched\n    if (provider === TIMERWRAP) {\n      ignoreUIDs.add(uid);\n      return;\n    }\n\n    // call hooks\n    for (const hook of initFns) {\n      hook(uid, this, provider, parentUid, parentHandle);\n    }\n  };\n\n  this.pre = function (uid) {\n    if (ignoreUIDs.has(uid)) return;\n\n    // call hooks\n    for (const hook of preFns) {\n      hook(uid, this);\n    }\n  };\n\n  this.post = function (uid, didThrow) {\n    if (ignoreUIDs.has(uid)) return;\n\n    // call hooks\n    for (const hook of postFns) {\n      hook(uid, this, didThrow);\n    }\n  };\n\n  this.destroy = function (uid) {\n    // Cleanup the ignore list if this uid should be ignored\n    if (ignoreUIDs.has(uid)) {\n      ignoreUIDs.delete(uid);\n      return;\n    }\n\n    // call hooks\n    for (const hook of destroyFns) {\n      hook(uid);\n    }\n  };\n}\n\nHooks.prototype.add = function (hooks) {\n  if (hooks.init) this.initFns.push(hooks.init);\n  if (hooks.pre) this.preFns.push(hooks.pre);\n  if (hooks.post) this.postFns.push(hooks.post);\n  if (hooks.destroy) this.destroyFns.push(hooks.destroy);\n};\n\nfunction removeElement(array, item) {\n  const index = array.indexOf(item);\n  if (index === -1) return;\n  array.splice(index, 1);\n}\n\nHooks.prototype.remove = function (hooks) {\n  if (hooks.init) removeElement(this.initFns, hooks.init);\n  if (hooks.pre) removeElement(this.preFns, hooks.pre);\n  if (hooks.post) removeElement(this.postFns, hooks.post);\n  if (hooks.destroy) removeElement(this.destroyFns, hooks.destroy);\n};\n\nfunction AsyncHook() {\n  this._state = new State();\n  this._hooks = new Hooks();\n\n  // expose version for conflict detection\n  this.version = require('./package.json').version;\n\n  // expose the Providers map\n  this.providers = asyncWrap.Providers;\n\n  // apply patches\n  for (const key of Object.keys(patchs)) {\n    patchs[key].call(this);\n  }\n\n  // setup async wrap\n  if (process.env.hasOwnProperty('NODE_ASYNC_HOOK_WARNING')) {\n    console.warn('warning: you are using async-hook-jl which is unstable.');\n  }\n  asyncWrap.setupHooks({\n    init: this._hooks.init,\n    pre: this._hooks.pre,\n    post: this._hooks.post,\n    destroy: this._hooks.destroy\n  });\n}\nmodule.exports = AsyncHook;\n\nAsyncHook.prototype.addHooks = function (hooks) {\n  this._hooks.add(hooks);\n};\n\nAsyncHook.prototype.removeHooks = function (hooks) {\n  this._hooks.remove(hooks);\n};\n\nAsyncHook.prototype.enable = function () {\n  this._state.enabled = true;\n  asyncWrap.enable();\n};\n\nAsyncHook.prototype.disable = function () {\n  this._state.enabled = false;\n  asyncWrap.disable();\n};","'use strict';\n\nconst AsyncHook = require('./async-hook.js');\n\n// If a another copy (same version or not) of stack-chain exists it will result\n// in wrong stack traces (most likely dublicate callSites).\nif (global._asyncHook) {\n  // In case the version match, we can simply return the first initialized copy\n  if (global._asyncHook.version === require('./package.json').version) {\n    module.exports = global._asyncHook;\n  }\n  // The version don't match, this is really bad. Lets just throw\n  else {\n    throw new Error('Conflicting version of async-hook-jl found');\n  }\n} else {\n  const stackChain = require('stack-chain');\n\n  // Remove callSites from this module. AsyncWrap doesn't have any callSites\n  // and the hooks are expected to be completely transparent.\n  stackChain.filter.attach(function (error, frames) {\n    return frames.filter(function (callSite) {\n      const filename = callSite.getFileName();\n      // filename is not always a string, for example in case of eval it is\n      // undefined. So check if the filename is defined.\n      return !(filename && filename.slice(0, __dirname.length) === __dirname);\n    });\n  });\n\n  module.exports = global._asyncHook = new AsyncHook();\n}","'use strict';\n\nfunction NextTickWrap() {}\n\nmodule.exports = function patch() {\n  const hooks = this._hooks;\n  const state = this._state;\n\n  const oldNextTick = process.nextTick;\n  process.nextTick = function () {\n    if (!state.enabled) return oldNextTick.apply(process, arguments);\n\n    const args = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n    const callback = args[0];\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback is not a function');\n    }\n\n    const handle = new NextTickWrap();\n    const uid = --state.counter;\n\n    // call the init hook\n    hooks.init.call(handle, uid, 0, null, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      hooks.pre.call(handle, uid);\n\n      let didThrow = true;\n      try {\n        callback.apply(this, arguments);\n        didThrow = false;\n      } finally {\n        // If `callback` threw and there is an uncaughtException handler\n        // then call the `post` and `destroy` hook after the uncaughtException\n        // user handlers have been invoked.\n        if(didThrow && process.listenerCount('uncaughtException') > 0) {\n          process.once('uncaughtException', function () {\n            hooks.post.call(handle, uid, true);\n            hooks.destroy.call(null, uid);\n          });\n        }\n      }\n\n      // callback done successfully\n      hooks.post.call(handle, uid, false);\n      hooks.destroy.call(null, uid);\n    };\n\n    return oldNextTick.apply(process, args);\n  };\n}\n","'use strict';\n\nfunction PromiseWrap() {}\n\nmodule.exports = function patchPromise() {\n  const hooks = this._hooks;\n  const state = this._state;\n\n  const Promise = global.Promise;\n\n  /* As per ECMAScript 2015, .catch must be implemented by calling .then, as\n   * such we need needn't patch .catch as well. see:\n   * http://www.ecma-international.org/ecma-262/6.0/#sec-promise.prototype.catch\n   */\n  const oldThen = Promise.prototype.then;\n  Promise.prototype.then = wrappedThen;\n\n  function makeWrappedHandler(fn, handle, uid, isOnFulfilled) {\n    if ('function' !== typeof fn) {\n      return isOnFulfilled\n        ? makeUnhandledResolutionHandler(uid)\n        : makeUnhandledRejectionHandler(uid);\n    }\n\n    return function wrappedHandler() {\n      hooks.pre.call(handle, uid);\n      try {\n        return fn.apply(this, arguments);\n      } finally {\n        hooks.post.call(handle, uid, false);\n        hooks.destroy.call(null, uid);\n      }\n    };\n  }\n\n  function makeUnhandledResolutionHandler(uid) {\n    return function unhandledResolutionHandler(val) {\n      hooks.destroy.call(null, uid);\n      return val;\n    };\n  }\n\n  function makeUnhandledRejectionHandler(uid) {\n    return function unhandledRejectedHandler(val) {\n      hooks.destroy.call(null, uid);\n      throw val;\n    };\n  }\n\n  function wrappedThen(onFulfilled, onRejected) {\n    if (!state.enabled) return oldThen.call(this, onFulfilled, onRejected);\n\n    const handle = new PromiseWrap();\n    const uid = --state.counter;\n\n    hooks.init.call(handle, uid, 0, null, null);\n\n    return oldThen.call(\n      this,\n      makeWrappedHandler(onFulfilled, handle, uid, true),\n      makeWrappedHandler(onRejected, handle, uid, false)\n    );\n  }\n};\n","'use strict';\n\nconst timers = require('timers');\n\nfunction TimeoutWrap() {}\nfunction IntervalWrap() {}\nfunction ImmediateWrap() {}\n\nconst timeoutMap = new Map();\nconst intervalMap = new Map();\nconst ImmediateMap = new Map();\n\nlet activeCallback = null;\nlet clearedInCallback = false;\n\nmodule.exports = function patch() {\n  patchTimer(this._hooks, this._state, 'setTimeout', 'clearTimeout', TimeoutWrap, timeoutMap, true);\n  patchTimer(this._hooks, this._state, 'setInterval', 'clearInterval', IntervalWrap, intervalMap, false);\n  patchTimer(this._hooks, this._state, 'setImmediate', 'clearImmediate', ImmediateWrap, ImmediateMap, true);\n\n  global.setTimeout = timers.setTimeout;\n  global.setInterval = timers.setInterval;\n  global.setImmediate = timers.setImmediate;\n\n  global.clearTimeout = timers.clearTimeout;\n  global.clearInterval = timers.clearInterval;\n  global.clearImmediate = timers.clearImmediate;\n};\n\nfunction patchTimer(hooks, state, setFn, clearFn, Handle, timerMap, singleCall) {\n  const oldSetFn = timers[setFn];\n  const oldClearFn = timers[clearFn];\n\n  // overwrite set[Timeout]\n  timers[setFn] = function () {\n    if (!state.enabled) return oldSetFn.apply(timers, arguments);\n\n    const args = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n    const callback = args[0];\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('\"callback\" argument must be a function');\n    }\n\n    const handle = new Handle();\n    const uid = --state.counter;\n    let timerId = undefined;\n\n    // call the init hook\n    hooks.init.call(handle, uid, 0, null, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      activeCallback = timerId;\n      hooks.pre.call(handle, uid);\n\n      let didThrow = true;\n      try {\n        callback.apply(this, arguments);\n        didThrow = false;\n      } finally {\n        // If `callback` threw and there is an uncaughtException handler\n        // then call the `post` and `destroy` hook after the uncaughtException\n        // user handlers have been invoked.\n        if (didThrow && process.listenerCount('uncaughtException') > 0) {\n          process.once('uncaughtException', function () {\n            // call the post hook\n            hooks.post.call(handle, uid, true);\n            // setInterval won't continue\n            timerMap.delete(timerId);\n            hooks.destroy.call(null, uid);\n          });\n        }\n      }\n\n      // callback done successfully\n      hooks.post.call(handle, uid, false);\n      activeCallback = null;\n\n      // call the destroy hook if the callback will only be called once\n      if (singleCall || clearedInCallback) {\n        clearedInCallback = false;\n        timerMap.delete(timerId);\n        hooks.destroy.call(null, uid);\n      }\n    };\n\n    timerId = oldSetFn.apply(timers, args);\n    // Bind the timerId and uid for later use, in case the clear* function is\n    // called.\n    timerMap.set(timerId, uid);\n\n    return timerId;\n  };\n\n  // overwrite clear[Timeout]\n  timers[clearFn] = function (timerId) {\n    // If clear* was called within the timer callback, then delay the destroy\n    // event to after the post event has been called.\n    if (activeCallback === timerId && timerId !== null) {\n      clearedInCallback = true;\n    }\n    // clear should call the destroy hook. Note if timerId doesn't exists\n    // it is because asyncWrap wasn't enabled at the time.\n    else if (timerMap.has(timerId)) {\n      const uid = timerMap.get(timerId);\n      timerMap.delete(timerId);\n      hooks.destroy.call(null, uid);\n    }\n\n    oldClearFn.apply(timers, arguments);\n  };\n}\n","'use strict';\n\nmodule.exports = (Promise, ensureAslWrapper) => {\n  // Updates to this class should also be applied to the the ES3 version\n  // in index.js.\n  return class WrappedPromise extends Promise {\n    constructor(executor) {\n      var context, args;\n      super(wrappedExecutor);\n      var promise = this;\n\n      try {\n        executor.apply(context, args);\n      } catch (err) {\n        args[1](err);\n      }\n\n      return promise;\n      function wrappedExecutor(resolve, reject) {\n        context = this;\n        args = [wrappedResolve, wrappedReject];\n\n        // These wrappers create a function that can be passed a function and an argument to\n        // call as a continuation from the resolve or reject.\n        function wrappedResolve(val) {\n          ensureAslWrapper(promise, false);\n          return resolve(val);\n        }\n\n        function wrappedReject(val) {\n          ensureAslWrapper(promise, false);\n          return reject(val);\n        }\n      }\n    }\n  }\n};\n","var wrap = require('shimmer').wrap;\n\n/*\n *\n * CONSTANTS\n *\n */\nvar HAS_CREATE_AL = 1 << 0;\nvar HAS_BEFORE_AL = 1 << 1;\nvar HAS_AFTER_AL = 1 << 2;\nvar HAS_ERROR_AL = 1 << 3;\n\n/**\n * There is one list of currently active listeners that is mutated in place by\n * addAsyncListener and removeAsyncListener. This complicates error-handling,\n * for reasons that are discussed below.\n */\nvar listeners = [];\n\n/**\n * There can be multiple listeners with the same properties, so disambiguate\n * them by assigning them an ID at creation time.\n */\nvar uid = 0;\n\n/**\n * Ensure that errors coming from within listeners are handed off to domains,\n * process._fatalException, or uncaughtException without being treated like\n * user errors.\n */\nvar inAsyncTick = false;\n\n/**\n * Because asynchronous contexts can be nested, and errors can come from anywhere\n * in the stack, a little extra work is required to keep track of where in the\n * nesting we are. Because JS arrays are frequently mutated in place\n */\nvar listenerStack = [];\n\n/**\n * The error handler on a listener can capture errors thrown during synchronous\n * execution immediately after the listener is added. To capture both\n * synchronous and asynchronous errors, the error handler just uses the\n * \"global\" list of active listeners, and the rest of the code ensures that the\n * listener list is correct by using a stack of listener lists during\n * asynchronous execution.\n */\nvar asyncCatcher;\n\n/**\n * The guts of the system -- called each time an asynchronous event happens\n * while one or more listeners are active.\n */\nvar asyncWrap;\n\n/**\n * Simple helper function that's probably faster than using Array\n * filter methods and can be inlined.\n */\nfunction union(dest, added) {\n  var destLength = dest.length;\n  var addedLength = added.length;\n  var returned = [];\n\n  if (destLength === 0 && addedLength === 0) return returned;\n\n  for (var j  = 0; j < destLength; j++) returned[j] = dest[j];\n\n  if (addedLength === 0) return returned;\n\n  for (var i = 0; i < addedLength; i++) {\n    var missing = true;\n    for (j = 0; j < destLength; j++) {\n      if (dest[j].uid === added[i].uid) {\n        missing = false;\n        break;\n      }\n    }\n    if (missing) returned.push(added[i]);\n  }\n\n  return returned;\n}\n\n/*\n * For performance, split error-handlers and asyncCatcher up into two separate\n * code paths.\n */\n\n// 0.9+\nif (process._fatalException) {\n  /**\n   * Error handlers on listeners can throw, the catcher needs to be able to\n   * discriminate between exceptions thrown by user code, and exceptions coming\n   * from within the catcher itself. Use a global to keep track of which state\n   * the catcher is currently in.\n   */\n  var inErrorTick = false;\n\n  /**\n   * Throwing always happens synchronously. If the current array of values for\n   * the current list of asyncListeners is put in a module-scoped variable right\n   * before a call that can throw, it will always be correct when the error\n   * handlers are run.\n   */\n  var errorValues;\n\n  asyncCatcher = function asyncCatcher(er) {\n    var length = listeners.length;\n    if (inErrorTick || length === 0) return false;\n\n    var handled = false;\n\n    /*\n     * error handlers\n     */\n    inErrorTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = listeners[i];\n      if ((listener.flags & HAS_ERROR_AL) === 0) continue;\n\n      var value = errorValues && errorValues[listener.uid];\n      handled = listener.error(value, er) || handled;\n    }\n    inErrorTick = false;\n\n    /* Test whether there are any listener arrays on the stack. In the case of\n     * synchronous throws when the listener is active, there may have been\n     * none pushed yet.\n     */\n    if (listenerStack.length > 0) listeners = listenerStack.pop();\n    errorValues = undefined;\n\n    return handled && !inAsyncTick;\n  };\n\n  asyncWrap = function asyncWrap(original, list, length) {\n    var values = [];\n\n    /*\n     * listeners\n     */\n    inAsyncTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = list[i];\n      values[listener.uid] = listener.data;\n\n      if ((listener.flags & HAS_CREATE_AL) === 0) continue;\n\n      var value = listener.create(listener.data);\n      if (value !== undefined) values[listener.uid] = value;\n    }\n    inAsyncTick = false;\n\n    /* One of the main differences between this polyfill and the core\n     * asyncListener support is that core avoids creating closures by putting a\n     * lot of the state managemnt on the C++ side of Node (and of course also it\n     * bakes support for async listeners into the Node C++ API through the\n     * AsyncWrap class, which means that it doesn't monkeypatch basically every\n     * async method like this does).\n     */\n    return function () {\n      // put the current values where the catcher can see them\n      errorValues = values;\n\n      /* More than one listener can end up inside these closures, so save the\n       * current listeners on a stack.\n       */\n      listenerStack.push(listeners);\n\n      /* Activate both the listeners that were active when the closure was\n       * created and the listeners that were previously active.\n       */\n      listeners = union(list, listeners);\n\n      /*\n       * before handlers\n       */\n      inAsyncTick = true;\n      for (var i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_BEFORE_AL) > 0) {\n          list[i].before(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // save the return value to pass to the after callbacks\n      var returned = original.apply(this, arguments);\n\n      /*\n       * after handlers (not run if original throws)\n       */\n      inAsyncTick = true;\n      for (i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_AFTER_AL) > 0) {\n          list[i].after(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // back to the previous listener list on the stack\n      listeners = listenerStack.pop();\n      errorValues = undefined;\n\n      return returned;\n    };\n  };\n\n  wrap(process, '_fatalException', function (_fatalException) {\n    return function _asyncFatalException(er) {\n      return asyncCatcher(er) || _fatalException(er);\n    };\n  });\n}\n// 0.8 and below\nelse {\n  /**\n   * If an error handler in asyncWrap throws, the process must die. Under 0.8\n   * and earlier the only way to put a bullet through the head of the process\n   * is to rethrow from inside the exception handler, so rethrow and set\n   * errorThrew to tell the uncaughtHandler what to do.\n   */\n  var errorThrew = false;\n\n  /**\n   * Under Node 0.8, this handler *only* handles synchronously thrown errors.\n   * This simplifies it, which almost but not quite makes up for the hit taken\n   * by putting everything in a try-catch.\n   */\n  asyncCatcher = function uncaughtCatcher(er) {\n    // going down hard\n    if (errorThrew) throw er;\n\n    var handled = false;\n\n    /*\n     * error handlers\n     */\n    var length = listeners.length;\n    for (var i = 0; i < length; ++i) {\n      var listener = listeners[i];\n      if ((listener.flags & HAS_ERROR_AL) === 0) continue;\n      handled = listener.error(null, er) || handled;\n    }\n\n    /* Rethrow if one of the before / after handlers fire, which will bring the\n     * process down immediately.\n     */\n    if (!handled && inAsyncTick) throw er;\n  };\n\n  asyncWrap = function asyncWrap(original, list, length) {\n    var values = [];\n\n    /*\n     * listeners\n     */\n    inAsyncTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = list[i];\n      values[listener.uid] = listener.data;\n\n      if ((listener.flags & HAS_CREATE_AL) === 0) continue;\n\n      var value = listener.create(listener.data);\n      if (value !== undefined) values[listener.uid] = value;\n    }\n    inAsyncTick = false;\n\n    /* One of the main differences between this polyfill and the core\n     * asyncListener support is that core avoids creating closures by putting a\n     * lot of the state managemnt on the C++ side of Node (and of course also it\n     * bakes support for async listeners into the Node C++ API through the\n     * AsyncWrap class, which means that it doesn't monkeypatch basically every\n     * async method like this does).\n     */\n    return function () {\n      /*jshint maxdepth:4*/\n\n      // after() handlers don't run if threw\n      var threw = false;\n\n      // ...unless the error is handled\n      var handled = false;\n\n      /* More than one listener can end up inside these closures, so save the\n       * current listeners on a stack.\n       */\n      listenerStack.push(listeners);\n\n      /* Activate both the listeners that were active when the closure was\n       * created and the listeners that were previously active.\n       */\n      listeners = union(list, listeners);\n\n      /*\n       * before handlers\n       */\n      inAsyncTick = true;\n      for (var i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_BEFORE_AL) > 0) {\n          list[i].before(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // save the return value to pass to the after callbacks\n      var returned;\n      try {\n        returned = original.apply(this, arguments);\n      }\n      catch (er) {\n        threw = true;\n        for (var i = 0; i < length; ++i) {\n          if ((listeners[i].flags & HAS_ERROR_AL) == 0) continue;\n          try {\n            handled = listeners[i].error(values[list[i].uid], er) || handled;\n          }\n          catch (x) {\n            errorThrew = true;\n            throw x;\n          }\n        }\n\n        if (!handled) {\n          // having an uncaughtException handler here alters crash semantics\n          process.removeListener('uncaughtException', asyncCatcher);\n          process._originalNextTick(function () {\n            process.addListener('uncaughtException', asyncCatcher);\n          });\n\n          throw er;\n        }\n      }\n      finally {\n        /*\n         * after handlers (not run if original throws)\n         */\n        if (!threw || handled) {\n          inAsyncTick = true;\n          for (i = 0; i < length; ++i) {\n            if ((list[i].flags & HAS_AFTER_AL) > 0) {\n              list[i].after(this, values[list[i].uid]);\n            }\n          }\n          inAsyncTick = false;\n        }\n\n        // back to the previous listener list on the stack\n        listeners = listenerStack.pop();\n      }\n\n\n      return returned;\n    };\n  };\n\n  // will be the first to fire if async-listener is the first module loaded\n  process.addListener('uncaughtException', asyncCatcher);\n}\n\n// for performance in the case where there are no handlers, just the listener\nfunction simpleWrap(original, list, length) {\n  inAsyncTick = true;\n  for (var i = 0; i < length; ++i) {\n    var listener = list[i];\n    if (listener.create) listener.create(listener.data);\n  }\n  inAsyncTick = false;\n\n  // still need to make sure nested async calls are made in the context\n  // of the listeners active at their creation\n  return function () {\n    listenerStack.push(listeners);\n    listeners = union(list, listeners);\n\n    var returned = original.apply(this, arguments);\n\n    listeners = listenerStack.pop();\n\n    return returned;\n  };\n}\n\n/**\n * Called each time an asynchronous function that's been monkeypatched in\n * index.js is called. If there are no listeners, return the function\n * unwrapped.  If there are any asyncListeners and any of them have callbacks,\n * pass them off to asyncWrap for later use, otherwise just call the listener.\n */\nfunction wrapCallback(original) {\n  var length = listeners.length;\n\n  // no context to capture, so avoid closure creation\n  if (length === 0) return original;\n\n  // capture the active listeners as of when the wrapped function was called\n  var list = listeners.slice();\n\n  for (var i = 0; i < length; ++i) {\n    if (list[i].flags > 0) return asyncWrap(original, list, length);\n  }\n\n  return simpleWrap(original, list, length);\n}\n\nfunction AsyncListener(callbacks, data) {\n  if (typeof callbacks.create === 'function') {\n    this.create = callbacks.create;\n    this.flags |= HAS_CREATE_AL;\n  }\n\n  if (typeof callbacks.before === 'function') {\n    this.before = callbacks.before;\n    this.flags |= HAS_BEFORE_AL;\n  }\n\n  if (typeof callbacks.after === 'function') {\n    this.after = callbacks.after;\n    this.flags |= HAS_AFTER_AL;\n  }\n\n  if (typeof callbacks.error === 'function') {\n    this.error = callbacks.error;\n    this.flags |= HAS_ERROR_AL;\n  }\n\n  this.uid = ++uid;\n  this.data = data === undefined ? null : data;\n}\nAsyncListener.prototype.create = undefined;\nAsyncListener.prototype.before = undefined;\nAsyncListener.prototype.after  = undefined;\nAsyncListener.prototype.error  = undefined;\nAsyncListener.prototype.data   = undefined;\nAsyncListener.prototype.uid    = 0;\nAsyncListener.prototype.flags  = 0;\n\nfunction createAsyncListener(callbacks, data) {\n  if (typeof callbacks !== 'object' || !callbacks) {\n    throw new TypeError('callbacks argument must be an object');\n  }\n\n  if (callbacks instanceof AsyncListener) {\n    return callbacks;\n  }\n  else {\n    return new AsyncListener(callbacks, data);\n  }\n}\n\nfunction addAsyncListener(callbacks, data) {\n  var listener;\n  if (!(callbacks instanceof AsyncListener)) {\n    listener = createAsyncListener(callbacks, data);\n  }\n  else {\n    listener = callbacks;\n  }\n\n  // Make sure the listener isn't already in the list.\n  var registered = false;\n  for (var i = 0; i < listeners.length; i++) {\n    if (listener === listeners[i]) {\n      registered = true;\n      break;\n    }\n  }\n\n  if (!registered) listeners.push(listener);\n\n  return listener;\n}\n\nfunction removeAsyncListener(listener) {\n  for (var i = 0; i < listeners.length; i++) {\n    if (listener === listeners[i]) {\n      listeners.splice(i, 1);\n      break;\n    }\n  }\n}\n\nprocess.createAsyncListener = createAsyncListener;\nprocess.addAsyncListener    = addAsyncListener;\nprocess.removeAsyncListener = removeAsyncListener;\n\nmodule.exports = wrapCallback;\n","'use strict';\n\nif (process.addAsyncListener) throw new Error(\"Don't require polyfill unless needed\");\n\nvar shimmer      = require('shimmer')\n  , semver       = require('semver')\n  , wrap         = shimmer.wrap\n  , massWrap     = shimmer.massWrap\n  , wrapCallback = require('./glue.js')\n  , util         = require('util')\n  ;\n\nvar v6plus = semver.gte(process.version, '6.0.0');\nvar v7plus = semver.gte(process.version, '7.0.0');\nvar v8plus = semver.gte(process.version, '8.0.0');\nvar v11plus = semver.gte(process.version, '11.0.0');\n\nvar net = require('net');\n\n// From Node.js v7.0.0, net._normalizeConnectArgs have been renamed net._normalizeArgs\nif (v7plus && !net._normalizeArgs) {\n  // a polyfill in our polyfill etc so forth -- taken from node master on 2017/03/09\n  net._normalizeArgs = function (args) {\n    if (args.length === 0) {\n      return [{}, null];\n    }\n\n    var arg0 = args[0];\n    var options = {};\n    if (typeof arg0 === 'object' && arg0 !== null) {\n      // (options[...][, cb])\n      options = arg0;\n    } else if (isPipeName(arg0)) {\n      // (path[...][, cb])\n      options.path = arg0;\n    } else {\n      // ([port][, host][...][, cb])\n      options.port = arg0;\n      if (args.length > 1 && typeof args[1] === 'string') {\n        options.host = args[1];\n      }\n    }\n\n    var cb = args[args.length - 1];\n    if (typeof cb !== 'function')\n      return [options, null];\n    else\n      return [options, cb];\n  }\n} else if (!v7plus && !net._normalizeConnectArgs) {\n  // a polyfill in our polyfill etc so forth -- taken from node master on 2013/10/30\n  net._normalizeConnectArgs = function (args) {\n    var options = {};\n\n    function toNumber(x) { return (x = Number(x)) >= 0 ? x : false; }\n\n    if (typeof args[0] === 'object' && args[0] !== null) {\n      // connect(options, [cb])\n      options = args[0];\n    }\n    else if (typeof args[0] === 'string' && toNumber(args[0]) === false) {\n      // connect(path, [cb]);\n      options.path = args[0];\n    }\n    else {\n      // connect(port, [host], [cb])\n      options.port = args[0];\n      if (typeof args[1] === 'string') {\n        options.host = args[1];\n      }\n    }\n\n    var cb = args[args.length - 1];\n    return typeof cb === 'function' ? [options, cb] : [options];\n  };\n}\n\n// In https://github.com/nodejs/node/pull/11796 `_listen2` was renamed\n// `_setUpListenHandle`. It's still aliased as `_listen2`, and currently the\n// Node internals still call the alias - but who knows for how long. So better\n// make sure we use the new name instead if available.\nif ('_setUpListenHandle' in net.Server.prototype) {\n  wrap(net.Server.prototype, '_setUpListenHandle', wrapSetUpListenHandle);\n} else {\n  wrap(net.Server.prototype, '_listen2', wrapSetUpListenHandle);\n}\n\nfunction wrapSetUpListenHandle(original) {\n  return function () {\n    this.on('connection', function (socket) {\n      if (socket._handle) {\n        socket._handle.onread = wrapCallback(socket._handle.onread);\n      }\n    });\n\n    try {\n      return original.apply(this, arguments);\n    }\n    finally {\n      // the handle will only not be set in cases where there has been an error\n      if (this._handle && this._handle.onconnection) {\n        this._handle.onconnection = wrapCallback(this._handle.onconnection);\n      }\n    }\n  };\n}\n\nfunction patchOnRead(ctx) {\n  if (ctx && ctx._handle) {\n    var handle = ctx._handle;\n    if (!handle._originalOnread) {\n      handle._originalOnread = handle.onread;\n    }\n    handle.onread = wrapCallback(handle._originalOnread);\n  }\n}\n\nwrap(net.Socket.prototype, 'connect', function (original) {\n  return function () {\n    var args;\n    // Node core uses an internal Symbol here to guard against the edge-case\n    // where the user accidentally passes in an array. As we don't have access\n    // to this Symbol we resort to this hack where we just detect if there is a\n    // symbol or not. Checking for the number of Symbols is by no means a fool\n    // proof solution, but it catches the most basic cases.\n    if (v8plus &&\n        Array.isArray(arguments[0]) &&\n        Object.getOwnPropertySymbols(arguments[0]).length > 0) {\n      // already normalized\n      args = arguments[0];\n    } else {\n      // From Node.js v7.0.0, net._normalizeConnectArgs have been renamed net._normalizeArgs\n      args = v7plus\n        ? net._normalizeArgs(arguments)\n        : net._normalizeConnectArgs(arguments);\n    }\n    if (args[1]) args[1] = wrapCallback(args[1]);\n    var result = original.apply(this, args);\n    patchOnRead(this);\n    return result;\n  };\n});\n\nvar http = require('http');\n\n// NOTE: A rewrite occurred in 0.11 that changed the addRequest signature\n// from (req, host, port, localAddress) to (req, options)\n// Here, I use the longer signature to maintain 0.10 support, even though\n// the rest of the arguments aren't actually used\nwrap(http.Agent.prototype, 'addRequest', function (original) {\n  return function (req) {\n    var onSocket = req.onSocket;\n    req.onSocket = wrapCallback(function (socket) {\n      patchOnRead(socket);\n      return onSocket.apply(this, arguments);\n    });\n    return original.apply(this, arguments);\n  };\n});\n\nvar childProcess = require('child_process');\n\nfunction wrapChildProcess(child) {\n  if (Array.isArray(child.stdio)) {\n    child.stdio.forEach(function (socket) {\n      if (socket && socket._handle) {\n        socket._handle.onread = wrapCallback(socket._handle.onread);\n        wrap(socket._handle, 'close', activatorFirst);\n      }\n    });\n  }\n\n  if (child._handle) {\n    child._handle.onexit = wrapCallback(child._handle.onexit);\n  }\n}\n\n// iojs v2.0.0+\nif (childProcess.ChildProcess) {\n  wrap(childProcess.ChildProcess.prototype, 'spawn', function (original) {\n    return function () {\n      var result = original.apply(this, arguments);\n      wrapChildProcess(this);\n      return result;\n    };\n  });\n} else {\n  massWrap(childProcess, [\n    'execFile', // exec is implemented in terms of execFile\n    'fork',\n    'spawn'\n  ], function (original) {\n    return function () {\n      var result = original.apply(this, arguments);\n      wrapChildProcess(result);\n      return result;\n    };\n  });\n}\n\n// need unwrapped nextTick for use within < 0.9 async error handling\nif (!process._fatalException) {\n  process._originalNextTick = process.nextTick;\n}\n\nvar processors = [];\nif (process._nextDomainTick) processors.push('_nextDomainTick');\nif (process._tickDomainCallback) processors.push('_tickDomainCallback');\n\nmassWrap(\n  process,\n  processors,\n  activator\n);\nwrap(process, 'nextTick', activatorFirst);\n\nvar asynchronizers = [\n  'setTimeout',\n  'setInterval'\n];\nif (global.setImmediate) asynchronizers.push('setImmediate');\n\nvar timers = require('timers');\nvar patchGlobalTimers = global.setTimeout === timers.setTimeout;\n\nmassWrap(\n  timers,\n  asynchronizers,\n  activatorFirst\n);\n\nif (patchGlobalTimers) {\n  massWrap(\n    global,\n    asynchronizers,\n    activatorFirst\n  );\n}\n\nvar dns = require('dns');\nmassWrap(\n  dns,\n  [\n    'lookup',\n    'resolve',\n    'resolve4',\n    'resolve6',\n    'resolveCname',\n    'resolveMx',\n    'resolveNs',\n    'resolveTxt',\n    'resolveSrv',\n    'reverse'\n  ],\n  activator\n);\n\nif (dns.resolveNaptr) wrap(dns, 'resolveNaptr', activator);\n\nvar fs = require('fs');\nmassWrap(\n  fs,\n  [\n    'watch',\n    'rename',\n    'truncate',\n    'chown',\n    'fchown',\n    'chmod',\n    'fchmod',\n    'stat',\n    'lstat',\n    'fstat',\n    'link',\n    'symlink',\n    'readlink',\n    'realpath',\n    'unlink',\n    'rmdir',\n    'mkdir',\n    'readdir',\n    'close',\n    'open',\n    'utimes',\n    'futimes',\n    'fsync',\n    'write',\n    'read',\n    'readFile',\n    'writeFile',\n    'appendFile',\n    'watchFile',\n    'unwatchFile',\n    \"exists\",\n  ],\n  activator\n);\n\n// only wrap lchown and lchmod on systems that have them.\nif (fs.lchown) wrap(fs, 'lchown', activator);\nif (fs.lchmod) wrap(fs, 'lchmod', activator);\n\n// only wrap ftruncate in versions of node that have it\nif (fs.ftruncate) wrap(fs, 'ftruncate', activator);\n\n// Wrap zlib streams\nvar zlib;\ntry { zlib = require('zlib'); } catch (err) { }\nif (zlib && zlib.Deflate && zlib.Deflate.prototype) {\n  var proto = Object.getPrototypeOf(zlib.Deflate.prototype);\n  if (proto._transform) {\n    // streams2\n    wrap(proto, \"_transform\", activator);\n  }\n  else if (proto.write && proto.flush && proto.end) {\n    // plain ol' streams\n    massWrap(\n      proto,\n      [\n        'write',\n        'flush',\n        'end'\n      ],\n      activator\n    );\n  }\n}\n\n// Wrap Crypto\nvar crypto;\ntry { crypto = require('crypto'); } catch (err) { }\nif (crypto) {\n\n  var toWrap = [\n      'pbkdf2',\n      'randomBytes',\n  ];\n  if (!v11plus) {\n    toWrap.push('pseudoRandomBytes');\n  }\n\n  massWrap(crypto, toWrap, activator);\n}\n\n// It is unlikely that any userspace promise implementations have a native\n// implementation of both Promise and Promise.toString.\nvar instrumentPromise = !!global.Promise &&\n    Promise.toString() === 'function Promise() { [native code] }' &&\n    Promise.toString.toString() === 'function toString() { [native code] }';\n\n// Check that global Promise is native\nif (instrumentPromise) {\n  // shoult not use any methods that have already been wrapped\n  var promiseListener = process.addAsyncListener({\n    create: function create() {\n      instrumentPromise = false;\n    }\n  });\n\n  // should not resolve synchronously\n  global.Promise.resolve(true).then(function notSync() {\n    instrumentPromise = false;\n  });\n\n  process.removeAsyncListener(promiseListener);\n}\n\n/*\n * Native promises use the microtask queue to make all callbacks run\n * asynchronously to avoid Zalgo issues. Since the microtask queue is not\n * exposed externally, promises need to be modified in a fairly invasive and\n * complex way.\n *\n * The async boundary in promises that must be patched is between the\n * fulfillment of the promise and the execution of any callback that is waiting\n * for that fulfillment to happen. This means that we need to trigger a create\n * when resolve or reject is called and trigger before, after and error handlers\n * around the callback execution. There may be multiple callbacks for each\n * fulfilled promise, so handlers will behave similar to setInterval where\n * there may be multiple before after and error calls for each create call.\n *\n * async-listener monkeypatching has one basic entry point: `wrapCallback`.\n * `wrapCallback` should be called when create should be triggered and be\n * passed a function to wrap, which will execute the body of the async work.\n * The resolve and reject calls can be modified fairly easily to call\n * `wrapCallback`, but at the time of resolve and reject all the work to be done\n * on fulfillment may not be defined, since a call to then, chain or fetch can\n * be made even after the promise has been fulfilled. To get around this, we\n * create a placeholder function which will call a function passed into it,\n * since the call to the main work is being made from within the wrapped\n * function, async-listener will work correctly.\n *\n * There is another complication with monkeypatching Promises. Calls to then,\n * chain and catch each create new Promises that are fulfilled internally in\n * different ways depending on the return value of the callback. When the\n * callback return a Promise, the new Promise is resolved asynchronously after\n * the returned Promise has been also been resolved. When something other than\n * a promise is resolved the resolve call for the new Promise is put in the\n * microtask queue and asynchronously resolved.\n *\n * Then must be wrapped so that its returned promise has a wrapper that can be\n * used to invoke further continuations. This wrapper cannot be created until\n * after the callback has run, since the callback may return either a promise\n * or another value. Fortunately we already have a wrapper function around the\n * callback we can use (the wrapper created by resolve or reject).\n *\n * By adding an additional argument to this wrapper, we can pass in the\n * returned promise so it can have its own wrapper appended. the wrapper\n * function can the call the callback, and take action based on the return\n * value. If a promise is returned, the new Promise can proxy the returned\n * Promise's wrapper (this wrapper may not exist yet, but will by the time the\n * wrapper needs to be invoked). Otherwise, a new wrapper can be create the\n * same way as in resolve and reject. Since this wrapper is created\n * synchronously within another wrapper, it will properly appear as a\n * continuation from within the callback.\n */\n\nif (instrumentPromise) {\n  wrapPromise();\n}\n\nfunction wrapPromise() {\n  var Promise = global.Promise;\n\n  // Updates to this class should also be applied to the the ES6 version\n  // in es6-wrapped-promise.js.\n  function wrappedPromise(executor) {\n    if (!(this instanceof wrappedPromise)) {\n      return Promise(executor);\n    }\n\n    if (typeof executor !== 'function') {\n      return new Promise(executor);\n    }\n\n    var context, args;\n    var promise = new Promise(wrappedExecutor);\n    promise.__proto__ = wrappedPromise.prototype;\n\n    try {\n      executor.apply(context, args);\n    } catch (err) {\n      args[1](err);\n    }\n\n    return promise;\n\n    function wrappedExecutor(resolve, reject) {\n      context = this;\n      args = [wrappedResolve, wrappedReject];\n\n      // These wrappers create a function that can be passed a function and an argument to\n      // call as a continuation from the resolve or reject.\n      function wrappedResolve(val) {\n        ensureAslWrapper(promise, false);\n        return resolve(val);\n      }\n\n      function wrappedReject(val) {\n        ensureAslWrapper(promise, false);\n        return reject(val);\n      }\n    }\n  }\n\n  util.inherits(wrappedPromise, Promise);\n\n  wrap(Promise.prototype, 'then', wrapThen);\n  // Node.js <v7 only, alias for .then\n  if (Promise.prototype.chain) {\n    wrap(Promise.prototype, 'chain', wrapThen);\n  }\n\n  if (v6plus) {\n    global.Promise = require('./es6-wrapped-promise.js')(Promise, ensureAslWrapper);\n  } else {\n    var PromiseFunctions = [\n      'all',\n      'race',\n      'reject',\n      'resolve',\n      'accept',  // Node.js <v7 only\n      'defer'    // Node.js <v7 only\n    ];\n\n    PromiseFunctions.forEach(function(key) {\n      // don't break `in` by creating a key for undefined entries\n      if (typeof Promise[key] === 'function') {\n        wrappedPromise[key] = Promise[key];\n      }\n    });\n    global.Promise = wrappedPromise\n  }\n\n  function ensureAslWrapper(promise, overwrite) {\n    if (!promise.__asl_wrapper || overwrite) {\n      promise.__asl_wrapper = wrapCallback(propagateAslWrapper);\n    }\n  }\n\n  function propagateAslWrapper(ctx, fn, result, next) {\n    var nextResult;\n    try {\n      nextResult = fn.call(ctx, result);\n      return {returnVal: nextResult, error: false}\n    } catch (err) {\n      return {errorVal: err, error: true}\n    } finally {\n      // Wrap any resulting futures as continuations.\n      if (nextResult instanceof Promise) {\n        next.__asl_wrapper = function proxyWrapper() {\n          var aslWrapper = nextResult.__asl_wrapper || propagateAslWrapper;\n          return aslWrapper.apply(this, arguments);\n        }\n      } else {\n        ensureAslWrapper(next, true);\n      }\n    }\n  }\n\n  function wrapThen(original) {\n    return function wrappedThen() {\n      var promise = this;\n      var next = original.apply(promise, Array.prototype.map.call(arguments, bind));\n\n      next.__asl_wrapper = function proxyWrapper(ctx, fn, val, last) {\n        if (promise.__asl_wrapper) {\n          promise.__asl_wrapper(ctx, function () {}, null, next);\n          return next.__asl_wrapper(ctx, fn, val, last);\n        }\n        return propagateAslWrapper(ctx, fn, val, last);\n      }\n\n      return next;\n\n      // wrap callbacks (success, error) so that the callbacks will be called as a\n      // continuations of the resolve or reject call using the __asl_wrapper created above.\n      function bind(fn) {\n        if (typeof fn !== 'function') return fn;\n        return wrapCallback(function (val) {\n          var result = (promise.__asl_wrapper || propagateAslWrapper)(this, fn, val, next);\n          if (result.error) {\n            throw result.errorVal\n          } else {\n            return result.returnVal\n          }\n        });\n      }\n    }\n  }\n}\n\n// Shim activator for functions that have callback last\nfunction activator(fn) {\n  var fallback = function () {\n    var args;\n    var cbIdx = arguments.length - 1;\n    if (typeof arguments[cbIdx] === \"function\") {\n      args = Array(arguments.length)\n      for (var i = 0; i < arguments.length - 1; i++) {\n        args[i] = arguments[i];\n      }\n      args[cbIdx] = wrapCallback(arguments[cbIdx]);\n    }\n    return fn.apply(this, args || arguments);\n  };\n  // Preserve function length for small arg count functions.\n  switch (fn.length) {\n    case 1:\n      return function (cb) {\n        if (arguments.length !== 1) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb);\n      };\n    case 2:\n      return function (a, cb) {\n        if (arguments.length !== 2) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, cb);\n      };\n    case 3:\n      return function (a, b, cb) {\n        if (arguments.length !== 3) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, cb);\n      };\n    case 4:\n      return function (a, b, c, cb) {\n        if (arguments.length !== 4) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, cb);\n      };\n    case 5:\n      return function (a, b, c, d, cb) {\n        if (arguments.length !== 5) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, d, cb);\n      };\n    case 6:\n      return function (a, b, c, d, e, cb) {\n        if (arguments.length !== 6) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, d, e, cb);\n      };\n    default:\n      return fallback;\n  }\n}\n\n// Shim activator for functions that have callback first\nfunction activatorFirst(fn) {\n  var fallback = function () {\n    var args;\n    if (typeof arguments[0] === \"function\") {\n      args = Array(arguments.length)\n      args[0] = wrapCallback(arguments[0]);\n      for (var i = 1; i < arguments.length; i++) {\n        args[i] = arguments[i];\n      }\n    }\n    return fn.apply(this, args || arguments);\n  };\n  // Preserve function length for small arg count functions.\n  switch (fn.length) {\n    case 1:\n      return function (cb) {\n        if (arguments.length !== 1) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb);\n      };\n    case 2:\n      return function (cb, a) {\n        if (arguments.length !== 2) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a);\n      };\n    case 3:\n      return function (cb, a, b) {\n        if (arguments.length !== 3) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b);\n      };\n    case 4:\n      return function (cb, a, b, c) {\n        if (arguments.length !== 4) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c);\n      };\n    case 5:\n      return function (cb, a, b, c, d) {\n        if (arguments.length !== 5) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c, d);\n      };\n    case 6:\n      return function (cb, a, b, c, d, e) {\n        if (arguments.length !== 6) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c, d, e);\n      };\n    default:\n      return fallback;\n  }\n}\n\n// taken from node master on 2017/03/09\nfunction toNumber(x) {\n  return (x = Number(x)) >= 0 ? x : false;\n}\n\n// taken from node master on 2017/03/09\nfunction isPipeName(s) {\n  return typeof s === 'string' && toNumber(s) === false;\n}\n","'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst asyncHook = require('async-hook-jl');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\n//const trace = [];\n\nconst invertedProviders = [];\nfor (let key in asyncHook.providers) {\n  invertedProviders[asyncHook.providers[key]] = key;\n}\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  //trace: trace,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('    SETTING KEY:' + key + '=' + value + ' in ns:' + this.name + ' uid:' + currentUid + ' active:' +\n      util.inspect(this.active, true));\n  }\n  this.active[key] = value;\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('    GETTING KEY:' + key + '=undefined' + ' ' + this.name + ' uid:' + currentUid + ' active:' +\n        util.inspect(this.active, true));\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    debug2('    GETTING KEY:' + key + '=' + this.active[key] + ' ' + this.name + ' uid:' + currentUid + ' active:' +\n      util.inspect(this.active, true));\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  if (DEBUG_CLS_HOOKED) {\n    debug2('   CREATING Context: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' + ' active:' +\n      util.inspect(this.active, true, 2, true));\n  }\n\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('   CREATED Context: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' + ' context:' +\n      util.inspect(context, true, 2, true));\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      debug2(' BEFORE RUN: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n        util.inspect(context));\n    }\n    fn(context);\n    return context;\n  }\n  catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  }\n  finally {\n    if (DEBUG_CLS_HOOKED) {\n      debug2(' AFTER RUN: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n        util.inspect(context));\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  var value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(' BEFORE runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n      util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2(' AFTER runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n          util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2(' AFTER runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n          util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    }\n    else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    }\n    catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    }\n    finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    debug2('  ENTER ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' context: ' +\n      util.inspect(context));\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    debug2('  EXIT ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' context: ' +\n      util.inspect(context));\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' +\n      util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CREATING NAMESPACE ' + name);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  asyncHook.addHooks({\n    init(uid, handle, provider, parentUid, parentHandle) {\n      //parentUid = parentUid || currentUid;  // Suggested usage but appears to work better for tracing modules.\n      currentUid = uid;\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      if (parentUid) {\n        namespace._contexts.set(uid, namespace._contexts.get(parentUid));\n        if (DEBUG_CLS_HOOKED) {\n          debug2('PARENTID: ' + name + ' uid:' + uid + ' parent:' + parentUid + ' provider:' + provider);\n        }\n      } else {\n        namespace._contexts.set(currentUid, namespace.active);\n      }\n\n      if (DEBUG_CLS_HOOKED) {\n        debug2('INIT ' + name + ' uid:' + uid + ' parent:' + parentUid + ' provider:' + invertedProviders[provider]\n          + ' active:' + util.inspect(namespace.active, true));\n      }\n\n    },\n    pre(uid, handle) {\n      currentUid = uid;\n      let context = namespace._contexts.get(uid);\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' PRE ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle) + ' context:' +\n            util.inspect(context));\n        }\n\n        namespace.enter(context);\n      } else {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' PRE MISSING CONTEXT ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle));\n        }\n      }\n    },\n    post(uid, handle) {\n      currentUid = uid;\n      let context = namespace._contexts.get(uid);\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' POST ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle) + ' context:' +\n            util.inspect(context));\n        }\n\n        namespace.exit(context);\n      } else {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' POST MISSING CONTEXT ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle));\n        }\n      }\n    },\n    destroy(uid) {\n      currentUid = uid;\n\n      if (DEBUG_CLS_HOOKED) {\n        debug2('DESTROY ' + name + ' uid:' + uid + ' context:' + util.inspect(namespace._contexts.get(currentUid))\n          + ' active:' + util.inspect(namespace.active, true));\n      }\n\n      namespace._contexts.delete(uid);\n    }\n  });\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\nif (asyncHook._state && !asyncHook._state.enabled) {\n  asyncHook.enable();\n}\n\nfunction debug2(msg) {\n  if (process.env.DEBUG) {\n    process._rawDebug(msg);\n  }\n}\n\n\n/*function debug(from, ns) {\n process._rawDebug('DEBUG: ' + util.inspect({\n from: from,\n currentUid: currentUid,\n context: ns ? ns._contexts.get(currentUid) : 'no ns'\n }, true, 2, true));\n }*/\n\n\nfunction getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}\n\n\n// Add back to callstack\nif (DEBUG_CLS_HOOKED) {\n  var stackChain = require('stack-chain');\n  for (var modifier in stackChain.filter._modifiers) {\n    stackChain.filter.deattach(modifier);\n  }\n}\n","/* eslint-disable max-len */\n'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst async_hooks = require('async_hooks');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n  this._indent = 0;\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  this.active[key] = value;\n\n  if (DEBUG_CLS_HOOKED) {\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-SET KEY:' + key + '=' + value + ' in ns:' + this.name + ' currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n  }\n\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      const asyncHooksCurrentId = async_hooks.currentId();\n      const triggerId = async_hooks.triggerAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      //debug2(indentStr + 'CONTEXT-GETTING KEY NO ACTIVE NS:' + key + '=undefined' + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n      debug2(`${indentStr}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${key}=undefined currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length}`);\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-GETTING KEY:' + key + '=' + this.active[key] + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n    debug2(`${indentStr}CONTEXT-GETTING KEY: (${this.name}) ${key}=${this.active[key]} currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} active:${util.inspect(this.active)}`);\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  // Prototype inherit existing context if created a new child context within existing context.\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-CREATED Context: (${this.name}) currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} context:${util.inspect(context, {showHidden:true, depth:2, colors:true})}`);\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} context:${util.inspect(context)}`);\n    }\n    fn(context);\n    return context;\n  } catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  } finally {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN END: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  let value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CONTEXT-runPromise BEFORE: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER then: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER catch: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    } else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    } catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    } finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-ENTER: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-EXIT: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' + util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(`NS-CREATING NAMESPACE (${name})`);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  const hook = async_hooks.createHook({\n    init(asyncId, type, triggerId, resource) {\n      currentUid = async_hooks.executionAsyncId();\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      // let initContext = namespace.active;\n      // if(!initContext && triggerId) {\n      //   let parentContext = namespace._contexts.get(triggerId);\n      //   if (parentContext) {\n      //     namespace.active = parentContext;\n      //     namespace._contexts.set(currentUid, parentContext);\n      //     if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) WITH PARENT CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      //   } else if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) MISSING CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      // }else {\n      //   namespace._contexts.set(currentUid, namespace.active);\n      //   if (DEBUG_CLS_HOOKED) {\n      //     const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //     debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //   }\n      // }\n      if(namespace.active) {\n        namespace._contexts.set(asyncId, namespace.active);\n\n        if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n        }\n      }else if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        const triggerId = async_hooks.triggerAsyncId();\n        const triggerIdContext = namespace._contexts.get(triggerId);\n        if (triggerIdContext) {\n          namespace._contexts.set(asyncId, triggerIdContext);\n          if (DEBUG_CLS_HOOKED) {\n            const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n            debug2(`${indentStr}INIT USING CONTEXT FROM TRIGGERID [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n          }\n        } else if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT MISSING CONTEXT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n        }\n      }\n\n\n      if(DEBUG_CLS_HOOKED && type === 'PROMISE'){\n        debug2(util.inspect(resource, {showHidden: true}));\n        const parentId = resource.parentId;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}INIT RESOURCE-PROMISE [${type}] (${name}) parentId:${parentId} asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n      }\n\n    },\n    before(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context;\n\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}BEFORE (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n          namespace._indent += 2;\n        }\n\n        namespace.enter(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}BEFORE MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} namespace._contexts:${util.inspect(namespace._contexts, {showHidden:true, depth:2, colors:true})}`);\n        namespace._indent += 2;\n      }\n    },\n    after(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context; // = namespace._contexts.get(currentUid);\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          namespace._indent -= 2;\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}AFTER (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n        }\n\n        namespace.exit(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        namespace._indent -= 2;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}AFTER MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n      }\n    },\n    destroy(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}DESTROY (${name}) currentUid:${currentUid} asyncId:${asyncId} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(namespace._contexts.get(currentUid))}`);\n      }\n\n      namespace._contexts.delete(asyncId);\n    }\n  });\n\n  hook.enable();\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\n//const fs = require('fs');\nfunction debug2(...args) {\n  if (DEBUG_CLS_HOOKED) {\n    //fs.writeSync(1, `${util.format(...args)}\\n`);\n    process._rawDebug(`${util.format(...args)}`);\n  }\n}\n\n/*function getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}*/\n\n\n","'use strict';\n\nconst semver = require('semver');\n\n/**\n * In order to increase node version support, this loads the version of context\n * that is appropriate for the version of on nodejs that is running.\n * Node < v8 - uses AsyncWrap and async-hooks-jl\n * Node >= v8 - uses native async-hooks\n */\nif(process && semver.gte(process.versions.node, '8.0.0')){\n  module.exports = require('./context');\n}else{\n  module.exports = require('./context-legacy');\n}\n","'use strict';\n\nvar assert      = require('assert');\nvar wrapEmitter = require('emitter-listener');\n\n/*\n *\n * CONSTANTS\n *\n */\nvar CONTEXTS_SYMBOL = 'cls@contexts';\nvar ERROR_SYMBOL = 'error@context';\n\n// load polyfill if native support is unavailable\nif (!process.addAsyncListener) require('async-listener');\n\nfunction Namespace(name) {\n  this.name   = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set   = [];\n  this.id     = null;\n}\n\nNamespace.prototype.set = function (key, value) {\n  if (!this.active) {\n    throw new Error(\"No context available. ns.run() or ns.bind() must be called first.\");\n  }\n\n  this.active[key] = value;\n  return value;\n};\n\nNamespace.prototype.get = function (key) {\n  if (!this.active) return undefined;\n\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function () {\n  return Object.create(this.active);\n};\n\nNamespace.prototype.run = function (fn) {\n  var context = this.createContext();\n  this.enter(context);\n  try {\n    fn(context);\n    return context;\n  }\n  catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  }\n  finally {\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function (fn) {\n  var value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\nNamespace.prototype.bind = function (fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    }\n    else {\n      context = this.active;\n    }\n  }\n\n  var self = this;\n  return function () {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    }\n    catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    }\n    finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function (context) {\n  assert.ok(context, \"context must be provided for entering\");\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function (context) {\n  assert.ok(context, \"context must be provided for exiting\");\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, \"can't remove top context\");\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  var index = this._set.lastIndexOf(context);\n\n  assert.ok(index >= 0, \"context not currently entered; can't exit\");\n  assert.ok(index,      \"can't remove top context\");\n\n  this._set.splice(index, 1);\n};\n\nNamespace.prototype.bindEmitter = function (emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, \"can only bind real EEs\");\n\n  var namespace  = this;\n  var thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) return;\n    if (!listener[CONTEXTS_SYMBOL]) listener[CONTEXTS_SYMBOL] = Object.create(null);\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace : namespace,\n      context   : namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) return unwrapped;\n\n    var wrapped  = unwrapped;\n    var contexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(contexts).forEach(function (name) {\n      var thunk = contexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function (exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction get(name) {\n  return process.namespaces[name];\n}\n\nfunction create(name) {\n  assert.ok(name, \"namespace must be given a name!\");\n\n  var namespace = new Namespace(name);\n  namespace.id = process.addAsyncListener({\n    create : function () { return namespace.active; },\n    before : function (context, storage) { if (storage) namespace.enter(storage); },\n    after  : function (context, storage) { if (storage) namespace.exit(storage); },\n    error  : function (storage) { if (storage) namespace.exit(storage); }\n  });\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroy(name) {\n  var namespace = get(name);\n\n  assert.ok(namespace,    \"can't delete nonexistent namespace!\");\n  assert.ok(namespace.id, \"don't assign to process.namespaces directly!\");\n\n  process.removeAsyncListener(namespace.id);\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroy(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\nif (!process.namespaces) reset(); // call immediately to set up\n\nmodule.exports = {\n  getNamespace     : get,\n  createNamespace  : create,\n  destroyNamespace : destroy,\n  reset            : reset\n};\n","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nexports.AzureMonitorSymbol = \"Azure_Monitor_Tracer\";\n/**\n * By default, @azure/core-tracing default tracer is a NoopTracer.\n * This patching changes the default tracer to a patched BasicTracer\n * which emits ended spans as diag-channel events.\n *\n * The @opentelemetry/tracing package must be installed to use these patches\n * https://www.npmjs.com/package/@opentelemetry/tracing\n * @param coreTracing\n */\nvar azureCoreTracingPatchFunction = function (coreTracing) {\n    try {\n        var BasicTracer = require(\"@opentelemetry/tracing\").BasicTracer;\n        var tracerConfig = diagnostic_channel_1.channel.spanContextPropagator\n            ? { scopeManager: diagnostic_channel_1.channel.spanContextPropagator }\n            : undefined;\n        var tracer_1 = new BasicTracer(tracerConfig);\n        // Patch startSpan instead of using spanProcessor.onStart because parentSpan must be\n        // set while the span is constructed\n        var startSpanOriginal_1 = tracer_1.startSpan;\n        tracer_1.startSpan = function (name, options) {\n            // if no parent span was provided, apply the current context\n            if (!options || !options.parent) {\n                var parentOperation = tracer_1.getCurrentSpan();\n                if (parentOperation && parentOperation.operation && parentOperation.operation.traceparent) {\n                    options = __assign({}, options, { parent: {\n                            traceId: parentOperation.operation.traceparent.traceId,\n                            spanId: parentOperation.operation.traceparent.spanId,\n                        } });\n                }\n            }\n            var span = startSpanOriginal_1.call(this, name, options);\n            span.addEvent(\"Application Insights Integration enabled\");\n            return span;\n        };\n        tracer_1.addSpanProcessor(new AzureMonitorSpanProcessor());\n        tracer_1[exports.AzureMonitorSymbol] = true;\n        coreTracing.setTracer(tracer_1); // recordSpanData is not present on BasicTracer - cast to any\n    }\n    catch (e) { /* squash errors */ }\n    return coreTracing;\n};\nvar AzureMonitorSpanProcessor = /** @class */ (function () {\n    function AzureMonitorSpanProcessor() {\n    }\n    AzureMonitorSpanProcessor.prototype.onStart = function (span) {\n        // noop since startSpan is already patched\n    };\n    AzureMonitorSpanProcessor.prototype.onEnd = function (span) {\n        diagnostic_channel_1.channel.publish(\"azure-coretracing\", span);\n    };\n    AzureMonitorSpanProcessor.prototype.shutdown = function () {\n        // noop\n    };\n    return AzureMonitorSpanProcessor;\n}());\nexports.azureCoreTracing = {\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\n    patch: azureCoreTracingPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"@azure/core-tracing\", exports.azureCoreTracing);\n}\nexports.enable = enable;\n//# sourceMappingURL=azure-coretracing.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar bunyanPatchFunction = function (originalBunyan) {\n    var originalEmit = originalBunyan.prototype._emit;\n    originalBunyan.prototype._emit = function (rec, noemit) {\n        var ret = originalEmit.apply(this, arguments);\n        if (!noemit) {\n            var str = ret;\n            if (!str) {\n                str = originalEmit.call(this, rec, true);\n            }\n            diagnostic_channel_1.channel.publish(\"bunyan\", { level: rec.level, result: str });\n        }\n        return ret;\n    };\n    return originalBunyan;\n};\nexports.bunyan = {\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\n    patch: bunyanPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"bunyan\", exports.bunyan);\n}\nexports.enable = enable;\n//# sourceMappingURL=bunyan.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar stream_1 = require(\"stream\");\nvar consolePatchFunction = function (originalConsole) {\n    var aiLoggingOutStream = new stream_1.Writable();\n    var aiLoggingErrStream = new stream_1.Writable();\n    // Default console is roughly equivalent to `new Console(process.stdout, process.stderr)`\n    // We create a version which publishes to the channel and also to stdout/stderr\n    aiLoggingOutStream.write = function (chunk) {\n        if (!chunk) {\n            return true;\n        }\n        var message = chunk.toString();\n        diagnostic_channel_1.channel.publish(\"console\", { message: message });\n        return true;\n    };\n    aiLoggingErrStream.write = function (chunk) {\n        if (!chunk) {\n            return true;\n        }\n        var message = chunk.toString();\n        diagnostic_channel_1.channel.publish(\"console\", { message: message, stderr: true });\n        return true;\n    };\n    var aiLoggingConsole = new originalConsole.Console(aiLoggingOutStream, aiLoggingErrStream);\n    var consoleMethods = [\"log\", \"info\", \"warn\", \"error\", \"dir\", \"time\", \"timeEnd\", \"trace\", \"assert\"];\n    var _loop_1 = function (method) {\n        var originalMethod = originalConsole[method];\n        if (originalMethod) {\n            originalConsole[method] = function () {\n                if (aiLoggingConsole[method]) {\n                    try {\n                        aiLoggingConsole[method].apply(aiLoggingConsole, arguments);\n                    }\n                    catch (e) {\n                        // Ignore errors; allow the original method to throw if necessary\n                    }\n                }\n                return originalMethod.apply(originalConsole, arguments);\n            };\n        }\n    };\n    for (var _i = 0, consoleMethods_1 = consoleMethods; _i < consoleMethods_1.length; _i++) {\n        var method = consoleMethods_1[_i];\n        _loop_1(method);\n    }\n    return originalConsole;\n};\nexports.console = {\n    versionSpecifier: \">= 4.0.0\",\n    patch: consolePatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"console\", exports.console);\n    // Force patching of console\n    /* tslint:disable-next-line:no-var-requires */\n    require(\"console\");\n}\nexports.enable = enable;\n//# sourceMappingURL=console.pub.js.map","\"use strict\";\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar azuresdk = require(\"./azure-coretracing.pub\");\nexports.azuresdk = azuresdk;\nvar bunyan = require(\"./bunyan.pub\");\nexports.bunyan = bunyan;\nvar consolePub = require(\"./console.pub\");\nexports.console = consolePub;\nvar mongodbCore = require(\"./mongodb-core.pub\");\nexports.mongodbCore = mongodbCore;\nvar mongodb = require(\"./mongodb.pub\");\nexports.mongodb = mongodb;\nvar mysql = require(\"./mysql.pub\");\nexports.mysql = mysql;\nvar pgPool = require(\"./pg-pool.pub\");\nexports.pgPool = pgPool;\nvar pg = require(\"./pg.pub\");\nexports.pg = pg;\nvar redis = require(\"./redis.pub\");\nexports.redis = redis;\nvar tedious = require(\"./tedious.pub\");\nexports.tedious = tedious;\nvar winston = require(\"./winston.pub\");\nexports.winston = winston;\nfunction enable() {\n    bunyan.enable();\n    consolePub.enable();\n    mongodbCore.enable();\n    mongodb.enable();\n    mysql.enable();\n    pg.enable();\n    pgPool.enable();\n    redis.enable();\n    winston.enable();\n    azuresdk.enable();\n    tedious.enable();\n}\nexports.enable = enable;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar mongodbcorePatchFunction = function (originalMongoCore) {\n    var originalConnect = originalMongoCore.Server.prototype.connect;\n    originalMongoCore.Server.prototype.connect = function contextPreservingConnect() {\n        var ret = originalConnect.apply(this, arguments);\n        // Messages sent to mongo progress through a pool\n        // This can result in context getting mixed between different responses\n        // so we wrap the callbacks to restore appropriate state\n        var originalWrite = this.s.pool.write;\n        this.s.pool.write = function contextPreservingWrite() {\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\n            if (typeof arguments[cbidx] === \"function\") {\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\n            }\n            return originalWrite.apply(this, arguments);\n        };\n        // Logout is a special case, it doesn't call the write function but instead\n        // directly calls into connection.write\n        var originalLogout = this.s.pool.logout;\n        this.s.pool.logout = function contextPreservingLogout() {\n            if (typeof arguments[1] === \"function\") {\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\n            }\n            return originalLogout.apply(this, arguments);\n        };\n        return ret;\n    };\n    return originalMongoCore;\n};\nexports.mongoCore = {\n    versionSpecifier: \">= 2.0.0 < 4.0.0\",\n    patch: mongodbcorePatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb-core\", exports.mongoCore);\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb-core.pub.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar mongodbPatchFunction = function (originalMongo) {\n    var listener = originalMongo.instrument({\n        operationIdGenerator: {\n            next: function () {\n                return diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n            },\n        },\n    });\n    var eventMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        eventMap[event.requestId] = __assign({}, event, { time: new Date() });\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event.operationId === \"function\") {\n            event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n        }\n        else {\n            // fallback -- correlation will not work here\n            diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true });\n        }\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event.operationId === \"function\") {\n            event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n        }\n        else {\n            // fallback -- correlation will not work here\n            diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false });\n        }\n    });\n    return originalMongo;\n};\nvar mongodb3PatchFunction = function (originalMongo) {\n    var listener = originalMongo.instrument();\n    var eventMap = {};\n    var contextMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        contextMap[event.requestId] = diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n        eventMap[event.requestId] = __assign({}, event, { time: new Date() });\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    return originalMongo;\n};\n// In mongodb 3.3.0, mongodb-core was merged into mongodb, so the same patching\n// can be used here. this.s.pool was changed to this.s.coreTopology.s.pool\nvar mongodbcorePatchFunction = function (originalMongo) {\n    var originalConnect = originalMongo.Server.prototype.connect;\n    originalMongo.Server.prototype.connect = function contextPreservingConnect() {\n        var ret = originalConnect.apply(this, arguments);\n        // Messages sent to mongo progress through a pool\n        // This can result in context getting mixed between different responses\n        // so we wrap the callbacks to restore appropriate state\n        var originalWrite = this.s.coreTopology.s.pool.write;\n        this.s.coreTopology.s.pool.write = function contextPreservingWrite() {\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\n            if (typeof arguments[cbidx] === \"function\") {\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\n            }\n            return originalWrite.apply(this, arguments);\n        };\n        // Logout is a special case, it doesn't call the write function but instead\n        // directly calls into connection.write\n        var originalLogout = this.s.coreTopology.s.pool.logout;\n        this.s.coreTopology.s.pool.logout = function contextPreservingLogout() {\n            if (typeof arguments[1] === \"function\") {\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\n            }\n            return originalLogout.apply(this, arguments);\n        };\n        return ret;\n    };\n    return originalMongo;\n};\nvar mongodb330PatchFunction = function (originalMongo) {\n    mongodbcorePatchFunction(originalMongo); // apply mongodb-core patches\n    var listener = originalMongo.instrument();\n    var eventMap = {};\n    var contextMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        contextMap[event.requestId] = diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n        eventMap[event.requestId] = event;\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    return originalMongo;\n};\nexports.mongo2 = {\n    versionSpecifier: \">= 2.0.0 <= 3.0.5\",\n    patch: mongodbPatchFunction,\n};\nexports.mongo3 = {\n    versionSpecifier: \"> 3.0.5 < 3.3.0\",\n    patch: mongodb3PatchFunction,\n};\nexports.mongo330 = {\n    versionSpecifier: \">= 3.3.0 < 4.0.0\",\n    patch: mongodb330PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo2);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo3);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo330);\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar path = require(\"path\");\nvar mysqlPatchFunction = function (originalMysql, originalMysqlPath) {\n    // The `name` passed in here is for debugging purposes,\n    // to help distinguish which object is being patched.\n    var patchObjectFunction = function (obj, name) {\n        return function (func, cbWrapper) {\n            var originalFunc = obj[func];\n            if (originalFunc) {\n                obj[func] = function mysqlContextPreserver() {\n                    // Find the callback, if there is one\n                    var cbidx = arguments.length - 1;\n                    for (var i = arguments.length - 1; i >= 0; --i) {\n                        if (typeof arguments[i] === \"function\") {\n                            cbidx = i;\n                            break;\n                        }\n                        else if (typeof arguments[i] !== \"undefined\") {\n                            break;\n                        }\n                    }\n                    var cb = arguments[cbidx];\n                    var resultContainer = { result: null, startTime: null, startDate: null };\n                    if (typeof cb === \"function\") {\n                        // Preserve context on the callback.\n                        // If this is one of the functions that we want to track,\n                        // then wrap the callback with the tracking wrapper\n                        if (cbWrapper) {\n                            resultContainer.startTime = process.hrtime();\n                            resultContainer.startDate = new Date();\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cbWrapper(resultContainer, cb));\n                        }\n                        else {\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cb);\n                        }\n                    }\n                    var result = originalFunc.apply(this, arguments);\n                    resultContainer.result = result;\n                    return result;\n                };\n            }\n        };\n    };\n    var patchClassMemberFunction = function (classObject, name) {\n        return patchObjectFunction(classObject.prototype, name + \".prototype\");\n    };\n    var connectionCallbackFunctions = [\n        \"connect\", \"changeUser\",\n        \"ping\", \"statistics\", \"end\",\n    ];\n    var connectionClass = require(path.dirname(originalMysqlPath) + \"/lib/Connection\");\n    connectionCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(connectionClass, \"Connection\")(value); });\n    // Connection.createQuery is a static method\n    patchObjectFunction(connectionClass, \"Connection\")(\"createQuery\", function (resultContainer, cb) {\n        return function (err) {\n            var hrDuration = process.hrtime(resultContainer.startTime);\n            /* tslint:disable-next-line:no-bitwise */\n            var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\n            diagnostic_channel_1.channel.publish(\"mysql\", { query: resultContainer.result, callbackArgs: arguments, err: err, duration: duration, time: resultContainer.startDate });\n            cb.apply(this, arguments);\n        };\n    });\n    var poolCallbackFunctions = [\n        \"_enqueueCallback\",\n    ];\n    var poolClass = require(path.dirname(originalMysqlPath) + \"/lib/Pool\");\n    poolCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(poolClass, \"Pool\")(value); });\n    return originalMysql;\n};\nexports.mysql = {\n    versionSpecifier: \">= 2.0.0 < 3.0.0\",\n    patch: mysqlPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mysql\", exports.mysql);\n}\nexports.enable = enable;\n//# sourceMappingURL=mysql.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nfunction postgresPool1PatchFunction(originalPgPool) {\n    var originalConnect = originalPgPool.prototype.connect;\n    originalPgPool.prototype.connect = function connect(callback) {\n        if (callback) {\n            arguments[0] = diagnostic_channel_1.channel.bindToContext(callback);\n        }\n        return originalConnect.apply(this, arguments);\n    };\n    return originalPgPool;\n}\nexports.postgresPool1 = {\n    versionSpecifier: \">= 1.0.0 < 3.0.0\",\n    patch: postgresPool1PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg-pool\", exports.postgresPool1);\n}\nexports.enable = enable;\n//# sourceMappingURL=pg-pool.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar events_1 = require(\"events\");\nfunction postgres6PatchFunction(originalPg, originalPgPath) {\n    var originalClientQuery = originalPg.Client.prototype.query;\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\n    // wherever the callback is passed, find it, save it, and remove it from the call\n    // to the the original .query() function\n    originalPg.Client.prototype.query = function query(config, values, callback) {\n        var data = {\n            query: {},\n            database: {\n                host: this.connectionParameters.host,\n                port: this.connectionParameters.port,\n            },\n            result: null,\n            error: null,\n            duration: 0,\n            time: new Date(),\n        };\n        var start = process.hrtime();\n        var queryResult;\n        function patchCallback(cb) {\n            if (cb && cb[diagnosticOriginalFunc]) {\n                cb = cb[diagnosticOriginalFunc];\n            }\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\n                var end = process.hrtime(start);\n                data.result = res && { rowCount: res.rowCount, command: res.command };\n                data.error = err;\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\n                diagnostic_channel_1.channel.publish(\"postgres\", data);\n                // emulate weird internal behavior in pg@6\n                // on success, the callback is called *before* query events are emitted\n                // on failure, the callback is called *instead of* the query emitting events\n                // with no events, that means no promises (since the promise is resolved/rejected in an event handler)\n                // since we are always inserting ourselves as a callback, we have to restore the original\n                // behavior if the user didn't provide one themselves\n                if (err) {\n                    if (cb) {\n                        return cb.apply(this, arguments);\n                    }\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\n                        queryResult.emit(\"error\", err);\n                    }\n                }\n                else if (cb) {\n                    cb.apply(this, arguments);\n                }\n            });\n            try {\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\n                return trackingCallback;\n            }\n            catch (e) {\n                // this should never happen, but bailout in case it does\n                return cb;\n            }\n        }\n        // this function takes too many variations of arguments.\n        // this patches any provided callback or creates a new callback if one wasn't provided.\n        // since the callback is always called (if provided) in addition to always having a Promisified\n        // EventEmitter returned (well, sometimes -- see above), its safe to insert a callback if none was given\n        try {\n            if (typeof config === \"string\") {\n                if (values instanceof Array) {\n                    data.query.preparable = {\n                        text: config,\n                        args: values,\n                    };\n                    callback = patchCallback(callback);\n                }\n                else {\n                    data.query.text = config;\n                    // pg v6 will, for some reason, accept both\n                    // client.query(\"...\", undefined, () => {...})\n                    // **and**\n                    // client.query(\"...\", () => {...});\n                    // Internally, precedence is given to the callback argument\n                    if (callback) {\n                        callback = patchCallback(callback);\n                    }\n                    else {\n                        values = patchCallback(values);\n                    }\n                }\n            }\n            else {\n                if (typeof config.name === \"string\") {\n                    data.query.plan = config.name;\n                }\n                else if (config.values instanceof Array) {\n                    data.query.preparable = {\n                        text: config.text,\n                        args: config.values,\n                    };\n                }\n                else {\n                    data.query.text = config.text;\n                }\n                if (callback) {\n                    callback = patchCallback(callback);\n                }\n                else if (values) {\n                    values = patchCallback(values);\n                }\n                else {\n                    config.callback = patchCallback(config.callback);\n                }\n            }\n        }\n        catch (e) {\n            // if our logic here throws, bail out and just let pg do its thing\n            return originalClientQuery.apply(this, arguments);\n        }\n        arguments[0] = config;\n        arguments[1] = values;\n        arguments[2] = callback;\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\n        queryResult = originalClientQuery.apply(this, arguments);\n        return queryResult;\n    };\n    return originalPg;\n}\nfunction postgres7PatchFunction(originalPg, originalPgPath) {\n    var originalClientQuery = originalPg.Client.prototype.query;\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\n    // wherever the callback is passed, find it, save it, and remove it from the call\n    // to the the original .query() function\n    originalPg.Client.prototype.query = function query(config, values, callback) {\n        var _this = this;\n        var callbackProvided = !!callback; // Starting in pg@7.x+, Promise is returned only if !callbackProvided\n        var data = {\n            query: {},\n            database: {\n                host: this.connectionParameters.host,\n                port: this.connectionParameters.port,\n            },\n            result: null,\n            error: null,\n            duration: 0,\n            time: new Date(),\n        };\n        var start = process.hrtime();\n        var queryResult;\n        function patchCallback(cb) {\n            if (cb && cb[diagnosticOriginalFunc]) {\n                cb = cb[diagnosticOriginalFunc];\n            }\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\n                var end = process.hrtime(start);\n                data.result = res && { rowCount: res.rowCount, command: res.command };\n                data.error = err;\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\n                diagnostic_channel_1.channel.publish(\"postgres\", data);\n                if (err) {\n                    if (cb) {\n                        return cb.apply(this, arguments);\n                    }\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\n                        queryResult.emit(\"error\", err);\n                    }\n                }\n                else if (cb) {\n                    cb.apply(this, arguments);\n                }\n            });\n            try {\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\n                return trackingCallback;\n            }\n            catch (e) {\n                // this should never happen, but bailout in case it does\n                return cb;\n            }\n        }\n        // Only try to wrap the callback if it is a function. We want to keep the same\n        // behavior of returning a promise only if no callback is provided. Wrapping\n        // a nonfunction makes it a function and pg will interpret it as a callback\n        try {\n            if (typeof config === \"string\") {\n                if (values instanceof Array) {\n                    data.query.preparable = {\n                        text: config,\n                        args: values,\n                    };\n                    callbackProvided = typeof callback === \"function\";\n                    callback = callbackProvided ? patchCallback(callback) : callback;\n                }\n                else {\n                    data.query.text = config;\n                    if (callback) {\n                        callbackProvided = typeof callback === \"function\";\n                        callback = callbackProvided ? patchCallback(callback) : callback;\n                    }\n                    else {\n                        callbackProvided = typeof values === \"function\";\n                        values = callbackProvided ? patchCallback(values) : values;\n                    }\n                }\n            }\n            else {\n                if (typeof config.name === \"string\") {\n                    data.query.plan = config.name;\n                }\n                else if (config.values instanceof Array) {\n                    data.query.preparable = {\n                        text: config.text,\n                        args: config.values,\n                    };\n                }\n                else {\n                    data.query.text = config.text;\n                }\n                if (callback) {\n                    callbackProvided = typeof callback === \"function\";\n                    callback = patchCallback(callback);\n                }\n                else if (values) {\n                    callbackProvided = typeof values === \"function\";\n                    values = callbackProvided ? patchCallback(values) : values;\n                }\n                else {\n                    callbackProvided = typeof config.callback === \"function\";\n                    config.callback = callbackProvided ? patchCallback(config.callback) : config.callback;\n                }\n            }\n        }\n        catch (e) {\n            // if our logic here throws, bail out and just let pg do its thing\n            return originalClientQuery.apply(this, arguments);\n        }\n        arguments[0] = config;\n        arguments[1] = values;\n        arguments[2] = callback;\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\n        queryResult = originalClientQuery.apply(this, arguments);\n        if (!callbackProvided) {\n            // no callback, so create a pass along promise\n            return queryResult\n                // pass resolved promise after publishing the event\n                .then(function (result) {\n                patchCallback()(undefined, result);\n                return new _this._Promise(function (resolve, reject) {\n                    resolve(result);\n                });\n            })\n                // pass along rejected promise after publishing the error\n                .catch(function (error) {\n                patchCallback()(error, undefined);\n                return new _this._Promise(function (resolve, reject) {\n                    reject(error);\n                });\n            });\n        }\n        return queryResult;\n    };\n    return originalPg;\n}\nexports.postgres6 = {\n    versionSpecifier: \"6.*\",\n    patch: postgres6PatchFunction,\n};\nexports.postgres7 = {\n    versionSpecifier: \">=7.* <=8.*\",\n    patch: postgres7PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres6);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres7);\n}\nexports.enable = enable;\n//# sourceMappingURL=pg.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar redisPatchFunction = function (originalRedis) {\n    var originalSend = originalRedis.RedisClient.prototype.internal_send_command;\n    // Note: This is mixing together both context tracking and dependency tracking\n    originalRedis.RedisClient.prototype.internal_send_command = function (commandObj) {\n        if (commandObj) {\n            var cb_1 = commandObj.callback;\n            if (!cb_1 || !cb_1.pubsubBound) {\n                var address_1 = this.address;\n                var startTime_1 = process.hrtime();\n                var startDate_1 = new Date();\n                // Note: augmenting the callback on internal_send_command is correct for context\n                // tracking, but may be too low-level for dependency tracking. There are some 'errors'\n                // which higher levels expect in some cases\n                // However, the only other option is to intercept every individual command.\n                commandObj.callback = diagnostic_channel_1.channel.bindToContext(function (err, result) {\n                    var hrDuration = process.hrtime(startTime_1);\n                    /* tslint:disable-next-line:no-bitwise */\n                    var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\n                    diagnostic_channel_1.channel.publish(\"redis\", { duration: duration, address: address_1, commandObj: commandObj, err: err, result: result, time: startDate_1 });\n                    if (typeof cb_1 === \"function\") {\n                        cb_1.apply(this, arguments);\n                    }\n                });\n                commandObj.callback.pubsubBound = true;\n            }\n        }\n        return originalSend.call(this, commandObj);\n    };\n    return originalRedis;\n};\nexports.redis = {\n    versionSpecifier: \">= 2.0.0 < 4.0.0\",\n    patch: redisPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"redis\", exports.redis);\n}\nexports.enable = enable;\n//# sourceMappingURL=redis.pub.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar tediousPatchFunction = function (originalTedious) {\n    var originalMakeRequest = originalTedious.Connection.prototype.makeRequest;\n    originalTedious.Connection.prototype.makeRequest = function makeRequest() {\n        function getPatchedCallback(origCallback) {\n            var start = process.hrtime();\n            var data = {\n                query: {},\n                database: {\n                    host: null,\n                    port: null,\n                },\n                result: null,\n                error: null,\n                duration: 0,\n            };\n            return diagnostic_channel_1.channel.bindToContext(function (err, rowCount, rows) {\n                var end = process.hrtime(start);\n                data = __assign({}, data, { database: {\n                        host: this.connection.config.server,\n                        port: this.connection.config.options.port,\n                    }, result: !err && { rowCount: rowCount, rows: rows }, query: {\n                        text: this.parametersByName.statement.value,\n                    }, error: err, duration: Math.ceil((end[0] * 1e3) + (end[1] / 1e6)) });\n                diagnostic_channel_1.channel.publish(\"tedious\", data);\n                origCallback.call(this, err, rowCount, rows);\n            });\n        }\n        var request = arguments[0];\n        arguments[0].callback = getPatchedCallback(request.callback);\n        originalMakeRequest.apply(this, arguments);\n    };\n    return originalTedious;\n};\nexports.tedious = {\n    versionSpecifier: \">= 6.0.0 < 9.0.0\",\n    patch: tediousPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"tedious\", exports.tedious);\n}\nexports.enable = enable;\n//# sourceMappingURL=tedious.pub.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\n// register a \"filter\" with each logger that publishes the data about to be logged\nvar winston2PatchFunction = function (originalWinston) {\n    var originalLog = originalWinston.Logger.prototype.log;\n    var curLevels;\n    var loggingFilter = function (level, message, meta) {\n        var levelKind;\n        if (curLevels === originalWinston.config.npm.levels) {\n            levelKind = \"npm\";\n        }\n        else if (curLevels === originalWinston.config.syslog.levels) {\n            levelKind = \"syslog\";\n        }\n        else {\n            levelKind = \"unknown\";\n        }\n        diagnostic_channel_1.channel.publish(\"winston\", { level: level, message: message, meta: meta, levelKind: levelKind });\n        return message;\n    };\n    // whenever someone logs, ensure our filter comes last\n    originalWinston.Logger.prototype.log = function log() {\n        curLevels = this.levels;\n        if (!this.filters || this.filters.length === 0) {\n            this.filters = [loggingFilter];\n        }\n        else if (this.filters[this.filters.length - 1] !== loggingFilter) {\n            this.filters = this.filters.filter(function (f) { return f !== loggingFilter; });\n            this.filters.push(loggingFilter);\n        }\n        return originalLog.apply(this, arguments);\n    };\n    return originalWinston;\n};\nvar winston3PatchFunction = function (originalWinston) {\n    var mapLevelToKind = function (winston, level) {\n        var levelKind;\n        if (winston.config.npm.levels[level] != null) {\n            levelKind = \"npm\";\n        }\n        else if (winston.config.syslog.levels[level] != null) {\n            levelKind = \"syslog\";\n        }\n        else {\n            levelKind = \"unknown\";\n        }\n        return levelKind;\n    };\n    var AppInsightsTransport = /** @class */ (function (_super) {\n        __extends(AppInsightsTransport, _super);\n        function AppInsightsTransport(winston, opts) {\n            var _this = _super.call(this, opts) || this;\n            _this.winston = winston;\n            return _this;\n        }\n        AppInsightsTransport.prototype.log = function (info, callback) {\n            // tslint:disable-next-line:prefer-const - try to obtain level from Symbol(level) afterwards\n            var message = info.message, level = info.level, meta = info.meta, splat = __rest(info, [\"message\", \"level\", \"meta\"]);\n            level = typeof Symbol[\"for\"] === \"function\" ? info[Symbol[\"for\"](\"level\")] : level; // Symbol(level) is uncolorized, so prefer getting it from here\n            message = info instanceof Error ? info : message; // Winston places Errors at info, strings at info.message\n            var levelKind = mapLevelToKind(this.winston, level);\n            meta = meta || {}; // Winston _somtimes_ puts metadata inside meta, so start from here\n            for (var key in splat) {\n                if (splat.hasOwnProperty(key)) {\n                    meta[key] = splat[key];\n                }\n            }\n            diagnostic_channel_1.channel.publish(\"winston\", { message: message, level: level, levelKind: levelKind, meta: meta });\n            callback();\n        };\n        return AppInsightsTransport;\n    }(originalWinston.Transport));\n    // Patch this function\n    function patchedConfigure() {\n        // Grab highest sev logging level in case of custom logging levels\n        var levels = arguments[0].levels || originalWinston.config.npm.levels;\n        var lastLevel;\n        for (var level in levels) {\n            if (levels.hasOwnProperty(level)) {\n                lastLevel = lastLevel === undefined || levels[level] > levels[lastLevel] ? level : lastLevel;\n            }\n        }\n        this.add(new AppInsightsTransport(originalWinston, { level: lastLevel }));\n    }\n    var origCreate = originalWinston.createLogger;\n    originalWinston.createLogger = function patchedCreate() {\n        // Grab highest sev logging level in case of custom logging levels\n        var levels = arguments[0].levels || originalWinston.config.npm.levels;\n        var lastLevel;\n        for (var level in levels) {\n            if (levels.hasOwnProperty(level)) {\n                lastLevel = lastLevel === undefined || levels[level] > levels[lastLevel] ? level : lastLevel;\n            }\n        }\n        // Add custom app insights transport to the end\n        // Remark: Configure is not available until after createLogger()\n        // and the Logger prototype is not exported in winston 3.x, so\n        // patch both createLogger and configure. Could also call configure\n        // again after createLogger, but that would cause configure to be called\n        // twice per create.\n        var result = origCreate.apply(this, arguments);\n        result.add(new AppInsightsTransport(originalWinston, { level: lastLevel }));\n        var origConfigure = result.configure;\n        result.configure = function () {\n            origConfigure.apply(this, arguments);\n            patchedConfigure.apply(this, arguments);\n        };\n        return result;\n    };\n    var origRootConfigure = originalWinston.createLogger;\n    originalWinston.configure = function () {\n        origRootConfigure.apply(this, arguments);\n        patchedConfigure.apply(this, arguments);\n    };\n    originalWinston.add(new AppInsightsTransport(originalWinston));\n    return originalWinston;\n};\nexports.winston3 = {\n    versionSpecifier: \"3.x\",\n    patch: winston3PatchFunction,\n};\nexports.winston2 = {\n    versionSpecifier: \"2.x\",\n    patch: winston2PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston2);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston3);\n}\nexports.enable = enable;\n//# sourceMappingURL=winston.pub.js.map","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 4694;\nmodule.exports = webpackEmptyContext;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 420;\nmodule.exports = webpackEmptyContext;","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar patchRequire_1 = require(\"./patchRequire\");\r\nvar patchRequire_2 = require(\"./patchRequire\");\r\nexports.makePatchingRequire = patchRequire_2.makePatchingRequire;\r\nvar trueFilter = function (publishing) { return true; };\r\nvar ContextPreservingEventEmitter = (function () {\r\n    function ContextPreservingEventEmitter() {\r\n        this.version = require(\"./../../package.json\").version; // Allow for future versions to replace things?\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        this.knownPatches = {};\r\n        this.currentlyPublishing = false;\r\n    }\r\n    ContextPreservingEventEmitter.prototype.shouldPublish = function (name) {\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            return listeners.some(function (_a) {\r\n                var filter = _a.filter;\r\n                return !filter || filter(false);\r\n            });\r\n        }\r\n        return false;\r\n    };\r\n    ContextPreservingEventEmitter.prototype.publish = function (name, event) {\r\n        if (this.currentlyPublishing) {\r\n            return; // Avoid reentrancy\r\n        }\r\n        var listeners = this.subscribers[name];\r\n        // Note: Listeners called synchronously to preserve context\r\n        if (listeners) {\r\n            var standardEvent_1 = {\r\n                timestamp: Date.now(),\r\n                data: event,\r\n            };\r\n            this.currentlyPublishing = true;\r\n            listeners.forEach(function (_a) {\r\n                var listener = _a.listener, filter = _a.filter;\r\n                try {\r\n                    if (filter && filter(true)) {\r\n                        listener(standardEvent_1);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // Subscriber threw an error\r\n                }\r\n            });\r\n            this.currentlyPublishing = false;\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.subscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        if (!this.subscribers[name]) {\r\n            this.subscribers[name] = [];\r\n        }\r\n        this.subscribers[name].push({ listener: listener, filter: filter });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.unsubscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            for (var index = 0; index < listeners.length; ++index) {\r\n                if (listeners[index].listener === listener && listeners[index].filter === filter) {\r\n                    listeners.splice(index, 1);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    // Used for tests\r\n    ContextPreservingEventEmitter.prototype.reset = function () {\r\n        var _this = this;\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        // Modify the knownPatches object rather than replace, since a reference will be used in the require patcher\r\n        Object.getOwnPropertyNames(this.knownPatches).forEach(function (prop) { return delete _this.knownPatches[prop]; });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.bindToContext = function (cb) {\r\n        return this.contextPreservationFunction(cb);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.addContextPreservation = function (preserver) {\r\n        var previousPreservationStack = this.contextPreservationFunction;\r\n        this.contextPreservationFunction = (function (cb) { return preserver(previousPreservationStack(cb)); });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.registerMonkeyPatch = function (packageName, patcher) {\r\n        if (!this.knownPatches[packageName]) {\r\n            this.knownPatches[packageName] = [];\r\n        }\r\n        this.knownPatches[packageName].push(patcher);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.getPatchesObject = function () {\r\n        return this.knownPatches;\r\n    };\r\n    return ContextPreservingEventEmitter;\r\n}());\r\nif (!global.diagnosticsSource) {\r\n    global.diagnosticsSource = new ContextPreservingEventEmitter();\r\n    // TODO: should this only patch require after at least one monkey patch is registered?\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    var moduleModule = require(\"module\");\r\n    // Note: We pass in the object now before any patches are registered, but the object is passed by reference\r\n    // so any updates made to the object will be visible in the patcher.\r\n    moduleModule.prototype.require = patchRequire_1.makePatchingRequire(global.diagnosticsSource.getPatchesObject());\r\n}\r\nexports.channel = global.diagnosticsSource;\r\n//# sourceMappingURL=channel.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar semver = require(\"semver\");\r\n/* tslint:disable-next-line:no-var-requires */\r\nvar moduleModule = require(\"module\");\r\nvar nativeModules = Object.keys(process.binding(\"natives\"));\r\nvar originalRequire = moduleModule.prototype.require;\r\nfunction makePatchingRequire(knownPatches) {\r\n    var patchedModules = {};\r\n    return function patchedRequire(moduleId) {\r\n        var originalModule = originalRequire.apply(this, arguments);\r\n        if (knownPatches[moduleId]) {\r\n            // Fetch the specific path of the module\r\n            var modulePath = moduleModule._resolveFilename(moduleId, this);\r\n            if (patchedModules.hasOwnProperty(modulePath)) {\r\n                // This module has already been patched, no need to reapply\r\n                return patchedModules[modulePath];\r\n            }\r\n            var moduleVersion = void 0;\r\n            if (nativeModules.indexOf(moduleId) < 0) {\r\n                try {\r\n                    moduleVersion = originalRequire.call(this, path.join(moduleId, \"package.json\")).version;\r\n                }\r\n                catch (e) {\r\n                    // This should only happen if moduleId is actually a path rather than a module\r\n                    // This is not a supported scenario\r\n                    return originalModule;\r\n                }\r\n            }\r\n            else {\r\n                // This module is implemented natively so we cannot find a package.json\r\n                // Instead, take the version of node itself\r\n                moduleVersion = process.version.substring(1);\r\n            }\r\n            var prereleaseTagIndex = moduleVersion.indexOf(\"-\");\r\n            if (prereleaseTagIndex >= 0) {\r\n                // We ignore prerelease tags to avoid impossible to fix gaps in support\r\n                // e.g. supporting console in >= 4.0.0 would otherwise not include\r\n                // 8.0.0-pre\r\n                moduleVersion = moduleVersion.substring(0, prereleaseTagIndex);\r\n            }\r\n            var modifiedModule = originalModule;\r\n            for (var _i = 0, _a = knownPatches[moduleId]; _i < _a.length; _i++) {\r\n                var modulePatcher = _a[_i];\r\n                if (semver.satisfies(moduleVersion, modulePatcher.versionSpecifier)) {\r\n                    modifiedModule = modulePatcher.patch(modifiedModule, modulePath);\r\n                }\r\n            }\r\n            return patchedModules[modulePath] = modifiedModule;\r\n        }\r\n        return originalModule;\r\n    };\r\n}\r\nexports.makePatchingRequire = makePatchingRequire;\r\n//# sourceMappingURL=patchRequire.js.map","'use strict';\n\nvar shimmer = require('shimmer');\nvar wrap    = shimmer.wrap;\nvar unwrap  = shimmer.unwrap;\n\n// Default to complaining loudly when things don't go according to plan.\n// dunderscores are boring\nvar SYMBOL = 'wrap@before';\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty(obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name);\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  });\n}\n\nfunction _process(self, listeners) {\n  var l = listeners.length;\n  for (var p = 0; p < l; p++) {\n    var listener = listeners[p];\n    // set up the listener so that onEmit can do whatever it needs\n    var before = self[SYMBOL];\n    if (typeof before === 'function') {\n      before(listener);\n    }\n    else if (Array.isArray(before)) {\n      var length = before.length;\n      for (var i = 0; i < length; i++) before[i](listener);\n    }\n  }\n}\n\nfunction _listeners(self, event) {\n  var listeners;\n  listeners = self._events && self._events[event];\n  if (!Array.isArray(listeners)) {\n    if (listeners) {\n      listeners = [listeners];\n    }\n    else {\n      listeners = [];\n    }\n  }\n\n  return listeners;\n}\n\nfunction _findAndProcess(self, event, before) {\n  var after = _listeners(self, event);\n  var unprocessed = after.filter(function(fn) { return before.indexOf(fn) === -1; });\n  if (unprocessed.length > 0) _process(self, unprocessed);\n}\n\nfunction _wrap(unwrapped, visit) {\n  if (!unwrapped) return;\n\n  var wrapped = unwrapped;\n  if (typeof unwrapped === 'function') {\n    wrapped = visit(unwrapped);\n  }\n  else if (Array.isArray(unwrapped)) {\n    wrapped = [];\n    for (var i = 0; i < unwrapped.length; i++) {\n      wrapped[i] = visit(unwrapped[i]);\n    }\n  }\n  return wrapped;\n}\n\nmodule.exports = function wrapEmitter(emitter, onAddListener, onEmit) {\n  if (!emitter || !emitter.on || !emitter.addListener ||\n      !emitter.removeListener || !emitter.emit) {\n    throw new Error(\"can only wrap real EEs\");\n  }\n\n  if (!onAddListener) throw new Error(\"must have function to run on listener addition\");\n  if (!onEmit) throw new Error(\"must have function to wrap listeners when emitting\");\n\n  /* Attach a context to a listener, and make sure that this hook stays\n   * attached to the emitter forevermore.\n   */\n  function adding(on) {\n    return function added(event, listener) {\n      var existing = _listeners(this, event).slice();\n\n      try {\n        var returned = on.call(this, event, listener);\n        _findAndProcess(this, event, existing);\n        return returned;\n      }\n      finally {\n        // old-style streaming overwrites .on and .addListener, so rewrap\n        if (!this.on.__wrapped) wrap(this, 'on', adding);\n        if (!this.addListener.__wrapped) wrap(this, 'addListener', adding);\n      }\n    };\n  }\n\n  function emitting(emit) {\n    return function emitted(event) {\n      if (!this._events || !this._events[event]) return emit.apply(this, arguments);\n\n      var unwrapped = this._events[event];\n\n      /* Ensure that if removeListener gets called, it's working with the\n       * unwrapped listeners.\n       */\n      function remover(removeListener) {\n        return function removed() {\n          this._events[event] = unwrapped;\n          try {\n            return removeListener.apply(this, arguments);\n          }\n          finally {\n            unwrapped = this._events[event];\n            this._events[event] = _wrap(unwrapped, onEmit);\n          }\n        };\n      }\n      wrap(this, 'removeListener', remover);\n\n      try {\n        /* At emit time, ensure that whatever else is going on, removeListener will\n         * still work while at the same time running whatever hooks are necessary to\n         * make sure the listener is run in the correct context.\n         */\n        this._events[event] = _wrap(unwrapped, onEmit);\n        return emit.apply(this, arguments);\n      }\n      finally {\n        /* Ensure that regardless of what happens when preparing and running the\n         * listeners, the status quo ante is restored before continuing.\n         */\n        unwrap(this, 'removeListener');\n        this._events[event] = unwrapped;\n      }\n    };\n  }\n\n  // support multiple onAddListeners\n  if (!emitter[SYMBOL]) {\n    defineProperty(emitter, SYMBOL, onAddListener);\n  }\n  else if (typeof emitter[SYMBOL] === 'function') {\n    defineProperty(emitter, SYMBOL, [emitter[SYMBOL], onAddListener]);\n  }\n  else if (Array.isArray(emitter[SYMBOL])) {\n    emitter[SYMBOL].push(onAddListener);\n  }\n\n  // only wrap the core functions once\n  if (!emitter.__wrapped) {\n    wrap(emitter, 'addListener', adding);\n    wrap(emitter, 'on',          adding);\n    wrap(emitter, 'emit',        emitting);\n\n    defineProperty(emitter, '__unwrap', function () {\n      unwrap(emitter, 'addListener');\n      unwrap(emitter, 'on');\n      unwrap(emitter, 'emit');\n      delete emitter[SYMBOL];\n      delete emitter.__wrapped;\n    });\n    defineProperty(emitter, '__wrapped', true);\n  }\n};\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array ? array.length : 0;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a cache value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeMax = Math.max;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, props) {\n  object = Object(object);\n  return basePickBy(object, props, function(value, key) {\n    return key in object;\n  });\n}\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick from.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, props, predicate) {\n  var index = -1,\n      length = props.length,\n      result = {};\n\n  while (++index < length) {\n    var key = props[index],\n        value = object[key];\n\n    if (predicate(value, key)) {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Creates an array of the own and inherited enumerable symbol properties\n * of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\n/**\n * The opposite of `_.pick`; this method creates an object composed of the\n * own and inherited enumerable string keyed properties of `object` that are\n * not omitted.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [props] The property identifiers to omit.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omit(object, ['a', 'c']);\n * // => { 'b': '2' }\n */\nvar omit = baseRest(function(object, props) {\n  if (object == null) {\n    return {};\n  }\n  props = arrayMap(baseFlatten(props, 1), toKey);\n  return basePick(object, baseDifference(getAllKeysIn(object), props));\n});\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = omit;\n","exports = module.exports = SemVer;\n\n// The debug function is excluded entirely from the minified version.\n/* nomin */ var debug;\n/* nomin */ if (typeof process === 'object' &&\n    /* nomin */ process.env &&\n    /* nomin */ process.env.NODE_DEBUG &&\n    /* nomin */ /\\bsemver\\b/i.test(process.env.NODE_DEBUG))\n  /* nomin */ debug = function() {\n    /* nomin */ var args = Array.prototype.slice.call(arguments, 0);\n    /* nomin */ args.unshift('SEMVER');\n    /* nomin */ console.log.apply(console, args);\n    /* nomin */ };\n/* nomin */ else\n  /* nomin */ debug = function() {};\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0';\n\nvar MAX_LENGTH = 256;\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16;\n\n// The actual regexps go on exports.re\nvar re = exports.re = [];\nvar src = exports.src = [];\nvar R = 0;\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++;\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*';\nvar NUMERICIDENTIFIERLOOSE = R++;\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+';\n\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++;\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*';\n\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++;\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')';\n\nvar MAINVERSIONLOOSE = R++;\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')';\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++;\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')';\n\nvar PRERELEASEIDENTIFIERLOOSE = R++;\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')';\n\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++;\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))';\n\nvar PRERELEASELOOSE = R++;\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))';\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++;\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+';\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++;\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))';\n\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++;\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?';\n\nsrc[FULL] = '^' + FULLPLAIN + '$';\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?';\n\nvar LOOSE = R++;\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$';\n\nvar GTLT = R++;\nsrc[GTLT] = '((?:<|>)?=?)';\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++;\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*';\nvar XRANGEIDENTIFIER = R++;\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*';\n\nvar XRANGEPLAIN = R++;\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?';\n\nvar XRANGEPLAINLOOSE = R++;\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?';\n\nvar XRANGE = R++;\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$';\nvar XRANGELOOSE = R++;\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$';\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++;\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])';\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++;\nsrc[LONETILDE] = '(?:~>?)';\n\nvar TILDETRIM = R++;\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+';\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g');\nvar tildeTrimReplace = '$1~';\n\nvar TILDE = R++;\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$';\nvar TILDELOOSE = R++;\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$';\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++;\nsrc[LONECARET] = '(?:\\\\^)';\n\nvar CARETTRIM = R++;\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+';\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g');\nvar caretTrimReplace = '$1^';\n\nvar CARET = R++;\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$';\nvar CARETLOOSE = R++;\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$';\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++;\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$';\nvar COMPARATOR = R++;\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$';\n\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++;\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')';\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g');\nvar comparatorTrimReplace = '$1$2$3';\n\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++;\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$';\n\nvar HYPHENRANGELOOSE = R++;\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$';\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++;\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*';\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i]);\n  if (!re[i])\n    re[i] = new RegExp(src[i]);\n}\n\nexports.parse = parse;\nfunction parse(version, loose) {\n  if (version instanceof SemVer)\n    return version;\n\n  if (typeof version !== 'string')\n    return null;\n\n  if (version.length > MAX_LENGTH)\n    return null;\n\n  var r = loose ? re[LOOSE] : re[FULL];\n  if (!r.test(version))\n    return null;\n\n  try {\n    return new SemVer(version, loose);\n  } catch (er) {\n    return null;\n  }\n}\n\nexports.valid = valid;\nfunction valid(version, loose) {\n  var v = parse(version, loose);\n  return v ? v.version : null;\n}\n\n\nexports.clean = clean;\nfunction clean(version, loose) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), loose);\n  return s ? s.version : null;\n}\n\nexports.SemVer = SemVer;\n\nfunction SemVer(version, loose) {\n  if (version instanceof SemVer) {\n    if (version.loose === loose)\n      return version;\n    else\n      version = version.version;\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version);\n  }\n\n  if (version.length > MAX_LENGTH)\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n\n  if (!(this instanceof SemVer))\n    return new SemVer(version, loose);\n\n  debug('SemVer', version, loose);\n  this.loose = loose;\n  var m = version.trim().match(loose ? re[LOOSE] : re[FULL]);\n\n  if (!m)\n    throw new TypeError('Invalid Version: ' + version);\n\n  this.raw = version;\n\n  // these are actually numbers\n  this.major = +m[1];\n  this.minor = +m[2];\n  this.patch = +m[3];\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0)\n    throw new TypeError('Invalid major version')\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0)\n    throw new TypeError('Invalid minor version')\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0)\n    throw new TypeError('Invalid patch version')\n\n  // numberify any prerelease numeric ids\n  if (!m[4])\n    this.prerelease = [];\n  else\n    this.prerelease = m[4].split('.').map(function(id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id;\n        if (num >= 0 && num < MAX_SAFE_INTEGER)\n          return num;\n      }\n      return id;\n    });\n\n  this.build = m[5] ? m[5].split('.') : [];\n  this.format();\n}\n\nSemVer.prototype.format = function() {\n  this.version = this.major + '.' + this.minor + '.' + this.patch;\n  if (this.prerelease.length)\n    this.version += '-' + this.prerelease.join('.');\n  return this.version;\n};\n\nSemVer.prototype.toString = function() {\n  return this.version;\n};\n\nSemVer.prototype.compare = function(other) {\n  debug('SemVer.compare', this.version, this.loose, other);\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.loose);\n\n  return this.compareMain(other) || this.comparePre(other);\n};\n\nSemVer.prototype.compareMain = function(other) {\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.loose);\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch);\n};\n\nSemVer.prototype.comparePre = function(other) {\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.loose);\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length)\n    return -1;\n  else if (!this.prerelease.length && other.prerelease.length)\n    return 1;\n  else if (!this.prerelease.length && !other.prerelease.length)\n    return 0;\n\n  var i = 0;\n  do {\n    var a = this.prerelease[i];\n    var b = other.prerelease[i];\n    debug('prerelease compare', i, a, b);\n    if (a === undefined && b === undefined)\n      return 0;\n    else if (b === undefined)\n      return 1;\n    else if (a === undefined)\n      return -1;\n    else if (a === b)\n      continue;\n    else\n      return compareIdentifiers(a, b);\n  } while (++i);\n};\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function(release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0;\n      this.patch = 0;\n      this.minor = 0;\n      this.major++;\n      this.inc('pre', identifier);\n      break;\n    case 'preminor':\n      this.prerelease.length = 0;\n      this.patch = 0;\n      this.minor++;\n      this.inc('pre', identifier);\n      break;\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0;\n      this.inc('patch', identifier);\n      this.inc('pre', identifier);\n      break;\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0)\n        this.inc('patch', identifier);\n      this.inc('pre', identifier);\n      break;\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 || this.patch !== 0 || this.prerelease.length === 0)\n        this.major++;\n      this.minor = 0;\n      this.patch = 0;\n      this.prerelease = [];\n      break;\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0)\n        this.minor++;\n      this.patch = 0;\n      this.prerelease = [];\n      break;\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0)\n        this.patch++;\n      this.prerelease = [];\n      break;\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0)\n        this.prerelease = [0];\n      else {\n        var i = this.prerelease.length;\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++;\n            i = -2;\n          }\n        }\n        if (i === -1) // didn't increment anything\n          this.prerelease.push(0);\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1]))\n            this.prerelease = [identifier, 0];\n        } else\n          this.prerelease = [identifier, 0];\n      }\n      break;\n\n    default:\n      throw new Error('invalid increment argument: ' + release);\n  }\n  this.format();\n  this.raw = this.version;\n  return this;\n};\n\nexports.inc = inc;\nfunction inc(version, release, loose, identifier) {\n  if (typeof(loose) === 'string') {\n    identifier = loose;\n    loose = undefined;\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version;\n  } catch (er) {\n    return null;\n  }\n}\n\nexports.diff = diff;\nfunction diff(version1, version2) {\n  if (eq(version1, version2)) {\n    return null;\n  } else {\n    var v1 = parse(version1);\n    var v2 = parse(version2);\n    if (v1.prerelease.length || v2.prerelease.length) {\n      for (var key in v1) {\n        if (key === 'major' || key === 'minor' || key === 'patch') {\n          if (v1[key] !== v2[key]) {\n            return 'pre'+key;\n          }\n        }\n      }\n      return 'prerelease';\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return key;\n        }\n      }\n    }\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers;\n\nvar numeric = /^[0-9]+$/;\nfunction compareIdentifiers(a, b) {\n  var anum = numeric.test(a);\n  var bnum = numeric.test(b);\n\n  if (anum && bnum) {\n    a = +a;\n    b = +b;\n  }\n\n  return (anum && !bnum) ? -1 :\n         (bnum && !anum) ? 1 :\n         a < b ? -1 :\n         a > b ? 1 :\n         0;\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers;\nfunction rcompareIdentifiers(a, b) {\n  return compareIdentifiers(b, a);\n}\n\nexports.major = major;\nfunction major(a, loose) {\n  return new SemVer(a, loose).major;\n}\n\nexports.minor = minor;\nfunction minor(a, loose) {\n  return new SemVer(a, loose).minor;\n}\n\nexports.patch = patch;\nfunction patch(a, loose) {\n  return new SemVer(a, loose).patch;\n}\n\nexports.compare = compare;\nfunction compare(a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose));\n}\n\nexports.compareLoose = compareLoose;\nfunction compareLoose(a, b) {\n  return compare(a, b, true);\n}\n\nexports.rcompare = rcompare;\nfunction rcompare(a, b, loose) {\n  return compare(b, a, loose);\n}\n\nexports.sort = sort;\nfunction sort(list, loose) {\n  return list.sort(function(a, b) {\n    return exports.compare(a, b, loose);\n  });\n}\n\nexports.rsort = rsort;\nfunction rsort(list, loose) {\n  return list.sort(function(a, b) {\n    return exports.rcompare(a, b, loose);\n  });\n}\n\nexports.gt = gt;\nfunction gt(a, b, loose) {\n  return compare(a, b, loose) > 0;\n}\n\nexports.lt = lt;\nfunction lt(a, b, loose) {\n  return compare(a, b, loose) < 0;\n}\n\nexports.eq = eq;\nfunction eq(a, b, loose) {\n  return compare(a, b, loose) === 0;\n}\n\nexports.neq = neq;\nfunction neq(a, b, loose) {\n  return compare(a, b, loose) !== 0;\n}\n\nexports.gte = gte;\nfunction gte(a, b, loose) {\n  return compare(a, b, loose) >= 0;\n}\n\nexports.lte = lte;\nfunction lte(a, b, loose) {\n  return compare(a, b, loose) <= 0;\n}\n\nexports.cmp = cmp;\nfunction cmp(a, op, b, loose) {\n  var ret;\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') a = a.version;\n      if (typeof b === 'object') b = b.version;\n      ret = a === b;\n      break;\n    case '!==':\n      if (typeof a === 'object') a = a.version;\n      if (typeof b === 'object') b = b.version;\n      ret = a !== b;\n      break;\n    case '': case '=': case '==': ret = eq(a, b, loose); break;\n    case '!=': ret = neq(a, b, loose); break;\n    case '>': ret = gt(a, b, loose); break;\n    case '>=': ret = gte(a, b, loose); break;\n    case '<': ret = lt(a, b, loose); break;\n    case '<=': ret = lte(a, b, loose); break;\n    default: throw new TypeError('Invalid operator: ' + op);\n  }\n  return ret;\n}\n\nexports.Comparator = Comparator;\nfunction Comparator(comp, loose) {\n  if (comp instanceof Comparator) {\n    if (comp.loose === loose)\n      return comp;\n    else\n      comp = comp.value;\n  }\n\n  if (!(this instanceof Comparator))\n    return new Comparator(comp, loose);\n\n  debug('comparator', comp, loose);\n  this.loose = loose;\n  this.parse(comp);\n\n  if (this.semver === ANY)\n    this.value = '';\n  else\n    this.value = this.operator + this.semver.version;\n\n  debug('comp', this);\n}\n\nvar ANY = {};\nComparator.prototype.parse = function(comp) {\n  var r = this.loose ? re[COMPARATORLOOSE] : re[COMPARATOR];\n  var m = comp.match(r);\n\n  if (!m)\n    throw new TypeError('Invalid comparator: ' + comp);\n\n  this.operator = m[1];\n  if (this.operator === '=')\n    this.operator = '';\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2])\n    this.semver = ANY;\n  else\n    this.semver = new SemVer(m[2], this.loose);\n};\n\nComparator.prototype.toString = function() {\n  return this.value;\n};\n\nComparator.prototype.test = function(version) {\n  debug('Comparator.test', version, this.loose);\n\n  if (this.semver === ANY)\n    return true;\n\n  if (typeof version === 'string')\n    version = new SemVer(version, this.loose);\n\n  return cmp(version, this.operator, this.semver, this.loose);\n};\n\nComparator.prototype.intersects = function(comp, loose) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required');\n  }\n\n  var rangeTmp;\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, loose);\n    return satisfies(this.value, rangeTmp, loose);\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, loose);\n    return satisfies(comp.semver, rangeTmp, loose);\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>');\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<');\n  var sameSemVer = this.semver.version === comp.semver.version;\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=');\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, loose) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'));\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, loose) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'));\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan;\n};\n\n\nexports.Range = Range;\nfunction Range(range, loose) {\n  if (range instanceof Range) {\n    if (range.loose === loose) {\n      return range;\n    } else {\n      return new Range(range.raw, loose);\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, loose);\n  }\n\n  if (!(this instanceof Range))\n    return new Range(range, loose);\n\n  this.loose = loose;\n\n  // First, split based on boolean or ||\n  this.raw = range;\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function(range) {\n    return this.parseRange(range.trim());\n  }, this).filter(function(c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length;\n  });\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range);\n  }\n\n  this.format();\n}\n\nRange.prototype.format = function() {\n  this.range = this.set.map(function(comps) {\n    return comps.join(' ').trim();\n  }).join('||').trim();\n  return this.range;\n};\n\nRange.prototype.toString = function() {\n  return this.range;\n};\n\nRange.prototype.parseRange = function(range) {\n  var loose = this.loose;\n  range = range.trim();\n  debug('range', range, loose);\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE];\n  range = range.replace(hr, hyphenReplace);\n  debug('hyphen replace', range);\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace);\n  debug('comparator trim', range, re[COMPARATORTRIM]);\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace);\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace);\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ');\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR];\n  var set = range.split(' ').map(function(comp) {\n    return parseComparator(comp, loose);\n  }).join(' ').split(/\\s+/);\n  if (this.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function(comp) {\n      return !!comp.match(compRe);\n    });\n  }\n  set = set.map(function(comp) {\n    return new Comparator(comp, loose);\n  });\n\n  return set;\n};\n\nRange.prototype.intersects = function(range, loose) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required');\n  }\n\n  return this.set.some(function(thisComparators) {\n    return thisComparators.every(function(thisComparator) {\n      return range.set.some(function(rangeComparators) {\n        return rangeComparators.every(function(rangeComparator) {\n          return thisComparator.intersects(rangeComparator, loose);\n        });\n      });\n    });\n  });\n};\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators;\nfunction toComparators(range, loose) {\n  return new Range(range, loose).set.map(function(comp) {\n    return comp.map(function(c) {\n      return c.value;\n    }).join(' ').trim().split(' ');\n  });\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator(comp, loose) {\n  debug('comp', comp);\n  comp = replaceCarets(comp, loose);\n  debug('caret', comp);\n  comp = replaceTildes(comp, loose);\n  debug('tildes', comp);\n  comp = replaceXRanges(comp, loose);\n  debug('xrange', comp);\n  comp = replaceStars(comp, loose);\n  debug('stars', comp);\n  return comp;\n}\n\nfunction isX(id) {\n  return !id || id.toLowerCase() === 'x' || id === '*';\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes(comp, loose) {\n  return comp.trim().split(/\\s+/).map(function(comp) {\n    return replaceTilde(comp, loose);\n  }).join(' ');\n}\n\nfunction replaceTilde(comp, loose) {\n  var r = loose ? re[TILDELOOSE] : re[TILDE];\n  return comp.replace(r, function(_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr);\n    var ret;\n\n    if (isX(M))\n      ret = '';\n    else if (isX(m))\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    else if (isX(p))\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n    else if (pr) {\n      debug('replaceTilde pr', pr);\n      if (pr.charAt(0) !== '-')\n        pr = '-' + pr;\n      ret = '>=' + M + '.' + m + '.' + p + pr +\n            ' <' + M + '.' + (+m + 1) + '.0';\n    } else\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0';\n\n    debug('tilde return', ret);\n    return ret;\n  });\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets(comp, loose) {\n  return comp.trim().split(/\\s+/).map(function(comp) {\n    return replaceCaret(comp, loose);\n  }).join(' ');\n}\n\nfunction replaceCaret(comp, loose) {\n  debug('caret', comp, loose);\n  var r = loose ? re[CARETLOOSE] : re[CARET];\n  return comp.replace(r, function(_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr);\n    var ret;\n\n    if (isX(M))\n      ret = '';\n    else if (isX(m))\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    else if (isX(p)) {\n      if (M === '0')\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n      else\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0';\n    } else if (pr) {\n      debug('replaceCaret pr', pr);\n      if (pr.charAt(0) !== '-')\n        pr = '-' + pr;\n      if (M === '0') {\n        if (m === '0')\n          ret = '>=' + M + '.' + m + '.' + p + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1);\n        else\n          ret = '>=' + M + '.' + m + '.' + p + pr +\n                ' <' + M + '.' + (+m + 1) + '.0';\n      } else\n        ret = '>=' + M + '.' + m + '.' + p + pr +\n              ' <' + (+M + 1) + '.0.0';\n    } else {\n      debug('no pr');\n      if (M === '0') {\n        if (m === '0')\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1);\n        else\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0';\n      } else\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0';\n    }\n\n    debug('caret return', ret);\n    return ret;\n  });\n}\n\nfunction replaceXRanges(comp, loose) {\n  debug('replaceXRanges', comp, loose);\n  return comp.split(/\\s+/).map(function(comp) {\n    return replaceXRange(comp, loose);\n  }).join(' ');\n}\n\nfunction replaceXRange(comp, loose) {\n  comp = comp.trim();\n  var r = loose ? re[XRANGELOOSE] : re[XRANGE];\n  return comp.replace(r, function(ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr);\n    var xM = isX(M);\n    var xm = xM || isX(m);\n    var xp = xm || isX(p);\n    var anyX = xp;\n\n    if (gtlt === '=' && anyX)\n      gtlt = '';\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0';\n      } else {\n        // nothing is forbidden\n        ret = '*';\n      }\n    } else if (gtlt && anyX) {\n      // replace X with 0\n      if (xm)\n        m = 0;\n      if (xp)\n        p = 0;\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>=';\n        if (xm) {\n          M = +M + 1;\n          m = 0;\n          p = 0;\n        } else if (xp) {\n          m = +m + 1;\n          p = 0;\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<';\n        if (xm)\n          M = +M + 1;\n        else\n          m = +m + 1;\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p;\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n    }\n\n    debug('xRange return', ret);\n\n    return ret;\n  });\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars(comp, loose) {\n  debug('replaceStars', comp, loose);\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '');\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace($0,\n                       from, fM, fm, fp, fpr, fb,\n                       to, tM, tm, tp, tpr, tb) {\n\n  if (isX(fM))\n    from = '';\n  else if (isX(fm))\n    from = '>=' + fM + '.0.0';\n  else if (isX(fp))\n    from = '>=' + fM + '.' + fm + '.0';\n  else\n    from = '>=' + from;\n\n  if (isX(tM))\n    to = '';\n  else if (isX(tm))\n    to = '<' + (+tM + 1) + '.0.0';\n  else if (isX(tp))\n    to = '<' + tM + '.' + (+tm + 1) + '.0';\n  else if (tpr)\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr;\n  else\n    to = '<=' + to;\n\n  return (from + ' ' + to).trim();\n}\n\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function(version) {\n  if (!version)\n    return false;\n\n  if (typeof version === 'string')\n    version = new SemVer(version, this.loose);\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version))\n      return true;\n  }\n  return false;\n};\n\nfunction testSet(set, version) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version))\n      return false;\n  }\n\n  if (version.prerelease.length) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (var i = 0; i < set.length; i++) {\n      debug(set[i].semver);\n      if (set[i].semver === ANY)\n        continue;\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver;\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch)\n          return true;\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false;\n  }\n\n  return true;\n}\n\nexports.satisfies = satisfies;\nfunction satisfies(version, range, loose) {\n  try {\n    range = new Range(range, loose);\n  } catch (er) {\n    return false;\n  }\n  return range.test(version);\n}\n\nexports.maxSatisfying = maxSatisfying;\nfunction maxSatisfying(versions, range, loose) {\n  var max = null;\n  var maxSV = null;\n  try {\n    var rangeObj = new Range(range, loose);\n  } catch (er) {\n    return null;\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) { // satisfies(v, range, loose)\n      if (!max || maxSV.compare(v) === -1) { // compare(max, v, true)\n        max = v;\n        maxSV = new SemVer(max, loose);\n      }\n    }\n  })\n  return max;\n}\n\nexports.minSatisfying = minSatisfying;\nfunction minSatisfying(versions, range, loose) {\n  var min = null;\n  var minSV = null;\n  try {\n    var rangeObj = new Range(range, loose);\n  } catch (er) {\n    return null;\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) { // satisfies(v, range, loose)\n      if (!min || minSV.compare(v) === 1) { // compare(min, v, true)\n        min = v;\n        minSV = new SemVer(min, loose);\n      }\n    }\n  })\n  return min;\n}\n\nexports.validRange = validRange;\nfunction validRange(range, loose) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, loose).range || '*';\n  } catch (er) {\n    return null;\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr;\nfunction ltr(version, range, loose) {\n  return outside(version, range, '<', loose);\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr;\nfunction gtr(version, range, loose) {\n  return outside(version, range, '>', loose);\n}\n\nexports.outside = outside;\nfunction outside(version, range, hilo, loose) {\n  version = new SemVer(version, loose);\n  range = new Range(range, loose);\n\n  var gtfn, ltefn, ltfn, comp, ecomp;\n  switch (hilo) {\n    case '>':\n      gtfn = gt;\n      ltefn = lte;\n      ltfn = lt;\n      comp = '>';\n      ecomp = '>=';\n      break;\n    case '<':\n      gtfn = lt;\n      ltefn = gte;\n      ltfn = gt;\n      comp = '<';\n      ecomp = '<=';\n      break;\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"');\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, loose)) {\n    return false;\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i];\n\n    var high = null;\n    var low = null;\n\n    comparators.forEach(function(comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator;\n      low = low || comparator;\n      if (gtfn(comparator.semver, high.semver, loose)) {\n        high = comparator;\n      } else if (ltfn(comparator.semver, low.semver, loose)) {\n        low = comparator;\n      }\n    });\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false;\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false;\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexports.prerelease = prerelease;\nfunction prerelease(version, loose) {\n  var parsed = parse(version, loose);\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null;\n}\n\nexports.intersects = intersects;\nfunction intersects(r1, r2, loose) {\n  r1 = new Range(r1, loose)\n  r2 = new Range(r2, loose)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce;\nfunction coerce(version) {\n  if (version instanceof SemVer)\n    return version;\n\n  if (typeof version !== 'string')\n    return null;\n\n  var match = version.match(re[COERCE]);\n\n  if (match == null)\n    return null;\n\n  return parse((match[1] || '0') + '.' + (match[2] || '0') + '.' + (match[3] || '0')); \n}\n","'use strict'\n\nfunction isFunction (funktion) {\n  return typeof funktion === 'function'\n}\n\n// Default to complaining loudly when things don't go according to plan.\nvar logger = console.error.bind(console)\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty (obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name)\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  })\n}\n\n// Keep initialization idempotent.\nfunction shimmer (options) {\n  if (options && options.logger) {\n    if (!isFunction(options.logger)) logger(\"new logger isn't a function, not replacing\")\n    else logger = options.logger\n  }\n}\n\nfunction wrap (nodule, name, wrapper) {\n  if (!nodule || !nodule[name]) {\n    logger('no original function ' + name + ' to wrap')\n    return\n  }\n\n  if (!wrapper) {\n    logger('no wrapper function')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!isFunction(nodule[name]) || !isFunction(wrapper)) {\n    logger('original object and wrapper must be functions')\n    return\n  }\n\n  var original = nodule[name]\n  var wrapped = wrapper(original, name)\n\n  defineProperty(wrapped, '__original', original)\n  defineProperty(wrapped, '__unwrap', function () {\n    if (nodule[name] === wrapped) defineProperty(nodule, name, original)\n  })\n  defineProperty(wrapped, '__wrapped', true)\n\n  defineProperty(nodule, name, wrapped)\n  return wrapped\n}\n\nfunction massWrap (nodules, names, wrapper) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to wrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      wrap(nodule, name, wrapper)\n    })\n  })\n}\n\nfunction unwrap (nodule, name) {\n  if (!nodule || !nodule[name]) {\n    logger('no function to unwrap.')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!nodule[name].__unwrap) {\n    logger('no original to unwrap to -- has ' + name + ' already been unwrapped?')\n  } else {\n    return nodule[name].__unwrap()\n  }\n}\n\nfunction massUnwrap (nodules, names) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to unwrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      unwrap(nodule, name)\n    })\n  })\n}\n\nshimmer.wrap = wrap\nshimmer.massWrap = massWrap\nshimmer.unwrap = unwrap\nshimmer.massUnwrap = massUnwrap\n\nmodule.exports = shimmer\n","// Copyright 2012 the V8 project authors. All rights reserved.\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n//       notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n//       copyright notice, this list of conditions and the following\n//       disclaimer in the documentation and/or other materials provided\n//       with the distribution.\n//     * Neither the name of Google Inc. nor the names of its\n//       contributors may be used to endorse or promote products derived\n//       from this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nfunction FormatErrorString(error) {\n  try {\n    return Error.prototype.toString.call(error);\n  } catch (e) {\n    try {\n      return \"<error: \" + e + \">\";\n    } catch (ee) {\n      return \"<error>\";\n    }\n  }\n}\n\nmodule.exports = function FormatStackTrace(error, frames) {\n  var lines = [];\n  lines.push(FormatErrorString(error));\n  for (var i = 0; i < frames.length; i++) {\n    var frame = frames[i];\n    var line;\n    try {\n      line = frame.toString();\n    } catch (e) {\n      try {\n        line = \"<error: \" + e + \">\";\n      } catch (ee) {\n        // Any code that reaches this point is seriously nasty!\n        line = \"<error>\";\n      }\n    }\n    lines.push(\"    at \" + line);\n  }\n  return lines.join(\"\\n\");\n};\n","// If a another copy (same version or not) of stack-chain exists it will result\n// in wrong stack traces (most likely dublicate callSites).\nif (global._stackChain) {\n  // In case the version match, we can simply return the first initialized copy\n  if (global._stackChain.version === require('./package.json').version) {\n    module.exports = global._stackChain;\n  }\n  // The version don't match, this is really bad. Lets just throw\n  else {\n    throw new Error('Conflicting version of stack-chain found');\n  }\n}\n// Yay, no other stack-chain copy exists, yet :/\nelse {\n  module.exports = global._stackChain = require('./stack-chain');\n}\n","\n// use a already existing formater or fallback to the default v8 formater\nvar defaultFormater = require('./format.js');\n\n// public define API\nfunction stackChain() {\n  this.extend = new TraceModifier();\n  this.filter = new TraceModifier();\n  this.format = new StackFormater();\n  this.version = require('./package.json').version;\n}\n\n\nvar SHORTCIRCUIT_CALLSITE = false;\nstackChain.prototype.callSite = function collectCallSites(options) {\n  if (!options) options = {};\n\n  // Get CallSites\n  SHORTCIRCUIT_CALLSITE = true;\n  var obj = {};\n  Error.captureStackTrace(obj, collectCallSites);\n  var callSites = obj.stack;\n  SHORTCIRCUIT_CALLSITE = false;\n\n  // Slice\n  callSites = callSites.slice(options.slice || 0);\n\n  // Modify CallSites\n  if (options.extend) callSites = this.extend._modify(obj, callSites);\n  if (options.filter) callSites = this.filter._modify(obj, callSites);\n\n  // Done\n  return callSites;\n};\n\nvar chain = new stackChain();\n\nfunction TraceModifier() {\n  this._modifiers = [];\n}\n\nTraceModifier.prototype._modify = function (error, frames) {\n  for (var i = 0, l = this._modifiers.length; i < l; i++) {\n    frames = this._modifiers[i](error, frames);\n  }\n\n  return frames;\n};\n\nTraceModifier.prototype.attach = function (modifier) {\n  this._modifiers.push(modifier);\n};\n\nTraceModifier.prototype.deattach = function (modifier) {\n  var index = this._modifiers.indexOf(modifier);\n\n  if (index === -1) return false;\n\n  this._modifiers.splice(index, 1);\n  return true;\n};\n\nfunction StackFormater() {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n}\n\nStackFormater.prototype.replace = function (formater) {\n  if (formater) {\n    this._formater = formater;\n  } else {\n    this.restore();\n  }\n};\n\nStackFormater.prototype.restore  = function () {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n};\n\nStackFormater.prototype._backup = function () {\n  this._previous = this._formater;\n};\n\nStackFormater.prototype._roolback = function () {\n  if (this._previous === defaultFormater) {\n    this.replace(undefined);\n  } else {\n    this.replace(this._previous);\n  }\n\n  this._previous = undefined;\n};\n\n\n//\n// Set Error.prepareStackTrace thus allowing stack-chain\n// to take control of the Error().stack formating.\n//\n\n// If there already is a custom stack formater, then set\n// that as the stack-chain formater.\nif (Error.prepareStackTrace) {\n    chain.format.replace(Error.prepareStackTrace);\n}\n\nvar SHORTCIRCUIT_FORMATER = false;\nfunction prepareStackTrace(error, originalFrames) {\n  if (SHORTCIRCUIT_CALLSITE) return originalFrames;\n  if (SHORTCIRCUIT_FORMATER) return defaultFormater(error, originalFrames);\n\n  // Make a loss copy of originalFrames\n  var frames = originalFrames.concat();\n\n  // extend frames\n  frames = chain.extend._modify(error, frames);\n\n  // filter frames\n  frames = chain.filter._modify(error, frames);\n\n  // reduce frames to match Error.stackTraceLimit\n  frames = frames.slice(0, Error.stackTraceLimit);\n\n  // Set the callSite property\n  // But only if it hasn't been explicitly set, otherwise\n  // error.stack would have unintended side effects. Check also for\n  // non-extensible/sealed objects, such as those from Google's Closure Library\n  if (Object.isExtensible(error) &&\n      (Object.getOwnPropertyDescriptor(error, \"callSite\") === undefined)) {\n    error.callSite = {\n      original: originalFrames,\n      mutated: frames\n    };\n  }\n\n  // format frames\n  SHORTCIRCUIT_FORMATER = true;\n  var format = chain.format._formater(error, frames);\n  SHORTCIRCUIT_FORMATER = false;\n\n  return format;\n}\n\n// Replace the v8 stack trace creator\nObject.defineProperty(Error, 'prepareStackTrace', {\n  'get': function () {\n    return prepareStackTrace;\n  },\n\n  'set': function (formater) {\n    // If formater is prepareStackTrace it means that someone ran\n    // var old = Error.prepareStackTrace;\n    // Error.prepareStackTrace = custom\n    // new Error().stack\n    // Error.prepareStackTrace = old;\n    // The effect of this, should be that the old behaviour is restored.\n    if (formater === prepareStackTrace) {\n      chain.format._roolback();\n    }\n    // Error.prepareStackTrace was set, this means that someone is\n    // trying to take control of the Error().stack format. Make\n    // them belive they succeeded by setting them up as the stack-chain\n    // formater.\n    else {\n      chain.format._backup();\n      chain.format.replace(formater);\n    }\n  }\n});\n\n//\n// Manage call site storeage\n//\nfunction callSiteGetter() {\n  // calculate call site object\n  this.stack;\n\n  // return call site object\n  return this.callSite;\n}\n\nObject.defineProperty(Error.prototype, 'callSite', {\n  'get': callSiteGetter,\n\n  'set': function (frames) {\n    // In case callSite was set before [[getter]], just set\n    // the value\n    Object.defineProperty(this, 'callSite', {\n        value: frames,\n        writable: true,\n        configurable: true\n    });\n  },\n\n  configurable: true\n});\n\nmodule.exports = chain;\n","import * as vscode from 'vscode';\nimport CommandWrapper from '../command-wrapper';\nimport {Command} from '../commands/command';\nimport {Logger} from '../types/logger';\n\ntype UriParser = (uri: string) => vscode.Uri;\n\nexport type CommandType = 'TEXT_EDITOR' | 'GENERAL';\n\nexport interface CommandItem {\n    name: string;\n    type: CommandType;\n    command: Command;\n}\n\nexport default class CommandAdaptor {\n    constructor(private readonly commands: typeof vscode.commands,\n                private readonly parseUri: UriParser,\n                private readonly logger: Logger) {}\n\n    async executeCommand(name: string, uri1: string, uri2: string, title: string): Promise<{} | undefined> {\n        return this.commands.executeCommand(name, this.parseUri(uri1), this.parseUri(uri2), title);\n    }\n\n    registerCommand(cmd: CommandItem): vscode.Disposable {\n        const registerer = this.getCommandRegisterer(cmd.type);\n        const command = new CommandWrapper(cmd.name, cmd.command, this.logger);\n        return registerer(cmd.name, command.execute, command);\n    }\n\n    private getCommandRegisterer(commandType: CommandType) {\n        return commandType === 'TEXT_EDITOR'\n            ? this.commands.registerTextEditorCommand\n            : this.commands.registerCommand;\n    }\n}\n","import {Selection, TextEditor as VsTextEditor, ViewColumn} from 'vscode';\nimport {basename} from 'path';\nimport {LineRange} from '../types/selection-info';\n\nexport default class TextEditor {\n    constructor(private readonly vsEditor: VsTextEditor) {}\n\n    get fileName(): string {\n        return basename(this.vsEditor.document.fileName);\n    }\n\n    get viewColumn(): ViewColumn {\n        return this.vsEditor.viewColumn!;\n    }\n\n    get selectedText(): string {\n        const validSelections = this.collectNonEmptySelections(this.vsEditor.selections);\n        return this.extractText(validSelections);\n    }\n\n    get selectedLineRanges(): LineRange[] {\n        const validSelections = this.collectNonEmptySelections(this.vsEditor.selections);\n        return this.extractLineRanges(validSelections);\n    }\n\n    private collectNonEmptySelections(selections: Selection[]): Selection[] {\n        return selections.filter(s => !s.isEmpty).sort((s1, s2) => {\n            const lineComparison = s1.start.line - s2.start.line;\n            return lineComparison !== 0\n                ? lineComparison\n                : s1.start.character - s2.start.character;\n        });\n    }\n\n    private extractText(selections: Selection[]): string {\n        return selections.length === 0\n            ? this.extractTextFromSelection()\n            : selections.map(this.extractTextFromSelection).join('\\n');\n    }\n\n    private extractTextFromSelection = (selection?: Selection) =>\n        this.vsEditor.document.getText(selection)\n\n    private extractLineRanges(selections: Selection[]): LineRange[] {\n        return selections.map(selection => ({\n            start: selection.start.line,\n            end: selection.end.line\n        }));\n    }\n}\n","import * as vscode from 'vscode';\nimport TextEditor from './text-editor';\nimport {QuickPickItem, TextEditor as VsTextEditor} from 'vscode';\n\nexport default class WindowAdaptor {\n    constructor(private readonly window: typeof vscode.window) {}\n\n    get visibleTextEditors(): TextEditor[] {\n        return this.window.visibleTextEditors.map((editor: VsTextEditor) => new TextEditor(editor));\n    }\n\n    async showQuickPick<T extends QuickPickItem>(items: T[]): Promise<T[] | undefined> {\n        // @ts-ignore\n        return this.window.showQuickPick(items, {canPickMany: true});\n    }\n\n    async showInformationMessage(message: string): Promise<string | undefined> {\n        return this.window.showInformationMessage(message);\n    }\n}\n","import {EXTENSION_ID} from '../const';\nimport * as vscode from 'vscode';\nimport ContentProvider from '../content-provider';\n\nexport default class WorkspaceAdaptor {\n    constructor(private readonly workspace: typeof vscode.workspace) {}\n\n    get<T>(configName: string): T {\n        const extensionConfig = this.workspace.getConfiguration(EXTENSION_ID);\n        return extensionConfig.get(configName) as T;\n    }\n\n    registerTextDocumentContentProvider(EXTENSION_SCHEME: string, contentProvider: ContentProvider): vscode.Disposable {\n        return this.workspace.registerTextDocumentContentProvider(EXTENSION_SCHEME, contentProvider);\n    }\n}\n","import Bootstrapper from './bootstrapper';\nimport CommandFactory from './command-factory';\nimport WorkspaceAdaptor from './adaptors/workspace';\nimport ContentProvider from './content-provider';\nimport NormalisationRuleStore from './normalisation-rule-store';\nimport SelectionInfoRegistry from './selection-info-registry';\nimport * as vscode from 'vscode';\nimport CommandAdaptor from './adaptors/command';\nimport WindowAdaptor from './adaptors/window';\nimport {NullVsTelemetryReporter, VsTelemetryReporterCreator} from './telemetry-reporter';\nimport VsTelemetryReporter from 'vscode-extension-telemetry';\n\nexport default class BootstrapperFactory {\n    private workspaceAdaptor?: WorkspaceAdaptor;\n\n    create() {\n        const logger = console;\n        const selectionInfoRegistry = new SelectionInfoRegistry();\n        const workspaceAdaptor = this.getWorkspaceAdaptor();\n        const commandAdaptor = new CommandAdaptor(vscode.commands, vscode.Uri.parse, logger);\n        const normalisationRuleStore = new NormalisationRuleStore(workspaceAdaptor);\n        const commandFactory = new CommandFactory(\n            selectionInfoRegistry,\n            normalisationRuleStore,\n            commandAdaptor,\n            new WindowAdaptor(vscode.window),\n            vscode.env.clipboard,\n            () => new Date()\n        );\n        const contentProvider = new ContentProvider(selectionInfoRegistry, normalisationRuleStore);\n        return new Bootstrapper(commandFactory, contentProvider, workspaceAdaptor, commandAdaptor);\n    }\n\n    private getWorkspaceAdaptor() {\n        this.workspaceAdaptor = this.workspaceAdaptor || new WorkspaceAdaptor(vscode.workspace);\n        return this.workspaceAdaptor;\n    }\n\n    getVsTelemetryReporterCreator(): VsTelemetryReporterCreator {\n        const enableTelemetry = this.getWorkspaceAdaptor().get<boolean>('enableTelemetry');\n        if (enableTelemetry) {\n            return (id: string, version: string, telemetryKey: string) =>\n                new VsTelemetryReporter(id, version, telemetryKey);\n        } else {\n            return () => new NullVsTelemetryReporter();\n        }\n    }\n}\n","import CommandFactory from './command-factory';\nimport ContentProvider from './content-provider';\nimport {EXTENSION_NAMESPACE, EXTENSION_SCHEME} from './const';\nimport {ExecutionContextLike} from './types/vscode';\nimport WorkspaceAdaptor from './adaptors/workspace';\nimport CommandAdaptor, {CommandItem} from './adaptors/command';\n\nexport default class Bootstrapper {\n    constructor(private readonly commandFactory: CommandFactory,\n                private readonly contentProvider: ContentProvider,\n                private readonly workspaceAdaptor: WorkspaceAdaptor,\n                private readonly commandAdaptor: CommandAdaptor) {}\n\n    initiate(context: ExecutionContextLike) {\n        this.registerProviders(context);\n        this.registerCommands(context);\n    }\n\n    private registerProviders(context: ExecutionContextLike) {\n        const disposable = this.workspaceAdaptor.registerTextDocumentContentProvider(\n            EXTENSION_SCHEME,\n            this.contentProvider\n        );\n        context.subscriptions.push(disposable);\n    }\n\n    private registerCommands(context: ExecutionContextLike) {\n        this.commandList.forEach(cmd => {\n            const disposable = this.commandAdaptor.registerCommand(cmd);\n            context.subscriptions.push(disposable);\n        });\n    }\n\n    private get commandList(): CommandItem[] {\n        return [\n            {\n                name: `${EXTENSION_NAMESPACE}.diffVisibleEditors`,\n                type: 'GENERAL',\n                command: this.commandFactory.createCompareVisibleEditorsCommand()\n            },\n            {\n                name: `${EXTENSION_NAMESPACE}.markSection1`,\n                type: 'TEXT_EDITOR',\n                command: this.commandFactory.crateSaveText1Command()\n            },\n            {\n                name: `${EXTENSION_NAMESPACE}.markSection2AndTakeDiff`,\n                type: 'TEXT_EDITOR',\n                command: this.commandFactory.createCompareSelectionWithText1Command()\n            },\n            {\n                name: `${EXTENSION_NAMESPACE}.diffSelectionWithClipboard`,\n                type: 'TEXT_EDITOR',\n                command: this.commandFactory.createCompareSelectionWithClipboardCommand()\n            },\n            {\n                name: `${EXTENSION_NAMESPACE}.togglePreComparisonTextNormalizationRules`,\n                type: 'GENERAL',\n                command: this.commandFactory.createToggleNormalisationRulesCommand()\n            }\n        ];\n    }\n}\n","import SaveText1Command from './commands/save-text-1';\nimport CompareSelectionWithText1Command from './commands/compare-selection-with-text1';\nimport CompareSelectionWithClipboardCommand from './commands/compare-selection-with-clipboard';\nimport CompareVisibleEditorsCommand from './commands/compare-visible-editors';\nimport DiffPresenter from './diff-presenter';\nimport ToggleNormalisationRulesCommand from './commands/toggle-normalisation-rules';\nimport NormalisationRuleStore from './normalisation-rule-store';\nimport SelectionInfoRegistry from './selection-info-registry';\nimport CommandAdaptor from './adaptors/command';\nimport WindowAdaptor from './adaptors/window';\nimport {Command} from './commands/command';\nimport * as vscode from 'vscode';\n\nexport default class CommandFactory {\n    private diffPresenter?: DiffPresenter;\n\n    constructor(private readonly selectionInfoRegistry: SelectionInfoRegistry,\n                private readonly normalisationRuleStore: NormalisationRuleStore,\n                private readonly commandAdaptor: CommandAdaptor,\n                private readonly windowAdaptor: WindowAdaptor,\n                private readonly clipboard: typeof vscode.env.clipboard,\n                private readonly getCurrentDate: () => Date) {\n    }\n\n    crateSaveText1Command(): Command {\n        return new SaveText1Command(this.selectionInfoRegistry);\n    }\n\n    createCompareSelectionWithText1Command(): Command {\n        return new CompareSelectionWithText1Command(\n            this.getDiffPresenter(),\n            this.selectionInfoRegistry\n        );\n    }\n\n    createCompareSelectionWithClipboardCommand(): Command {\n        return new CompareSelectionWithClipboardCommand(\n            this.getDiffPresenter(),\n            this.selectionInfoRegistry,\n            this.clipboard\n        );\n    }\n\n    createCompareVisibleEditorsCommand(): Command {\n        return new CompareVisibleEditorsCommand(\n            this.getDiffPresenter(),\n            this.selectionInfoRegistry,\n            this.windowAdaptor\n        );\n    }\n\n    createToggleNormalisationRulesCommand(): Command {\n        return new ToggleNormalisationRulesCommand(\n            this.normalisationRuleStore,\n            this.windowAdaptor\n        );\n    }\n\n    private getDiffPresenter(): DiffPresenter {\n        this.diffPresenter = this.diffPresenter || this.createDiffPresenter();\n        return this.diffPresenter;\n    }\n\n    private createDiffPresenter(): DiffPresenter {\n        return new DiffPresenter(\n            this.selectionInfoRegistry,\n            this.normalisationRuleStore,\n            this.commandAdaptor,\n            this.getCurrentDate\n        );\n    }\n}\n","import {Command} from './commands/command';\nimport {Logger} from './types/logger';\nimport * as vscode from 'vscode';\nimport TextEditor from './adaptors/text-editor';\nimport {TelemetryReporterLocator} from './telemetry-reporter';\nimport {TelemetryReporter} from './telemetry-reporter';\n\nexport default class CommandWrapper {\n    private readonly telemetryReporter: TelemetryReporter;\n\n    constructor(private readonly name: string,\n                private readonly command: Command,\n                private readonly logger: Logger) {\n        this.name = name;\n        this.command = command;\n        this.telemetryReporter = TelemetryReporterLocator.getReporter();\n        this.logger = logger;\n    }\n\n    async execute(editor?: vscode.TextEditor) {\n        try {\n            this.telemetryReporter.logCommandTrigger(this.name);\n            return await this.command.execute(editor && new TextEditor(editor));\n        } catch (e) {\n            this.handleError(e);\n        }\n    }\n\n    private handleError(e: Error) {\n        this.telemetryReporter.logCommandErrored(this.name);\n        this.logger.error(e.stack);\n    }\n}\n","import DiffPresenter from '../diff-presenter';\nimport SelectionInfoRegistry from '../selection-info-registry';\nimport * as vscode from 'vscode';\nimport {TextKey} from '../const';\nimport {Command} from './command';\nimport TextEditor from '../adaptors/text-editor';\n\nexport default class CompareSelectionWithClipboardCommand implements Command {\n    constructor(private readonly diffPresenter: DiffPresenter,\n                private readonly selectionInfoRegistry: SelectionInfoRegistry,\n                private readonly clipboard: typeof vscode.env.clipboard) {}\n\n    async execute(editor: TextEditor) {\n        const text = await this.clipboard.readText();\n        this.selectionInfoRegistry.set(TextKey.CLIPBOARD, {\n            text,\n            fileName: 'Clipboard',\n            lineRanges: []\n        });\n        this.selectionInfoRegistry.set(TextKey.REGISTER2, {\n            text: editor.selectedText,\n            fileName: editor.fileName,\n            lineRanges: editor.selectedLineRanges\n        });\n\n        await this.diffPresenter.takeDiff(TextKey.CLIPBOARD, TextKey.REGISTER2);\n    }\n\n}\n","import DiffPresenter from '../diff-presenter';\nimport SelectionInfoRegistry from '../selection-info-registry';\nimport {TextKey} from '../const';\nimport {Command} from './command';\nimport TextEditor from '../adaptors/text-editor';\n\nexport default class CompareSelectionWithText1Command implements Command {\n    constructor(private readonly diffPresenter: DiffPresenter,\n                private readonly selectionInfoRegistry: SelectionInfoRegistry) {}\n\n    async execute(editor: TextEditor) {\n        const textInfo = {\n            text: editor.selectedText,\n            fileName: editor.fileName,\n            lineRanges: editor.selectedLineRanges\n        };\n        this.selectionInfoRegistry.set(TextKey.REGISTER2, textInfo);\n\n        await 'HACK'; // HACK: To avoid TextEditor has been disposed error\n        await this.diffPresenter.takeDiff(TextKey.REGISTER1, TextKey.REGISTER2);\n    }\n\n}\n","import DiffPresenter from '../diff-presenter';\nimport SelectionInfoRegistry from '../selection-info-registry';\nimport {TextKey} from '../const';\nimport {SelectionInfo} from '../types/selection-info';\nimport {Command} from './command';\nimport WindowAdaptor from '../adaptors/window';\n\nexport default class CompareVisibleEditorsCommand implements Command {\n    constructor(private readonly diffPresenter: DiffPresenter,\n                private readonly selectionInfoRegistry: SelectionInfoRegistry,\n                private readonly windowAdaptor: WindowAdaptor) {}\n\n    async execute() {\n        const editors = this.windowAdaptor.visibleTextEditors;\n        if (editors.length !== 2) {\n            this.windowAdaptor.showInformationMessage('Please first open 2 documents to compare.');\n            return;\n        }\n\n        const textInfos = editors.map(editor => ({\n            text: editor.selectedText,\n            fileName: editor.fileName,\n            lineRanges: editor.selectedLineRanges\n        }));\n        this.registerTextInfo(\n            textInfos,\n            editors[0].viewColumn > editors[1].viewColumn\n        );\n\n        await 'HACK'; // HACK: Avoid \"TextEditor has been disposed\" error\n        await this.diffPresenter.takeDiff(TextKey.VISIBLE_EDITOR1, TextKey.VISIBLE_EDITOR2);\n    }\n\n    private registerTextInfo(textInfos: SelectionInfo[], isReverseOrder: boolean) {\n        const textInfo1 = textInfos[isReverseOrder ? 1 : 0];\n        const textInfo2 = textInfos[isReverseOrder ? 0 : 1];\n        this.selectionInfoRegistry.set(TextKey.VISIBLE_EDITOR1, textInfo1);\n        this.selectionInfoRegistry.set(TextKey.VISIBLE_EDITOR2, textInfo2);\n    }\n\n}\n","import SelectionInfoRegistry from '../selection-info-registry';\nimport {TextKey} from '../const';\nimport {Command} from './command';\nimport TextEditor from '../adaptors/text-editor';\n\nexport default class SaveText1Command implements Command {\n    constructor(private readonly selectionInfoRegistry: SelectionInfoRegistry) {}\n\n    execute(editor: TextEditor) {\n        const textInfo = {\n            text: editor.selectedText,\n            fileName: editor.fileName,\n            lineRanges: editor.selectedLineRanges\n        };\n        this.selectionInfoRegistry.set(TextKey.REGISTER1, textInfo);\n    }\n\n}\n","import NormalisationRulePicker from '../normalisation-rule-picker';\nimport NormalisationRuleStore from '../normalisation-rule-store';\nimport {Command} from './command';\nimport WindowAdaptor from '../adaptors/window';\n\nexport default class ToggleNormalisationRulesCommand implements Command {\n    private readonly normalisationRulePicker: NormalisationRulePicker;\n\n    constructor(private readonly normalisationRuleStore: NormalisationRuleStore,\n                private readonly windowAdaptor: WindowAdaptor) {\n        this.normalisationRulePicker = new NormalisationRulePicker(windowAdaptor);\n    }\n\n    async execute() {\n        const rules = this.normalisationRuleStore.getAllRules();\n        if (rules.length > 0) {\n            const newRules = await this.normalisationRulePicker.show(rules);\n            this.normalisationRuleStore.specifyActiveRules(newRules);\n        } else {\n            await this.windowAdaptor.showInformationMessage(\n                'Please set `partialDiff.preComparisonTextNormalizationRules` first'\n            );\n        }\n    }\n\n}\n","export const EXTENSION_ID = 'partialDiff';\n\nexport const EXTENSION_NAMESPACE = 'extension.partialDiff';\n\nexport const EXTENSION_SCHEME = 'partialdiff';\n\nexport const TextKey = {\n    REGISTER1: 'reg1',\n    REGISTER2: 'reg2',\n    CLIPBOARD: 'clipboard',\n    VISIBLE_EDITOR1: 'visible1',\n    VISIBLE_EDITOR2: 'visible2'\n};\n","import TextProcessRuleApplier from './text-process-rule-applier';\nimport SelectionInfoRegistry from './selection-info-registry';\nimport {extractTextKey} from './utils/text-resource';\nimport NormalisationRuleStore from './normalisation-rule-store';\nimport * as vscode from 'vscode';\nimport {TextDocumentContentProvider} from 'vscode';\n\nexport default class ContentProvider implements TextDocumentContentProvider {\n    private readonly textProcessRuleApplier: TextProcessRuleApplier;\n\n    constructor(private readonly selectionInfoRegistry: SelectionInfoRegistry,\n                normalisationRuleStore: NormalisationRuleStore) {\n        this.selectionInfoRegistry = selectionInfoRegistry;\n        this.textProcessRuleApplier = new TextProcessRuleApplier(normalisationRuleStore);\n    }\n\n    provideTextDocumentContent(uri: vscode.Uri): string {\n        const textKey = extractTextKey(uri);\n        const registeredText = (\n            this.selectionInfoRegistry.get(textKey) || {text: ''}\n        ).text;\n        return this.textProcessRuleApplier.applyTo(registeredText);\n    }\n}\n","import NormalisationRuleStore from './normalisation-rule-store';\nimport SelectionInfoRegistry from './selection-info-registry';\nimport {makeUriString} from './utils/text-resource';\nimport CommandAdaptor from './adaptors/command';\nimport DiffTitleBuilder from './diff-title-builder';\n\nexport default class DiffPresenter {\n    private readonly diffTitleBuilder: DiffTitleBuilder;\n\n    constructor(selectionInfoRegistry: SelectionInfoRegistry,\n                normalisationRuleStore: NormalisationRuleStore,\n                private readonly commandAdaptor: CommandAdaptor,\n                private readonly getCurrentDate: () => Date) {\n        this.getCurrentDate = getCurrentDate;\n        this.diffTitleBuilder = new DiffTitleBuilder(normalisationRuleStore, selectionInfoRegistry);\n        this.commandAdaptor = commandAdaptor;\n    }\n\n    takeDiff(textKey1: string, textKey2: string): Promise<{} | undefined> {\n        const getUri = (textKey: string) => makeUriString(textKey, this.getCurrentDate());\n        const title = this.diffTitleBuilder.build(textKey1, textKey2);\n        return this.commandAdaptor.executeCommand('vscode.diff', getUri(textKey1), getUri(textKey2), title);\n    }\n}\n","import NormalisationRuleStore from './normalisation-rule-store';\nimport SelectionInfoRegistry from './selection-info-registry';\nimport TextTitleBuilder from './text-title-builder';\n\nconst DiffModeSymbols = {\n    NORMALISED: '\\u007e',\n    AS_IS: '\\u2194'\n};\n\nexport default class DiffTitleBuilder {\n    private textTitleBuilder: TextTitleBuilder;\n\n    constructor(private readonly normalisationRuleStore: NormalisationRuleStore,\n                private readonly selectionInfoRegistry: SelectionInfoRegistry) {\n        this.textTitleBuilder = new TextTitleBuilder();\n    }\n\n    build(textKey1: string, textKey2: string): string {\n        const title1 = this.buildTextTitle(textKey1);\n        const title2 = this.buildTextTitle(textKey2);\n        const comparisonSymbol = this.normalisationRuleStore.hasActiveRules\n            ? DiffModeSymbols.NORMALISED\n            : DiffModeSymbols.AS_IS;\n        return `${title1} ${comparisonSymbol} ${title2}`;\n    }\n\n    private buildTextTitle(textKey: string): string {\n        const textInfo = this.selectionInfoRegistry.get(textKey);\n        return this.textTitleBuilder.build(textInfo);\n    }\n}\n","import {QuickPickItem} from 'vscode';\nimport {LoadedNormalisationRule} from './types/normalisation-rule';\nimport WindowAdaptor from './adaptors/window';\n\ninterface NormalisationRuleQuickPickItem extends QuickPickItem {\n    picked: boolean;\n    ruleIndex: number;\n}\n\nexport default class NormalisationRulePicker {\n    constructor(private readonly windowAdaptor: WindowAdaptor) {}\n\n    async show(rules: LoadedNormalisationRule[]): Promise<number[]> {\n        const items = this.convertToQuickPickItems(rules);\n        const userSelection = await this.windowAdaptor.showQuickPick(items);\n        const activeItems = userSelection || items.filter(item => item.picked);\n        return this.convertToRules(activeItems);\n    }\n\n    private convertToQuickPickItems(rules: LoadedNormalisationRule[]): NormalisationRuleQuickPickItem[] {\n        return rules.map((rule, index) => ({\n            label: rule.name || '(no \"name\" set for this rule)',\n            picked: rule.active,\n            ruleIndex: index,\n            description: ''\n        }));\n    }\n\n    private convertToRules(pickedItems: NormalisationRuleQuickPickItem[]) {\n        return pickedItems.map(pickedItem => pickedItem.ruleIndex);\n    }\n}\n","import WorkspaceAdaptor from './adaptors/workspace';\nimport {LoadedNormalisationRule, SavedNormalisationRule} from './types/normalisation-rule';\nconst isEqual = require('lodash.isequal');\nconst omit = require('lodash.omit');\n\nconst clone = (value: any) => JSON.parse(JSON.stringify(value));\n\nexport default class NormalisationRuleStore {\n    private baseRules?: SavedNormalisationRule[];\n    private rules?: LoadedNormalisationRule[];\n\n    constructor(private readonly workspace: WorkspaceAdaptor) {\n        this.setupRules(this.workspace.get<SavedNormalisationRule[]>('preComparisonTextNormalizationRules'));\n    }\n\n    private setupRules(rules: SavedNormalisationRule[]): void {\n        this.baseRules = clone(rules);\n        this.rules = this.resetRuleStatus(this.baseRules!);\n    }\n\n    private resetRuleStatus(rules: SavedNormalisationRule[]): LoadedNormalisationRule[] {\n        return rules.map(rule =>\n            Object.assign({}, omit(rule, ['enableOnStart']), {\n                active: rule.enableOnStart !== false\n            })\n        );\n    }\n\n    getAllRules(): LoadedNormalisationRule[] {\n        const newBaseRules = this.workspace.get<SavedNormalisationRule[]>('preComparisonTextNormalizationRules');\n        if (!isEqual(newBaseRules, this.baseRules)) {\n            this.setupRules(newBaseRules);\n        }\n        return this.rules!;\n    }\n\n    get activeRules(): LoadedNormalisationRule[] {\n        return this.getAllRules().filter(rule => rule.active);\n    }\n\n    get hasActiveRules(): boolean {\n        return this.activeRules.length > 0;\n    }\n\n    specifyActiveRules(ruleIndices: number[]): void {\n        this.rules = this.rules!.map((rule, index) =>\n            Object.assign({}, rule, {active: ruleIndices.includes(index)})\n        );\n    }\n}\n","import {ObjectMap} from './utils/collections';\nimport {SelectionInfo} from './types/selection-info';\n\nexport default class SelectionInfoRegistry {\n    private readonly data: ObjectMap<SelectionInfo>;\n\n    constructor() {\n        this.data = Object.create(null);\n    }\n\n    set(key: string, textInfo: SelectionInfo): void {\n        this.data[key] = {\n            text: textInfo.text,\n            fileName: textInfo.fileName,\n            lineRanges: textInfo.lineRanges || []\n        };\n    }\n\n    get(key: string): SelectionInfo {\n        return this.data[key];\n    }\n}\n","import {ObjectMap} from './utils/collections';\nimport * as fs from 'fs';\n\nexport interface VsTelemetryReporterLike {\n    sendTelemetryEvent(eventName: string, properties?: ObjectMap<string>, measurements?: ObjectMap<number>): void;\n    dispose(): Promise<any>;\n}\n\nexport class TelemetryReporterLocator {\n    private static telemetryReporter: TelemetryReporter;\n\n    static load(packageConfPath: string, reporterCreator: VsTelemetryReporterCreator): void {\n        const packageInfo = JSON.parse(fs.readFileSync(packageConfPath, 'utf8'));\n        const extensionId = `${packageInfo.publisher}.${packageInfo.name}`;\n        const extensionVersion = packageInfo.version;\n        const key = packageInfo.telemetryKey;\n        const vsTelemetryReporter = reporterCreator(extensionId, extensionVersion, key);\n        TelemetryReporterLocator.telemetryReporter = new TelemetryReporter(vsTelemetryReporter);\n    }\n\n    static getReporter(): TelemetryReporter {\n        return TelemetryReporterLocator.telemetryReporter;\n    }\n}\n\nexport class TelemetryReporter {\n    constructor(private readonly reporter: VsTelemetryReporterLike) {}\n\n    logCommandTrigger(commandName: string): void {\n        this.reporter.sendTelemetryEvent('commandTriggered', {commandName});\n    }\n\n    logCommandErrored(commandName: string): void {\n        this.reporter.sendTelemetryEvent('commandErrored', {commandName});\n    }\n\n    dispose(): Promise<any> {\n        return this.reporter.dispose();\n    }\n}\n\nexport type VsTelemetryReporterCreator = (extensionId: string, extensionVersion: string, telemetryKey: string) => VsTelemetryReporterLike;\n\nexport class NullVsTelemetryReporter implements VsTelemetryReporterLike {\n    sendTelemetryEvent(_eventName: string, _properties?: ObjectMap<string>, _measurements?: ObjectMap<number>): void {\n    }\n\n    dispose(): Promise<any> {\n        return Promise.resolve();\n    }\n}\n","import NormalisationRuleStore from './normalisation-rule-store';\nimport {LoadedNormalisationRule} from './types/normalisation-rule';\n\nexport default class TextProcessRuleApplier {\n    constructor(private readonly normalisationRuleStore: NormalisationRuleStore) {}\n\n    applyTo(text: string): string {\n        const rules = this.normalisationRuleStore.activeRules;\n        return rules.length !== 0 ? this.applyRulesToText(rules, text) : text;\n    }\n\n    private applyRulesToText(rules: LoadedNormalisationRule[], text: string): string {\n        return rules.reduce(\n            (newText, rule) => this.applyRuleToText(rule, newText),\n            text\n        );\n    }\n\n    private applyRuleToText(rule: LoadedNormalisationRule, text: string): string {\n        const pattern = new RegExp(rule.match, 'g');\n\n        if (typeof rule.replaceWith === 'string') {\n            return text.replace(pattern, rule.replaceWith);\n        }\n\n        return text.replace(pattern, matched => {\n            // Type guard above is not working, so even though this `if` is\n            // unnecessary logic, I need it to make typescript happy\n            if (typeof rule.replaceWith === 'string') return matched;\n\n            switch (rule.replaceWith.letterCase) {\n                case 'lower':\n                    return matched.toLowerCase();\n                case 'upper':\n                    return matched.toUpperCase();\n                default:\n                    return matched;\n            }\n        });\n    }\n}\n","import {LineRange, SelectionInfo} from './types/selection-info';\n\nexport default class TextTitleBuilder {\n\n    build(textInfo: SelectionInfo | null): string {\n        if (!textInfo) return 'N/A';\n\n        const suffix = this.lineRangesSuffix(textInfo.lineRanges);\n        return `${textInfo.fileName}${suffix}`;\n    }\n\n    private lineRangesSuffix(lineRanges: LineRange[]): string {\n        return lineRanges.length !== 0\n            ? ` (${lineRanges.map(this.lineRangeLabel)})`\n            : '';\n    }\n\n    private lineRangeLabel(lineRange: LineRange): string {\n        const isOneLine = lineRange.start === lineRange.end;\n        return isOneLine\n            ? `l.${lineRange.start + 1}`\n            : `ll.${lineRange.start + 1}-${lineRange.end + 1}`;\n    }\n}\n","import * as vscode from 'vscode';\nimport {EXTENSION_SCHEME} from '../const';\n\nexport const makeUriString = (textKey: string, timestamp: Date): string =>\n    `${EXTENSION_SCHEME}:text/${textKey}?_ts=${timestamp.getTime()}`; // `_ts` to avoid cache\n\nexport const extractTextKey = (uri: vscode.Uri): string =>\n    uri.path.match(/^text\\/([a-z\\d]+)/)![1];\n","/*---------------------------------------------------------\r\n * Copyright (C) Microsoft Corporation. All rights reserved.\r\n *--------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nprocess.env['APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL'] = true;\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar path = require(\"path\");\r\nvar vscode = require(\"vscode\");\r\nvar appInsights = require(\"applicationinsights\");\r\nvar TelemetryReporter = /** @class */ (function () {\r\n    // tslint:disable-next-line\r\n    function TelemetryReporter(extensionId, extensionVersion, key, firstParty) {\r\n        var _this = this;\r\n        this.extensionId = extensionId;\r\n        this.extensionVersion = extensionVersion;\r\n        this.firstParty = false;\r\n        this.userOptIn = false;\r\n        this.firstParty = !!firstParty;\r\n        var logFilePath = process.env['VSCODE_LOGS'] || '';\r\n        if (logFilePath && extensionId && process.env['VSCODE_LOG_LEVEL'] === 'trace') {\r\n            logFilePath = path.join(logFilePath, extensionId + \".txt\");\r\n            this.logStream = fs.createWriteStream(logFilePath, { flags: 'a', encoding: 'utf8', autoClose: true });\r\n        }\r\n        this.updateUserOptIn(key);\r\n        if (vscode.env.onDidChangeTelemetryEnabled !== undefined) {\r\n            this.optOutListener = vscode.env.onDidChangeTelemetryEnabled(function () { return _this.updateUserOptIn(key); });\r\n        }\r\n        else {\r\n            this.optOutListener = vscode.workspace.onDidChangeConfiguration(function () { return _this.updateUserOptIn(key); });\r\n        }\r\n    }\r\n    TelemetryReporter.prototype.updateUserOptIn = function (key) {\r\n        // Newer versions of vscode api have telemetry enablement exposed, but fallback to setting for older versions\r\n        var config = vscode.workspace.getConfiguration(TelemetryReporter.TELEMETRY_CONFIG_ID);\r\n        var newOptInValue = vscode.env.isTelemetryEnabled === undefined ?\r\n            config.get(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID, true) :\r\n            vscode.env.isTelemetryEnabled;\r\n        if (this.userOptIn !== newOptInValue) {\r\n            this.userOptIn = newOptInValue;\r\n            if (this.userOptIn) {\r\n                this.createAppInsightsClient(key);\r\n            }\r\n            else {\r\n                this.dispose();\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.createAppInsightsClient = function (key) {\r\n        //check if another instance is already initialized\r\n        if (appInsights.defaultClient) {\r\n            this.appInsightsClient = new appInsights.TelemetryClient(key);\r\n            // no other way to enable offline mode\r\n            this.appInsightsClient.channel.setUseDiskRetryCaching(true);\r\n        }\r\n        else {\r\n            appInsights.setup(key)\r\n                .setAutoCollectRequests(false)\r\n                .setAutoCollectPerformance(false)\r\n                .setAutoCollectExceptions(false)\r\n                .setAutoCollectDependencies(false)\r\n                .setAutoDependencyCorrelation(false)\r\n                .setAutoCollectConsole(false)\r\n                .setUseDiskRetryCaching(true)\r\n                .start();\r\n            this.appInsightsClient = appInsights.defaultClient;\r\n        }\r\n        this.appInsightsClient.commonProperties = this.getCommonProperties();\r\n        if (vscode && vscode.env) {\r\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId] = vscode.env.machineId;\r\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId] = vscode.env.sessionId;\r\n        }\r\n        //check if it's an Asimov key to change the endpoint\r\n        if (key && key.indexOf('AIF-') === 0) {\r\n            this.appInsightsClient.config.endpointUrl = \"https://vortex.data.microsoft.com/collect/v1\";\r\n            this.firstParty = true;\r\n        }\r\n    };\r\n    // __GDPR__COMMON__ \"common.os\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.platformversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.extname\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.extversion\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodemachineid\" : { \"endPoint\": \"MacAddressHash\", \"classification\": \"EndUserPseudonymizedInformation\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodesessionid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodeversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.uikind\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.remotename\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.isnewappinstall\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    TelemetryReporter.prototype.getCommonProperties = function () {\r\n        var commonProperties = Object.create(null);\r\n        commonProperties['common.os'] = os.platform();\r\n        commonProperties['common.platformversion'] = (os.release() || '').replace(/^(\\d+)(\\.\\d+)?(\\.\\d+)?(.*)/, '$1$2$3');\r\n        commonProperties['common.extname'] = this.extensionId;\r\n        commonProperties['common.extversion'] = this.extensionVersion;\r\n        if (vscode && vscode.env) {\r\n            commonProperties['common.vscodemachineid'] = vscode.env.machineId;\r\n            commonProperties['common.vscodesessionid'] = vscode.env.sessionId;\r\n            commonProperties['common.vscodeversion'] = vscode.version;\r\n            commonProperties['common.isnewappinstall'] = vscode.env.isNewAppInstall;\r\n            switch (vscode.env.uiKind) {\r\n                case vscode.UIKind.Web:\r\n                    commonProperties['common.uikind'] = 'web';\r\n                    break;\r\n                case vscode.UIKind.Desktop:\r\n                    commonProperties['common.uikind'] = 'desktop';\r\n                    break;\r\n                default:\r\n                    commonProperties['common.uikind'] = 'unknown';\r\n            }\r\n            commonProperties['common.remotename'] = this.cleanRemoteName(vscode.env.remoteName);\r\n        }\r\n        return commonProperties;\r\n    };\r\n    TelemetryReporter.prototype.cleanRemoteName = function (remoteName) {\r\n        if (!remoteName) {\r\n            return 'none';\r\n        }\r\n        var ret = 'other';\r\n        // Allowed remote authorities\r\n        ['ssh-remote', 'dev-container', 'attached-container', 'wsl'].forEach(function (res) {\r\n            if (remoteName.indexOf(res + \"+\") === 0) {\r\n                ret = res;\r\n            }\r\n        });\r\n        return ret;\r\n    };\r\n    TelemetryReporter.prototype.shouldSendErrorTelemetry = function () {\r\n        if (this.firstParty) {\r\n            if (this.cleanRemoteName(vscode.env.remoteName) !== 'other') {\r\n                return true;\r\n            }\r\n            if (this.extension === undefined || this.extension.extensionKind === vscode.ExtensionKind.Workspace) {\r\n                return false;\r\n            }\r\n            if (vscode.env.uiKind === vscode.UIKind.Web) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        return true;\r\n    };\r\n    Object.defineProperty(TelemetryReporter.prototype, \"extension\", {\r\n        get: function () {\r\n            if (this._extension === undefined) {\r\n                this._extension = vscode.extensions.getExtension(this.extensionId);\r\n            }\r\n            return this._extension;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    TelemetryReporter.prototype.cloneAndChange = function (obj, change) {\r\n        if (obj === null || typeof obj !== 'object')\r\n            return obj;\r\n        if (typeof change !== 'function')\r\n            return obj;\r\n        var ret = {};\r\n        for (var key in obj) {\r\n            ret[key] = change(key, obj[key]);\r\n        }\r\n        return ret;\r\n    };\r\n    TelemetryReporter.prototype.anonymizeFilePaths = function (stack, anonymizeFilePaths) {\r\n        if (stack === undefined || stack === null) {\r\n            return '';\r\n        }\r\n        var cleanupPatterns = [new RegExp(vscode.env.appRoot.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'gi')];\r\n        if (this.extension) {\r\n            cleanupPatterns.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'gi'));\r\n        }\r\n        var updatedStack = stack;\r\n        if (anonymizeFilePaths) {\r\n            var cleanUpIndexes = [];\r\n            for (var _i = 0, cleanupPatterns_1 = cleanupPatterns; _i < cleanupPatterns_1.length; _i++) {\r\n                var regexp = cleanupPatterns_1[_i];\r\n                while (true) {\r\n                    var result = regexp.exec(stack);\r\n                    if (!result) {\r\n                        break;\r\n                    }\r\n                    cleanUpIndexes.push([result.index, regexp.lastIndex]);\r\n                }\r\n            }\r\n            var nodeModulesRegex = /^[\\\\\\/]?(node_modules|node_modules\\.asar)[\\\\\\/]/;\r\n            var fileRegex = /(file:\\/\\/)?([a-zA-Z]:(\\\\\\\\|\\\\|\\/)|(\\\\\\\\|\\\\|\\/))?([\\w-\\._]+(\\\\\\\\|\\\\|\\/))+[\\w-\\._]*/g;\r\n            var lastIndex = 0;\r\n            updatedStack = '';\r\n            var _loop_1 = function () {\r\n                var result = fileRegex.exec(stack);\r\n                if (!result) {\r\n                    return \"break\";\r\n                }\r\n                // Anoynimize user file paths that do not need to be retained or cleaned up.\r\n                if (!nodeModulesRegex.test(result[0]) && cleanUpIndexes.every(function (_a) {\r\n                    var x = _a[0], y = _a[1];\r\n                    return result.index < x || result.index >= y;\r\n                })) {\r\n                    updatedStack += stack.substring(lastIndex, result.index) + '<REDACTED: user-file-path>';\r\n                    lastIndex = fileRegex.lastIndex;\r\n                }\r\n            };\r\n            while (true) {\r\n                var state_1 = _loop_1();\r\n                if (state_1 === \"break\")\r\n                    break;\r\n            }\r\n            if (lastIndex < stack.length) {\r\n                updatedStack += stack.substr(lastIndex);\r\n            }\r\n        }\r\n        // sanitize with configured cleanup patterns\r\n        for (var _a = 0, cleanupPatterns_2 = cleanupPatterns; _a < cleanupPatterns_2.length; _a++) {\r\n            var regexp = cleanupPatterns_2[_a];\r\n            updatedStack = updatedStack.replace(regexp, '');\r\n        }\r\n        return updatedStack;\r\n    };\r\n    TelemetryReporter.prototype.sendTelemetryEvent = function (eventName, properties, measurements) {\r\n        var _this = this;\r\n        if (this.userOptIn && eventName && this.appInsightsClient) {\r\n            var cleanProperties = this.cloneAndChange(properties, function (_key, prop) { return _this.anonymizeFilePaths(prop, _this.firstParty); });\r\n            this.appInsightsClient.trackEvent({\r\n                name: this.extensionId + \"/\" + eventName,\r\n                properties: cleanProperties,\r\n                measurements: measurements\r\n            });\r\n            if (this.logStream) {\r\n                this.logStream.write(\"telemetry/\" + eventName + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.sendTelemetryErrorEvent = function (eventName, properties, measurements, errorProps) {\r\n        var _this = this;\r\n        if (this.userOptIn && eventName && this.appInsightsClient) {\r\n            // always clean the properties if first party\r\n            // do not send any error properties if we shouldn't send error telemetry\r\n            // if we have no errorProps, assume all are error props\r\n            var cleanProperties = this.cloneAndChange(properties, function (key, prop) {\r\n                if (_this.shouldSendErrorTelemetry()) {\r\n                    return _this.anonymizeFilePaths(prop, _this.firstParty);\r\n                }\r\n                if (errorProps === undefined || errorProps.indexOf(key) !== -1) {\r\n                    return 'REDACTED';\r\n                }\r\n                return _this.anonymizeFilePaths(prop, _this.firstParty);\r\n            });\r\n            this.appInsightsClient.trackEvent({\r\n                name: this.extensionId + \"/\" + eventName,\r\n                properties: cleanProperties,\r\n                measurements: measurements\r\n            });\r\n            if (this.logStream) {\r\n                this.logStream.write(\"telemetry/\" + eventName + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.sendTelemetryException = function (error, properties, measurements) {\r\n        var _this = this;\r\n        if (this.shouldSendErrorTelemetry() && this.userOptIn && error && this.appInsightsClient) {\r\n            var cleanProperties = this.cloneAndChange(properties, function (_key, prop) { return _this.anonymizeFilePaths(prop, _this.firstParty); });\r\n            this.appInsightsClient.trackException({\r\n                exception: error,\r\n                properties: cleanProperties,\r\n                measurements: measurements\r\n            });\r\n            if (this.logStream) {\r\n                this.logStream.write(\"telemetry/\" + error.name + \" \" + error.message + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.dispose = function () {\r\n        var _this = this;\r\n        this.optOutListener.dispose();\r\n        var flushEventsToLogger = new Promise(function (resolve) {\r\n            if (!_this.logStream) {\r\n                return resolve(void 0);\r\n            }\r\n            _this.logStream.on('finish', resolve);\r\n            _this.logStream.end();\r\n        });\r\n        var flushEventsToAI = new Promise(function (resolve) {\r\n            if (_this.appInsightsClient) {\r\n                _this.appInsightsClient.flush({\r\n                    callback: function () {\r\n                        // all data flushed\r\n                        _this.appInsightsClient = undefined;\r\n                        resolve(void 0);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                resolve(void 0);\r\n            }\r\n        });\r\n        return Promise.all([flushEventsToAI, flushEventsToLogger]);\r\n    };\r\n    TelemetryReporter.TELEMETRY_CONFIG_ID = 'telemetry';\r\n    TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID = 'enableTelemetry';\r\n    return TelemetryReporter;\r\n}());\r\nexports.default = TelemetryReporter;\r\n//# sourceMappingURL=telemetryReporter.js.map","module.exports = require(\"assert\");;","module.exports = require(\"async_hooks\");;","module.exports = require(\"child_process\");;","module.exports = require(\"console\");;","module.exports = require(\"constants\");;","module.exports = require(\"crypto\");;","module.exports = require(\"dns\");;","module.exports = require(\"events\");;","module.exports = require(\"fs\");;","module.exports = require(\"http\");;","module.exports = require(\"https\");;","module.exports = require(\"module\");;","module.exports = require(\"net\");;","module.exports = require(\"os\");;","module.exports = require(\"path\");;","module.exports = require(\"stream\");;","module.exports = require(\"timers\");;","module.exports = require(\"url\");;","module.exports = require(\"util\");;","module.exports = require(\"vscode\");;","module.exports = require(\"zlib\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","import BootstrapperFactory from './lib/bootstrapper-factory';\nimport {ExecutionContextLike} from './lib/types/vscode';\nimport {TelemetryReporterLocator} from './lib/telemetry-reporter';\nimport {join} from 'path';\n\nconst bootstrapperFactory = new BootstrapperFactory();\nconst reporterCreator = bootstrapperFactory.getVsTelemetryReporterCreator();\nconst packageJsonPath = join(__dirname, '..', 'package.json');\n\nTelemetryReporterLocator.load(packageJsonPath, reporterCreator);\nconst telemetryReporter = TelemetryReporterLocator.getReporter();\n\nexports.activate = (context: ExecutionContextLike) => {\n    const bootstrapper = bootstrapperFactory.create();\n    bootstrapper.initiate(context);\n\n    context.subscriptions.push(telemetryReporter);\n};\n\nexports.deactivate = () => {\n    telemetryReporter.dispose();\n};\n"],"sourceRoot":""}